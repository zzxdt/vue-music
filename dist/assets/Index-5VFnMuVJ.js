import{Q as F,G as V,W as j,Y as E,r as K,c as R,e as p,a1 as X,o as N,J as Q,a2 as w,i as C,j as l,k as u,l as s,X as c,D as A,m as y,q as f,z as h,F as _,C as I,v,s as z,t as Y,S as Z,U as x,V as G}from"./index-nvWmsnf9.js";import{C as J}from"./Comments-AlU7rqLJ.js";const W="data:image/png;base64,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",$={name:"SongDetail",setup(){const{proxy:o}=V(),i=j(),P=E(),e=K({songInfo:null,sId:0,coverDesc:"",simiSong:[],playlists:[],mlogMv:[],commentType:0}),k=R(null),q=p(()=>i.getters.isLogin),d=p(()=>i.getters.isPlayed),O=p(()=>i.getters.playList),S=p(()=>i.getters.playIndex),m=p(()=>O.value[S.value]),n=p(()=>d.value&&m.value&&m.value.id===e.sId),g=p(()=>n.value?"icon-audio-pause":"icon-audio-play"),b=p(()=>e.songInfo.license||e.songInfo.vip?"disable":""),D=async()=>{const{data:t}=await o.$http.songDetail({ids:e.sId,timestamp:new Date().valueOf()});if(t.code!==200)return o.$msg.error("数据请求失败");t.songs[0].license=!t.privileges[0].cp,e.songInfo=o.$utils.formatSongs(t.songs,t.privileges)[0],e.coverDesc=e.songInfo.alia.join(" / ")},B=t=>{if(!m.value||m.value.id!==t.id){if(t.license){o.$msg.error("由于版权保护，您所在的地区暂时无法使用。");return}if(t.vip){o.$msg.error("付费歌曲，请在网易云音乐播放");return}i.dispatch("selectPlay",{list:[t]}),i.commit("SET_PLAYLISTTIPS",!0)}else i.commit("SET_PLAYSTATUS",!d.value)},M=async()=>{const{data:t}=await o.$http.simiSong({id:e.sId});if(t.code!==200)return o.$msg.error("数据请求失败");e.simiSong=t.songs.map(r=>({id:String(r.id),name:r.name,mvId:r.mvid,singer:r.artists,album:r.album,alia:r.alias,duration:o.$utils.formatSongTime(r.duration),url:`https://music.163.com/song/media/outer/url?id=${r.id}.mp3`,vip:r.fee===1,license:r.license,publishTime:r.publishTime}))},H=p(()=>function(t){return m.value&&String(t.id)===m.value.id&&d.value?"icon-audio-pause":"icon-audio-play"}),L=async()=>{const{data:t}=await o.$http.simiPlayList({id:e.sId});if(t.code!==200)return o.$msg.error("数据请求失败");e.playlists=t.playlists},U=()=>{k.value.scrollIntoView(!0)};X(t=>{e.sId=t.query.id,T()}),N(()=>{e.sId=P.query.id,T()});const T=()=>{e.sId&&(D(),M(),L())};return{...Q(e),getSimiPlayList:L,playSimiIcon:H,playFontIcon:g,songDisable:b,jumpComment:U,isCurSong:n,isLogin:q,plyaing:B,cBox:k}},components:{Lyrics:w,CommentList:J}},a=o=>(x("data-v-d31a1b9e"),o=o(),G(),o),ss={key:0,class:"song-container"},os={class:"song-main"},ns={class:"song-header"},es={class:"song-l"},ts={class:"song-info"},is={class:"info-top"},ls={class:"song-name"},as=a(()=>s("i",{class:"iconfont icon-mvlist"},null,-1)),cs={key:1,class:"iconfont icon-vip"},ds={class:"song-related"},rs={key:0,class:"cover-desc"},us=a(()=>s("h5",null,"专辑简介",-1)),As={class:"info-bottom"},ms={class:"song-oper"},gs=a(()=>s("i",{class:"iconfont icon-collect"},null,-1)),ps=a(()=>s("i",{class:"iconfont icon-comment"},null,-1)),fs={class:"simi-song"},vs=a(()=>s("h3",{class:"aside-title"},"相似歌曲",-1)),hs={class:"simi-main"},ys={class:"simi-info"},_s={class:"simi-author"},Is={class:"simi-song-status"},zs={key:0,class:"iconfont icon-vip"},ks=["onClick"],Os=a(()=>s("i",{class:"iconfont icon-add",title:"添加到列表"},null,-1)),Ss={class:"song-lyric"},bs=a(()=>s("h5",null,"歌词",-1)),Ps={class:"song-comments",ref:"cBox"},qs={class:"aside-box"},Ls={class:"cover"},Ts=a(()=>s("em",{class:"lt"},null,-1)),Cs=a(()=>s("em",{class:"rt"},null,-1)),ws=a(()=>s("em",{class:"rb"},null,-1)),Ds=a(()=>s("em",{class:"lb"},null,-1)),Bs=a(()=>s("img",{src:W,class:"cover-stylus"},null,-1)),Ms=a(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),Hs={key:0,class:"sidebar-box playlist-simi"},Us=a(()=>s("h3",{class:"aside-title"},"包含这首歌的歌单",-1)),Fs={class:"aside-main playlist-main"},Vs=a(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),js={class:"playlist-info"},Es={class:"playlist-name"},Ks={class:"playlist-author"};function Rs(o,i,P,e,k,q){const d=C("router-link"),O=w,S=C("comment-list"),m=Z;return o.songInfo?(l(),u("div",ss,[s("div",os,[s("div",ns,[s("div",es,[s("div",ts,[s("div",is,[s("h3",ls,[c(A(o.songInfo.name)+" ",1),o.songInfo.mvId?(l(),y(d,{key:0,class:"mv-name",to:{path:"/mvlist/mv",query:{id:o.songInfo.mvId}}},{default:f(()=>[as]),_:1},8,["to"])):h("",!0),o.songInfo.vip?(l(),u("i",cs)):h("",!0)]),s("p",null,[(l(!0),u(_,null,I(o.songInfo.singer,(n,g)=>(l(),y(d,{to:{path:"/singer",query:{id:n.id}},class:"song-author",key:n.name},{default:f(()=>[c(A(g!==0?" / "+n.name:n.name),1)]),_:2},1032,["to"]))),128))]),s("p",ds,[s("span",null,[c("专辑："),v(d,{class:"song-album",to:{path:"/album",query:{id:o.songInfo.album.id}}},{default:f(()=>[c(A(o.songInfo.album.name),1)]),_:1},8,["to"])]),s("span",null,[c("发行时间："),s("em",null,A(o.songInfo.publishTime),1)])]),o.coverDesc?(l(),u("div",rs,[us,s("p",null,A(o.coverDesc),1)])):h("",!0)]),s("div",As,[s("div",ms,[s("span",{class:z(["play-btn","play-all",e.songDisable]),onClick:i[0]||(i[0]=n=>e.plyaing(o.songInfo))},[s("i",{class:z(["iconfont",e.playFontIcon])},null,2),c(" "+A(o.songInfo.vip?"VIP尊享":"立即播放"),1)],2),s("span",{class:"play-btn play-collect",onClick:i[1]||(i[1]=(...n)=>o.showAddList&&o.showAddList(...n))},[gs,c(" 收藏")]),s("span",{class:"play-btn play-comment",onClick:i[2]||(i[2]=(...n)=>e.jumpComment&&e.jumpComment(...n))},[ps,c(" 评论")])])])]),s("div",fs,[vs,s("div",hs,[(l(!0),u(_,null,I(o.simiSong,n=>(l(),u("div",{class:"simi-item",key:n.id},[s("div",ys,[v(d,{class:"simi-name",to:{path:"/song",query:{id:n.id}}},{default:f(()=>[c(A(n.name),1)]),_:2},1032,["to"]),s("div",_s,[(l(!0),u(_,null,I(n.singer,(g,b)=>(l(),y(d,{to:{path:"/singer",query:{id:g.id}},class:"song-author",key:g.name},{default:f(()=>[c(A(b!==0?" / "+g.name:g.name),1)]),_:2},1032,["to"]))),128))])]),s("div",Is,[n.vip?(l(),u("i",zs)):(l(),u("i",{key:1,onClick:g=>e.plyaing(n),class:z(["iconfont",e.playSimiIcon(n)])},null,10,ks)),Os])]))),128))])])]),s("div",Ss,[bs,v(O,{sId:o.sId,maxH:"530"},null,8,["sId"])])]),s("div",Ps,[v(S,{type:o.commentType,sId:o.sId},null,8,["type","sId"])],512)]),s("div",qs,[s("div",Ls,[Ts,Cs,ws,Ds,s("div",{class:z(["cover-img",[e.isCurSong?"active":""]]),onClick:i[3]||(i[3]=Y(n=>e.plyaing(o.songInfo),["stop"]))},[Bs,v(m,{src:o.songInfo.album.picUrl},{default:f(()=>[Ms]),_:1},8,["src"])],2)]),o.playlists.length?(l(),u("div",Hs,[Us,s("div",Fs,[(l(!0),u(_,null,I(o.playlists,n=>(l(),y(d,{class:"playlist-item",to:{path:"/playlist/detail",query:{id:n.id}},key:n.id},{default:f(()=>[v(m,{src:n.coverImgUrl},{default:f(()=>[Vs]),_:2},1032,["src"]),s("div",js,[s("div",Es,A(n.name),1),s("div",Ks,[c(" By. "),v(d,{to:{path:"/user",query:{id:n.creator.userId}}},{default:f(()=>[c(A(n.creator.nickname),1)]),_:2},1032,["to"])])])]),_:2},1032,["to"]))),128))])])):h("",!0)])])):h("",!0)}const Qs=F($,[["render",Rs],["__scopeId","data-v-d31a1b9e"]]);export{Qs as default};
