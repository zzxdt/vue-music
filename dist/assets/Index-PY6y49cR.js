import{Q as C,G as S,Y as $,R as b,W as D,r as F,o as M,Z as N,J as O,$ as T,j as p,k as m,l as s,v as y,q as I,X as d,D as a,z as q,s as u,m as k,F as w,C as A,S as R,U as V,V as B}from"./index-nvWmsnf9.js";import{_ as L}from"./Loading-KSf3ufRB.js";const E={name:"Rank",setup(){const{proxy:t}=S(),n=$(),v=b(),r=D(),o=F({list:[],type:"Top",listTop:[],listFeature:[],listOther:[],rId:0,rankInfo:{},songList:[],total:0,isLoading:!0}),g=async()=>{const{data:e}=await t.$http.topListDetail();if(e.code!==200)return t.$msg.error("数据请求失败");o.listTop=e.list.filter(c=>c.ToplistType),o.listFeature=e.list.filter(c=>!c.ToplistType&&c.name.indexOf("云音乐")>=0),o.listOther=e.list.filter(c=>!c.ToplistType&&c.name.indexOf("云音乐")<0),o.list=o.type?o["list"+o.type]:o.listTop,o.rId=o.rId?o.rId:o.listTop[0].id},_=async()=>{o.isLoading=!0;const{data:e}=await t.$http.listDetail({id:o.rId,s:-1});if(e.code!==200)return t.$msg.error("数据请求失败");o.rankInfo=e.playlist,o.songList=t.$utils.formatSongs(e.playlist.tracks,e.privileges),o.total=o.songList.length,o.isLoading=!1},h=e=>{o.type=e,o.list=o["list"+o.type],o.rId=o["list"+e][0].id,v.push({path:"rank",query:{type:o.type,rId:o.rId}})},f=e=>{o.rId=e.id,v.push({path:"rank",query:{type:o.type,rId:o.rId}})},i=()=>{r.dispatch("playAll",{list:o.songList}),r.commit("SET_PLAYLISTTIPS",!0)};return M(()=>{o.type=n.query.type||o.type,o.rId=n.query.rId,g()}),N(()=>{o.rId&&_()}),{...O(o),selectType:h,selectItem:f,playAllSongs:i}},components:{SongList:T,Loading:L}},l=t=>(V("data-v-c3cbe58e"),t=t(),B(),t),P={class:"rank"},U={class:"rank-container"},z={class:"rank-main"},H={class:"cover"},Y={class:"cover-img"},j=l(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),G={class:"cover-info"},J={class:"cover-header"},Q={class:"cover-title"},W={class:"cover-author-tags"},X={key:0,class:"cover-author"},Z=l(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1)),K={class:"cover-name"},x={class:"cover-date"},ss={class:"cover-digital"},ts={class:"cover-playCount"},os=l(()=>s("i",{class:"iconfont icon-playnum"},null,-1)),es={class:"cover-collect"},ns=l(()=>s("i",{class:"iconfont icon-collect"},null,-1)),is={class:"cover-comment"},as=l(()=>s("i",{class:"iconfont icon-comment"},null,-1)),ls={class:"cover-desc"},rs=l(()=>s("h5",null,"歌单简介",-1)),cs=["innerHTML"],ds={class:"song-main"},ps={class:"song-header"},us=l(()=>s("i",{class:"iconfont icon-audio-play"},null,-1)),_s={class:"rank-aside"},ms={class:"aside-menu"},vs=l(()=>s("em",null,"TOP榜",-1)),hs=[vs],fs=l(()=>s("em",null,"特色榜",-1)),ys=[fs],Is=l(()=>s("em",null,"场景榜",-1)),gs=[Is],ks={class:"type-main"},Ts=["onClick"],Ls={class:"item-info"},Cs={class:"item-title"},Ss={class:"item-time"},$s=l(()=>s("div",{slot:"placeholder",class:"image-slot"},[s("i",{class:"iconfont icon-placeholder"})],-1));function bs(t,n,v,r,o,g){const _=R,h=L,f=T;return p(),m("div",P,[s("div",U,[s("div",z,[s("div",H,[s("div",Y,[y(_,{src:t.rankInfo.coverImgUrl},{default:I(()=>[j]),_:1},8,["src"])]),s("div",G,[s("div",J,[s("div",Q,[d(a(t.rankInfo.name)+" ",1),s("span",null,"("+a(t.$utils.formartDate(t.rankInfo.updateTime,"MM月dd日"))+" 更新)",1)])]),s("div",W,[t.rankInfo.creator?(p(),m("div",X,[y(_,{src:t.rankInfo.creator.avatarUrl,class:"cover-avatar"},{default:I(()=>[Z]),_:1},8,["src"]),s("div",K,a(t.rankInfo.creator.nickname),1),s("div",x,a(t.$utils.formartDate(t.rankInfo.createTime,"yyyy-MM-dd")),1)])):q("",!0)]),s("div",ss,[s("span",ts,[os,d(" "+a(t.$utils.formartNum(t.rankInfo.playCount))+"次",1)]),s("span",es,[ns,d(" "+a(t.$utils.formartNum(t.rankInfo.subscribedCount)),1)]),s("span",is,[as,d(" "+a(t.$utils.formartNum(t.rankInfo.commentCount)),1)])]),s("div",ls,[rs,s("p",{innerHTML:t.rankInfo.description},null,8,cs)])])]),s("div",ds,[s("div",ps,[s("h4",null,[d("歌曲列表 "),s("em",null,a(t.total+"首歌"),1)]),s("span",{class:"play-all",onClick:n[0]||(n[0]=(...i)=>r.playAllSongs&&r.playAllSongs(...i))},[us,d(" 播放全部")]),s("span",{class:u(["collect",t.rankInfo.subscribed?"active":""]),onClick:n[1]||(n[1]=i=>t.subPlayList(t.rankInfo))},[s("i",{class:u(["iconfont","icon-collect"+(t.rankInfo.subscribed?"-active":"")])},null,2),d(" "+a(t.rankInfo.subscribed?"已收藏":"收藏"),1)],2)]),t.isLoading?(p(),k(h,{key:0})):(p(),k(f,{key:1,songList:t.songList,stripe:!0},null,8,["songList"]))])]),s("div",_s,[s("div",ms,[s("span",{class:u(t.type==="Top"?"active":""),onClick:n[2]||(n[2]=i=>r.selectType("Top"))},hs,2),s("span",{class:u(t.type==="Feature"?"active":""),onClick:n[3]||(n[3]=i=>r.selectType("Feature"))},ys,2),s("span",{class:u(t.type==="Other"?"active":""),onClick:n[4]||(n[4]=i=>r.selectType("Other"))},gs,2)]),s("div",ks,[(p(!0),m(w,null,A(t.list,(i,e)=>(p(),m("div",{class:u(["type-item",t.rId==i.id?"active":""]),key:e,onClick:c=>r.selectItem(i)},[s("div",Ls,[s("div",Cs,a(i.name),1),s("div",Ss,a(i.updateFrequency),1)]),y(_,{class:"item-img",src:i.coverImgUrl},{default:I(()=>[$s]),_:2},1032,["src"])],10,Ts))),128))])])])])}const Ms=C(E,[["render",bs],["__scopeId","data-v-c3cbe58e"]]);export{Ms as default};
