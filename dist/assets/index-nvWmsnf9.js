function X(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Tu(t,e){const n=new Set(t.split(","));return e?r=>n.has(r.toLowerCase()):r=>n.has(r)}const ft={},ws=[],At=()=>{},Q1=()=>!1,ha=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),Eu=t=>t.startsWith("onUpdate:"),Lt=Object.assign,Su=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},J1=Object.prototype.hasOwnProperty,Xe=(t,e)=>J1.call(t,e),ke=Array.isArray,Ls=t=>pa(t)==="[object Map]",Pg=t=>pa(t)==="[object Set]",Me=t=>typeof t=="function",lt=t=>typeof t=="string",Bs=t=>typeof t=="symbol",et=t=>t!==null&&typeof t=="object",Og=t=>(et(t)||Me(t))&&Me(t.then)&&Me(t.catch),Mg=Object.prototype.toString,pa=t=>Mg.call(t),ko=t=>pa(t).slice(8,-1),xg=t=>pa(t)==="[object Object]",_u=t=>lt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,ui=Tu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),ga=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},Z1=/-(\w)/g,Nn=ga(t=>t.replace(Z1,(e,n)=>n?n.toUpperCase():"")),eT=/\B([A-Z])/g,os=ga(t=>t.replace(eT,"-$1").toLowerCase()),ma=ga(t=>t.charAt(0).toUpperCase()+t.slice(1)),el=ga(t=>t?`on${ma(t)}`:""),Dr=(t,e)=>!Object.is(t,e),Do=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},Go=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},gc=t=>{const e=parseFloat(t);return isNaN(e)?t:e},tT=t=>{const e=lt(t)?Number(t):NaN;return isNaN(e)?t:e};let Bd;const Au=()=>Bd||(Bd=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ge(t){if(ke(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=lt(r)?iT(r):Ge(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(lt(t)||et(t))return t}const nT=/;(?![^(]*\))/g,rT=/:([^]+)/,sT=/\/\*[^]*?\*\//g;function iT(t){const e={};return t.replace(sT,"").split(nT).forEach(n=>{if(n){const r=n.split(rT);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ie(t){let e="";if(lt(t))e=t;else if(ke(t))for(let n=0;n<t.length;n++){const r=ie(t[n]);r&&(e+=r+" ")}else if(et(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function lW(t){if(!t)return null;let{class:e,style:n}=t;return e&&!lt(e)&&(t.class=ie(e)),n&&(t.style=Ge(n)),t}const oT="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",aT=Tu(oT);function Fg(t){return!!t||t===""}const be=t=>lt(t)?t:t==null?"":ke(t)||et(t)&&(t.toString===Mg||!Me(t.toString))?JSON.stringify(t,Ng,2):String(t),Ng=(t,e)=>e&&e.__v_isRef?Ng(t,e.value):Ls(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],i)=>(n[tl(r,i)+" =>"]=s,n),{})}:Pg(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>tl(n))}:Bs(e)?tl(e):et(e)&&!ke(e)&&!xg(e)?String(e):e,tl=(t,e="")=>{var n;return Bs(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let un;class Bg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=un,!e&&un&&(this.index=(un.scopes||(un.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=un;try{return un=this,e()}finally{un=n}}}on(){un=this}off(){un=this.parent}stop(e){if(this._active){let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.scopes)for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function Ug(t){return new Bg(t)}function lT(t,e=un){e&&e.active&&e.effects.push(t)}function Vg(){return un}function Hg(t){un&&un.cleanups.push(t)}let Zr;class wu{constructor(e,n,r,s){this.fn=e,this.trigger=n,this.scheduler=r,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,lT(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,as();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(cT(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),ls()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=$r,n=Zr;try{return $r=!0,Zr=this,this._runnings++,Ud(this),this.fn()}finally{Vd(this),this._runnings--,Zr=n,$r=e}}stop(){var e;this.active&&(Ud(this),Vd(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function cT(t){return t.value}function Ud(t){t._trackId++,t._depsLength=0}function Vd(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)Gg(t.deps[e],t);t.deps.length=t._depsLength}}function Gg(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let $r=!0,mc=0;const Kg=[];function as(){Kg.push($r),$r=!1}function ls(){const t=Kg.pop();$r=t===void 0?!0:t}function Lu(){mc++}function Iu(){for(mc--;!mc&&vc.length;)vc.shift()()}function qg(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const r=t.deps[t._depsLength];r!==e?(r&&Gg(r,t),t.deps[t._depsLength++]=e):t._depsLength++}}const vc=[];function jg(t,e,n){Lu();for(const r of t.keys()){let s;r._dirtyLevel<e&&(s??(s=t.get(r)===r._trackId))&&(r._shouldSchedule||(r._shouldSchedule=r._dirtyLevel===0),r._dirtyLevel=e),r._shouldSchedule&&(s??(s=t.get(r)===r._trackId))&&(r.trigger(),(!r._runnings||r.allowRecurse)&&r._dirtyLevel!==2&&(r._shouldSchedule=!1,r.scheduler&&vc.push(r.scheduler)))}Iu()}const zg=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},Ko=new WeakMap,es=Symbol(""),yc=Symbol("");function nn(t,e,n){if($r&&Zr){let r=Ko.get(t);r||Ko.set(t,r=new Map);let s=r.get(n);s||r.set(n,s=zg(()=>r.delete(n))),qg(Zr,s)}}function ur(t,e,n,r,s,i){const o=Ko.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&ke(t)){const l=Number(r);o.forEach((c,u)=>{(u==="length"||!Bs(u)&&u>=l)&&a.push(c)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":ke(t)?_u(n)&&a.push(o.get("length")):(a.push(o.get(es)),Ls(t)&&a.push(o.get(yc)));break;case"delete":ke(t)||(a.push(o.get(es)),Ls(t)&&a.push(o.get(yc)));break;case"set":Ls(t)&&a.push(o.get(es));break}Lu();for(const l of a)l&&jg(l,4);Iu()}function uT(t,e){var n;return(n=Ko.get(t))==null?void 0:n.get(e)}const dT=Tu("__proto__,__v_isRef,__isVue"),Wg=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Bs)),Hd=fT();function fT(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const r=Qe(this);for(let i=0,o=this.length;i<o;i++)nn(r,"get",i+"");const s=r[e](...n);return s===-1||s===!1?r[e](...n.map(Qe)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){as(),Lu();const r=Qe(this)[e].apply(this,n);return Iu(),ls(),r}}),t}function hT(t){const e=Qe(this);return nn(e,"has",t),e.hasOwnProperty(t)}class Yg{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?LT:Zg:i?Jg:Qg).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=ke(e);if(!s){if(o&&Xe(Hd,n))return Reflect.get(Hd,n,r);if(n==="hasOwnProperty")return hT}const a=Reflect.get(e,n,r);return(Bs(n)?Wg.has(n):dT(n))||(s||nn(e,"get",n),i)?a:It(a)?o&&_u(n)?a:a.value:et(a)?s?$u(a):gt(a):a}}class Xg extends Yg{constructor(e=!1){super(!1,e)}set(e,n,r,s){let i=e[n];if(!this._isShallow){const l=ks(i);if(!qo(r)&&!ks(r)&&(i=Qe(i),r=Qe(r)),!ke(e)&&It(i)&&!It(r))return l?!1:(i.value=r,!0)}const o=ke(e)&&_u(n)?Number(n)<e.length:Xe(e,n),a=Reflect.set(e,n,r,s);return e===Qe(s)&&(o?Dr(r,i)&&ur(e,"set",n,r):ur(e,"add",n,r)),a}deleteProperty(e,n){const r=Xe(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&ur(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Bs(n)||!Wg.has(n))&&nn(e,"has",n),r}ownKeys(e){return nn(e,"iterate",ke(e)?"length":es),Reflect.ownKeys(e)}}class pT extends Yg{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const gT=new Xg,mT=new pT,vT=new Xg(!0),Cu=t=>t,va=t=>Reflect.getPrototypeOf(t);function ro(t,e,n=!1,r=!1){t=t.__v_raw;const s=Qe(t),i=Qe(e);n||(Dr(e,i)&&nn(s,"get",e),nn(s,"get",i));const{has:o}=va(s),a=r?Cu:n?Du:Ri;if(o.call(s,e))return a(t.get(e));if(o.call(s,i))return a(t.get(i));t!==s&&t.get(e)}function so(t,e=!1){const n=this.__v_raw,r=Qe(n),s=Qe(t);return e||(Dr(t,s)&&nn(r,"has",t),nn(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function io(t,e=!1){return t=t.__v_raw,!e&&nn(Qe(t),"iterate",es),Reflect.get(t,"size",t)}function Gd(t){t=Qe(t);const e=Qe(this);return va(e).has.call(e,t)||(e.add(t),ur(e,"add",t,t)),this}function Kd(t,e){e=Qe(e);const n=Qe(this),{has:r,get:s}=va(n);let i=r.call(n,t);i||(t=Qe(t),i=r.call(n,t));const o=s.call(n,t);return n.set(t,e),i?Dr(e,o)&&ur(n,"set",t,e):ur(n,"add",t,e),this}function qd(t){const e=Qe(this),{has:n,get:r}=va(e);let s=n.call(e,t);s||(t=Qe(t),s=n.call(e,t)),r&&r.call(e,t);const i=e.delete(t);return s&&ur(e,"delete",t,void 0),i}function jd(){const t=Qe(this),e=t.size!==0,n=t.clear();return e&&ur(t,"clear",void 0,void 0),n}function oo(t,e){return function(r,s){const i=this,o=i.__v_raw,a=Qe(o),l=e?Cu:t?Du:Ri;return!t&&nn(a,"iterate",es),o.forEach((c,u)=>r.call(s,l(c),l(u),i))}}function ao(t,e,n){return function(...r){const s=this.__v_raw,i=Qe(s),o=Ls(i),a=t==="entries"||t===Symbol.iterator&&o,l=t==="keys"&&o,c=s[t](...r),u=n?Cu:e?Du:Ri;return!e&&nn(i,"iterate",l?yc:es),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function mr(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function yT(){const t={get(i){return ro(this,i)},get size(){return io(this)},has:so,add:Gd,set:Kd,delete:qd,clear:jd,forEach:oo(!1,!1)},e={get(i){return ro(this,i,!1,!0)},get size(){return io(this)},has:so,add:Gd,set:Kd,delete:qd,clear:jd,forEach:oo(!1,!0)},n={get(i){return ro(this,i,!0)},get size(){return io(this,!0)},has(i){return so.call(this,i,!0)},add:mr("add"),set:mr("set"),delete:mr("delete"),clear:mr("clear"),forEach:oo(!0,!1)},r={get(i){return ro(this,i,!0,!0)},get size(){return io(this,!0)},has(i){return so.call(this,i,!0)},add:mr("add"),set:mr("set"),delete:mr("delete"),clear:mr("clear"),forEach:oo(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(i=>{t[i]=ao(i,!1,!1),n[i]=ao(i,!0,!1),e[i]=ao(i,!1,!0),r[i]=ao(i,!0,!0)}),[t,n,e,r]}const[bT,TT,ET,ST]=yT();function Ru(t,e){const n=e?t?ST:ET:t?TT:bT;return(r,s,i)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(Xe(n,s)&&s in r?n:r,s,i)}const _T={get:Ru(!1,!1)},AT={get:Ru(!1,!0)},wT={get:Ru(!0,!1)},Qg=new WeakMap,Jg=new WeakMap,Zg=new WeakMap,LT=new WeakMap;function IT(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function CT(t){return t.__v_skip||!Object.isExtensible(t)?0:IT(ko(t))}function gt(t){return ks(t)?t:ku(t,!1,gT,_T,Qg)}function em(t){return ku(t,!1,vT,AT,Jg)}function $u(t){return ku(t,!0,mT,wT,Zg)}function ku(t,e,n,r,s){if(!et(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const i=s.get(t);if(i)return i;const o=CT(t);if(o===0)return t;const a=new Proxy(t,o===2?r:n);return s.set(t,a),a}function Is(t){return ks(t)?Is(t.__v_raw):!!(t&&t.__v_isReactive)}function ks(t){return!!(t&&t.__v_isReadonly)}function qo(t){return!!(t&&t.__v_isShallow)}function tm(t){return Is(t)||ks(t)}function Qe(t){const e=t&&t.__v_raw;return e?Qe(e):t}function jo(t){return Object.isExtensible(t)&&Go(t,"__v_skip",!0),t}const Ri=t=>et(t)?gt(t):t,Du=t=>et(t)?$u(t):t;class nm{constructor(e,n,r,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new wu(()=>e(this._value),()=>di(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=r}get value(){const e=Qe(this);return(!e._cacheable||e.effect.dirty)&&Dr(e._value,e._value=e.effect.run())&&di(e,4),rm(e),e.effect._dirtyLevel>=2&&di(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function RT(t,e,n=!1){let r,s;const i=Me(t);return i?(r=t,s=At):(r=t.get,s=t.set),new nm(r,s,i||!s,n)}function rm(t){var e;$r&&Zr&&(t=Qe(t),qg(Zr,(e=t.dep)!=null?e:t.dep=zg(()=>t.dep=void 0,t instanceof nm?t:void 0)))}function di(t,e=4,n){t=Qe(t);const r=t.dep;r&&jg(r,e)}function It(t){return!!(t&&t.__v_isRef===!0)}function Z(t){return sm(t,!1)}function zo(t){return sm(t,!0)}function sm(t,e){return It(t)?t:new $T(t,e)}class $T{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:Qe(e),this._value=n?e:Ri(e)}get value(){return rm(this),this._value}set value(e){const n=this.__v_isShallow||qo(e)||ks(e);e=n?e:Qe(e),Dr(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:Ri(e),di(this,4))}}function Qs(t){di(t,4)}function Le(t){return It(t)?t.value:t}const kT={get:(t,e,n)=>Le(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return It(s)&&!It(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function im(t){return Is(t)?t:new Proxy(t,kT)}function In(t){const e=ke(t)?new Array(t.length):{};for(const n in t)e[n]=om(t,n);return e}class DT{constructor(e,n,r){this._object=e,this._key=n,this._defaultValue=r,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return uT(Qe(this._object),this._key)}}class PT{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function rs(t,e,n){return It(t)?t:Me(t)?new PT(t):et(t)&&arguments.length>1?om(t,e,n):Z(t)}function om(t,e,n){const r=t[e];return It(r)?r:new DT(t,e,n)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function kr(t,e,n,r){try{return r?t(...r):t()}catch(s){ya(s,e,n)}}function _n(t,e,n,r){if(Me(t)){const i=kr(t,e,n,r);return i&&Og(i)&&i.catch(o=>{ya(o,e,n)}),i}const s=[];for(let i=0;i<t.length;i++)s.push(_n(t[i],e,n,r));return s}function ya(t,e,n,r=!0){const s=e?e.vnode:null;if(e){let i=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;i;){const c=i.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](t,o,a)===!1)return}i=i.parent}const l=e.appContext.config.errorHandler;if(l){kr(l,null,10,[t,o,a]);return}}OT(t,n,s,r)}function OT(t,e,n,r=!0){console.error(t)}let $i=!1,bc=!1;const Ut=[];let Wn=0;const Cs=[];let Sr=null,qr=0;const am=Promise.resolve();let Pu=null;function nt(t){const e=Pu||am;return t?e.then(this?t.bind(this):t):e}function MT(t){let e=Wn+1,n=Ut.length;for(;e<n;){const r=e+n>>>1,s=Ut[r],i=ki(s);i<t||i===t&&s.pre?e=r+1:n=r}return e}function Ou(t){(!Ut.length||!Ut.includes(t,$i&&t.allowRecurse?Wn+1:Wn))&&(t.id==null?Ut.push(t):Ut.splice(MT(t.id),0,t),lm())}function lm(){!$i&&!bc&&(bc=!0,Pu=am.then(um))}function xT(t){const e=Ut.indexOf(t);e>Wn&&Ut.splice(e,1)}function FT(t){ke(t)?Cs.push(...t):(!Sr||!Sr.includes(t,t.allowRecurse?qr+1:qr))&&Cs.push(t),lm()}function zd(t,e,n=$i?Wn+1:0){for(;n<Ut.length;n++){const r=Ut[n];if(r&&r.pre){if(t&&r.id!==t.uid)continue;Ut.splice(n,1),n--,r()}}}function cm(t){if(Cs.length){const e=[...new Set(Cs)].sort((n,r)=>ki(n)-ki(r));if(Cs.length=0,Sr){Sr.push(...e);return}for(Sr=e,qr=0;qr<Sr.length;qr++)Sr[qr]();Sr=null,qr=0}}const ki=t=>t.id==null?1/0:t.id,NT=(t,e)=>{const n=ki(t)-ki(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function um(t){bc=!1,$i=!0,Ut.sort(NT);try{for(Wn=0;Wn<Ut.length;Wn++){const e=Ut[Wn];e&&e.active!==!1&&kr(e,null,14)}}finally{Wn=0,Ut.length=0,cm(),$i=!1,Pu=null,(Ut.length||Cs.length)&&um()}}function BT(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||ft;let s=n;const i=e.startsWith("update:"),o=i&&e.slice(7);if(o&&o in r){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=r[u]||ft;f&&(s=n.map(h=>lt(h)?h.trim():h)),d&&(s=n.map(gc))}let a,l=r[a=el(e)]||r[a=el(Nn(e))];!l&&i&&(l=r[a=el(os(e))]),l&&_n(l,t,6,s);const c=r[a+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,_n(c,t,6,s)}}function dm(t,e,n=!1){const r=e.emitsCache,s=r.get(t);if(s!==void 0)return s;const i=t.emits;let o={},a=!1;if(!Me(t)){const l=c=>{const u=dm(c,e,!0);u&&(a=!0,Lt(o,u))};!n&&e.mixins.length&&e.mixins.forEach(l),t.extends&&l(t.extends),t.mixins&&t.mixins.forEach(l)}return!i&&!a?(et(t)&&r.set(t,null),null):(ke(i)?i.forEach(l=>o[l]=null):Lt(o,i),et(t)&&r.set(t,o),o)}function ba(t,e){return!t||!ha(e)?!1:(e=e.slice(2).replace(/Once$/,""),Xe(t,e[0].toLowerCase()+e.slice(1))||Xe(t,os(e))||Xe(t,e))}let wt=null,Ta=null;function Wo(t){const e=wt;return wt=t,Ta=t&&t.type.__scopeId||null,e}function Cn(t){Ta=t}function Rn(){Ta=null}function ue(t,e=wt,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&lf(-1);const i=Wo(e);let o;try{o=t(...s)}finally{Wo(i),r._d&&lf(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function nl(t){const{type:e,vnode:n,proxy:r,withProxy:s,props:i,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:d,data:f,setupState:h,ctx:p,inheritAttrs:g}=t;let v,m;const y=Wo(t);try{if(n.shapeFlag&4){const E=s||r,S=E;v=jn(u.call(S,E,d,i,h,f,p)),m=l}else{const E=e;v=jn(E.length>1?E(i,{attrs:l,slots:a,emit:c}):E(i,null)),m=e.props?l:UT(l)}}catch(E){vi.length=0,ya(E,t,1),v=Y(mn)}let T=v;if(m&&g!==!1){const E=Object.keys(m),{shapeFlag:S}=T;E.length&&S&7&&(o&&E.some(Eu)&&(m=VT(m,o)),T=dr(T,m))}return n.dirs&&(T=dr(T),T.dirs=T.dirs?T.dirs.concat(n.dirs):n.dirs),n.transition&&(T.transition=n.transition),v=T,Wo(y),v}const UT=t=>{let e;for(const n in t)(n==="class"||n==="style"||ha(n))&&((e||(e={}))[n]=t[n]);return e},VT=(t,e)=>{const n={};for(const r in t)(!Eu(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function HT(t,e,n){const{props:r,children:s,component:i}=t,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&l>=0){if(l&1024)return!0;if(l&16)return r?Wd(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==r[f]&&!ba(c,f))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Wd(r,o,c):!0:!!o;return!1}function Wd(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==t[i]&&!ba(n,i))return!0}return!1}function GT({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const Mu="components",KT="directives";function Ce(t,e){return xu(Mu,t,!0,e)||t}const fm=Symbol.for("v-ndc");function Fn(t){return lt(t)?xu(Mu,t,!1)||t:t||fm}function hm(t){return xu(KT,t)}function xu(t,e,n=!0,r=!1){const s=wt||Ot;if(s){const i=s.type;if(t===Mu){const a=VE(i,!1);if(a&&(a===e||a===Nn(e)||a===ma(Nn(e))))return i}const o=Yd(s[t]||i[t],e)||Yd(s.appContext[t],e);return!o&&r?i:o}}function Yd(t,e){return t&&(t[e]||t[Nn(e)]||t[ma(Nn(e))])}const qT=t=>t.__isSuspense;function jT(t,e){e&&e.pendingBranch?ke(t)?e.effects.push(...t):e.effects.push(t):FT(t)}const zT=Symbol.for("v-scx"),WT=()=>Ke(zT);function YT(t,e){return Ea(t,null,e)}function XT(t,e){return Ea(t,null,{flush:"post"})}const lo={};function Ie(t,e,n){return Ea(t,e,n)}function Ea(t,e,{immediate:n,deep:r,flush:s,once:i,onTrack:o,onTrigger:a}=ft){if(e&&i){const _=e;e=(...R)=>{_(...R),S()}}const l=Ot,c=_=>r===!0?_:Wr(_,r===!1?1:void 0);let u,d=!1,f=!1;if(It(t)?(u=()=>t.value,d=qo(t)):Is(t)?(u=()=>c(t),d=!0):ke(t)?(f=!0,d=t.some(_=>Is(_)||qo(_)),u=()=>t.map(_=>{if(It(_))return _.value;if(Is(_))return c(_);if(Me(_))return kr(_,l,2)})):Me(t)?e?u=()=>kr(t,l,2):u=()=>(h&&h(),_n(t,l,3,[p])):u=At,e&&r){const _=u;u=()=>Wr(_())}let h,p=_=>{h=T.onStop=()=>{kr(_,l,4),h=T.onStop=void 0}},g;if(wa)if(p=At,e?n&&_n(e,l,3,[u(),f?[]:void 0,p]):u(),s==="sync"){const _=WT();g=_.__watcherHandles||(_.__watcherHandles=[])}else return At;let v=f?new Array(t.length).fill(lo):lo;const m=()=>{if(!(!T.active||!T.dirty))if(e){const _=T.run();(r||d||(f?_.some((R,k)=>Dr(R,v[k])):Dr(_,v)))&&(h&&h(),_n(e,l,3,[_,v===lo?void 0:f&&v[0]===lo?[]:v,p]),v=_)}else T.run()};m.allowRecurse=!!e;let y;s==="sync"?y=m:s==="post"?y=()=>Qt(m,l&&l.suspense):(m.pre=!0,l&&(m.id=l.uid),y=()=>Ou(m));const T=new wu(u,At,y),E=Vg(),S=()=>{T.stop(),E&&Su(E.effects,T)};return e?n?m():v=T.run():s==="post"?Qt(T.run.bind(T),l&&l.suspense):T.run(),g&&g.push(S),S}function QT(t,e,n){const r=this.proxy,s=lt(t)?t.includes(".")?pm(r,t):()=>r[t]:t.bind(r,r);let i;Me(e)?i=e:(i=e.handler,n=e);const o=Gi(this),a=Ea(s,i.bind(r),n);return o(),a}function pm(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}function Wr(t,e,n=0,r){if(!et(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(r=r||new Set,r.has(t))return t;if(r.add(t),It(t))Wr(t.value,e,n,r);else if(ke(t))for(let s=0;s<t.length;s++)Wr(t[s],e,n,r);else if(Pg(t)||Ls(t))t.forEach(s=>{Wr(s,e,n,r)});else if(xg(t))for(const s in t)Wr(t[s],e,n,r);return t}function at(t,e){if(wt===null)return t;const n=La(wt)||wt.proxy,r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=ft]=e[s];i&&(Me(i)&&(i={mounted:i,updated:i}),i.deep&&Wr(o),r.push({dir:i,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function Fr(t,e,n,r){const s=t.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(as(),_n(l,n,8,[t.el,a,t,e]),ls())}}const _r=Symbol("_leaveCb"),co=Symbol("_enterCb");function JT(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return mt(()=>{t.isMounted=!0}),Un(()=>{t.isUnmounting=!0}),t}const bn=[Function,Array],gm={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bn,onEnter:bn,onAfterEnter:bn,onEnterCancelled:bn,onBeforeLeave:bn,onLeave:bn,onAfterLeave:bn,onLeaveCancelled:bn,onBeforeAppear:bn,onAppear:bn,onAfterAppear:bn,onAppearCancelled:bn},ZT={name:"BaseTransition",props:gm,setup(t,{slots:e}){const n=_t(),r=JT();return()=>{const s=e.default&&vm(e.default(),!0);if(!s||!s.length)return;let i=s[0];if(s.length>1){for(const f of s)if(f.type!==mn){i=f;break}}const o=Qe(t),{mode:a}=o;if(r.isLeaving)return rl(i);const l=Xd(i);if(!l)return rl(i);const c=Tc(l,o,r,n);Ec(l,c);const u=n.subTree,d=u&&Xd(u);if(d&&d.type!==mn&&!jr(l,d)){const f=Tc(d,o,r,n);if(Ec(d,f),a==="out-in")return r.isLeaving=!0,f.afterLeave=()=>{r.isLeaving=!1,n.update.active!==!1&&(n.effect.dirty=!0,n.update())},rl(i);a==="in-out"&&l.type!==mn&&(f.delayLeave=(h,p,g)=>{const v=mm(r,d);v[String(d.key)]=d,h[_r]=()=>{p(),h[_r]=void 0,delete c.delayedLeave},c.delayedLeave=g})}return i}}},eE=ZT;function mm(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Tc(t,e,n,r){const{appear:s,mode:i,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:h,onLeaveCancelled:p,onBeforeAppear:g,onAppear:v,onAfterAppear:m,onAppearCancelled:y}=e,T=String(t.key),E=mm(n,t),S=(k,P)=>{k&&_n(k,r,9,P)},_=(k,P)=>{const $=P[1];S(k,P),ke(k)?k.every(N=>N.length<=1)&&$():k.length<=1&&$()},R={mode:i,persisted:o,beforeEnter(k){let P=a;if(!n.isMounted)if(s)P=g||a;else return;k[_r]&&k[_r](!0);const $=E[T];$&&jr(t,$)&&$.el[_r]&&$.el[_r](),S(P,[k])},enter(k){let P=l,$=c,N=u;if(!n.isMounted)if(s)P=v||l,$=m||c,N=y||u;else return;let w=!1;const U=k[co]=z=>{w||(w=!0,z?S(N,[k]):S($,[k]),R.delayedLeave&&R.delayedLeave(),k[co]=void 0)};P?_(P,[k,U]):U()},leave(k,P){const $=String(t.key);if(k[co]&&k[co](!0),n.isUnmounting)return P();S(d,[k]);let N=!1;const w=k[_r]=U=>{N||(N=!0,P(),U?S(p,[k]):S(h,[k]),k[_r]=void 0,E[$]===t&&delete E[$])};E[$]=t,f?_(f,[k,w]):w()},clone(k){return Tc(k,e,n,r)}};return R}function rl(t){if(Sa(t))return t=dr(t),t.children=null,t}function Xd(t){return Sa(t)?t.children?t.children[0]:void 0:t}function Ec(t,e){t.shapeFlag&6&&t.component?Ec(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function vm(t,e=!1,n){let r=[],s=0;for(let i=0;i<t.length;i++){let o=t[i];const a=n==null?o.key:String(n)+String(o.key!=null?o.key:i);o.type===Ne?(o.patchFlag&128&&s++,r=r.concat(vm(o.children,e,a))):(e||o.type!==mn)&&r.push(a!=null?dr(o,{key:a}):o)}if(s>1)for(let i=0;i<r.length;i++)r[i].patchFlag=-2;return r}/*! #__NO_SIDE_EFFECTS__ */function ye(t,e){return Me(t)?Lt({name:t.name},e,{setup:t}):t}const fi=t=>!!t.type.__asyncLoader,Sa=t=>t.type.__isKeepAlive;function ym(t,e){Tm(t,"a",e)}function bm(t,e){Tm(t,"da",e)}function Tm(t,e,n=Ot){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(_a(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Sa(s.parent.vnode)&&tE(r,e,n,s),s=s.parent}}function tE(t,e,n,r){const s=_a(e,t,r,!0);Us(()=>{Su(r[e],s)},n)}function _a(t,e,n=Ot,r=!1){if(n){const s=n[t]||(n[t]=[]),i=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;as();const a=Gi(n),l=_n(e,n,t,o);return a(),ls(),l});return r?s.unshift(i):s.push(i),i}}const hr=t=>(e,n=Ot)=>(!wa||t==="sp")&&_a(t,(...r)=>e(...r),n),Em=hr("bm"),mt=hr("m"),nE=hr("bu"),Fu=hr("u"),Un=hr("bum"),Us=hr("um"),rE=hr("sp"),sE=hr("rtg"),iE=hr("rtc");function oE(t,e=Ot){_a("ec",t,e)}function kt(t,e,n,r){let s;const i=n&&n[r];if(ke(t)||lt(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,i&&i[o])}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,i&&i[o])}else if(et(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,i&&i[a]));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];s[a]=e(t[c],c,a,i&&i[a])}}else s=[];return n&&(n[r]=s),s}function aE(t,e){for(let n=0;n<e.length;n++){const r=e[n];if(ke(r))for(let s=0;s<r.length;s++)t[r[s].name]=r[s].fn;else r&&(t[r.name]=r.key?(...s)=>{const i=r.fn(...s);return i&&(i.key=r.key),i}:r.fn)}return t}function Fe(t,e,n={},r,s){if(wt.isCE||wt.parent&&fi(wt.parent)&&wt.parent.isCE)return e!=="default"&&(n.name=e),Y("slot",n,r&&r());let i=t[e];i&&i._c&&(i._d=!1),C();const o=i&&Sm(i(n)),a=Se(Ne,{key:n.key||o&&o.key||`_${e}`},o||(r?r():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),i&&i._c&&(i._d=!0),a}function Sm(t){return t.some(e=>lr(e)?!(e.type===mn||e.type===Ne&&!Sm(e.children)):!0)?t:null}const Sc=t=>t?Om(t)?La(t)||t.proxy:Sc(t.parent):null,hi=Lt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Sc(t.parent),$root:t=>Sc(t.root),$emit:t=>t.emit,$options:t=>Nu(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,Ou(t.update)}),$nextTick:t=>t.n||(t.n=nt.bind(t.proxy)),$watch:t=>QT.bind(t)}),sl=(t,e)=>t!==ft&&!t.__isScriptSetup&&Xe(t,e),lE={get({_:t},e){const{ctx:n,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=t;let c;if(e[0]!=="$"){const h=o[e];if(h!==void 0)switch(h){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return i[e]}else{if(sl(r,e))return o[e]=1,r[e];if(s!==ft&&Xe(s,e))return o[e]=2,s[e];if((c=t.propsOptions[0])&&Xe(c,e))return o[e]=3,i[e];if(n!==ft&&Xe(n,e))return o[e]=4,n[e];_c&&(o[e]=0)}}const u=hi[e];let d,f;if(u)return e==="$attrs"&&nn(t,"get",e),u(t);if((d=a.__cssModules)&&(d=d[e]))return d;if(n!==ft&&Xe(n,e))return o[e]=4,n[e];if(f=l.config.globalProperties,Xe(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:i}=t;return sl(s,e)?(s[e]=n,!0):r!==ft&&Xe(r,e)?(r[e]=n,!0):Xe(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(i[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!n[o]||t!==ft&&Xe(t,o)||sl(e,o)||(a=i[0])&&Xe(a,o)||Xe(r,o)||Xe(hi,o)||Xe(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:Xe(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function cE(){return uE().attrs}function uE(){const t=_t();return t.setupContext||(t.setupContext=xm(t))}function Qd(t){return ke(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let _c=!0;function dE(t){const e=Nu(t),n=t.proxy,r=t.ctx;_c=!1,e.beforeCreate&&Jd(e.beforeCreate,t,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:h,updated:p,activated:g,deactivated:v,beforeDestroy:m,beforeUnmount:y,destroyed:T,unmounted:E,render:S,renderTracked:_,renderTriggered:R,errorCaptured:k,serverPrefetch:P,expose:$,inheritAttrs:N,components:w,directives:U,filters:z}=e;if(c&&fE(c,r,null),o)for(const W in o){const q=o[W];Me(q)&&(r[W]=q.bind(n))}if(s){const W=s.call(n,n);et(W)&&(t.data=gt(W))}if(_c=!0,i)for(const W in i){const q=i[W],pe=Me(q)?q.bind(n,n):Me(q.get)?q.get.bind(n,n):At,J=!Me(q)&&Me(q.set)?q.set.bind(n):At,le=M({get:pe,set:J});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>le.value,set:me=>le.value=me})}if(a)for(const W in a)_m(a[W],r,n,W);if(l){const W=Me(l)?l.call(n):l;Reflect.ownKeys(W).forEach(q=>{Vt(q,W[q])})}u&&Jd(u,t,"c");function oe(W,q){ke(q)?q.forEach(pe=>W(pe.bind(n))):q&&W(q.bind(n))}if(oe(Em,d),oe(mt,f),oe(nE,h),oe(Fu,p),oe(ym,g),oe(bm,v),oe(oE,k),oe(iE,_),oe(sE,R),oe(Un,y),oe(Us,E),oe(rE,P),ke($))if($.length){const W=t.exposed||(t.exposed={});$.forEach(q=>{Object.defineProperty(W,q,{get:()=>n[q],set:pe=>n[q]=pe})})}else t.exposed||(t.exposed={});S&&t.render===At&&(t.render=S),N!=null&&(t.inheritAttrs=N),w&&(t.components=w),U&&(t.directives=U)}function fE(t,e,n=At){ke(t)&&(t=Ac(t));for(const r in t){const s=t[r];let i;et(s)?"default"in s?i=Ke(s.from||r,s.default,!0):i=Ke(s.from||r):i=Ke(s),It(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function Jd(t,e,n){_n(ke(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function _m(t,e,n,r){const s=r.includes(".")?pm(n,r):()=>n[r];if(lt(t)){const i=e[t];Me(i)&&Ie(s,i)}else if(Me(t))Ie(s,t.bind(n));else if(et(t))if(ke(t))t.forEach(i=>_m(i,e,n,r));else{const i=Me(t.handler)?t.handler.bind(n):e[t.handler];Me(i)&&Ie(s,i,t)}}function Nu(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=t.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!n&&!r?l=e:(l={},s.length&&s.forEach(c=>Yo(l,c,o,!0)),Yo(l,e,o)),et(e)&&i.set(e,l),l}function Yo(t,e,n,r=!1){const{mixins:s,extends:i}=e;i&&Yo(t,i,n,!0),s&&s.forEach(o=>Yo(t,o,n,!0));for(const o in e)if(!(r&&o==="expose")){const a=hE[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const hE={data:Zd,props:ef,emits:ef,methods:ai,computed:ai,beforeCreate:jt,created:jt,beforeMount:jt,mounted:jt,beforeUpdate:jt,updated:jt,beforeDestroy:jt,beforeUnmount:jt,destroyed:jt,unmounted:jt,activated:jt,deactivated:jt,errorCaptured:jt,serverPrefetch:jt,components:ai,directives:ai,watch:gE,provide:Zd,inject:pE};function Zd(t,e){return e?t?function(){return Lt(Me(t)?t.call(this,this):t,Me(e)?e.call(this,this):e)}:e:t}function pE(t,e){return ai(Ac(t),Ac(e))}function Ac(t){if(ke(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function jt(t,e){return t?[...new Set([].concat(t,e))]:e}function ai(t,e){return t?Lt(Object.create(null),t,e):e}function ef(t,e){return t?ke(t)&&ke(e)?[...new Set([...t,...e])]:Lt(Object.create(null),Qd(t),Qd(e??{})):e}function gE(t,e){if(!t)return e;if(!e)return t;const n=Lt(Object.create(null),t);for(const r in e)n[r]=jt(t[r],e[r]);return n}function Am(){return{app:null,config:{isNativeTag:Q1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let mE=0;function vE(t,e){return function(r,s=null){Me(r)||(r=Lt({},r)),s!=null&&!et(s)&&(s=null);const i=Am(),o=new WeakSet;let a=!1;const l=i.app={_uid:mE++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:GE,get config(){return i.config},set config(c){},use(c,...u){return o.has(c)||(c&&Me(c.install)?(o.add(c),c.install(l,...u)):Me(c)&&(o.add(c),c(l,...u))),l},mixin(c){return i.mixins.includes(c)||i.mixins.push(c),l},component(c,u){return u?(i.components[c]=u,l):i.components[c]},directive(c,u){return u?(i.directives[c]=u,l):i.directives[c]},mount(c,u,d){if(!a){const f=Y(r,s);return f.appContext=i,d===!0?d="svg":d===!1&&(d=void 0),u&&e?e(f,c):t(f,c,d),a=!0,l._container=c,c.__vue_app__=l,La(f.component)||f.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(c,u){return i.provides[c]=u,l},runWithContext(c){const u=pi;pi=l;try{return c()}finally{pi=u}}};return l}}let pi=null;function Vt(t,e){if(Ot){let n=Ot.provides;const r=Ot.parent&&Ot.parent.provides;r===n&&(n=Ot.provides=Object.create(r)),n[t]=e}}function Ke(t,e,n=!1){const r=Ot||wt;if(r||pi){const s=r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:pi._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Me(e)?e.call(r&&r.proxy):e}}function yE(t,e,n,r=!1){const s={},i={};Go(i,Aa,1),t.propsDefaults=Object.create(null),wm(t,e,s,i);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=r?s:em(s):t.type.props?t.props=s:t.props=i,t.attrs=i}function bE(t,e,n,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=t,a=Qe(s),[l]=t.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=t.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(ba(t.emitsOptions,f))continue;const h=e[f];if(l)if(Xe(i,f))h!==i[f]&&(i[f]=h,c=!0);else{const p=Nn(f);s[p]=wc(l,a,p,h,t,!1)}else h!==i[f]&&(i[f]=h,c=!0)}}}else{wm(t,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!Xe(e,d)&&((u=os(d))===d||!Xe(e,u)))&&(l?n&&(n[d]!==void 0||n[u]!==void 0)&&(s[d]=wc(l,a,d,void 0,t,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!Xe(e,d))&&(delete i[d],c=!0)}c&&ur(t,"set","$attrs")}function wm(t,e,n,r){const[s,i]=t.propsOptions;let o=!1,a;if(e)for(let l in e){if(ui(l))continue;const c=e[l];let u;s&&Xe(s,u=Nn(l))?!i||!i.includes(u)?n[u]=c:(a||(a={}))[u]=c:ba(t.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=Qe(n),c=a||ft;for(let u=0;u<i.length;u++){const d=i[u];n[d]=wc(s,l,d,c[d],t,!Xe(c,d))}}return o}function wc(t,e,n,r,s,i){const o=t[n];if(o!=null){const a=Xe(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Me(l)){const{propsDefaults:c}=s;if(n in c)r=c[n];else{const u=Gi(s);r=c[n]=l.call(null,e),u()}}else r=l}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===os(n))&&(r=!0))}return r}function Lm(t,e,n=!1){const r=e.propsCache,s=r.get(t);if(s)return s;const i=t.props,o={},a=[];let l=!1;if(!Me(t)){const u=d=>{l=!0;const[f,h]=Lm(d,e,!0);Lt(o,f),h&&a.push(...h)};!n&&e.mixins.length&&e.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!l)return et(t)&&r.set(t,ws),ws;if(ke(i))for(let u=0;u<i.length;u++){const d=Nn(i[u]);tf(d)&&(o[d]=ft)}else if(i)for(const u in i){const d=Nn(u);if(tf(d)){const f=i[u],h=o[d]=ke(f)||Me(f)?{type:f}:Lt({},f);if(h){const p=sf(Boolean,h.type),g=sf(String,h.type);h[0]=p>-1,h[1]=g<0||p<g,(p>-1||Xe(h,"default"))&&a.push(d)}}}const c=[o,a];return et(t)&&r.set(t,c),c}function tf(t){return t[0]!=="$"&&!ui(t)}function nf(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function rf(t,e){return nf(t)===nf(e)}function sf(t,e){return ke(e)?e.findIndex(n=>rf(n,t)):Me(e)&&rf(e,t)?0:-1}const Im=t=>t[0]==="_"||t==="$stable",Bu=t=>ke(t)?t.map(jn):[jn(t)],TE=(t,e,n)=>{if(e._n)return e;const r=ue((...s)=>Bu(e(...s)),n);return r._c=!1,r},Cm=(t,e,n)=>{const r=t._ctx;for(const s in t){if(Im(s))continue;const i=t[s];if(Me(i))e[s]=TE(s,i,r);else if(i!=null){const o=Bu(i);e[s]=()=>o}}},Rm=(t,e)=>{const n=Bu(e);t.slots.default=()=>n},EE=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=Qe(e),Go(e,"_",n)):Cm(e,t.slots={})}else t.slots={},e&&Rm(t,e);Go(t.slots,Aa,1)},SE=(t,e,n)=>{const{vnode:r,slots:s}=t;let i=!0,o=ft;if(r.shapeFlag&32){const a=e._;a?n&&a===1?i=!1:(Lt(s,e),!n&&a===1&&delete s._):(i=!e.$stable,Cm(e,s)),o=e}else e&&(Rm(t,e),o={default:1});if(i)for(const a in s)!Im(a)&&o[a]==null&&delete s[a]};function Lc(t,e,n,r,s=!1){if(ke(t)){t.forEach((f,h)=>Lc(f,e&&(ke(e)?e[h]:e),n,r,s));return}if(fi(r)&&!s)return;const i=r.shapeFlag&4?La(r.component)||r.component.proxy:r.el,o=s?null:i,{i:a,r:l}=t,c=e&&e.r,u=a.refs===ft?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(lt(c)?(u[c]=null,Xe(d,c)&&(d[c]=null)):It(c)&&(c.value=null)),Me(l))kr(l,a,12,[o,u]);else{const f=lt(l),h=It(l);if(f||h){const p=()=>{if(t.f){const g=f?Xe(d,l)?d[l]:u[l]:l.value;s?ke(g)&&Su(g,i):ke(g)?g.includes(i)||g.push(i):f?(u[l]=[i],Xe(d,l)&&(d[l]=u[l])):(l.value=[i],t.k&&(u[t.k]=l.value))}else f?(u[l]=o,Xe(d,l)&&(d[l]=o)):h&&(l.value=o,t.k&&(u[t.k]=o))};o?(p.id=-1,Qt(p,n)):p()}}}function _E(){typeof __VUE_PROD_HYDRATION_MISMATCH_DETAILS__!="boolean"&&(Au().__VUE_PROD_HYDRATION_MISMATCH_DETAILS__=!1)}const Qt=jT;function AE(t){return wE(t)}function wE(t,e){_E();const n=Au();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:h=At,insertStaticContent:p}=t,g=(A,I,D,V=null,G=null,ae=null,ge=void 0,se=null,de=!!I.dynamicChildren)=>{if(A===I)return;A&&!jr(A,I)&&(V=H(A),me(A,G,ae,!0),A=null),I.patchFlag===-2&&(de=!1,I.dynamicChildren=null);const{type:re,ref:ve,shapeFlag:we}=I;switch(re){case Vs:v(A,I,D,V);break;case mn:m(A,I,D,V);break;case mi:A==null&&y(I,D,V,ge);break;case Ne:w(A,I,D,V,G,ae,ge,se,de);break;default:we&1?S(A,I,D,V,G,ae,ge,se,de):we&6?U(A,I,D,V,G,ae,ge,se,de):(we&64||we&128)&&re.process(A,I,D,V,G,ae,ge,se,de,Te)}ve!=null&&G&&Lc(ve,A&&A.ref,ae,I||A,!I)},v=(A,I,D,V)=>{if(A==null)r(I.el=a(I.children),D,V);else{const G=I.el=A.el;I.children!==A.children&&c(G,I.children)}},m=(A,I,D,V)=>{A==null?r(I.el=l(I.children||""),D,V):I.el=A.el},y=(A,I,D,V)=>{[A.el,A.anchor]=p(A.children,I,D,V,A.el,A.anchor)},T=({el:A,anchor:I},D,V)=>{let G;for(;A&&A!==I;)G=f(A),r(A,D,V),A=G;r(I,D,V)},E=({el:A,anchor:I})=>{let D;for(;A&&A!==I;)D=f(A),s(A),A=D;s(I)},S=(A,I,D,V,G,ae,ge,se,de)=>{I.type==="svg"?ge="svg":I.type==="math"&&(ge="mathml"),A==null?_(I,D,V,G,ae,ge,se,de):P(A,I,G,ae,ge,se,de)},_=(A,I,D,V,G,ae,ge,se)=>{let de,re;const{props:ve,shapeFlag:we,transition:_e,dirs:$e}=A;if(de=A.el=o(A.type,ae,ve&&ve.is,ve),we&8?u(de,A.children):we&16&&k(A.children,de,null,V,G,il(A,ae),ge,se),$e&&Fr(A,null,V,"created"),R(de,A,A.scopeId,ge,V),ve){for(const x in ve)x!=="value"&&!ui(x)&&i(de,x,null,ve[x],ae,A.children,V,G,Je);"value"in ve&&i(de,"value",null,ve.value,ae),(re=ve.onVnodeBeforeMount)&&Gn(re,V,A)}$e&&Fr(A,null,V,"beforeMount");const Be=LE(G,_e);Be&&_e.beforeEnter(de),r(de,I,D),((re=ve&&ve.onVnodeMounted)||Be||$e)&&Qt(()=>{re&&Gn(re,V,A),Be&&_e.enter(de),$e&&Fr(A,null,V,"mounted")},G)},R=(A,I,D,V,G)=>{if(D&&h(A,D),V)for(let ae=0;ae<V.length;ae++)h(A,V[ae]);if(G){let ae=G.subTree;if(I===ae){const ge=G.vnode;R(A,ge,ge.scopeId,ge.slotScopeIds,G.parent)}}},k=(A,I,D,V,G,ae,ge,se,de=0)=>{for(let re=de;re<A.length;re++){const ve=A[re]=se?Ar(A[re]):jn(A[re]);g(null,ve,I,D,V,G,ae,ge,se)}},P=(A,I,D,V,G,ae,ge)=>{const se=I.el=A.el;let{patchFlag:de,dynamicChildren:re,dirs:ve}=I;de|=A.patchFlag&16;const we=A.props||ft,_e=I.props||ft;let $e;if(D&&Nr(D,!1),($e=_e.onVnodeBeforeUpdate)&&Gn($e,D,I,A),ve&&Fr(I,A,D,"beforeUpdate"),D&&Nr(D,!0),re?$(A.dynamicChildren,re,se,D,V,il(I,G),ae):ge||q(A,I,se,null,D,V,il(I,G),ae,!1),de>0){if(de&16)N(se,I,we,_e,D,V,G);else if(de&2&&we.class!==_e.class&&i(se,"class",null,_e.class,G),de&4&&i(se,"style",we.style,_e.style,G),de&8){const Be=I.dynamicProps;for(let x=0;x<Be.length;x++){const te=Be[x],Ee=we[te],Oe=_e[te];(Oe!==Ee||te==="value")&&i(se,te,Ee,Oe,G,A.children,D,V,Je)}}de&1&&A.children!==I.children&&u(se,I.children)}else!ge&&re==null&&N(se,I,we,_e,D,V,G);(($e=_e.onVnodeUpdated)||ve)&&Qt(()=>{$e&&Gn($e,D,I,A),ve&&Fr(I,A,D,"updated")},V)},$=(A,I,D,V,G,ae,ge)=>{for(let se=0;se<I.length;se++){const de=A[se],re=I[se],ve=de.el&&(de.type===Ne||!jr(de,re)||de.shapeFlag&70)?d(de.el):D;g(de,re,ve,null,V,G,ae,ge,!0)}},N=(A,I,D,V,G,ae,ge)=>{if(D!==V){if(D!==ft)for(const se in D)!ui(se)&&!(se in V)&&i(A,se,D[se],null,ge,I.children,G,ae,Je);for(const se in V){if(ui(se))continue;const de=V[se],re=D[se];de!==re&&se!=="value"&&i(A,se,re,de,ge,I.children,G,ae,Je)}"value"in V&&i(A,"value",D.value,V.value,ge)}},w=(A,I,D,V,G,ae,ge,se,de)=>{const re=I.el=A?A.el:a(""),ve=I.anchor=A?A.anchor:a("");let{patchFlag:we,dynamicChildren:_e,slotScopeIds:$e}=I;$e&&(se=se?se.concat($e):$e),A==null?(r(re,D,V),r(ve,D,V),k(I.children||[],D,ve,G,ae,ge,se,de)):we>0&&we&64&&_e&&A.dynamicChildren?($(A.dynamicChildren,_e,D,G,ae,ge,se),(I.key!=null||G&&I===G.subTree)&&Uu(A,I,!0)):q(A,I,D,ve,G,ae,ge,se,de)},U=(A,I,D,V,G,ae,ge,se,de)=>{I.slotScopeIds=se,A==null?I.shapeFlag&512?G.ctx.activate(I,D,V,ge,de):z(I,D,V,G,ae,ge,de):ne(A,I,de)},z=(A,I,D,V,G,ae,ge)=>{const se=A.component=FE(A,V,G);if(Sa(A)&&(se.ctx.renderer=Te),NE(se),se.asyncDep){if(G&&G.registerDep(se,oe),!A.el){const de=se.subTree=Y(mn);m(null,de,I,D)}}else oe(se,A,I,D,G,ae,ge)},ne=(A,I,D)=>{const V=I.component=A.component;if(HT(A,I,D))if(V.asyncDep&&!V.asyncResolved){W(V,I,D);return}else V.next=I,xT(V.update),V.effect.dirty=!0,V.update();else I.el=A.el,V.vnode=I},oe=(A,I,D,V,G,ae,ge)=>{const se=()=>{if(A.isMounted){let{next:ve,bu:we,u:_e,parent:$e,vnode:Be}=A;{const Et=$m(A);if(Et){ve&&(ve.el=Be.el,W(A,ve,ge)),Et.asyncDep.then(()=>{A.isUnmounted||se()});return}}let x=ve,te;Nr(A,!1),ve?(ve.el=Be.el,W(A,ve,ge)):ve=Be,we&&Do(we),(te=ve.props&&ve.props.onVnodeBeforeUpdate)&&Gn(te,$e,ve,Be),Nr(A,!0);const Ee=nl(A),Oe=A.subTree;A.subTree=Ee,g(Oe,Ee,d(Oe.el),H(Oe),A,G,ae),ve.el=Ee.el,x===null&&GT(A,Ee.el),_e&&Qt(_e,G),(te=ve.props&&ve.props.onVnodeUpdated)&&Qt(()=>Gn(te,$e,ve,Be),G)}else{let ve;const{el:we,props:_e}=I,{bm:$e,m:Be,parent:x}=A,te=fi(I);if(Nr(A,!1),$e&&Do($e),!te&&(ve=_e&&_e.onVnodeBeforeMount)&&Gn(ve,x,I),Nr(A,!0),we&&rt){const Ee=()=>{A.subTree=nl(A),rt(we,A.subTree,A,G,null)};te?I.type.__asyncLoader().then(()=>!A.isUnmounted&&Ee()):Ee()}else{const Ee=A.subTree=nl(A);g(null,Ee,D,V,A,G,ae),I.el=Ee.el}if(Be&&Qt(Be,G),!te&&(ve=_e&&_e.onVnodeMounted)){const Ee=I;Qt(()=>Gn(ve,x,Ee),G)}(I.shapeFlag&256||x&&fi(x.vnode)&&x.vnode.shapeFlag&256)&&A.a&&Qt(A.a,G),A.isMounted=!0,I=D=V=null}},de=A.effect=new wu(se,At,()=>Ou(re),A.scope),re=A.update=()=>{de.dirty&&de.run()};re.id=A.uid,Nr(A,!0),re()},W=(A,I,D)=>{I.component=A;const V=A.vnode.props;A.vnode=I,A.next=null,bE(A,I.props,V,D),SE(A,I.children,D),as(),zd(A),ls()},q=(A,I,D,V,G,ae,ge,se,de=!1)=>{const re=A&&A.children,ve=A?A.shapeFlag:0,we=I.children,{patchFlag:_e,shapeFlag:$e}=I;if(_e>0){if(_e&128){J(re,we,D,V,G,ae,ge,se,de);return}else if(_e&256){pe(re,we,D,V,G,ae,ge,se,de);return}}$e&8?(ve&16&&Je(re,G,ae),we!==re&&u(D,we)):ve&16?$e&16?J(re,we,D,V,G,ae,ge,se,de):Je(re,G,ae,!0):(ve&8&&u(D,""),$e&16&&k(we,D,V,G,ae,ge,se,de))},pe=(A,I,D,V,G,ae,ge,se,de)=>{A=A||ws,I=I||ws;const re=A.length,ve=I.length,we=Math.min(re,ve);let _e;for(_e=0;_e<we;_e++){const $e=I[_e]=de?Ar(I[_e]):jn(I[_e]);g(A[_e],$e,D,null,G,ae,ge,se,de)}re>ve?Je(A,G,ae,!0,!1,we):k(I,D,V,G,ae,ge,se,de,we)},J=(A,I,D,V,G,ae,ge,se,de)=>{let re=0;const ve=I.length;let we=A.length-1,_e=ve-1;for(;re<=we&&re<=_e;){const $e=A[re],Be=I[re]=de?Ar(I[re]):jn(I[re]);if(jr($e,Be))g($e,Be,D,null,G,ae,ge,se,de);else break;re++}for(;re<=we&&re<=_e;){const $e=A[we],Be=I[_e]=de?Ar(I[_e]):jn(I[_e]);if(jr($e,Be))g($e,Be,D,null,G,ae,ge,se,de);else break;we--,_e--}if(re>we){if(re<=_e){const $e=_e+1,Be=$e<ve?I[$e].el:V;for(;re<=_e;)g(null,I[re]=de?Ar(I[re]):jn(I[re]),D,Be,G,ae,ge,se,de),re++}}else if(re>_e)for(;re<=we;)me(A[re],G,ae,!0),re++;else{const $e=re,Be=re,x=new Map;for(re=Be;re<=_e;re++){const Ye=I[re]=de?Ar(I[re]):jn(I[re]);Ye.key!=null&&x.set(Ye.key,re)}let te,Ee=0;const Oe=_e-Be+1;let Et=!1,Kt=0;const Ft=new Array(Oe);for(re=0;re<Oe;re++)Ft[re]=0;for(re=$e;re<=we;re++){const Ye=A[re];if(Ee>=Oe){me(Ye,G,ae,!0);continue}let yt;if(Ye.key!=null)yt=x.get(Ye.key);else for(te=Be;te<=_e;te++)if(Ft[te-Be]===0&&jr(Ye,I[te])){yt=te;break}yt===void 0?me(Ye,G,ae,!0):(Ft[yt-Be]=re+1,yt>=Kt?Kt=yt:Et=!0,g(Ye,I[yt],D,null,G,ae,ge,se,de),Ee++)}const yn=Et?IE(Ft):ws;for(te=yn.length-1,re=Oe-1;re>=0;re--){const Ye=Be+re,yt=I[Ye],no=Ye+1<ve?I[Ye+1].el:V;Ft[re]===0?g(null,yt,D,no,G,ae,ge,se,de):Et&&(te<0||re!==yn[te]?le(yt,D,no,2):te--)}}},le=(A,I,D,V,G=null)=>{const{el:ae,type:ge,transition:se,children:de,shapeFlag:re}=A;if(re&6){le(A.component.subTree,I,D,V);return}if(re&128){A.suspense.move(I,D,V);return}if(re&64){ge.move(A,I,D,Te);return}if(ge===Ne){r(ae,I,D);for(let we=0;we<de.length;we++)le(de[we],I,D,V);r(A.anchor,I,D);return}if(ge===mi){T(A,I,D);return}if(V!==2&&re&1&&se)if(V===0)se.beforeEnter(ae),r(ae,I,D),Qt(()=>se.enter(ae),G);else{const{leave:we,delayLeave:_e,afterLeave:$e}=se,Be=()=>r(ae,I,D),x=()=>{we(ae,()=>{Be(),$e&&$e()})};_e?_e(ae,Be,x):x()}else r(ae,I,D)},me=(A,I,D,V=!1,G=!1)=>{const{type:ae,props:ge,ref:se,children:de,dynamicChildren:re,shapeFlag:ve,patchFlag:we,dirs:_e}=A;if(se!=null&&Lc(se,null,D,A,!0),ve&256){I.ctx.deactivate(A);return}const $e=ve&1&&_e,Be=!fi(A);let x;if(Be&&(x=ge&&ge.onVnodeBeforeUnmount)&&Gn(x,I,A),ve&6)He(A.component,D,V);else{if(ve&128){A.suspense.unmount(D,V);return}$e&&Fr(A,null,I,"beforeUnmount"),ve&64?A.type.remove(A,I,D,G,Te,V):re&&(ae!==Ne||we>0&&we&64)?Je(re,I,D,!1,!0):(ae===Ne&&we&384||!G&&ve&16)&&Je(de,I,D),V&&Ve(A)}(Be&&(x=ge&&ge.onVnodeUnmounted)||$e)&&Qt(()=>{x&&Gn(x,I,A),$e&&Fr(A,null,I,"unmounted")},D)},Ve=A=>{const{type:I,el:D,anchor:V,transition:G}=A;if(I===Ne){je(D,V);return}if(I===mi){E(A);return}const ae=()=>{s(D),G&&!G.persisted&&G.afterLeave&&G.afterLeave()};if(A.shapeFlag&1&&G&&!G.persisted){const{leave:ge,delayLeave:se}=G,de=()=>ge(D,ae);se?se(A.el,ae,de):de()}else ae()},je=(A,I)=>{let D;for(;A!==I;)D=f(A),s(A),A=D;s(I)},He=(A,I,D)=>{const{bum:V,scope:G,update:ae,subTree:ge,um:se}=A;V&&Do(V),G.stop(),ae&&(ae.active=!1,me(ge,A,I,D)),se&&Qt(se,I),Qt(()=>{A.isUnmounted=!0},I),I&&I.pendingBranch&&!I.isUnmounted&&A.asyncDep&&!A.asyncResolved&&A.suspenseId===I.pendingId&&(I.deps--,I.deps===0&&I.resolve())},Je=(A,I,D,V=!1,G=!1,ae=0)=>{for(let ge=ae;ge<A.length;ge++)me(A[ge],I,D,V,G)},H=A=>A.shapeFlag&6?H(A.component.subTree):A.shapeFlag&128?A.suspense.next():f(A.anchor||A.el);let he=!1;const fe=(A,I,D)=>{A==null?I._vnode&&me(I._vnode,null,null,!0):g(I._vnode||null,A,I,null,null,null,D),he||(he=!0,zd(),cm(),he=!1),I._vnode=A},Te={p:g,um:me,m:le,r:Ve,mt:z,mc:k,pc:q,pbc:$,n:H,o:t};let Ue,rt;return e&&([Ue,rt]=e(Te)),{render:fe,hydrate:Ue,createApp:vE(fe,Ue)}}function il({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Nr({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function LE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function Uu(t,e,n=!1){const r=t.children,s=e.children;if(ke(r)&&ke(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ar(s[i]),a.el=o.el),n||Uu(o,a)),a.type===Vs&&(a.el=o.el)}}function IE(t){const e=t.slice(),n=[0];let r,s,i,o,a;const l=t.length;for(r=0;r<l;r++){const c=t[r];if(c!==0){if(s=n[n.length-1],t[s]<c){e[r]=s,n.push(r);continue}for(i=0,o=n.length-1;i<o;)a=i+o>>1,t[n[a]]<c?i=a+1:o=a;c<t[n[i]]&&(i>0&&(e[r]=n[i-1]),n[i]=r)}}for(i=n.length,o=n[i-1];i-- >0;)n[i]=o,o=e[o];return n}function $m(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:$m(e)}const CE=t=>t.__isTeleport,gi=t=>t&&(t.disabled||t.disabled===""),of=t=>typeof SVGElement<"u"&&t instanceof SVGElement,af=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Ic=(t,e)=>{const n=t&&t.to;return lt(n)?e?e(n):null:n},RE={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:h,querySelector:p,createText:g,createComment:v}}=c,m=gi(e.props);let{shapeFlag:y,children:T,dynamicChildren:E}=e;if(t==null){const S=e.el=g(""),_=e.anchor=g("");h(S,n,r),h(_,n,r);const R=e.target=Ic(e.props,p),k=e.targetAnchor=g("");R&&(h(k,R),o==="svg"||of(R)?o="svg":(o==="mathml"||af(R))&&(o="mathml"));const P=($,N)=>{y&16&&u(T,$,N,s,i,o,a,l)};m?P(n,_):R&&P(R,k)}else{e.el=t.el;const S=e.anchor=t.anchor,_=e.target=t.target,R=e.targetAnchor=t.targetAnchor,k=gi(t.props),P=k?n:_,$=k?S:R;if(o==="svg"||of(_)?o="svg":(o==="mathml"||af(_))&&(o="mathml"),E?(f(t.dynamicChildren,E,P,s,i,o,a),Uu(t,e,!0)):l||d(t,e,P,$,s,i,o,a,!1),m)k?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):uo(e,n,S,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const N=e.target=Ic(e.props,p);N&&uo(e,N,null,c,0)}else k&&uo(e,_,R,c,1)}km(e)},remove(t,e,n,r,{um:s,o:{remove:i}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:f}=t;if(d&&i(u),o&&i(c),a&16){const h=o||!gi(f);for(let p=0;p<l.length;p++){const g=l[p];s(g,e,n,h,!!g.dynamicChildren)}}},move:uo,hydrate:$E};function uo(t,e,n,{o:{insert:r},m:s},i=2){i===0&&r(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,d=i===2;if(d&&r(o,e,n),(!d||gi(u))&&l&16)for(let f=0;f<c.length;f++)s(c[f],e,n,2);d&&r(a,e,n)}function $E(t,e,n,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=Ic(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(gi(e.props))e.anchor=c(o(t),e,a(t),n,r,s,i),e.targetAnchor=d;else{e.anchor=o(t);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,n,r,s,i)}km(e)}return e.anchor&&o(e.anchor)}const Vu=RE;function km(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;for(;n&&n!==t.targetAnchor;)n.nodeType===1&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const Ne=Symbol.for("v-fgt"),Vs=Symbol.for("v-txt"),mn=Symbol.for("v-cmt"),mi=Symbol.for("v-stc"),vi=[];let xn=null;function C(t=!1){vi.push(xn=t?null:[])}function kE(){vi.pop(),xn=vi[vi.length-1]||null}let Di=1;function lf(t){Di+=t}function Dm(t){return t.dynamicChildren=Di>0?xn||ws:null,kE(),Di>0&&xn&&xn.push(t),t}function F(t,e,n,r,s,i){return Dm(L(t,e,n,r,s,i,!0))}function Se(t,e,n,r,s){return Dm(Y(t,e,n,r,s,!0))}function lr(t){return t?t.__v_isVNode===!0:!1}function jr(t,e){return t.type===e.type&&t.key===e.key}const Aa="__vInternal",Pm=({key:t})=>t??null,Po=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?lt(t)||It(t)||Me(t)?{i:wt,r:t,k:e,f:!!n}:t:null);function L(t,e=null,n=null,r=0,s=null,i=t===Ne?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Pm(e),ref:e&&Po(e),scopeId:Ta,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:wt};return a?(Hu(l,n),i&128&&t.normalize(l)):n&&(l.shapeFlag|=lt(n)?8:16),Di>0&&!o&&xn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&xn.push(l),l}const Y=DE;function DE(t,e=null,n=null,r=0,s=null,i=!1){if((!t||t===fm)&&(t=mn),lr(t)){const a=dr(t,e,!0);return n&&Hu(a,n),Di>0&&!i&&xn&&(a.shapeFlag&6?xn[xn.indexOf(t)]=a:xn.push(a)),a.patchFlag|=-2,a}if(HE(t)&&(t=t.__vccOpts),e){e=PE(e);let{class:a,style:l}=e;a&&!lt(a)&&(e.class=ie(a)),et(l)&&(tm(l)&&!ke(l)&&(l=Lt({},l)),e.style=Ge(l))}const o=lt(t)?1:qT(t)?128:CE(t)?64:et(t)?4:Me(t)?2:0;return L(t,e,n,r,s,o,i,!0)}function PE(t){return t?tm(t)||Aa in t?Lt({},t):t:null}function dr(t,e,n=!1){const{props:r,ref:s,patchFlag:i,children:o}=t,a=e?Qn(r||{},e):r;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&Pm(a),ref:e&&e.ref?n&&s?ke(s)?s.concat(Po(e)):[s,Po(e)]:Po(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ne?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&dr(t.ssContent),ssFallback:t.ssFallback&&dr(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function st(t=" ",e=0){return Y(Vs,null,t,e)}function OE(t,e){const n=Y(mi,null,t);return n.staticCount=e,n}function ce(t="",e=!1){return e?(C(),Se(mn,null,t)):Y(mn,null,t)}function jn(t){return t==null||typeof t=="boolean"?Y(mn):ke(t)?Y(Ne,null,t.slice()):typeof t=="object"?Ar(t):Y(Vs,null,String(t))}function Ar(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:dr(t)}function Hu(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(ke(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Hu(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!(Aa in e)?e._ctx=wt:s===3&&wt&&(wt.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Me(e)?(e={default:e,_ctx:wt},n=32):(e=String(e),r&64?(n=16,e=[st(e)]):n=8);t.children=e,t.shapeFlag|=n}function Qn(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ie([e.class,r.class]));else if(s==="style")e.style=Ge([e.style,r.style]);else if(ha(s)){const i=e[s],o=r[s];o&&i!==o&&!(ke(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function Gn(t,e,n,r=null){_n(t,e,7,[n,r])}const ME=Am();let xE=0;function FE(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||ME,i={uid:xE++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new Bg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lm(r,s),emitsOptions:dm(r,s),emit:null,emitted:null,propsDefaults:ft,inheritAttrs:r.inheritAttrs,ctx:ft,data:ft,props:ft,attrs:ft,slots:ft,refs:ft,setupState:ft,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=BT.bind(null,i),t.ce&&t.ce(i),i}let Ot=null;const _t=()=>Ot||wt;let Xo,Cc;{const t=Au(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Xo=e("__VUE_INSTANCE_SETTERS__",n=>Ot=n),Cc=e("__VUE_SSR_SETTERS__",n=>wa=n)}const Gi=t=>{const e=Ot;return Xo(t),t.scope.on(),()=>{t.scope.off(),Xo(e)}},cf=()=>{Ot&&Ot.scope.off(),Xo(null)};function Om(t){return t.vnode.shapeFlag&4}let wa=!1;function NE(t,e=!1){e&&Cc(e);const{props:n,children:r}=t.vnode,s=Om(t);yE(t,n,s,e),EE(t,r);const i=s?BE(t,e):void 0;return e&&Cc(!1),i}function BE(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=jo(new Proxy(t.ctx,lE));const{setup:r}=n;if(r){const s=t.setupContext=r.length>1?xm(t):null,i=Gi(t);as();const o=kr(r,t,0,[t.props,s]);if(ls(),i(),Og(o)){if(o.then(cf,cf),e)return o.then(a=>{uf(t,a,e)}).catch(a=>{ya(a,t,0)});t.asyncDep=o}else uf(t,o,e)}else Mm(t,e)}function uf(t,e,n){Me(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:et(e)&&(t.setupState=im(e)),Mm(t,n)}let df;function Mm(t,e,n){const r=t.type;if(!t.render){if(!e&&df&&!r.render){const s=r.template||Nu(t).template;if(s){const{isCustomElement:i,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:l}=r,c=Lt(Lt({isCustomElement:i,delimiters:a},o),l);r.render=df(s,c)}}t.render=r.render||At}{const s=Gi(t);as();try{dE(t)}finally{ls(),s()}}}function UE(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return nn(t,"get","$attrs"),e[n]}}))}function xm(t){const e=n=>{t.exposed=n||{}};return{get attrs(){return UE(t)},slots:t.slots,emit:t.emit,expose:e}}function La(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(im(jo(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in hi)return hi[n](t)},has(e,n){return n in e||n in hi}}))}function VE(t,e=!0){return Me(t)?t.displayName||t.name:t.name||e&&t.__name}function HE(t){return Me(t)&&"__vccOpts"in t}const M=(t,e)=>RT(t,e,wa);function zt(t,e,n){const r=arguments.length;return r===2?et(e)&&!ke(e)?lr(e)?Y(t,null,[e]):Y(t,e):Y(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&lr(n)&&(n=[n]),Y(t,e,n))}const GE="3.4.21",KE=At;/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const qE="http://www.w3.org/2000/svg",jE="http://www.w3.org/1998/Math/MathML",wr=typeof document<"u"?document:null,ff=wr&&wr.createElement("template"),zE={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?wr.createElementNS(qE,t):e==="mathml"?wr.createElementNS(jE,t):wr.createElement(t,n?{is:n}:void 0);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>wr.createTextNode(t),createComment:t=>wr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>wr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,i){const o=n?n.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{ff.innerHTML=r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t;const a=ff.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vr="transition",Js="animation",Pi=Symbol("_vtc"),Ht=(t,{slots:e})=>zt(eE,WE(t),e);Ht.displayName="Transition";const Fm={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};Ht.props=Lt({},gm,Fm);const Br=(t,e=[])=>{ke(t)?t.forEach(n=>n(...e)):t&&t(...e)},hf=t=>t?ke(t)?t.some(e=>e.length>1):t.length>1:!1;function WE(t){const e={};for(const w in t)w in Fm||(e[w]=t[w]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:i=`${n}-enter-from`,enterActiveClass:o=`${n}-enter-active`,enterToClass:a=`${n}-enter-to`,appearFromClass:l=i,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:h=`${n}-leave-to`}=t,p=YE(s),g=p&&p[0],v=p&&p[1],{onBeforeEnter:m,onEnter:y,onEnterCancelled:T,onLeave:E,onLeaveCancelled:S,onBeforeAppear:_=m,onAppear:R=y,onAppearCancelled:k=T}=e,P=(w,U,z)=>{Ur(w,U?u:a),Ur(w,U?c:o),z&&z()},$=(w,U)=>{w._isLeaving=!1,Ur(w,d),Ur(w,h),Ur(w,f),U&&U()},N=w=>(U,z)=>{const ne=w?R:y,oe=()=>P(U,w,z);Br(ne,[U,oe]),pf(()=>{Ur(U,w?l:i),yr(U,w?u:a),hf(ne)||gf(U,r,g,oe)})};return Lt(e,{onBeforeEnter(w){Br(m,[w]),yr(w,i),yr(w,o)},onBeforeAppear(w){Br(_,[w]),yr(w,l),yr(w,c)},onEnter:N(!1),onAppear:N(!0),onLeave(w,U){w._isLeaving=!0;const z=()=>$(w,U);yr(w,d),JE(),yr(w,f),pf(()=>{w._isLeaving&&(Ur(w,d),yr(w,h),hf(E)||gf(w,r,v,z))}),Br(E,[w,z])},onEnterCancelled(w){P(w,!1),Br(T,[w])},onAppearCancelled(w){P(w,!0),Br(k,[w])},onLeaveCancelled(w){$(w),Br(S,[w])}})}function YE(t){if(t==null)return null;if(et(t))return[ol(t.enter),ol(t.leave)];{const e=ol(t);return[e,e]}}function ol(t){return tT(t)}function yr(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[Pi]||(t[Pi]=new Set)).add(e)}function Ur(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[Pi];n&&(n.delete(e),n.size||(t[Pi]=void 0))}function pf(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let XE=0;function gf(t,e,n,r){const s=t._endId=++XE,i=()=>{s===t._endId&&r()};if(n)return setTimeout(i,n);const{type:o,timeout:a,propCount:l}=QE(t,e);if(!o)return r();const c=o+"end";let u=0;const d=()=>{t.removeEventListener(c,f),i()},f=h=>{h.target===t&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),t.addEventListener(c,f)}function QE(t,e){const n=window.getComputedStyle(t),r=p=>(n[p]||"").split(", "),s=r(`${vr}Delay`),i=r(`${vr}Duration`),o=mf(s,i),a=r(`${Js}Delay`),l=r(`${Js}Duration`),c=mf(a,l);let u=null,d=0,f=0;e===vr?o>0&&(u=vr,d=o,f=i.length):e===Js?c>0&&(u=Js,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?vr:Js:null,f=u?u===vr?i.length:l.length:0);const h=u===vr&&/\b(transform|all)(,|$)/.test(r(`${vr}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:h}}function mf(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>vf(n)+vf(t[r])))}function vf(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function JE(){return document.body.offsetHeight}function ZE(t,e,n){const r=t[Pi];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const Qo=Symbol("_vod"),Nm=Symbol("_vsh"),pt={beforeMount(t,{value:e},{transition:n}){t[Qo]=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):Zs(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(t),Zs(t,!0),r.enter(t)):r.leave(t,()=>{Zs(t,!1)}):Zs(t,e))},beforeUnmount(t,{value:e}){Zs(t,e)}};function Zs(t,e){t.style.display=e?t[Qo]:"none",t[Nm]=!e}const Bm=Symbol("");function Gu(t){const e=_t();if(!e)return;const n=e.ut=(s=t(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(i=>$c(i,s))},r=()=>{const s=t(e.proxy);Rc(e.subTree,s),n(s)};XT(r),mt(()=>{const s=new MutationObserver(r);s.observe(e.subTree.el.parentNode,{childList:!0}),Us(()=>s.disconnect())})}function Rc(t,e){if(t.shapeFlag&128){const n=t.suspense;t=n.activeBranch,n.pendingBranch&&!n.isHydrating&&n.effects.push(()=>{Rc(n.activeBranch,e)})}for(;t.component;)t=t.component.subTree;if(t.shapeFlag&1&&t.el)$c(t.el,e);else if(t.type===Ne)t.children.forEach(n=>Rc(n,e));else if(t.type===mi){let{el:n,anchor:r}=t;for(;n&&($c(n,e),n!==r);)n=n.nextSibling}}function $c(t,e){if(t.nodeType===1){const n=t.style;let r="";for(const s in e)n.setProperty(`--${s}`,e[s]),r+=`--${s}: ${e[s]};`;n[Bm]=r}}const eS=/(^|;)\s*display\s*:/;function tS(t,e,n){const r=t.style,s=lt(n);let i=!1;if(n&&!s){if(e)if(lt(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&Oo(r,a,"")}else for(const o in e)n[o]==null&&Oo(r,o,"");for(const o in n)o==="display"&&(i=!0),Oo(r,o,n[o])}else if(s){if(e!==n){const o=r[Bm];o&&(n+=";"+o),r.cssText=n,i=eS.test(n)}}else e&&t.removeAttribute("style");Qo in t&&(t[Qo]=i?r.display:"",t[Nm]&&(r.display="none"))}const yf=/\s*!important$/;function Oo(t,e,n){if(ke(n))n.forEach(r=>Oo(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=nS(t,e);yf.test(n)?t.setProperty(os(r),n.replace(yf,""),"important"):t[r]=n}}const bf=["Webkit","Moz","ms"],al={};function nS(t,e){const n=al[e];if(n)return n;let r=Nn(e);if(r!=="filter"&&r in t)return al[e]=r;r=ma(r);for(let s=0;s<bf.length;s++){const i=bf[s]+r;if(i in t)return al[e]=i}return e}const Tf="http://www.w3.org/1999/xlink";function rS(t,e,n,r,s){if(r&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(Tf,e.slice(6,e.length)):t.setAttributeNS(Tf,e,n);else{const i=aT(e);n==null||i&&!Fg(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function sS(t,e,n,r,s,i,o){if(e==="innerHTML"||e==="textContent"){r&&o(r,s,i),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?t.getAttribute("value")||"":t.value,u=n??"";(c!==u||!("_value"in t))&&(t.value=u),n==null&&t.removeAttribute(e),t._value=n;return}let l=!1;if(n===""||n==null){const c=typeof t[e];c==="boolean"?n=Fg(n):n==null&&c==="string"?(n="",l=!0):c==="number"&&(n=0,l=!0)}try{t[e]=n}catch{}l&&t.removeAttribute(e)}function Ss(t,e,n,r){t.addEventListener(e,n,r)}function iS(t,e,n,r){t.removeEventListener(e,n,r)}const Ef=Symbol("_vei");function oS(t,e,n,r,s=null){const i=t[Ef]||(t[Ef]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=aS(e);if(r){const c=i[e]=uS(r,s);Ss(t,a,c,l)}else o&&(iS(t,a,o,l),i[e]=void 0)}}const Sf=/(?:Once|Passive|Capture)$/;function aS(t){let e;if(Sf.test(t)){e={};let r;for(;r=t.match(Sf);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):os(t.slice(2)),e]}let ll=0;const lS=Promise.resolve(),cS=()=>ll||(lS.then(()=>ll=0),ll=Date.now());function uS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;_n(dS(r,n.value),e,5,[r])};return n.value=t,n.attached=cS(),n}function dS(t,e){if(ke(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const _f=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,fS=(t,e,n,r,s,i,o,a,l)=>{const c=s==="svg";e==="class"?ZE(t,r,c):e==="style"?tS(t,n,r):ha(e)?Eu(e)||oS(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):hS(t,e,r,c))?sS(t,e,r,i,o,a,l):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),rS(t,e,r,c))};function hS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&_f(e)&&Me(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return _f(e)&&lt(n)?!1:e in t}const Af=t=>{const e=t.props["onUpdate:modelValue"]||!1;return ke(e)?n=>Do(e,n):e};function pS(t){t.target.composing=!0}function wf(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const cl=Symbol("_assign"),gS={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[cl]=Af(s);const i=r||s.props&&s.props.type==="number";Ss(t,e?"change":"input",o=>{if(o.target.composing)return;let a=t.value;n&&(a=a.trim()),i&&(a=gc(a)),t[cl](a)}),n&&Ss(t,"change",()=>{t.value=t.value.trim()}),e||(Ss(t,"compositionstart",pS),Ss(t,"compositionend",wf),Ss(t,"change",wf))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:r,number:s}},i){if(t[cl]=Af(i),t.composing)return;const o=s||t.type==="number"?gc(t.value):t.value,a=e??"";o!==a&&(document.activeElement===t&&t.type!=="range"&&(n||r&&t.value.trim()===a)||(t.value=a))}},mS=["ctrl","shift","alt","meta"],vS={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>mS.some(n=>t[`${n}Key`]&&!e.includes(n))},ut=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=vS[e[o]];if(a&&a(s,e))return}return t(s,...i)})},yS={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pt=(t,e)=>{const n=t._withKeys||(t._withKeys={}),r=e.join(".");return n[r]||(n[r]=s=>{if(!("key"in s))return;const i=os(s.key);if(e.some(o=>o===i||yS[o]===i))return t(s)})},bS=Lt({patchProp:fS},zE);let Lf;function Um(){return Lf||(Lf=AE(bS))}const If=(...t)=>{Um().render(...t)},TS=(...t)=>{const e=Um().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=SS(r);if(!s)return;const i=e._component;!Me(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,ES(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function ES(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function SS(t){return lt(t)?document.querySelector(t):t}var fo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function j(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}function _S(t){for(var e=-1,n=t==null?0:t.length,r={};++e<n;){var s=t[e];r[s[0]]=s[1]}return r}var AS=_S;const Vm=j(AS);class wS extends Error{constructor(e){super(e),this.name="ElementPlusError"}}function Ku(t,e){throw new wS(`[${t}] ${e}`)}const LS=["class","style"],IS=/^on[A-Z]/,Hm=(t={})=>{const{excludeListeners:e=!1,excludeKeys:n=[]}=t,r=n.concat(LS),s=_t();return M(s?()=>{var i;return Vm(Object.entries((i=s.proxy)==null?void 0:i.$attrs).filter(([o])=>!r.includes(o)&&!(e&&IS.test(o))))}:()=>({}))},cs=Symbol("elForm"),Ki=Symbol("elFormItem"),Gm=Symbol("buttonGroupContextKey"),Km=Symbol("elPaginationKey"),CS=Symbol(),qm=Symbol("scrollbarContextKey"),kc=Symbol(),Cf="__elPropsReservedKey";function Jo(t,e){if(!et(t)||t[Cf])return t;const{values:n,required:r,default:s,type:i,validator:o}=t,a=n||o?l=>{let c=!1,u=[];if(n&&(u=[...n,s],c||(c=u.includes(l))),o&&(c||(c=o(l))),!c&&u.length>0){const d=[...new Set(u)].map(f=>JSON.stringify(f)).join(", ");KE(`Invalid prop: validation failed${e?` for prop "${e}"`:""}. Expected one of [${d}], got value ${JSON.stringify(l)}.`)}return c}:void 0;return{type:typeof i=="object"&&Object.getOwnPropertySymbols(i).includes(kc)?i[kc]:i,required:!!r,default:s,validator:a,[Cf]:!0}}const vt=t=>Vm(Object.entries(t).map(([e,n])=>[e,Jo(n,e)])),ze=t=>({[kc]:t}),qi=t=>t,RS=["large","default","small"],jm=t=>{const e=_t();return M(()=>{var n,r;return(r=(n=e.proxy)==null?void 0:n.$props[t])!=null?r:void 0})};function $S(){this.__data__=[],this.size=0}var zm=$S;const kS=j(zm),DS=X({__proto__:null,default:kS},[zm]),PS=Q(DS);function OS(t,e){return t===e||t!==t&&e!==e}var Wm=OS;const MS=j(Wm),xS=X({__proto__:null,default:MS},[Wm]),Ym=Q(xS);var FS=Ym;function NS(t,e){for(var n=t.length;n--;)if(FS(t[n][0],e))return n;return-1}var Xm=NS;const BS=j(Xm),US=X({__proto__:null,default:BS},[Xm]),Ia=Q(US);var VS=Ia,HS=Array.prototype,GS=HS.splice;function KS(t){var e=this.__data__,n=VS(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():GS.call(e,n,1),--this.size,!0}var Qm=KS;const qS=j(Qm),jS=X({__proto__:null,default:qS},[Qm]),zS=Q(jS);var WS=Ia;function YS(t){var e=this.__data__,n=WS(e,t);return n<0?void 0:e[n][1]}var Jm=YS;const XS=j(Jm),QS=X({__proto__:null,default:XS},[Jm]),JS=Q(QS);var ZS=Ia;function e_(t){return ZS(this.__data__,t)>-1}var Zm=e_;const t_=j(Zm),n_=X({__proto__:null,default:t_},[Zm]),r_=Q(n_);var s_=Ia;function i_(t,e){var n=this.__data__,r=s_(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}var ev=i_;const o_=j(ev),a_=X({__proto__:null,default:o_},[ev]),l_=Q(a_);var c_=PS,u_=zS,d_=JS,f_=r_,h_=l_;function Hs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Hs.prototype.clear=c_;Hs.prototype.delete=u_;Hs.prototype.get=d_;Hs.prototype.has=f_;Hs.prototype.set=h_;var tv=Hs;const p_=j(tv),g_=X({__proto__:null,default:p_},[tv]),Ca=Q(g_);var m_=Ca;function v_(){this.__data__=new m_,this.size=0}var nv=v_;const y_=j(nv),b_=X({__proto__:null,default:y_},[nv]),T_=Q(b_);function E_(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var rv=E_;const S_=j(rv),__=X({__proto__:null,default:S_},[rv]),A_=Q(__);function w_(t){return this.__data__.get(t)}var sv=w_;const L_=j(sv),I_=X({__proto__:null,default:L_},[sv]),C_=Q(I_);function R_(t){return this.__data__.has(t)}var iv=R_;const $_=j(iv),k_=X({__proto__:null,default:$_},[iv]),D_=Q(k_);var P_=typeof fo=="object"&&fo&&fo.Object===Object&&fo,ov=P_;const O_=j(ov),M_=X({__proto__:null,default:O_},[ov]),av=Q(M_);var x_=av,F_=typeof self=="object"&&self&&self.Object===Object&&self,N_=x_||F_||Function("return this")(),lv=N_;const B_=j(lv),U_=X({__proto__:null,default:B_},[lv]),er=Q(U_);var V_=er,H_=V_.Symbol,cv=H_;const G_=j(cv),K_=X({__proto__:null,default:G_},[cv]),Ra=Q(K_);var Rf=Ra,uv=Object.prototype,q_=uv.hasOwnProperty,j_=uv.toString,ei=Rf?Rf.toStringTag:void 0;function z_(t){var e=q_.call(t,ei),n=t[ei];try{t[ei]=void 0;var r=!0}catch{}var s=j_.call(t);return r&&(e?t[ei]=n:delete t[ei]),s}var dv=z_;const W_=j(dv),Y_=X({__proto__:null,default:W_},[dv]),X_=Q(Y_);var Q_=Object.prototype,J_=Q_.toString;function Z_(t){return J_.call(t)}var fv=Z_;const eA=j(fv),tA=X({__proto__:null,default:eA},[fv]),nA=Q(tA);var $f=Ra,rA=X_,sA=nA,iA="[object Null]",oA="[object Undefined]",kf=$f?$f.toStringTag:void 0;function aA(t){return t==null?t===void 0?oA:iA:kf&&kf in Object(t)?rA(t):sA(t)}var hv=aA;const lA=j(hv),cA=X({__proto__:null,default:lA},[hv]),ji=Q(cA);function uA(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var pv=uA;const dA=j(pv),fA=X({__proto__:null,default:dA},[pv]),$a=Q(fA);var hA=ji,pA=$a,gA="[object AsyncFunction]",mA="[object Function]",vA="[object GeneratorFunction]",yA="[object Proxy]";function bA(t){if(!pA(t))return!1;var e=hA(t);return e==mA||e==vA||e==gA||e==yA}var gv=bA;const TA=j(gv),EA=X({__proto__:null,default:TA},[gv]),mv=Q(EA);var SA=er,_A=SA["__core-js_shared__"],vv=_A;const AA=j(vv),wA=X({__proto__:null,default:AA},[vv]),LA=Q(wA);var ul=LA,Df=function(){var t=/[^.]+$/.exec(ul&&ul.keys&&ul.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function IA(t){return!!Df&&Df in t}var yv=IA;const CA=j(yv),RA=X({__proto__:null,default:CA},[yv]),$A=Q(RA);var kA=Function.prototype,DA=kA.toString;function PA(t){if(t!=null){try{return DA.call(t)}catch{}try{return t+""}catch{}}return""}var bv=PA;const OA=j(bv),MA=X({__proto__:null,default:OA},[bv]),Tv=Q(MA);var xA=mv,FA=$A,NA=$a,BA=Tv,UA=/[\\^$.*+?()[\]{}|]/g,VA=/^\[object .+?Constructor\]$/,HA=Function.prototype,GA=Object.prototype,KA=HA.toString,qA=GA.hasOwnProperty,jA=RegExp("^"+KA.call(qA).replace(UA,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function zA(t){if(!NA(t)||FA(t))return!1;var e=xA(t)?jA:VA;return e.test(BA(t))}var Ev=zA;const WA=j(Ev),YA=X({__proto__:null,default:WA},[Ev]),XA=Q(YA);function QA(t,e){return t==null?void 0:t[e]}var Sv=QA;const JA=j(Sv),ZA=X({__proto__:null,default:JA},[Sv]),ew=Q(ZA);var tw=XA,nw=ew;function rw(t,e){var n=nw(t,e);return tw(n)?n:void 0}var _v=rw;const sw=j(_v),iw=X({__proto__:null,default:sw},[_v]),Gs=Q(iw);var ow=Gs,aw=er,lw=ow(aw,"Map"),Av=lw;const cw=j(Av),uw=X({__proto__:null,default:cw},[Av]),qu=Q(uw);var dw=Gs,fw=dw(Object,"create"),wv=fw;const hw=j(wv),pw=X({__proto__:null,default:hw},[wv]),ka=Q(pw);var Pf=ka;function gw(){this.__data__=Pf?Pf(null):{},this.size=0}var Lv=gw;const mw=j(Lv),vw=X({__proto__:null,default:mw},[Lv]),yw=Q(vw);function bw(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Iv=bw;const Tw=j(Iv),Ew=X({__proto__:null,default:Tw},[Iv]),Sw=Q(Ew);var _w=ka,Aw="__lodash_hash_undefined__",ww=Object.prototype,Lw=ww.hasOwnProperty;function Iw(t){var e=this.__data__;if(_w){var n=e[t];return n===Aw?void 0:n}return Lw.call(e,t)?e[t]:void 0}var Cv=Iw;const Cw=j(Cv),Rw=X({__proto__:null,default:Cw},[Cv]),$w=Q(Rw);var kw=ka,Dw=Object.prototype,Pw=Dw.hasOwnProperty;function Ow(t){var e=this.__data__;return kw?e[t]!==void 0:Pw.call(e,t)}var Rv=Ow;const Mw=j(Rv),xw=X({__proto__:null,default:Mw},[Rv]),Fw=Q(xw);var Nw=ka,Bw="__lodash_hash_undefined__";function Uw(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Nw&&e===void 0?Bw:e,this}var $v=Uw;const Vw=j($v),Hw=X({__proto__:null,default:Vw},[$v]),Gw=Q(Hw);var Kw=yw,qw=Sw,jw=$w,zw=Fw,Ww=Gw;function Ks(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Ks.prototype.clear=Kw;Ks.prototype.delete=qw;Ks.prototype.get=jw;Ks.prototype.has=zw;Ks.prototype.set=Ww;var kv=Ks;const Yw=j(kv),Xw=X({__proto__:null,default:Yw},[kv]),Qw=Q(Xw);var Of=Qw,Jw=Ca,Zw=qu;function eL(){this.size=0,this.__data__={hash:new Of,map:new(Zw||Jw),string:new Of}}var Dv=eL;const tL=j(Dv),nL=X({__proto__:null,default:tL},[Dv]),rL=Q(nL);function sL(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var Pv=sL;const iL=j(Pv),oL=X({__proto__:null,default:iL},[Pv]),aL=Q(oL);var lL=aL;function cL(t,e){var n=t.__data__;return lL(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Ov=cL;const uL=j(Ov),dL=X({__proto__:null,default:uL},[Ov]),Da=Q(dL);var fL=Da;function hL(t){var e=fL(this,t).delete(t);return this.size-=e?1:0,e}var Mv=hL;const pL=j(Mv),gL=X({__proto__:null,default:pL},[Mv]),mL=Q(gL);var vL=Da;function yL(t){return vL(this,t).get(t)}var xv=yL;const bL=j(xv),TL=X({__proto__:null,default:bL},[xv]),EL=Q(TL);var SL=Da;function _L(t){return SL(this,t).has(t)}var Fv=_L;const AL=j(Fv),wL=X({__proto__:null,default:AL},[Fv]),LL=Q(wL);var IL=Da;function CL(t,e){var n=IL(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}var Nv=CL;const RL=j(Nv),$L=X({__proto__:null,default:RL},[Nv]),kL=Q($L);var DL=rL,PL=mL,OL=EL,ML=LL,xL=kL;function qs(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}qs.prototype.clear=DL;qs.prototype.delete=PL;qs.prototype.get=OL;qs.prototype.has=ML;qs.prototype.set=xL;var Bv=qs;const FL=j(Bv),NL=X({__proto__:null,default:FL},[Bv]),ju=Q(NL);var BL=Ca,UL=qu,VL=ju,HL=200;function GL(t,e){var n=this.__data__;if(n instanceof BL){var r=n.__data__;if(!UL||r.length<HL-1)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new VL(r)}return n.set(t,e),this.size=n.size,this}var Uv=GL;const KL=j(Uv),qL=X({__proto__:null,default:KL},[Uv]),jL=Q(qL);var zL=Ca,WL=T_,YL=A_,XL=C_,QL=D_,JL=jL;function js(t){var e=this.__data__=new zL(t);this.size=e.size}js.prototype.clear=WL;js.prototype.delete=YL;js.prototype.get=XL;js.prototype.has=QL;js.prototype.set=JL;var Vv=js;const ZL=j(Vv),eI=X({__proto__:null,default:ZL},[Vv]),tI=Q(eI);var nI="__lodash_hash_undefined__";function rI(t){return this.__data__.set(t,nI),this}var Hv=rI;const sI=j(Hv),iI=X({__proto__:null,default:sI},[Hv]),oI=Q(iI);function aI(t){return this.__data__.has(t)}var Gv=aI;const lI=j(Gv),cI=X({__proto__:null,default:lI},[Gv]),uI=Q(cI);var dI=ju,fI=oI,hI=uI;function Zo(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new dI;++e<n;)this.add(t[e])}Zo.prototype.add=Zo.prototype.push=fI;Zo.prototype.has=hI;var Kv=Zo;const pI=j(Kv),gI=X({__proto__:null,default:pI},[Kv]),mI=Q(gI);function vI(t,e){for(var n=-1,r=t==null?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var qv=vI;const yI=j(qv),bI=X({__proto__:null,default:yI},[qv]),TI=Q(bI);function EI(t,e){return t.has(e)}var jv=EI;const SI=j(jv),_I=X({__proto__:null,default:SI},[jv]),AI=Q(_I);var wI=mI,LI=TI,II=AI,CI=1,RI=2;function $I(t,e,n,r,s,i){var o=n&CI,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var c=i.get(t),u=i.get(e);if(c&&u)return c==e&&u==t;var d=-1,f=!0,h=n&RI?new wI:void 0;for(i.set(t,e),i.set(e,t);++d<a;){var p=t[d],g=e[d];if(r)var v=o?r(g,p,d,e,t,i):r(p,g,d,t,e,i);if(v!==void 0){if(v)continue;f=!1;break}if(h){if(!LI(e,function(m,y){if(!II(h,y)&&(p===m||s(p,m,n,r,i)))return h.push(y)})){f=!1;break}}else if(!(p===g||s(p,g,n,r,i))){f=!1;break}}return i.delete(t),i.delete(e),f}var zv=$I;const kI=j(zv),DI=X({__proto__:null,default:kI},[zv]),Wv=Q(DI);var PI=er,OI=PI.Uint8Array,Yv=OI;const MI=j(Yv),xI=X({__proto__:null,default:MI},[Yv]),FI=Q(xI);function NI(t){var e=-1,n=Array(t.size);return t.forEach(function(r,s){n[++e]=[s,r]}),n}var Xv=NI;const BI=j(Xv),UI=X({__proto__:null,default:BI},[Xv]),VI=Q(UI);function HI(t){var e=-1,n=Array(t.size);return t.forEach(function(r){n[++e]=r}),n}var Qv=HI;const GI=j(Qv),KI=X({__proto__:null,default:GI},[Qv]),qI=Q(KI);var Mf=Ra,xf=FI,jI=Ym,zI=Wv,WI=VI,YI=qI,XI=1,QI=2,JI="[object Boolean]",ZI="[object Date]",eC="[object Error]",tC="[object Map]",nC="[object Number]",rC="[object RegExp]",sC="[object Set]",iC="[object String]",oC="[object Symbol]",aC="[object ArrayBuffer]",lC="[object DataView]",Ff=Mf?Mf.prototype:void 0,dl=Ff?Ff.valueOf:void 0;function cC(t,e,n,r,s,i,o){switch(n){case lC:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case aC:return!(t.byteLength!=e.byteLength||!i(new xf(t),new xf(e)));case JI:case ZI:case nC:return jI(+t,+e);case eC:return t.name==e.name&&t.message==e.message;case rC:case iC:return t==e+"";case tC:var a=WI;case sC:var l=r&XI;if(a||(a=YI),t.size!=e.size&&!l)return!1;var c=o.get(t);if(c)return c==e;r|=QI,o.set(t,e);var u=zI(a(t),a(e),r,s,i,o);return o.delete(t),u;case oC:if(dl)return dl.call(t)==dl.call(e)}return!1}var Jv=cC;const uC=j(Jv),dC=X({__proto__:null,default:uC},[Jv]),fC=Q(dC);function hC(t,e){for(var n=-1,r=e.length,s=t.length;++n<r;)t[s+n]=e[n];return t}var Zv=hC;const pC=j(Zv),gC=X({__proto__:null,default:pC},[Zv]),mC=Q(gC);var vC=Array.isArray,ey=vC;const yC=j(ey),bC=X({__proto__:null,default:yC},[ey]),zs=Q(bC);var TC=mC,EC=zs;function SC(t,e,n){var r=e(t);return EC(t)?r:TC(r,n(t))}var ty=SC;const _C=j(ty),AC=X({__proto__:null,default:_C},[ty]),wC=Q(AC);function LC(t,e){for(var n=-1,r=t==null?0:t.length,s=0,i=[];++n<r;){var o=t[n];e(o,n,t)&&(i[s++]=o)}return i}var ny=LC;const IC=j(ny),CC=X({__proto__:null,default:IC},[ny]),RC=Q(CC);function $C(){return[]}var ry=$C;const kC=j(ry),DC=X({__proto__:null,default:kC},[ry]),PC=Q(DC);var OC=RC,MC=PC,xC=Object.prototype,FC=xC.propertyIsEnumerable,Nf=Object.getOwnPropertySymbols,NC=Nf?function(t){return t==null?[]:(t=Object(t),OC(Nf(t),function(e){return FC.call(t,e)}))}:MC,sy=NC;const BC=j(sy),UC=X({__proto__:null,default:BC},[sy]),VC=Q(UC);function HC(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}var iy=HC;const GC=j(iy),KC=X({__proto__:null,default:GC},[iy]),qC=Q(KC);function jC(t){return t!=null&&typeof t=="object"}var oy=jC;const zC=j(oy),WC=X({__proto__:null,default:zC},[oy]),zi=Q(WC);var YC=ji,XC=zi,QC="[object Arguments]";function JC(t){return XC(t)&&YC(t)==QC}var ay=JC;const ZC=j(ay),eR=X({__proto__:null,default:ZC},[ay]),tR=Q(eR);var Bf=tR,nR=zi,ly=Object.prototype,rR=ly.hasOwnProperty,sR=ly.propertyIsEnumerable,iR=Bf(function(){return arguments}())?Bf:function(t){return nR(t)&&rR.call(t,"callee")&&!sR.call(t,"callee")},cy=iR;const oR=j(cy),aR=X({__proto__:null,default:oR},[cy]),lR=Q(aR);var ea={exports:{}};function cR(){return!1}var uy=cR;const uR=j(uy),dR=X({__proto__:null,default:uR},[uy]),fR=Q(dR);ea.exports;(function(t,e){var n=er,r=fR,s=e&&!e.nodeType&&e,i=s&&!0&&t&&!t.nodeType&&t,o=i&&i.exports===s,a=o?n.Buffer:void 0,l=a?a.isBuffer:void 0,c=l||r;t.exports=c})(ea,ea.exports);var dy=ea.exports;const hR=j(dy),pR=X({__proto__:null,default:hR},[dy]),fy=Q(pR);var gR=9007199254740991,mR=/^(?:0|[1-9]\d*)$/;function vR(t,e){var n=typeof t;return e=e??gR,!!e&&(n=="number"||n!="symbol"&&mR.test(t))&&t>-1&&t%1==0&&t<e}var hy=vR;const yR=j(hy),bR=X({__proto__:null,default:yR},[hy]),TR=Q(bR);var ER=9007199254740991;function SR(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ER}var py=SR;const _R=j(py),AR=X({__proto__:null,default:_R},[py]),gy=Q(AR);var wR=ji,LR=gy,IR=zi,CR="[object Arguments]",RR="[object Array]",$R="[object Boolean]",kR="[object Date]",DR="[object Error]",PR="[object Function]",OR="[object Map]",MR="[object Number]",xR="[object Object]",FR="[object RegExp]",NR="[object Set]",BR="[object String]",UR="[object WeakMap]",VR="[object ArrayBuffer]",HR="[object DataView]",GR="[object Float32Array]",KR="[object Float64Array]",qR="[object Int8Array]",jR="[object Int16Array]",zR="[object Int32Array]",WR="[object Uint8Array]",YR="[object Uint8ClampedArray]",XR="[object Uint16Array]",QR="[object Uint32Array]",dt={};dt[GR]=dt[KR]=dt[qR]=dt[jR]=dt[zR]=dt[WR]=dt[YR]=dt[XR]=dt[QR]=!0;dt[CR]=dt[RR]=dt[VR]=dt[$R]=dt[HR]=dt[kR]=dt[DR]=dt[PR]=dt[OR]=dt[MR]=dt[xR]=dt[FR]=dt[NR]=dt[BR]=dt[UR]=!1;function JR(t){return IR(t)&&LR(t.length)&&!!dt[wR(t)]}var my=JR;const ZR=j(my),e$=X({__proto__:null,default:ZR},[my]),t$=Q(e$);function n$(t){return function(e){return t(e)}}var vy=n$;const r$=j(vy),s$=X({__proto__:null,default:r$},[vy]),i$=Q(s$);var ta={exports:{}};ta.exports;(function(t,e){var n=av,r=e&&!e.nodeType&&e,s=r&&!0&&t&&!t.nodeType&&t,i=s&&s.exports===r,o=i&&n.process,a=function(){try{var l=s&&s.require&&s.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();t.exports=a})(ta,ta.exports);var yy=ta.exports;const o$=j(yy),a$=X({__proto__:null,default:o$},[yy]),l$=Q(a$);var c$=t$,u$=i$,Uf=l$,Vf=Uf&&Uf.isTypedArray,d$=Vf?u$(Vf):c$,by=d$;const f$=j(by),h$=X({__proto__:null,default:f$},[by]),Ty=Q(h$);var p$=qC,g$=lR,m$=zs,v$=fy,y$=TR,b$=Ty,T$=Object.prototype,E$=T$.hasOwnProperty;function S$(t,e){var n=m$(t),r=!n&&g$(t),s=!n&&!r&&v$(t),i=!n&&!r&&!s&&b$(t),o=n||r||s||i,a=o?p$(t.length,String):[],l=a.length;for(var c in t)(e||E$.call(t,c))&&!(o&&(c=="length"||s&&(c=="offset"||c=="parent")||i&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||y$(c,l)))&&a.push(c);return a}var Ey=S$;const _$=j(Ey),A$=X({__proto__:null,default:_$},[Ey]),w$=Q(A$);var L$=Object.prototype;function I$(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||L$;return t===n}var Sy=I$;const C$=j(Sy),R$=X({__proto__:null,default:C$},[Sy]),$$=Q(R$);function k$(t,e){return function(n){return t(e(n))}}var _y=k$;const D$=j(_y),P$=X({__proto__:null,default:D$},[_y]),O$=Q(P$);var M$=O$,x$=M$(Object.keys,Object),Ay=x$;const F$=j(Ay),N$=X({__proto__:null,default:F$},[Ay]),B$=Q(N$);var U$=$$,V$=B$,H$=Object.prototype,G$=H$.hasOwnProperty;function K$(t){if(!U$(t))return V$(t);var e=[];for(var n in Object(t))G$.call(t,n)&&n!="constructor"&&e.push(n);return e}var wy=K$;const q$=j(wy),j$=X({__proto__:null,default:q$},[wy]),z$=Q(j$);var W$=mv,Y$=gy;function X$(t){return t!=null&&Y$(t.length)&&!W$(t)}var Ly=X$;const Q$=j(Ly),J$=X({__proto__:null,default:Q$},[Ly]),Z$=Q(J$);var e2=w$,t2=z$,n2=Z$;function r2(t){return n2(t)?e2(t):t2(t)}var Iy=r2;const s2=j(Iy),i2=X({__proto__:null,default:s2},[Iy]),o2=Q(i2);var a2=wC,l2=VC,c2=o2;function u2(t){return a2(t,c2,l2)}var Cy=u2;const d2=j(Cy),f2=X({__proto__:null,default:d2},[Cy]),h2=Q(f2);var Hf=h2,p2=1,g2=Object.prototype,m2=g2.hasOwnProperty;function v2(t,e,n,r,s,i){var o=n&p2,a=Hf(t),l=a.length,c=Hf(e),u=c.length;if(l!=u&&!o)return!1;for(var d=l;d--;){var f=a[d];if(!(o?f in e:m2.call(e,f)))return!1}var h=i.get(t),p=i.get(e);if(h&&p)return h==e&&p==t;var g=!0;i.set(t,e),i.set(e,t);for(var v=o;++d<l;){f=a[d];var m=t[f],y=e[f];if(r)var T=o?r(y,m,f,e,t,i):r(m,y,f,t,e,i);if(!(T===void 0?m===y||s(m,y,n,r,i):T)){g=!1;break}v||(v=f=="constructor")}if(g&&!v){var E=t.constructor,S=e.constructor;E!=S&&"constructor"in t&&"constructor"in e&&!(typeof E=="function"&&E instanceof E&&typeof S=="function"&&S instanceof S)&&(g=!1)}return i.delete(t),i.delete(e),g}var Ry=v2;const y2=j(Ry),b2=X({__proto__:null,default:y2},[Ry]),T2=Q(b2);var E2=Gs,S2=er,_2=E2(S2,"DataView"),$y=_2;const A2=j($y),w2=X({__proto__:null,default:A2},[$y]),L2=Q(w2);var I2=Gs,C2=er,R2=I2(C2,"Promise"),ky=R2;const $2=j(ky),k2=X({__proto__:null,default:$2},[ky]),D2=Q(k2);var P2=Gs,O2=er,M2=P2(O2,"Set"),Dy=M2;const x2=j(Dy),F2=X({__proto__:null,default:x2},[Dy]),N2=Q(F2);var B2=Gs,U2=er,V2=B2(U2,"WeakMap"),Py=V2;const H2=j(Py),G2=X({__proto__:null,default:H2},[Py]),K2=Q(G2);var Dc=L2,Pc=qu,Oc=D2,Mc=N2,xc=K2,Oy=ji,Ws=Tv,Gf="[object Map]",q2="[object Object]",Kf="[object Promise]",qf="[object Set]",jf="[object WeakMap]",zf="[object DataView]",j2=Ws(Dc),z2=Ws(Pc),W2=Ws(Oc),Y2=Ws(Mc),X2=Ws(xc),Gr=Oy;(Dc&&Gr(new Dc(new ArrayBuffer(1)))!=zf||Pc&&Gr(new Pc)!=Gf||Oc&&Gr(Oc.resolve())!=Kf||Mc&&Gr(new Mc)!=qf||xc&&Gr(new xc)!=jf)&&(Gr=function(t){var e=Oy(t),n=e==q2?t.constructor:void 0,r=n?Ws(n):"";if(r)switch(r){case j2:return zf;case z2:return Gf;case W2:return Kf;case Y2:return qf;case X2:return jf}return e});var My=Gr;const Q2=j(My),J2=X({__proto__:null,default:Q2},[My]),Z2=Q(J2);var fl=tI,ek=Wv,tk=fC,nk=T2,Wf=Z2,Yf=zs,Xf=fy,rk=Ty,sk=1,Qf="[object Arguments]",Jf="[object Array]",ho="[object Object]",ik=Object.prototype,Zf=ik.hasOwnProperty;function ok(t,e,n,r,s,i){var o=Yf(t),a=Yf(e),l=o?Jf:Wf(t),c=a?Jf:Wf(e);l=l==Qf?ho:l,c=c==Qf?ho:c;var u=l==ho,d=c==ho,f=l==c;if(f&&Xf(t)){if(!Xf(e))return!1;o=!0,u=!1}if(f&&!u)return i||(i=new fl),o||rk(t)?ek(t,e,n,r,s,i):tk(t,e,l,n,r,s,i);if(!(n&sk)){var h=u&&Zf.call(t,"__wrapped__"),p=d&&Zf.call(e,"__wrapped__");if(h||p){var g=h?t.value():t,v=p?e.value():e;return i||(i=new fl),s(g,v,n,r,i)}}return f?(i||(i=new fl),nk(t,e,n,r,s,i)):!1}var xy=ok;const ak=j(xy),lk=X({__proto__:null,default:ak},[xy]),ck=Q(lk);var uk=ck,eh=zi;function Fy(t,e,n,r,s){return t===e?!0:t==null||e==null||!eh(t)&&!eh(e)?t!==t&&e!==e:uk(t,e,n,r,Fy,s)}var Ny=Fy;const dk=j(Ny),fk=X({__proto__:null,default:dk},[Ny]),hk=Q(fk);function Pa(t){return Vg()?(Hg(t),!0):!1}const it=typeof window<"u",pk=t=>typeof t=="string",hl=()=>{};function gk(t,e){function n(...r){t(()=>e.apply(this,r),{fn:e,thisArg:this,args:r})}return n}function mk(t,e=!0,n=!0){let r=0,s,i=!n;const o=()=>{s&&(clearTimeout(s),s=void 0)};return l=>{const c=Le(t),u=Date.now()-r;if(o(),c<=0)return r=Date.now(),l();u>c&&(r=Date.now(),i?i=!1:l()),e&&(s=setTimeout(()=>{r=Date.now(),n||(i=!0),o(),l()},c)),!n&&!s&&(s=setTimeout(()=>i=!0,c))}}function vk(t,e=200,n=!0,r=!0){return gk(mk(e,n,r),t)}function Fc(t,e,n={}){const{immediate:r=!0}=n,s=Z(!1);let i=null;function o(){i&&(clearTimeout(i),i=null)}function a(){s.value=!1,o()}function l(...c){o(),s.value=!0,i=setTimeout(()=>{s.value=!1,i=null,t(...c)},Le(e))}return r&&(s.value=!0,it&&l()),Pa(a),{isPending:s,start:l,stop:a}}function yi(t){var e;const n=Le(t);return(e=n==null?void 0:n.$el)!=null?e:n}const Oa=it?window:void 0;function pn(...t){let e,n,r,s;if(pk(t[0])?([n,r,s]=t,e=Oa):[e,n,r,s]=t,!e)return hl;let i=hl;const o=Ie(()=>Le(e),l=>{i(),l&&(l.addEventListener(n,r,s),i=()=>{l.removeEventListener(n,r,s),i=hl})},{immediate:!0,flush:"post"}),a=()=>{o(),i()};return Pa(a),a}function yk(t,e,n={}){const{window:r=Oa,ignore:s}=n;if(!r)return;const i=Z(!0),a=[pn(r,"click",c=>{const u=yi(t),d=c.composedPath();!u||u===c.target||d.includes(u)||!i.value||s&&s.length>0&&s.some(f=>{const h=yi(f);return h&&(c.target===h||d.includes(h))})||e(c)},{passive:!0,capture:!0}),pn(r,"pointerdown",c=>{const u=yi(t);i.value=!!u&&!c.composedPath().includes(u)},{passive:!0})];return()=>a.forEach(c=>c())}const th=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nh="__vueuse_ssr_handlers__";th[nh]=th[nh]||{};function bk(t,e,{window:n=Oa}={}){const r=Z(""),s=M(()=>{var i;return yi(e)||((i=n==null?void 0:n.document)==null?void 0:i.documentElement)});return Ie([s,()=>Le(t)],([i,o])=>{i&&n&&(r.value=n.getComputedStyle(i).getPropertyValue(o))},{immediate:!0}),Ie(r,i=>{var o;(o=s.value)!=null&&o.style&&s.value.style.setProperty(Le(t),i)}),r}var rh=Object.getOwnPropertySymbols,Tk=Object.prototype.hasOwnProperty,Ek=Object.prototype.propertyIsEnumerable,Sk=(t,e)=>{var n={};for(var r in t)Tk.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&rh)for(var r of rh(t))e.indexOf(r)<0&&Ek.call(t,r)&&(n[r]=t[r]);return n};function _k(t,e,n={}){const r=n,{window:s=Oa}=r,i=Sk(r,["window"]);let o;const a=s&&"ResizeObserver"in s,l=()=>{o&&(o.disconnect(),o=void 0)},c=Ie(()=>yi(t),d=>{l(),a&&s&&d&&(o=new s.ResizeObserver(e),o.observe(d,i))},{immediate:!0,flush:"post"}),u=()=>{l(),c()};return Pa(u),{isSupported:a,stop:u}}var sh,ih;it&&(window!=null&&window.navigator)&&((sh=window==null?void 0:window.navigator)!=null&&sh.platform)&&/iP(ad|hone|od)/.test((ih=window==null?void 0:window.navigator)==null?void 0:ih.platform);var Ak=Object.defineProperty,oh=Object.getOwnPropertySymbols,wk=Object.prototype.hasOwnProperty,Lk=Object.prototype.propertyIsEnumerable,ah=(t,e,n)=>e in t?Ak(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ik=(t,e)=>{for(var n in e||(e={}))wk.call(e,n)&&ah(t,n,e[n]);if(oh)for(var n of oh(e))Lk.call(e,n)&&ah(t,n,e[n]);return t};const Ck={top:0,left:0,bottom:0,right:0,height:0,width:0};Ik({text:""},Ck);const Rk="Util",Pn=(t,e="")=>{let n=t;return e.split(".").map(r=>{n=n==null?void 0:n[r]}),n};function pl(t,e,n){let r=t,s,i;if(t&&Xe(t,e))s=e,i=r==null?void 0:r[e];else{e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");const o=e.split(".");let a=0;for(a;a<o.length-1&&!(!r&&!n);a++){const l=o[a];if(l in r)r=r[l];else{n&&Ku(Rk,"Please transfer a valid prop path to form item!");break}}s=o[a],i=r==null?void 0:r[o[a]]}return{o:r,k:s,v:i}}const $k=()=>Math.floor(Math.random()*1e4),kk=(t="")=>String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&"),Dk=function(){return it&&!!window.navigator.userAgent.match(/firefox/i)},cW=function(t){const e=["transform","transition","animation"],n=["ms-","webkit-"];return e.forEach(r=>{const s=t[r];r&&s&&n.forEach(i=>{t[i+r]=s})}),t},Nc=t=>typeof t=="boolean",Jn=t=>typeof t=="number";function gl(t){let e=!1;return function(...n){e||(e=!0,window.requestAnimationFrame(()=>{Reflect.apply(t,this,n),e=!1}))}}function Bc(t){return t===void 0}function Oi(t){return lt(t)?t:Jn(t)?`${t}px`:""}const Pk=Z({});function Wi(t){const e=Ke(CS,Pk);return t?et(e.value)&&Xe(e.value,t)?M(()=>e.value[t]):Z(void 0):e}const By=Jo({type:String,values:RS,required:!1}),Ys=(t,e={})=>{const n=Z(void 0),r=e.prop?n:jm("size"),s=e.global?n:Wi("size"),i=e.form?{size:void 0}:Ke(cs,void 0),o=e.formItem?{size:void 0}:Ke(Ki,void 0);return M(()=>r.value||Le(t)||(o==null?void 0:o.size)||(i==null?void 0:i.size)||s.value||"default")},Uy=t=>{const e=jm("disabled"),n=Ke(cs,void 0);return M(()=>e.value||Le(t)||(n==null?void 0:n.disabled)||!1)},Ok=t=>({focus:()=>{var e,n;(n=(e=t.value)==null?void 0:e.focus)==null||n.call(e)}}),Vy=()=>{const t=Ke(cs,void 0),e=Ke(Ki,void 0);return{form:t,formItem:e}};var Mk=ji,xk=zi,Fk="[object Symbol]";function Nk(t){return typeof t=="symbol"||xk(t)&&Mk(t)==Fk}var Hy=Nk;const Bk=j(Hy),Uk=X({__proto__:null,default:Bk},[Hy]),Ma=Q(Uk);var Vk=zs,Hk=Ma,Gk=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kk=/^\w*$/;function qk(t,e){if(Vk(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Hk(t)?!0:Kk.test(t)||!Gk.test(t)||e!=null&&t in Object(e)}var Gy=qk;const jk=j(Gy),zk=X({__proto__:null,default:jk},[Gy]),Wk=Q(zk);var Ky=ju,Yk="Expected a function";function zu(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(Yk);var n=function(){var r=arguments,s=e?e.apply(this,r):r[0],i=n.cache;if(i.has(s))return i.get(s);var o=t.apply(this,r);return n.cache=i.set(s,o)||i,o};return n.cache=new(zu.Cache||Ky),n}zu.Cache=Ky;var qy=zu;const Xk=j(qy),Qk=X({__proto__:null,default:Xk},[qy]),Jk=Q(Qk);var Zk=Jk,eD=500;function tD(t){var e=Zk(t,function(r){return n.size===eD&&n.clear(),r}),n=e.cache;return e}var jy=tD;const nD=j(jy),rD=X({__proto__:null,default:nD},[jy]),sD=Q(rD);var iD=sD,oD=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aD=/\\(\\)?/g,lD=iD(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(oD,function(n,r,s,i){e.push(s?i.replace(aD,"$1"):r||n)}),e}),zy=lD;const cD=j(zy),uD=X({__proto__:null,default:cD},[zy]),dD=Q(uD);function fD(t,e){for(var n=-1,r=t==null?0:t.length,s=Array(r);++n<r;)s[n]=e(t[n],n,t);return s}var Wy=fD;const hD=j(Wy),pD=X({__proto__:null,default:hD},[Wy]),gD=Q(pD);var lh=Ra,mD=gD,vD=zs,yD=Ma,bD=1/0,ch=lh?lh.prototype:void 0,uh=ch?ch.toString:void 0;function Yy(t){if(typeof t=="string")return t;if(vD(t))return mD(t,Yy)+"";if(yD(t))return uh?uh.call(t):"";var e=t+"";return e=="0"&&1/t==-bD?"-0":e}var Xy=Yy;const TD=j(Xy),ED=X({__proto__:null,default:TD},[Xy]),SD=Q(ED);var _D=SD;function AD(t){return t==null?"":_D(t)}var Qy=AD;const wD=j(Qy),LD=X({__proto__:null,default:wD},[Qy]),ID=Q(LD);var CD=zs,RD=Wk,$D=dD,kD=ID;function DD(t,e){return CD(t)?t:RD(t,e)?[t]:$D(kD(t))}var Jy=DD;const PD=j(Jy),OD=X({__proto__:null,default:PD},[Jy]),MD=Q(OD);var xD=Ma,FD=1/0;function ND(t){if(typeof t=="string"||xD(t))return t;var e=t+"";return e=="0"&&1/t==-FD?"-0":e}var Zy=ND;const BD=j(Zy),UD=X({__proto__:null,default:BD},[Zy]),VD=Q(UD);var HD=MD,GD=VD;function KD(t,e){e=HD(e,t);for(var n=0,r=e.length;t!=null&&n<r;)t=t[GD(e[n++])];return n&&n==r?t:void 0}var e0=KD;const qD=j(e0),jD=X({__proto__:null,default:qD},[e0]),zD=Q(jD);var WD=zD;function YD(t,e,n){var r=t==null?void 0:WD(t,e);return r===void 0?n:r}var XD=YD;const QD=j(XD);var JD={name:"en",el:{colorpicker:{confirm:"OK",clear:"Clear"},datepicker:{now:"Now",today:"Today",cancel:"Cancel",clear:"Clear",confirm:"OK",selectDate:"Select date",selectTime:"Select time",startDate:"Start Date",startTime:"Start Time",endDate:"End Date",endTime:"End Time",prevYear:"Previous Year",nextYear:"Next Year",prevMonth:"Previous Month",nextMonth:"Next Month",year:"",month1:"January",month2:"February",month3:"March",month4:"April",month5:"May",month6:"June",month7:"July",month8:"August",month9:"September",month10:"October",month11:"November",month12:"December",week:"week",weeks:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat"},months:{jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec"}},select:{loading:"Loading",noMatch:"No matching data",noData:"No data",placeholder:"Select"},cascader:{noMatch:"No matching data",loading:"Loading",placeholder:"Select",noData:"No data"},pagination:{goto:"Go to",pagesize:"/page",total:"Total {total}",pageClassifier:"",deprecationWarning:"Deprecated usages detected, please refer to the el-pagination documentation for more details"},messagebox:{title:"Message",confirm:"OK",cancel:"Cancel",error:"Illegal input"},upload:{deleteTip:"press delete to remove",delete:"Delete",preview:"Preview",continue:"Continue"},table:{emptyText:"No Data",confirmFilter:"Confirm",resetFilter:"Reset",clearFilter:"All",sumText:"Sum"},tree:{emptyText:"No Data"},transfer:{noMatch:"No matching data",noData:"No data",titles:["List 1","List 2"],filterPlaceholder:"Enter keyword",noCheckedFormat:"{total} items",hasCheckedFormat:"{checked}/{total} checked"},image:{error:"FAILED"},pageHeader:{title:"Back"},popconfirm:{confirmButtonText:"Yes",cancelButtonText:"No"}}};const ZD=t=>(e,n)=>eP(e,n,Le(t)),eP=(t,e,n)=>QD(n,t,t).replace(/\{(\w+)\}/g,(r,s)=>{var i;return`${(i=e==null?void 0:e[s])!=null?i:`{${s}}`}`}),tP=t=>{const e=M(()=>Le(t).name),n=It(t)?t:Z(t);return{lang:e,locale:n,t:ZD(t)}},pr=()=>{const t=Wi("locale");return tP(M(()=>t.value||JD))};let po;function nP(){var t;if(!it)return 0;if(po!==void 0)return po;const e=document.createElement("div");e.className="el-scrollbar__wrap",e.style.visibility="hidden",e.style.width="100px",e.style.position="absolute",e.style.top="-9999px",document.body.appendChild(e);const n=e.offsetWidth;e.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",e.appendChild(r);const s=r.offsetWidth;return(t=e.parentNode)==null||t.removeChild(e),po=n-s,po}const Uc=function(t){return(t||"").split(" ").filter(e=>!!e.trim())},Ds=function(t,e,n,r=!1){t&&e&&n&&(t==null||t.addEventListener(e,n,r))},t0=function(t,e,n,r=!1){t&&e&&n&&(t==null||t.removeEventListener(e,n,r))};function dh(t,e){if(!t||!e)return!1;if(e.indexOf(" ")!==-1)throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(t.getAttribute("class")||"").split(" ").includes(e)}function li(t,e){if(!t)return;let n=t.getAttribute("class")||"";const r=Uc(n),s=(e||"").split(" ").filter(i=>!r.includes(i)&&!!i.trim());t.classList?t.classList.add(...s):(n+=` ${s.join(" ")}`,t.setAttribute("class",n))}function Mo(t,e){if(!t||!e)return;const n=Uc(e);let r=t.getAttribute("class")||"";if(t.classList){t.classList.remove(...n);return}n.forEach(i=>{r=r.replace(` ${i} `," ")});const s=Uc(r).join(" ");t.setAttribute("class",s)}const bi=function(t,e){var n;if(!it||!t||!e)return"";e=Nn(e),e==="float"&&(e="cssFloat");try{const r=t.style[e];if(r)return r;const s=(n=document.defaultView)==null?void 0:n.getComputedStyle(t,"");return s?s[e]:""}catch{return t.style[e]}},rP=(t,e)=>it?(e==null?bi(t,"overflow"):e?bi(t,"overflow-y"):bi(t,"overflow-x")).match(/(scroll|auto|overlay)/):null,sP=(t,e)=>{if(!it)return;let n=t;for(;n;){if([window,document,document.documentElement].includes(n))return window;if(rP(n,e))return n;n=n.parentNode}return n},iP=(t,e)=>{if(!it||!t||!e)return!1;const n=t.getBoundingClientRect();let r;return e instanceof Element?r=e.getBoundingClientRect():r={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0},n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right},fh=t=>{let e=0,n=t;for(;n;)e+=n.offsetTop,n=n.offsetParent;return e},uW=(t,e)=>Math.abs(fh(t)-fh(e)),ir=(t,e,{checkForDefaultPrevented:n=!0}={})=>s=>{const i=t==null?void 0:t(s);if(n===!1||!i)return e==null?void 0:e(s)},oP=t=>{if(It(t)||Ku("[useLockscreen]","You need to pass a ref param to this function"),!it||dh(document.body,"el-popup-parent--hidden"))return;let e=0,n=!1,r="0",s=0;const i=()=>{Mo(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=r)};Ie(t,o=>{if(!o){i();return}n=!dh(document.body,"el-popup-parent--hidden"),n&&(r=document.body.style.paddingRight,s=parseInt(bi(document.body,"paddingRight"),10)),e=nP();const a=document.documentElement.clientHeight<document.body.scrollHeight,l=bi(document.body,"overflowY");e>0&&(a||l==="scroll")&&n&&(document.body.style.paddingRight=`${s+e}px`),li(document.body,"el-popup-parent--hidden")}),Hg(()=>i())},Jt={tab:"Tab",enter:"Enter",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown",esc:"Escape",delete:"Delete",backspace:"Backspace",numpadEnter:"NumpadEnter",pageUp:"PageUp",pageDown:"PageDown",home:"Home",end:"End"},aP='a[href],button:not([disabled]),button:not([hidden]),:not([tabindex="-1"]),input:not([disabled]),input:not([type="hidden"]),select:not([disabled]),textarea:not([disabled])',lP=t=>getComputedStyle(t).position==="fixed"?!1:t.offsetParent!==null,hh=t=>Array.from(t.querySelectorAll(aP)).filter(e=>cP(e)&&lP(e)),cP=t=>{if(t.tabIndex>0||t.tabIndex===0&&t.getAttribute("tabIndex")!==null)return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&t.rel!=="ignore";case"INPUT":return!(t.type==="hidden"||t.type==="file");case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Rs=[],uP=t=>{Rs.length!==0&&t.code===Jt.esc&&(t.stopPropagation(),Rs[Rs.length-1].handleClose())},dP=(t,e)=>{Ie(e,n=>{n?Rs.push(t):Rs.splice(Rs.findIndex(r=>r===t),1)})};it&&pn(document,"keydown",uP);const n0=t=>{const e={[t]:Jo({type:ze(Boolean),default:null}),[`onUpdate:${t}`]:Jo({type:ze(Function)})},n=[`update:${t}`];return{useModelToggle:({indicator:s,shouldHideWhenRouteChanges:i,shouldProceed:o,onShow:a,onHide:l})=>{const c=_t(),u=c.props,{emit:d}=c,f=`update:${t}`,h=M(()=>Me(u[`onUpdate:${t}`])),p=M(()=>u[t]===null),g=()=>{s.value!==!0&&(s.value=!0,Me(a)&&a())},v=()=>{s.value!==!1&&(s.value=!1,Me(l)&&l())},m=()=>{if(u.disabled===!0||Me(o)&&!o())return;const S=h.value&&it;S&&d(f,!0),(p.value||!S)&&g()},y=()=>{if(u.disabled===!0||!it)return;const S=h.value&&it;S&&d(f,!1),(p.value||!S)&&v()},T=S=>{Nc(S)&&(u.disabled&&S?h.value&&d(f,!1):s.value!==S&&(S?g():v()))},E=()=>{s.value?y():m()};return Ie(()=>u[t],T),i&&c.appContext.config.globalProperties.$route!==void 0&&Ie(()=>({...c.proxy.$route}),()=>{i.value&&s.value&&y()}),mt(()=>{T(u[t])}),{hide:y,show:m,toggle:E}},useModelToggleProps:e,useModelToggleEmits:n}};n0("modelValue");const fP=(t,e)=>{let n;Ie(()=>t.value,r=>{var s,i;r?(n=document.activeElement,It(e)&&((i=(s=e.value).focus)==null||i.call(s))):n.focus()})},r0=t=>{if(!t)return{onClick:At,onMousedown:At,onMouseup:At};let e=!1,n=!1;return{onClick:o=>{e&&n&&t(o),e=n=!1},onMousedown:o=>{e=o.target===o.currentTarget},onMouseup:o=>{n=o.target===o.currentTarget}}};function hP(){let t;const e=(r,s)=>{n(),t=window.setTimeout(r,s)},n=()=>window.clearTimeout(t);return Pa(()=>n()),{registerTimeout:e,cancelTimeout:n}}const pP={prefix:Math.floor(Math.random()*1e4),current:0},gP=Symbol("elIdInjection"),mP=t=>{const e=Ke(gP,pP);return M(()=>Le(t)||`el-id-${e.prefix}-${e.current++}`)},vP=t=>{const e=n=>{const r=n;r.key===Jt.esc&&(t==null||t(r))};mt(()=>{Ds(document,"keydown",e)}),Un(()=>{t0(document,"keydown",e)})};let ph;const s0=`el-popper-container-${$k()}`,yP=`#${s0}`,bP=()=>{Em(()=>{if(it&&!ph){const t=document.createElement("div");t.id=s0,document.body.appendChild(t),ph=t}})},TP=vt({showAfter:{type:Number,default:0},hideAfter:{type:Number,default:200}}),EP=({showAfter:t,hideAfter:e,open:n,close:r})=>{const{registerTimeout:s}=hP();return{onOpen:()=>{s(()=>{n()},Le(t))},onClose:()=>{s(()=>{r()},Le(e))}}},i0=Symbol("elForwardRef"),SP=t=>{Vt(i0,{setForwardRef:n=>{t.value=n}})},_P=t=>({mounted(e){t(e)},updated(e){t(e)},unmounted(){t(null)}}),AP="el",wP="is-",Vr=(t,e,n,r,s)=>{let i=`${t}-${e}`;return n&&(i+=`-${n}`),r&&(i+=`__${r}`),s&&(i+=`--${s}`),i},Gt=t=>{const e=M(()=>Wi("namespace").value||AP);return{namespace:e,b:(u="")=>Vr(Le(e),t,u,"",""),e:u=>u?Vr(Le(e),t,"",u,""):"",m:u=>u?Vr(Le(e),t,"","",u):"",be:(u,d)=>u&&d?Vr(Le(e),t,u,d,""):"",em:(u,d)=>u&&d?Vr(Le(e),t,"",u,d):"",bm:(u,d)=>u&&d?Vr(Le(e),t,u,"",d):"",bem:(u,d,f)=>u&&d&&f?Vr(Le(e),t,u,d,f):"",is:(u,d=!0)=>d?`${wP}${u}`:""}},LP=t=>{t.preventDefault(),t.stopPropagation()},IP=()=>{Mt==null||Mt.doOnModalClick()};let Vc=!1;const gh=function(){if(!it)return;let t=Mt.modalDom;return t?Vc=!0:(Vc=!1,t=document.createElement("div"),Mt.modalDom=t,Ds(t,"touchmove",LP),Ds(t,"click",IP)),t},go={},Mt={modalFade:!0,modalDom:void 0,globalInitialZIndex:2e3,zIndex:0,getInitialZIndex(){var t;return _t()?(t=Wi("zIndex").value)!=null?t:this.globalInitialZIndex:this.globalInitialZIndex},getInstance(t){return go[t]},register(t,e){t&&e&&(go[t]=e)},deregister(t){t&&(go[t]=null,delete go[t])},nextZIndex(){return this.getInitialZIndex()+ ++this.zIndex},modalStack:[],doOnModalClick(){const t=Mt.modalStack[Mt.modalStack.length-1];if(!t)return;const e=Mt.getInstance(t.id);e&&e.closeOnClickModal.value&&e.close()},openModal(t,e,n,r,s){if(!it||!t||e===void 0)return;this.modalFade=s;const i=this.modalStack;for(let a=0,l=i.length;a<l;a++)if(i[a].id===t)return;const o=gh();li(o,"v-modal"),this.modalFade&&!Vc&&li(o,"v-modal-enter"),r&&r.trim().split(/\s+/).forEach(l=>li(o,l)),setTimeout(()=>{Mo(o,"v-modal-enter")},200),n&&n.parentNode&&n.parentNode.nodeType!==11?n.parentNode.appendChild(o):document.body.appendChild(o),e&&(o.style.zIndex=String(e)),o.tabIndex=0,o.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:r})},closeModal(t){const e=this.modalStack,n=gh();if(e.length>0){const r=e[e.length-1];if(r.id===t)r.modalClass&&r.modalClass.trim().split(/\s+/).forEach(i=>Mo(n,i)),e.pop(),e.length>0&&(n.style.zIndex=`${e[e.length-1].zIndex}`);else for(let s=e.length-1;s>=0;s--)if(e[s].id===t){e.splice(s,1);break}}e.length===0&&(this.modalFade&&li(n,"v-modal-leave"),setTimeout(()=>{e.length===0&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",Mt.modalDom=void 0),Mo(n,"v-modal-leave")},200))}},CP=function(){if(it&&Mt.modalStack.length>0){const t=Mt.modalStack[Mt.modalStack.length-1];return t?Mt.getInstance(t.id):void 0}};it&&window.addEventListener("keydown",function(t){if(t.code===Jt.esc){const e=CP();e&&e.closeOnPressEscape.value&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}});const Wt=(t,e)=>{if(t.install=n=>{for(const r of[t,...Object.values(e??{})])n.component(r.name,r)},e)for(const[n,r]of Object.entries(e))t[n]=r;return t},RP=(t,e)=>(t.install=n=>{n.config.globalProperties[e]=t},t),Pr=t=>(t.install=At,t);var qe=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const $P=vt({size:{type:ze([Number,String])},color:{type:String}}),kP=ye({name:"ElIcon",inheritAttrs:!1,props:$P,setup(t){const e=Gt("icon"),n=M(()=>!t.size&&!t.color?{}:{fontSize:Bc(t.size)?void 0:Oi(t.size),"--color":t.color});return{ns:e,style:n}}});function DP(t,e,n,r,s,i){return C(),F("i",Qn({class:t.ns.b(),style:t.style},t.$attrs),[Fe(t.$slots,"default")],16)}var PP=qe(kP,[["render",DP]]);const gr=Wt(PP);var St=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n};const OP=ye({name:"ArrowLeft"}),MP={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},xP=L("path",{fill:"currentColor",d:"M609.408 149.376L277.76 489.6a32 32 0 000 44.672l331.648 340.352a29.12 29.12 0 0041.728 0 30.592 30.592 0 000-42.752L339.264 511.936l311.872-319.872a30.592 30.592 0 000-42.688 29.12 29.12 0 00-41.728 0z"},null,-1),FP=[xP];function NP(t,e,n,r,s,i){return C(),F("svg",MP,FP)}var o0=St(OP,[["render",NP]]);const BP=ye({name:"ArrowRight"}),UP={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},VP=L("path",{fill:"currentColor",d:"M340.864 149.312a30.592 30.592 0 000 42.752L652.736 512 340.864 831.872a30.592 30.592 0 000 42.752 29.12 29.12 0 0041.728 0L714.24 534.336a32 32 0 000-44.672L382.592 149.376a29.12 29.12 0 00-41.728 0z"},null,-1),HP=[VP];function GP(t,e,n,r,s,i){return C(),F("svg",UP,HP)}var a0=St(BP,[["render",GP]]);const KP=ye({name:"ArrowUp"}),qP={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},jP=L("path",{fill:"currentColor",d:"M488.832 344.32l-339.84 356.672a32 32 0 000 44.16l.384.384a29.44 29.44 0 0042.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0042.688 0l.384-.384a32 32 0 000-44.16L535.168 344.32a32 32 0 00-46.336 0z"},null,-1),zP=[jP];function WP(t,e,n,r,s,i){return C(),F("svg",qP,zP)}var YP=St(KP,[["render",WP]]);const XP=ye({name:"CircleCheck"}),QP={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},JP=L("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),ZP=L("path",{fill:"currentColor",d:"M745.344 361.344a32 32 0 0145.312 45.312l-288 288a32 32 0 01-45.312 0l-160-160a32 32 0 1145.312-45.312L480 626.752l265.344-265.408z"},null,-1),eO=[JP,ZP];function tO(t,e,n,r,s,i){return C(),F("svg",QP,eO)}var nO=St(XP,[["render",tO]]);const rO=ye({name:"CircleCloseFilled"}),sO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},iO=L("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 393.664L407.936 353.6a38.4 38.4 0 10-54.336 54.336L457.664 512 353.6 616.064a38.4 38.4 0 1054.336 54.336L512 566.336 616.064 670.4a38.4 38.4 0 1054.336-54.336L566.336 512 670.4 407.936a38.4 38.4 0 10-54.336-54.336L512 457.664z"},null,-1),oO=[iO];function aO(t,e,n,r,s,i){return C(),F("svg",sO,oO)}var l0=St(rO,[["render",aO]]);const lO=ye({name:"CircleClose"}),cO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},uO=L("path",{fill:"currentColor",d:"M466.752 512l-90.496-90.496a32 32 0 0145.248-45.248L512 466.752l90.496-90.496a32 32 0 1145.248 45.248L557.248 512l90.496 90.496a32 32 0 11-45.248 45.248L512 557.248l-90.496 90.496a32 32 0 01-45.248-45.248L466.752 512z"},null,-1),dO=L("path",{fill:"currentColor",d:"M512 896a384 384 0 100-768 384 384 0 000 768zm0 64a448 448 0 110-896 448 448 0 010 896z"},null,-1),fO=[uO,dO];function hO(t,e,n,r,s,i){return C(),F("svg",cO,fO)}var Wu=St(lO,[["render",hO]]);const pO=ye({name:"Close"}),gO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},mO=L("path",{fill:"currentColor",d:"M764.288 214.592L512 466.88 259.712 214.592a31.936 31.936 0 00-45.12 45.12L466.752 512 214.528 764.224a31.936 31.936 0 1045.12 45.184L512 557.184l252.288 252.288a31.936 31.936 0 0045.12-45.12L557.12 512.064l252.288-252.352a31.936 31.936 0 10-45.12-45.184z"},null,-1),vO=[mO];function yO(t,e,n,r,s,i){return C(),F("svg",gO,vO)}var xa=St(pO,[["render",yO]]);const bO=ye({name:"DArrowLeft"}),TO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},EO=L("path",{fill:"currentColor",d:"M529.408 149.376a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L259.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L197.76 534.272a32 32 0 010-44.672l331.648-340.224zm256 0a29.12 29.12 0 0141.728 0 30.592 30.592 0 010 42.688L515.264 511.936l311.872 319.936a30.592 30.592 0 01-.512 43.264 29.12 29.12 0 01-41.216-.512L453.76 534.272a32 32 0 010-44.672l331.648-340.224z"},null,-1),SO=[EO];function _O(t,e,n,r,s,i){return C(),F("svg",TO,SO)}var AO=St(bO,[["render",_O]]);const wO=ye({name:"DArrowRight"}),LO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},IO=L("path",{fill:"currentColor",d:"M452.864 149.312a29.12 29.12 0 0141.728.064L826.24 489.664a32 32 0 010 44.672L494.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L764.736 512 452.864 192a30.592 30.592 0 010-42.688zm-256 0a29.12 29.12 0 0141.728.064L570.24 489.664a32 32 0 010 44.672L238.592 874.624a29.12 29.12 0 01-41.728 0 30.592 30.592 0 010-42.752L508.736 512 196.864 192a30.592 30.592 0 010-42.688z"},null,-1),CO=[IO];function RO(t,e,n,r,s,i){return C(),F("svg",LO,CO)}var $O=St(wO,[["render",RO]]);const kO=ye({name:"FullScreen"}),DO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},PO=L("path",{fill:"currentColor",d:"M160 96.064l192 .192a32 32 0 010 64l-192-.192V352a32 32 0 01-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1164 0v191.936l192-.192a32 32 0 110 64l-192 .192zM864 96.064V96h64v256a32 32 0 11-64 0V160.064l-192 .192a32 32 0 110-64l192-.192zm0 831.872l-192-.192a32 32 0 010-64l192 .192V672a32 32 0 1164 0v256h-64v-.064z"},null,-1),OO=[PO];function MO(t,e,n,r,s,i){return C(),F("svg",DO,OO)}var xO=St(kO,[["render",MO]]);const FO=ye({name:"InfoFilled"}),NO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},BO=L("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896.064A448 448 0 01512 64zm67.2 275.072c33.28 0 60.288-23.104 60.288-57.344s-27.072-57.344-60.288-57.344c-33.28 0-60.16 23.104-60.16 57.344s26.88 57.344 60.16 57.344zM590.912 699.2c0-6.848 2.368-24.64 1.024-34.752l-52.608 60.544c-10.88 11.456-24.512 19.392-30.912 17.28a12.992 12.992 0 01-8.256-14.72l87.68-276.992c7.168-35.136-12.544-67.2-54.336-71.296-44.096 0-108.992 44.736-148.48 101.504 0 6.784-1.28 23.68.064 33.792l52.544-60.608c10.88-11.328 23.552-19.328 29.952-17.152a12.8 12.8 0 017.808 16.128L388.48 728.576c-10.048 32.256 8.96 63.872 55.04 71.04 67.84 0 107.904-43.648 147.456-100.416z"},null,-1),UO=[BO];function VO(t,e,n,r,s,i){return C(),F("svg",NO,UO)}var c0=St(FO,[["render",VO]]);const HO=ye({name:"Loading"}),GO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},KO=L("path",{fill:"currentColor",d:"M512 64a32 32 0 0132 32v192a32 32 0 01-64 0V96a32 32 0 0132-32zm0 640a32 32 0 0132 32v192a32 32 0 11-64 0V736a32 32 0 0132-32zm448-192a32 32 0 01-32 32H736a32 32 0 110-64h192a32 32 0 0132 32zm-640 0a32 32 0 01-32 32H96a32 32 0 010-64h192a32 32 0 0132 32zM195.2 195.2a32 32 0 0145.248 0L376.32 331.008a32 32 0 01-45.248 45.248L195.2 240.448a32 32 0 010-45.248zm452.544 452.544a32 32 0 0145.248 0L828.8 783.552a32 32 0 01-45.248 45.248L647.744 692.992a32 32 0 010-45.248zM828.8 195.264a32 32 0 010 45.184L692.992 376.32a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0zm-452.544 452.48a32 32 0 010 45.248L240.448 828.8a32 32 0 01-45.248-45.248l135.808-135.808a32 32 0 0145.248 0z"},null,-1),qO=[KO];function jO(t,e,n,r,s,i){return C(),F("svg",GO,qO)}var Yu=St(HO,[["render",jO]]);const zO=ye({name:"MoreFilled"}),WO={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},YO=L("path",{fill:"currentColor",d:"M176 416a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224zm336 0a112 112 0 110 224 112 112 0 010-224z"},null,-1),XO=[YO];function QO(t,e,n,r,s,i){return C(),F("svg",WO,XO)}var JO=St(zO,[["render",QO]]);const ZO=ye({name:"RefreshLeft"}),eM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},tM=L("path",{fill:"currentColor",d:"M289.088 296.704h92.992a32 32 0 010 64H232.96a32 32 0 01-32-32V179.712a32 32 0 0164 0v50.56a384 384 0 01643.84 282.88 384 384 0 01-383.936 384 384 384 0 01-384-384h64a320 320 0 10640 0 320 320 0 00-555.712-216.448z"},null,-1),nM=[tM];function rM(t,e,n,r,s,i){return C(),F("svg",eM,nM)}var sM=St(ZO,[["render",rM]]);const iM=ye({name:"RefreshRight"}),oM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},aM=L("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1164 0v149.056a32 32 0 01-32 32H667.52a32 32 0 110-64h92.992A320 320 0 10524.8 833.152a320 320 0 00320-320h64a384 384 0 01-384 384 384 384 0 01-384-384 384 384 0 01643.712-282.88z"},null,-1),lM=[aM];function cM(t,e,n,r,s,i){return C(),F("svg",oM,lM)}var uM=St(iM,[["render",cM]]);const dM=ye({name:"ScaleToOriginal"}),fM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},hM=L("path",{fill:"currentColor",d:"M813.176 180.706a60.235 60.235 0 0160.236 60.235v481.883a60.235 60.235 0 01-60.236 60.235H210.824a60.235 60.235 0 01-60.236-60.235V240.94a60.235 60.235 0 0160.236-60.235h602.352zm0-60.235H210.824A120.47 120.47 0 0090.353 240.94v481.883a120.47 120.47 0 00120.47 120.47h602.353a120.47 120.47 0 00120.471-120.47V240.94a120.47 120.47 0 00-120.47-120.47zm-120.47 180.705a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 0060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zm-361.412 0a30.118 30.118 0 00-30.118 30.118v301.177a30.118 30.118 0 1060.236 0V331.294a30.118 30.118 0 00-30.118-30.118zM512 361.412a30.118 30.118 0 00-30.118 30.117v30.118a30.118 30.118 0 0060.236 0V391.53A30.118 30.118 0 00512 361.412zM512 512a30.118 30.118 0 00-30.118 30.118v30.117a30.118 30.118 0 0060.236 0v-30.117A30.118 30.118 0 00512 512z"},null,-1),pM=[hM];function gM(t,e,n,r,s,i){return C(),F("svg",fM,pM)}var mM=St(dM,[["render",gM]]);const vM=ye({name:"SuccessFilled"}),yM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},bM=L("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm-55.808 536.384l-99.52-99.584a38.4 38.4 0 10-54.336 54.336l126.72 126.72a38.272 38.272 0 0054.336 0l262.4-262.464a38.4 38.4 0 10-54.272-54.336L456.192 600.384z"},null,-1),TM=[bM];function EM(t,e,n,r,s,i){return C(),F("svg",yM,TM)}var u0=St(vM,[["render",EM]]);const SM=ye({name:"View"}),_M={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},AM=L("path",{fill:"currentColor",d:"M512 160c320 0 512 352 512 352S832 864 512 864 0 512 0 512s192-352 512-352zm0 64c-225.28 0-384.128 208.064-436.8 288 52.608 79.872 211.456 288 436.8 288 225.28 0 384.128-208.064 436.8-288-52.608-79.872-211.456-288-436.8-288zm0 64a224 224 0 110 448 224 224 0 010-448zm0 64a160.192 160.192 0 00-160 160c0 88.192 71.744 160 160 160s160-71.808 160-160-71.744-160-160-160z"},null,-1),wM=[AM];function LM(t,e,n,r,s,i){return C(),F("svg",_M,wM)}var IM=St(SM,[["render",LM]]);const CM=ye({name:"WarningFilled"}),RM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},$M=L("path",{fill:"currentColor",d:"M512 64a448 448 0 110 896 448 448 0 010-896zm0 192a58.432 58.432 0 00-58.24 63.744l23.36 256.384a35.072 35.072 0 0069.76 0l23.296-256.384A58.432 58.432 0 00512 256zm0 512a51.2 51.2 0 100-102.4 51.2 51.2 0 000 102.4z"},null,-1),kM=[$M];function DM(t,e,n,r,s,i){return C(),F("svg",RM,kM)}var d0=St(CM,[["render",DM]]);const PM=ye({name:"ZoomIn"}),OM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},MM=L("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zm-32-384v-96a32 32 0 0164 0v96h96a32 32 0 010 64h-96v96a32 32 0 01-64 0v-96h-96a32 32 0 010-64h96z"},null,-1),xM=[MM];function FM(t,e,n,r,s,i){return C(),F("svg",OM,xM)}var NM=St(PM,[["render",FM]]);const BM=ye({name:"ZoomOut"}),UM={class:"icon",width:"200",height:"200",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},VM=L("path",{fill:"currentColor",d:"M795.904 750.72l124.992 124.928a32 32 0 01-45.248 45.248L750.656 795.904a416 416 0 1145.248-45.248zM480 832a352 352 0 100-704 352 352 0 000 704zM352 448h256a32 32 0 010 64H352a32 32 0 010-64z"},null,-1),HM=[VM];function GM(t,e,n,r,s,i){return C(),F("svg",UM,HM)}var KM=St(BM,[["render",GM]]);ze([String,Object]);const qM={Close:xa},jM={Close:xa,SuccessFilled:u0,InfoFilled:c0,WarningFilled:d0,CircleCloseFilled:l0},mh={success:u0,warning:d0,error:l0,info:c0},zM={validating:Yu,success:nO,error:Wu};var WM=er,YM=function(){return WM.Date.now()},f0=YM;const XM=j(f0),QM=X({__proto__:null,default:XM},[f0]),JM=Q(QM);var ZM=/\s/;function ex(t){for(var e=t.length;e--&&ZM.test(t.charAt(e)););return e}var h0=ex;const tx=j(h0),nx=X({__proto__:null,default:tx},[h0]),rx=Q(nx);var sx=rx,ix=/^\s+/;function ox(t){return t&&t.slice(0,sx(t)+1).replace(ix,"")}var p0=ox;const ax=j(p0),lx=X({__proto__:null,default:ax},[p0]),cx=Q(lx);var ux=cx,vh=$a,dx=Ma,yh=NaN,fx=/^[-+]0x[0-9a-f]+$/i,hx=/^0b[01]+$/i,px=/^0o[0-7]+$/i,gx=parseInt;function mx(t){if(typeof t=="number")return t;if(dx(t))return yh;if(vh(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=vh(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=ux(t);var n=hx.test(t);return n||px.test(t)?gx(t.slice(2),n?2:8):fx.test(t)?yh:+t}var g0=mx;const vx=j(g0),yx=X({__proto__:null,default:vx},[g0]),bx=Q(yx);var Tx=$a,ml=JM,bh=bx,Ex="Expected a function",Sx=Math.max,_x=Math.min;function Ax(t,e,n){var r,s,i,o,a,l,c=0,u=!1,d=!1,f=!0;if(typeof t!="function")throw new TypeError(Ex);e=bh(e)||0,Tx(n)&&(u=!!n.leading,d="maxWait"in n,i=d?Sx(bh(n.maxWait)||0,e):i,f="trailing"in n?!!n.trailing:f);function h(_){var R=r,k=s;return r=s=void 0,c=_,o=t.apply(k,R),o}function p(_){return c=_,a=setTimeout(m,e),u?h(_):o}function g(_){var R=_-l,k=_-c,P=e-R;return d?_x(P,i-k):P}function v(_){var R=_-l,k=_-c;return l===void 0||R>=e||R<0||d&&k>=i}function m(){var _=ml();if(v(_))return y(_);a=setTimeout(m,g(_))}function y(_){return a=void 0,f&&r?h(_):(r=s=void 0,o)}function T(){a!==void 0&&clearTimeout(a),c=0,r=l=s=a=void 0}function E(){return a===void 0?o:y(ml())}function S(){var _=ml(),R=v(_);if(r=arguments,s=this,l=_,R){if(a===void 0)return p(l);if(d)return clearTimeout(a),a=setTimeout(m,e),h(l)}return a===void 0&&(a=setTimeout(m,e)),o}return S.cancel=T,S.flush=E,S}var m0=Ax;const Hc=j(m0),dW=X({__proto__:null,default:Hc},[m0]),Er=new Map;let Th;it&&(Ds(document,"mousedown",t=>Th=t),Ds(document,"mouseup",t=>{for(const e of Er.values())for(const{documentHandler:n}of e)n(t,Th)}));function Eh(t,e){let n=[];return Array.isArray(e.arg)?n=e.arg:e.arg instanceof HTMLElement&&n.push(e.arg),function(r,s){const i=e.instance.popperRef,o=r.target,a=s==null?void 0:s.target,l=!e||!e.instance,c=!o||!a,u=t.contains(o)||t.contains(a),d=t===o,f=n.length&&n.some(p=>p==null?void 0:p.contains(o))||n.length&&n.includes(a),h=i&&(i.contains(o)||i.contains(a));l||c||u||d||f||h||e.value(r,s)}}const wx={beforeMount(t,e){Er.has(t)||Er.set(t,[]),Er.get(t).push({documentHandler:Eh(t,e),bindingFn:e.value})},updated(t,e){Er.has(t)||Er.set(t,[]);const n=Er.get(t),r=n.findIndex(i=>i.bindingFn===e.oldValue),s={documentHandler:Eh(t,e),bindingFn:e.value};r>=0?n.splice(r,1,s):n.push(s)},unmounted(t){Er.delete(t)}},Gc="_trap-focus-children",Yr=[],Sh=t=>{if(Yr.length===0)return;const e=Yr[Yr.length-1][Gc];if(e.length>0&&t.code===Jt.tab){if(e.length===1){t.preventDefault(),document.activeElement!==e[0]&&e[0].focus();return}const n=t.shiftKey,r=t.target===e[0],s=t.target===e[e.length-1];r&&n&&(t.preventDefault(),e[e.length-1].focus()),s&&!n&&(t.preventDefault(),e[0].focus())}},Lx={beforeMount(t){t[Gc]=hh(t),Yr.push(t),Yr.length<=1&&Ds(document,"keydown",Sh)},updated(t){nt(()=>{t[Gc]=hh(t)})},unmounted(){Yr.shift(),Yr.length===0&&t0(document,"keydown",Sh)}},Ix=function(t){for(const e of t){const n=e.target.__resizeListeners__||[];n.length&&n.forEach(r=>{r()})}},Xu=function(t,e){!it||!t||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new ResizeObserver(Ix),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},Qu=function(t,e){var n;!t||!t.__resizeListeners__||(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||(n=t.__ro__)==null||n.disconnect())},hn="update:modelValue",v0="change";function y0(t){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t)}let $n;const Cx=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,Rx=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function $x(t){const e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),s=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:Rx.map(o=>`${o}:${e.getPropertyValue(o)}`).join(";"),paddingSize:r,borderSize:s,boxSizing:n}}function _h(t,e=1,n){var r;$n||($n=document.createElement("textarea"),document.body.appendChild($n));const{paddingSize:s,borderSize:i,boxSizing:o,contextStyle:a}=$x(t);$n.setAttribute("style",`${a};${Cx}`),$n.value=t.value||t.placeholder||"";let l=$n.scrollHeight;const c={};o==="border-box"?l=l+i:o==="content-box"&&(l=l-s),$n.value="";const u=$n.scrollHeight-s;if(Jn(e)){let d=u*e;o==="border-box"&&(d=d+s+i),l=Math.max(d,l),c.minHeight=`${d}px`}if(Jn(n)){let d=u*n;o==="border-box"&&(d=d+s+i),l=Math.min(d,l)}return c.height=`${l}px`,(r=$n.parentNode)==null||r.removeChild($n),$n=void 0,c}const kx=vt({size:By,disabled:Boolean,modelValue:{type:ze(void 0),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:ze([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:ze([String,Object]),default:""},prefixIcon:{type:ze([String,Object]),default:""},label:{type:String},tabindex:{type:[Number,String]},validateEvent:{type:Boolean,default:!0},inputStyle:{type:ze([Object,Array,String]),default:()=>qi({})}}),Dx={[hn]:t=>lt(t),input:t=>lt(t),change:t=>lt(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof KeyboardEvent,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},Px={suffix:"append",prefix:"prepend"},Ox=ye({name:"ElInput",components:{ElIcon:gr,CircleClose:Wu,IconView:IM},inheritAttrs:!1,props:kx,emits:Dx,setup(t,{slots:e,emit:n,attrs:r}){const s=_t(),i=Hm(),{form:o,formItem:a}=Vy(),l=Ys(),c=Uy(),u=Gt("input"),d=Gt("textarea"),f=Z(),h=Z(),p=Z(!1),g=Z(!1),v=Z(!1),m=Z(!1),y=zo(t.inputStyle),T=M(()=>f.value||h.value),E=M(()=>{var D;return(D=o==null?void 0:o.statusIcon)!=null?D:!1}),S=M(()=>(a==null?void 0:a.validateState)||""),_=M(()=>zM[S.value]),R=M(()=>r.style),k=M(()=>[t.inputStyle,y.value,{resize:t.resize}]),P=M(()=>t.modelValue===null||t.modelValue===void 0?"":String(t.modelValue)),$=M(()=>t.clearable&&!c.value&&!t.readonly&&!!P.value&&(p.value||g.value)),N=M(()=>t.showPassword&&!c.value&&!t.readonly&&(!!P.value||p.value)),w=M(()=>t.showWordLimit&&!!i.value.maxlength&&(t.type==="text"||t.type==="textarea")&&!c.value&&!t.readonly&&!t.showPassword),U=M(()=>Array.from(P.value).length),z=M(()=>!!w.value&&U.value>Number(i.value.maxlength)),ne=()=>{const{type:D,autosize:V}=t;if(!(!it||D!=="textarea"))if(V){const G=et(V)?V.minRows:void 0,ae=et(V)?V.maxRows:void 0;y.value={..._h(h.value,G,ae)}}else y.value={minHeight:_h(h.value).minHeight}},oe=()=>{const D=T.value;!D||D.value===P.value||(D.value=P.value)},W=D=>{const{el:V}=s.vnode;if(!V)return;const ae=Array.from(V.querySelectorAll(`.${u.e(D)}`)).find(se=>se.parentNode===V);if(!ae)return;const ge=Px[D];e[ge]?ae.style.transform=`translateX(${D==="suffix"?"-":""}${V.querySelector(`.${u.be("group",ge)}`).offsetWidth}px)`:ae.removeAttribute("style")},q=()=>{W("prefix"),W("suffix")},pe=D=>{const{value:V}=D.target;v.value||V!==P.value&&(n(hn,V),n("input",V),nt(oe))},J=D=>{n("change",D.target.value)},le=()=>{nt(()=>{var D;(D=T.value)==null||D.focus()})},me=()=>{var D;(D=T.value)==null||D.blur()},Ve=D=>{p.value=!0,n("focus",D)},je=D=>{var V;p.value=!1,n("blur",D),t.validateEvent&&((V=a==null?void 0:a.validate)==null||V.call(a,"blur"))},He=()=>{var D;(D=T.value)==null||D.select()},Je=D=>{n("compositionstart",D),v.value=!0},H=D=>{var V;n("compositionupdate",D);const G=(V=D.target)==null?void 0:V.value,ae=G[G.length-1]||"";v.value=!y0(ae)},he=D=>{n("compositionend",D),v.value&&(v.value=!1,pe(D))},fe=()=>{n(hn,""),n("change",""),n("clear"),n("input","")},Te=()=>{m.value=!m.value,le()},Ue=M(()=>!!e.suffix||!!t.suffixIcon||$.value||t.showPassword||w.value||!!S.value&&E.value);return Ie(()=>t.modelValue,()=>{var D;nt(ne),t.validateEvent&&((D=a==null?void 0:a.validate)==null||D.call(a,"change"))}),Ie(P,()=>oe()),Ie(()=>t.type,()=>{nt(()=>{oe(),ne(),q()})}),mt(()=>{oe(),q(),nt(ne)}),Fu(()=>{nt(q)}),{input:f,textarea:h,attrs:i,inputSize:l,validateState:S,validateIcon:_,containerStyle:R,computedTextareaStyle:k,inputDisabled:c,showClear:$,showPwdVisible:N,isWordLimitVisible:w,textLength:U,hovering:g,inputExceed:z,passwordVisible:m,inputOrTextarea:T,suffixVisible:Ue,needStatusIcon:E,resizeTextarea:ne,handleInput:pe,handleChange:J,handleFocus:Ve,handleBlur:je,handleCompositionStart:Je,handleCompositionUpdate:H,handleCompositionEnd:he,handlePasswordVisible:Te,clear:fe,select:He,focus:le,blur:me,onMouseLeave:D=>{g.value=!1,n("mouseleave",D)},onMouseEnter:D=>{g.value=!0,n("mouseenter",D)},handleKeydown:D=>{n("keydown",D)},nsInput:u,nsTextarea:d}}}),Mx=["type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder"],xx=["tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];function Fx(t,e,n,r,s,i){const o=Ce("el-icon"),a=Ce("circle-close"),l=Ce("icon-view");return at((C(),F("div",{class:ie([t.type==="textarea"?t.nsTextarea.b():t.nsInput.b(),t.nsInput.m(t.inputSize),t.nsInput.is("disabled",t.inputDisabled),t.nsInput.is("exceed",t.inputExceed),{[t.nsInput.b("group")]:t.$slots.prepend||t.$slots.append,[t.nsInput.bm("group","append")]:t.$slots.append,[t.nsInput.bm("group","prepend")]:t.$slots.prepend,[t.nsInput.m("prefix")]:t.$slots.prefix||t.prefixIcon,[t.nsInput.m("suffix")]:t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword,[t.nsInput.m("suffix--password-clear")]:t.clearable&&t.showPassword},t.$attrs.class]),style:Ge(t.containerStyle),onMouseenter:e[17]||(e[17]=(...c)=>t.onMouseEnter&&t.onMouseEnter(...c)),onMouseleave:e[18]||(e[18]=(...c)=>t.onMouseLeave&&t.onMouseLeave(...c))},[ce(" input "),t.type!=="textarea"?(C(),F(Ne,{key:0},[ce(" prepend slot "),t.$slots.prepend?(C(),F("div",{key:0,class:ie(t.nsInput.be("group","prepend"))},[Fe(t.$slots,"prepend")],2)):ce("v-if",!0),L("input",Qn({ref:"input",class:t.nsInput.e("inner")},t.attrs,{type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autocomplete,tabindex:t.tabindex,"aria-label":t.label,placeholder:t.placeholder,style:t.inputStyle,onCompositionstart:e[0]||(e[0]=(...c)=>t.handleCompositionStart&&t.handleCompositionStart(...c)),onCompositionupdate:e[1]||(e[1]=(...c)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...c)),onCompositionend:e[2]||(e[2]=(...c)=>t.handleCompositionEnd&&t.handleCompositionEnd(...c)),onInput:e[3]||(e[3]=(...c)=>t.handleInput&&t.handleInput(...c)),onFocus:e[4]||(e[4]=(...c)=>t.handleFocus&&t.handleFocus(...c)),onBlur:e[5]||(e[5]=(...c)=>t.handleBlur&&t.handleBlur(...c)),onChange:e[6]||(e[6]=(...c)=>t.handleChange&&t.handleChange(...c)),onKeydown:e[7]||(e[7]=(...c)=>t.handleKeydown&&t.handleKeydown(...c))}),null,16,Mx),ce(" prefix slot "),t.$slots.prefix||t.prefixIcon?(C(),F("span",{key:1,class:ie(t.nsInput.e("prefix"))},[L("span",{class:ie(t.nsInput.e("prefix-inner"))},[Fe(t.$slots,"prefix"),t.prefixIcon?(C(),Se(o,{key:0,class:ie(t.nsInput.e("icon"))},{default:ue(()=>[(C(),Se(Fn(t.prefixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)],2)):ce("v-if",!0),ce(" suffix slot "),t.suffixVisible?(C(),F("span",{key:2,class:ie(t.nsInput.e("suffix"))},[L("span",{class:ie(t.nsInput.e("suffix-inner"))},[!t.showClear||!t.showPwdVisible||!t.isWordLimitVisible?(C(),F(Ne,{key:0},[Fe(t.$slots,"suffix"),t.suffixIcon?(C(),Se(o,{key:0,class:ie(t.nsInput.e("icon"))},{default:ue(()=>[(C(),Se(Fn(t.suffixIcon)))]),_:1},8,["class"])):ce("v-if",!0)],64)):ce("v-if",!0),t.showClear?(C(),Se(o,{key:1,class:ie([t.nsInput.e("icon"),t.nsInput.e("clear")]),onMousedown:e[8]||(e[8]=ut(()=>{},["prevent"])),onClick:t.clear},{default:ue(()=>[Y(a)]),_:1},8,["class","onClick"])):ce("v-if",!0),t.showPwdVisible?(C(),Se(o,{key:2,class:ie([t.nsInput.e("icon"),t.nsInput.e("clear")]),onClick:t.handlePasswordVisible},{default:ue(()=>[Y(l)]),_:1},8,["class","onClick"])):ce("v-if",!0),t.isWordLimitVisible?(C(),F("span",{key:3,class:ie(t.nsInput.e("count"))},[L("span",{class:ie(t.nsInput.e("count-inner"))},be(t.textLength)+" / "+be(t.attrs.maxlength),3)],2)):ce("v-if",!0)],2),t.validateState&&t.validateIcon&&t.needStatusIcon?(C(),Se(o,{key:0,class:ie([t.nsInput.e("icon"),t.nsInput.e("validateIcon")])},{default:ue(()=>[(C(),Se(Fn(t.validateIcon)))]),_:1},8,["class"])):ce("v-if",!0)],2)):ce("v-if",!0),ce(" append slot "),t.$slots.append?(C(),F("div",{key:3,class:ie(t.nsInput.be("group","append"))},[Fe(t.$slots,"append")],2)):ce("v-if",!0)],64)):(C(),F(Ne,{key:1},[ce(" textarea "),L("textarea",Qn({ref:"textarea",class:t.nsTextarea.e("inner")},t.attrs,{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autocomplete,style:t.computedTextareaStyle,"aria-label":t.label,placeholder:t.placeholder,onCompositionstart:e[9]||(e[9]=(...c)=>t.handleCompositionStart&&t.handleCompositionStart(...c)),onCompositionupdate:e[10]||(e[10]=(...c)=>t.handleCompositionUpdate&&t.handleCompositionUpdate(...c)),onCompositionend:e[11]||(e[11]=(...c)=>t.handleCompositionEnd&&t.handleCompositionEnd(...c)),onInput:e[12]||(e[12]=(...c)=>t.handleInput&&t.handleInput(...c)),onFocus:e[13]||(e[13]=(...c)=>t.handleFocus&&t.handleFocus(...c)),onBlur:e[14]||(e[14]=(...c)=>t.handleBlur&&t.handleBlur(...c)),onChange:e[15]||(e[15]=(...c)=>t.handleChange&&t.handleChange(...c)),onKeydown:e[16]||(e[16]=(...c)=>t.handleKeydown&&t.handleKeydown(...c))}),null,16,xx),t.isWordLimitVisible?(C(),F("span",{key:0,class:ie(t.nsInput.e("count"))},be(t.textLength)+" / "+be(t.attrs.maxlength),3)):ce("v-if",!0)],64))],38)),[[pt,t.type!=="hidden"]])}var Nx=qe(Ox,[["render",Fx]]);const Ju=Wt(Nx),Bx={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},Ux=({move:t,size:e,bar:n})=>({[n.size]:e,transform:`translate${n.axis}(${t}%)`}),Vx=vt({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),Ah="Thumb",Hx=ye({name:Ah,props:Vx,setup(t){const e=Ke(qm),n=Gt("scrollbar");e||Ku(Ah,"can not inject scrollbar context");const r=Z(),s=Z(),i=Z({}),o=Z(!1);let a=!1,l=!1,c=it?document.onselectstart:null;const u=M(()=>Bx[t.vertical?"vertical":"horizontal"]),d=M(()=>Ux({size:t.size,move:t.move,bar:u.value})),f=M(()=>r.value[u.value.offset]**2/e.wrapElement[u.value.scrollSize]/t.ratio/s.value[u.value.offset]),h=S=>{var _;if(S.stopPropagation(),S.ctrlKey||[1,2].includes(S.button))return;(_=window.getSelection())==null||_.removeAllRanges(),g(S);const R=S.currentTarget;R&&(i.value[u.value.axis]=R[u.value.offset]-(S[u.value.client]-R.getBoundingClientRect()[u.value.direction]))},p=S=>{if(!s.value||!r.value||!e.wrapElement)return;const _=Math.abs(S.target.getBoundingClientRect()[u.value.direction]-S[u.value.client]),R=s.value[u.value.offset]/2,k=(_-R)*100*f.value/r.value[u.value.offset];e.wrapElement[u.value.scroll]=k*e.wrapElement[u.value.scrollSize]/100},g=S=>{S.stopImmediatePropagation(),a=!0,document.addEventListener("mousemove",v),document.addEventListener("mouseup",m),c=document.onselectstart,document.onselectstart=()=>!1},v=S=>{if(!r.value||!s.value||a===!1)return;const _=i.value[u.value.axis];if(!_)return;const R=(r.value.getBoundingClientRect()[u.value.direction]-S[u.value.client])*-1,k=s.value[u.value.offset]-_,P=(R-k)*100*f.value/r.value[u.value.offset];e.wrapElement[u.value.scroll]=P*e.wrapElement[u.value.scrollSize]/100},m=()=>{a=!1,i.value[u.value.axis]=0,document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",m),E(),l&&(o.value=!1)},y=()=>{l=!1,o.value=!!t.size},T=()=>{l=!0,o.value=a};Un(()=>{E(),document.removeEventListener("mouseup",m)});const E=()=>{document.onselectstart!==c&&(document.onselectstart=c)};return pn(rs(e,"scrollbarElement"),"mousemove",y),pn(rs(e,"scrollbarElement"),"mouseleave",T),{ns:n,instance:r,thumb:s,bar:u,thumbStyle:d,visible:o,clickTrackHandler:p,clickThumbHandler:h}}});function Gx(t,e,n,r,s,i){return C(),Se(Ht,{name:t.ns.b("fade")},{default:ue(()=>[at(L("div",{ref:"instance",class:ie([t.ns.e("bar"),t.ns.is(t.bar.key)]),onMousedown:e[1]||(e[1]=(...o)=>t.clickTrackHandler&&t.clickTrackHandler(...o))},[L("div",{ref:"thumb",class:ie(t.ns.e("thumb")),style:Ge(t.thumbStyle),onMousedown:e[0]||(e[0]=(...o)=>t.clickThumbHandler&&t.clickThumbHandler(...o))},null,38)],34),[[pt,t.always||t.visible]])]),_:1},8,["name"])}var Kx=qe(Hx,[["render",Gx]]);const qx=vt({always:{type:Boolean,default:!0},width:{type:String,default:""},height:{type:String,default:""},ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),jx=ye({components:{Thumb:Kx},props:qx,setup(t){const e=Z(0),n=Z(0),r=4;return{handleScroll:i=>{if(i){const o=i.offsetHeight-r,a=i.offsetWidth-r;n.value=i.scrollTop*100/o*t.ratioY,e.value=i.scrollLeft*100/a*t.ratioX}},moveX:e,moveY:n}}});function zx(t,e,n,r,s,i){const o=Ce("thumb");return C(),F(Ne,null,[Y(o,{move:t.moveX,ratio:t.ratioX,size:t.width,always:t.always},null,8,["move","ratio","size","always"]),Y(o,{move:t.moveY,ratio:t.ratioY,size:t.height,vertical:"",always:t.always},null,8,["move","ratio","size","always"])],64)}var Wx=qe(jx,[["render",zx]]);const Yx=vt({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:{type:Boolean,default:!1},wrapStyle:{type:ze([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:{type:Boolean,default:!1},minSize:{type:Number,default:20}}),Xx={scroll:({scrollTop:t,scrollLeft:e})=>Jn(t)&&Jn(e)},Qx=ye({name:"ElScrollbar",components:{Bar:Wx},props:Yx,emits:Xx,setup(t,{emit:e}){const n=Gt("scrollbar");let r,s;const i=Z(),o=Z(),a=Z(),l=Z("0"),c=Z("0"),u=Z(),d=Z(0),f=Z(0),h=Z(1),p=Z(1),g=4,v=M(()=>{const S={};return t.height&&(S.height=Oi(t.height)),t.maxHeight&&(S.maxHeight=Oi(t.maxHeight)),[t.wrapStyle,S]}),m=()=>{var S;o.value&&((S=u.value)==null||S.handleScroll(o.value),e("scroll",{scrollTop:o.value.scrollTop,scrollLeft:o.value.scrollLeft}))},y=S=>{Jn(S)&&(o.value.scrollTop=S)},T=S=>{Jn(S)&&(o.value.scrollLeft=S)},E=()=>{if(!o.value)return;const S=o.value.offsetHeight-g,_=o.value.offsetWidth-g,R=S**2/o.value.scrollHeight,k=_**2/o.value.scrollWidth,P=Math.max(R,t.minSize),$=Math.max(k,t.minSize);h.value=R/(S-R)/(P/(S-P)),p.value=k/(_-k)/($/(_-$)),c.value=P+g<S?`${P}px`:"",l.value=$+g<_?`${$}px`:""};return Ie(()=>t.noresize,S=>{S?(r==null||r(),s==null||s()):({stop:r}=_k(a,E),s=pn("resize",E))},{immediate:!0}),Vt(qm,gt({scrollbarElement:i,wrapElement:o})),mt(()=>{t.native||nt(()=>E())}),{ns:n,scrollbar$:i,wrap$:o,resize$:a,barRef:u,moveX:d,moveY:f,ratioX:p,ratioY:h,sizeWidth:l,sizeHeight:c,style:v,update:E,handleScroll:m,setScrollTop:y,setScrollLeft:T}}});function Jx(t,e,n,r,s,i){const o=Ce("bar");return C(),F("div",{ref:"scrollbar$",class:ie(t.ns.b())},[L("div",{ref:"wrap$",class:ie([t.wrapClass,t.ns.e("wrap"),{[t.ns.em("wrap","hidden-default")]:!t.native}]),style:Ge(t.style),onScroll:e[0]||(e[0]=(...a)=>t.handleScroll&&t.handleScroll(...a))},[(C(),Se(Fn(t.tag),{ref:"resize$",class:ie([t.ns.e("view"),t.viewClass]),style:Ge(t.viewStyle)},{default:ue(()=>[Fe(t.$slots,"default")]),_:3},8,["class","style"]))],38),t.native?ce("v-if",!0):(C(),Se(o,{key:0,ref:"barRef",height:t.sizeHeight,width:t.sizeWidth,always:t.always,"ratio-x":t.ratioX,"ratio-y":t.ratioY},null,8,["height","width","always","ratio-x","ratio-y"]))],2)}var Zx=qe(Qx,[["render",Jx]]);const eF=Wt(Zx),Zu=Symbol("elPopper"),b0=Symbol("elPopperContent"),tF=ye({name:"ElPopperProvider",inheritAttrs:!1,setup(){const t={triggerRef:Z(null),popperInstanceRef:Z(null),contentRef:Z(null)};return Vt(Zu,t),t}});function nF(t,e,n,r,s,i){return Fe(t.$slots,"default")}var rF=qe(tF,[["render",nF]]),en="top",wn="bottom",Ln="right",tn="left",ed="auto",Yi=[en,wn,Ln,tn],Ps="start",Mi="end",sF="clippingParents",T0="viewport",ti="popper",iF="reference",wh=Yi.reduce(function(t,e){return t.concat([e+"-"+Ps,e+"-"+Mi])},[]),td=[].concat(Yi,[ed]).reduce(function(t,e){return t.concat([e,e+"-"+Ps,e+"-"+Mi])},[]),oF="beforeRead",aF="read",lF="afterRead",cF="beforeMain",uF="main",dF="afterMain",fF="beforeWrite",hF="write",pF="afterWrite",gF=[oF,aF,lF,cF,uF,dF,fF,hF,pF];function Zn(t){return t?(t.nodeName||"").toLowerCase():null}function vn(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ss(t){var e=vn(t).Element;return t instanceof e||t instanceof Element}function An(t){var e=vn(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function nd(t){if(typeof ShadowRoot>"u")return!1;var e=vn(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function mF(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!An(i)||!Zn(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function vF(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!An(s)||!Zn(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const yF={name:"applyStyles",enabled:!0,phase:"write",fn:mF,effect:vF,requires:["computeStyles"]};function Yn(t){return t.split("-")[0]}var ts=Math.max,na=Math.min,Os=Math.round;function Kc(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function E0(){return!/^((?!chrome|android).)*safari/i.test(Kc())}function Ms(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&An(t)&&(s=t.offsetWidth>0&&Os(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Os(r.height)/t.offsetHeight||1);var o=ss(t)?vn(t):window,a=o.visualViewport,l=!E0()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/s,u=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/s,f=r.height/i;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function rd(t){var e=Ms(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function S0(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&nd(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fr(t){return vn(t).getComputedStyle(t)}function bF(t){return["table","td","th"].indexOf(Zn(t))>=0}function Or(t){return((ss(t)?t.ownerDocument:t.document)||window.document).documentElement}function Fa(t){return Zn(t)==="html"?t:t.assignedSlot||t.parentNode||(nd(t)?t.host:null)||Or(t)}function Lh(t){return!An(t)||fr(t).position==="fixed"?null:t.offsetParent}function TF(t){var e=/firefox/i.test(Kc()),n=/Trident/i.test(Kc());if(n&&An(t)){var r=fr(t);if(r.position==="fixed")return null}var s=Fa(t);for(nd(s)&&(s=s.host);An(s)&&["html","body"].indexOf(Zn(s))<0;){var i=fr(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Xi(t){for(var e=vn(t),n=Lh(t);n&&bF(n)&&fr(n).position==="static";)n=Lh(n);return n&&(Zn(n)==="html"||Zn(n)==="body"&&fr(n).position==="static")?e:n||TF(t)||e}function sd(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Ti(t,e,n){return ts(t,na(e,n))}function EF(t,e,n){var r=Ti(t,e,n);return r>n?n:r}function _0(){return{top:0,right:0,bottom:0,left:0}}function A0(t){return Object.assign({},_0(),t)}function w0(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var SF=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,A0(typeof e!="number"?e:w0(e,Yi))};function _F(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Yn(n.placement),l=sd(a),c=[tn,Ln].indexOf(a)>=0,u=c?"height":"width";if(!(!i||!o)){var d=SF(s.padding,n),f=rd(i),h=l==="y"?en:tn,p=l==="y"?wn:Ln,g=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],v=o[l]-n.rects.reference[l],m=Xi(i),y=m?l==="y"?m.clientHeight||0:m.clientWidth||0:0,T=g/2-v/2,E=d[h],S=y-f[u]-d[p],_=y/2-f[u]/2+T,R=Ti(E,_,S),k=l;n.modifiersData[r]=(e={},e[k]=R,e.centerOffset=R-_,e)}}function AF(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||S0(e.elements.popper,s)&&(e.elements.arrow=s))}const wF={name:"arrow",enabled:!0,phase:"main",fn:_F,effect:AF,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function xs(t){return t.split("-")[1]}var LF={top:"auto",right:"auto",bottom:"auto",left:"auto"};function IF(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:Os(n*s)/s||0,y:Os(r*s)/s||0}}function Ih(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,p=o.y,g=p===void 0?0:p,v=typeof u=="function"?u({x:h,y:g}):{x:h,y:g};h=v.x,g=v.y;var m=o.hasOwnProperty("x"),y=o.hasOwnProperty("y"),T=tn,E=en,S=window;if(c){var _=Xi(n),R="clientHeight",k="clientWidth";if(_===vn(n)&&(_=Or(n),fr(_).position!=="static"&&a==="absolute"&&(R="scrollHeight",k="scrollWidth")),_=_,s===en||(s===tn||s===Ln)&&i===Mi){E=wn;var P=d&&_===S&&S.visualViewport?S.visualViewport.height:_[R];g-=P-r.height,g*=l?1:-1}if(s===tn||(s===en||s===wn)&&i===Mi){T=Ln;var $=d&&_===S&&S.visualViewport?S.visualViewport.width:_[k];h-=$-r.width,h*=l?1:-1}}var N=Object.assign({position:a},c&&LF),w=u===!0?IF({x:h,y:g},vn(n)):{x:h,y:g};if(h=w.x,g=w.y,l){var U;return Object.assign({},N,(U={},U[E]=y?"0":"",U[T]=m?"0":"",U.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+g+"px)":"translate3d("+h+"px, "+g+"px, 0)",U))}return Object.assign({},N,(e={},e[E]=y?g+"px":"",e[T]=m?h+"px":"",e.transform="",e))}function CF(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Yn(e.placement),variation:xs(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Ih(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Ih(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const RF={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:CF,data:{}};var mo={passive:!0};function $F(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=vn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,mo)}),a&&l.addEventListener("resize",n.update,mo),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,mo)}),a&&l.removeEventListener("resize",n.update,mo)}}const kF={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:$F,data:{}};var DF={left:"right",right:"left",bottom:"top",top:"bottom"};function xo(t){return t.replace(/left|right|bottom|top/g,function(e){return DF[e]})}var PF={start:"end",end:"start"};function Ch(t){return t.replace(/start|end/g,function(e){return PF[e]})}function id(t){var e=vn(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function od(t){return Ms(Or(t)).left+id(t).scrollLeft}function OF(t,e){var n=vn(t),r=Or(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var c=E0();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+od(t),y:l}}function MF(t){var e,n=Or(t),r=id(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=ts(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=ts(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+od(t),l=-r.scrollTop;return fr(s||n).direction==="rtl"&&(a+=ts(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function ad(t){var e=fr(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function L0(t){return["html","body","#document"].indexOf(Zn(t))>=0?t.ownerDocument.body:An(t)&&ad(t)?t:L0(Fa(t))}function Ei(t,e){var n;e===void 0&&(e=[]);var r=L0(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=vn(r),o=s?[i].concat(i.visualViewport||[],ad(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Ei(Fa(o)))}function qc(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function xF(t,e){var n=Ms(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Rh(t,e,n){return e===T0?qc(OF(t,n)):ss(e)?xF(e,n):qc(MF(Or(t)))}function FF(t){var e=Ei(Fa(t)),n=["absolute","fixed"].indexOf(fr(t).position)>=0,r=n&&An(t)?Xi(t):t;return ss(r)?e.filter(function(s){return ss(s)&&S0(s,r)&&Zn(s)!=="body"}):[]}function NF(t,e,n,r){var s=e==="clippingParents"?FF(t):[].concat(e),i=[].concat(s,[n]),o=i[0],a=i.reduce(function(l,c){var u=Rh(t,c,r);return l.top=ts(u.top,l.top),l.right=na(u.right,l.right),l.bottom=na(u.bottom,l.bottom),l.left=ts(u.left,l.left),l},Rh(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function I0(t){var e=t.reference,n=t.element,r=t.placement,s=r?Yn(r):null,i=r?xs(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case en:l={x:o,y:e.y-n.height};break;case wn:l={x:o,y:e.y+e.height};break;case Ln:l={x:e.x+e.width,y:a};break;case tn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?sd(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case Ps:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Mi:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function xi(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?sF:a,c=n.rootBoundary,u=c===void 0?T0:c,d=n.elementContext,f=d===void 0?ti:d,h=n.altBoundary,p=h===void 0?!1:h,g=n.padding,v=g===void 0?0:g,m=A0(typeof v!="number"?v:w0(v,Yi)),y=f===ti?iF:ti,T=t.rects.popper,E=t.elements[p?y:f],S=NF(ss(E)?E:E.contextElement||Or(t.elements.popper),l,u,o),_=Ms(t.elements.reference),R=I0({reference:_,element:T,strategy:"absolute",placement:s}),k=qc(Object.assign({},T,R)),P=f===ti?k:_,$={top:S.top-P.top+m.top,bottom:P.bottom-S.bottom+m.bottom,left:S.left-P.left+m.left,right:P.right-S.right+m.right},N=t.modifiersData.offset;if(f===ti&&N){var w=N[s];Object.keys($).forEach(function(U){var z=[Ln,wn].indexOf(U)>=0?1:-1,ne=[en,wn].indexOf(U)>=0?"y":"x";$[U]+=w[ne]*z})}return $}function BF(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?td:l,u=xs(r),d=u?a?wh:wh.filter(function(p){return xs(p)===u}):Yi,f=d.filter(function(p){return c.indexOf(p)>=0});f.length===0&&(f=d);var h=f.reduce(function(p,g){return p[g]=xi(t,{placement:g,boundary:s,rootBoundary:i,padding:o})[Yn(g)],p},{});return Object.keys(h).sort(function(p,g){return h[p]-h[g]})}function UF(t){if(Yn(t)===ed)return[];var e=xo(t);return[Ch(t),e,Ch(e)]}function VF(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=h===void 0?!0:h,g=n.allowedAutoPlacements,v=e.options.placement,m=Yn(v),y=m===v,T=l||(y||!p?[xo(v)]:UF(v)),E=[v].concat(T).reduce(function(je,He){return je.concat(Yn(He)===ed?BF(e,{placement:He,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:g}):He)},[]),S=e.rects.reference,_=e.rects.popper,R=new Map,k=!0,P=E[0],$=0;$<E.length;$++){var N=E[$],w=Yn(N),U=xs(N)===Ps,z=[en,wn].indexOf(w)>=0,ne=z?"width":"height",oe=xi(e,{placement:N,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),W=z?U?Ln:tn:U?wn:en;S[ne]>_[ne]&&(W=xo(W));var q=xo(W),pe=[];if(i&&pe.push(oe[w]<=0),a&&pe.push(oe[W]<=0,oe[q]<=0),pe.every(function(je){return je})){P=N,k=!1;break}R.set(N,pe)}if(k)for(var J=p?3:1,le=function(He){var Je=E.find(function(H){var he=R.get(H);if(he)return he.slice(0,He).every(function(fe){return fe})});if(Je)return P=Je,"break"},me=J;me>0;me--){var Ve=le(me);if(Ve==="break")break}e.placement!==P&&(e.modifiersData[r]._skip=!0,e.placement=P,e.reset=!0)}}const HF={name:"flip",enabled:!0,phase:"main",fn:VF,requiresIfExists:["offset"],data:{_skip:!1}};function $h(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function kh(t){return[en,Ln,wn,tn].some(function(e){return t[e]>=0})}function GF(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=xi(e,{elementContext:"reference"}),a=xi(e,{altBoundary:!0}),l=$h(o,r),c=$h(a,s,i),u=kh(l),d=kh(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const KF={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:GF};function qF(t,e,n){var r=Yn(t),s=[tn,en].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[tn,Ln].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function jF(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=td.reduce(function(u,d){return u[d]=qF(d,e.rects,i),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const zF={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:jF};function WF(t){var e=t.state,n=t.name;e.modifiersData[n]=I0({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const YF={name:"popperOffsets",enabled:!0,phase:"read",fn:WF,data:{}};function XF(t){return t==="x"?"y":"x"}function QF(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,p=n.tetherOffset,g=p===void 0?0:p,v=xi(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),m=Yn(e.placement),y=xs(e.placement),T=!y,E=sd(m),S=XF(E),_=e.modifiersData.popperOffsets,R=e.rects.reference,k=e.rects.popper,P=typeof g=="function"?g(Object.assign({},e.rects,{placement:e.placement})):g,$=typeof P=="number"?{mainAxis:P,altAxis:P}:Object.assign({mainAxis:0,altAxis:0},P),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,w={x:0,y:0};if(_){if(i){var U,z=E==="y"?en:tn,ne=E==="y"?wn:Ln,oe=E==="y"?"height":"width",W=_[E],q=W+v[z],pe=W-v[ne],J=h?-k[oe]/2:0,le=y===Ps?R[oe]:k[oe],me=y===Ps?-k[oe]:-R[oe],Ve=e.elements.arrow,je=h&&Ve?rd(Ve):{width:0,height:0},He=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:_0(),Je=He[z],H=He[ne],he=Ti(0,R[oe],je[oe]),fe=T?R[oe]/2-J-he-Je-$.mainAxis:le-he-Je-$.mainAxis,Te=T?-R[oe]/2+J+he+H+$.mainAxis:me+he+H+$.mainAxis,Ue=e.elements.arrow&&Xi(e.elements.arrow),rt=Ue?E==="y"?Ue.clientTop||0:Ue.clientLeft||0:0,A=(U=N==null?void 0:N[E])!=null?U:0,I=W+fe-A-rt,D=W+Te-A,V=Ti(h?na(q,I):q,W,h?ts(pe,D):pe);_[E]=V,w[E]=V-W}if(a){var G,ae=E==="x"?en:tn,ge=E==="x"?wn:Ln,se=_[S],de=S==="y"?"height":"width",re=se+v[ae],ve=se-v[ge],we=[en,tn].indexOf(m)!==-1,_e=(G=N==null?void 0:N[S])!=null?G:0,$e=we?re:se-R[de]-k[de]-_e+$.altAxis,Be=we?se+R[de]+k[de]-_e-$.altAxis:ve,x=h&&we?EF($e,se,Be):Ti(h?$e:re,se,h?Be:ve);_[S]=x,w[S]=x-se}e.modifiersData[r]=w}}const JF={name:"preventOverflow",enabled:!0,phase:"main",fn:QF,requiresIfExists:["offset"]};function ZF(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function eN(t){return t===vn(t)||!An(t)?id(t):ZF(t)}function tN(t){var e=t.getBoundingClientRect(),n=Os(e.width)/t.offsetWidth||1,r=Os(e.height)/t.offsetHeight||1;return n!==1||r!==1}function nN(t,e,n){n===void 0&&(n=!1);var r=An(e),s=An(e)&&tN(e),i=Or(e),o=Ms(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Zn(e)!=="body"||ad(i))&&(a=eN(e)),An(e)?(l=Ms(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=od(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function rN(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function sN(t){var e=rN(t);return gF.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function iN(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function oN(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Dh={placement:"bottom",modifiers:[],strategy:"absolute"};function Ph(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function aN(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?Dh:s;return function(a,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Dh,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(m){var y=typeof m=="function"?m(u.options):m;g(),u.options=Object.assign({},i,u.options,y),u.scrollParents={reference:ss(a)?Ei(a):a.contextElement?Ei(a.contextElement):[],popper:Ei(l)};var T=sN(oN([].concat(r,u.options.modifiers)));return u.orderedModifiers=T.filter(function(E){return E.enabled}),p(),h.update()},forceUpdate:function(){if(!f){var m=u.elements,y=m.reference,T=m.popper;if(Ph(y,T)){u.rects={reference:nN(y,Xi(T),u.options.strategy==="fixed"),popper:rd(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function($){return u.modifiersData[$.name]=Object.assign({},$.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var S=u.orderedModifiers[E],_=S.fn,R=S.options,k=R===void 0?{}:R,P=S.name;typeof _=="function"&&(u=_({state:u,options:k,name:P,instance:h})||u)}}}},update:iN(function(){return new Promise(function(v){h.forceUpdate(),v(u)})}),destroy:function(){g(),f=!0}};if(!Ph(a,l))return h;h.setOptions(c).then(function(v){!f&&c.onFirstUpdate&&c.onFirstUpdate(v)});function p(){u.orderedModifiers.forEach(function(v){var m=v.name,y=v.options,T=y===void 0?{}:y,E=v.effect;if(typeof E=="function"){var S=E({state:u,name:m,instance:h,options:T}),_=function(){};d.push(S||_)}})}function g(){d.forEach(function(v){return v()}),d=[]}return h}}var lN=[kF,YF,RF,yF,zF,HF,JF,wF,KF],cN=aN({defaultModifiers:lN});const C0=vt({arrowOffset:{type:Number,default:5}}),uN=vt({boundariesPadding:{type:Number,default:0},fallbackPlacements:{type:ze(Array),default:()=>[]},gpuAcceleration:{type:Boolean,default:!0},offset:{type:Number,default:12},placement:{type:String,values:td,default:"bottom"},popperOptions:{type:ze(Object),default:()=>({})},strategy:{type:String,values:["fixed","absolute"],default:"absolute"}});vt({autoClose:{type:Number,default:0},cutoff:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}});const R0=vt({...uN,style:{type:ze([String,Array,Object])},className:{type:ze([String,Array,Object])},effect:{type:String,default:"dark"},enterable:{type:Boolean,default:!0},pure:{type:Boolean},popperClass:{type:ze([String,Array,Object])},popperStyle:{type:ze([String,Array,Object])},referenceEl:{type:ze(Object)},stopPopperMouseEvent:{type:Boolean,default:!0},zIndex:Number}),$0=vt({virtualRef:{type:ze(Object)},virtualTriggering:{type:Boolean}}),dN=ye({name:"ElPopperArrow",props:C0,setup(t){const e=Z(null),n=Ke(b0,void 0);return Ie(()=>t.arrowOffset,r=>{n.arrowOffset.value=r}),mt(()=>{n.arrowRef.value=Le(e)}),Un(()=>{n.arrowRef.value=null}),{arrowRef:e}}}),fN={ref:"arrowRef",class:"el-popper__arrow","data-popper-arrow":""};function hN(t,e,n,r,s,i){return C(),F("span",fN,null,512)}var pN=qe(dN,[["render",hN]]);const gN="ElOnlyChild",mN=ye({name:gN,setup(t,{slots:e,attrs:n}){var r;const s=Ke(i0,void 0),i=_P((r=s.setForwardRef)!=null?r:At);return()=>{var o;const a=(o=e.default)==null?void 0:o.call(e,n);if(!a||a.length>1)return null;const l=k0(a);return l?at(dr(l,n),[[i]]):null}}});function k0(t){if(!t)return null;const e=t;for(let n=0;n<e.length;n++){const r=e[n];if(et(r))switch(r.type){case mn:continue;case Vs:return Oh(r);case Ne:return k0(r.children);default:return r}return Oh(r)}return null}function Oh(t){return zt("span",{class:"el-only-child__content"},[t])}const vN=(t,e)=>{const{placement:n,strategy:r,popperOptions:s}=t,i={placement:n,strategy:r,...s,modifiers:yN(t)};return bN(i,e),TN(i,s==null?void 0:s.modifiers),i},D0=t=>{let e=null;return t?("getBoundingClientRect"in t||t instanceof HTMLElement?e=t:e=t.$el,e):null};function yN(t){const{offset:e,gpuAcceleration:n,fallbackPlacements:r}=t;return[{name:"offset",options:{offset:[0,e??12]}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5,fallbackPlacements:r??[]}},{name:"computeStyles",options:{gpuAcceleration:n,adaptive:n}}]}function bN(t,{arrowEl:e,arrowOffset:n}){t.modifiers.push({name:"arrow",options:{element:e,padding:n??5}})}function TN(t,e){e&&(t.modifiers=[...t.modifiers,...e??[]])}const EN=ye({name:"ElPopperTrigger",components:{ElOnlyChild:mN},inheritAttrs:!1,props:{...$0,onMouseenter:Function,onMouseleave:Function,onClick:Function,onKeydown:Function,onFocus:Function,onBlur:Function,onContextmenu:Function,id:String,open:Boolean},setup(t){const{triggerRef:e}=Ke(Zu,void 0);return SP(e),Ie(()=>t.virtualRef,n=>{n&&(e.value=D0(n))},{immediate:!0}),Ie(()=>e.value,(n,r)=>{n&&n instanceof HTMLElement&&["onMouseenter","onMouseleave","onClick","onKeydown","onFocus","onBlur","onContextmenu"].forEach(s=>{const i=t[s];i&&(n.addEventListener(s.slice(2).toLowerCase(),i),r==null||r.removeEventListener(s.slice(2).toLowerCase(),i))})},{immediate:!0}),{triggerRef:e}}});function SN(t,e,n,r,s,i){const o=Ce("el-only-child");return t.virtualTriggering?ce("v-if",!0):(C(),Se(o,Qn({key:0},t.$attrs,{"aria-describedby":t.open?t.id:void 0}),{default:ue(()=>[Fe(t.$slots,"default")]),_:3},16,["aria-describedby"]))}var _N=qe(EN,[["render",SN]]);const AN=ye({name:"ElPopperContent",props:R0,emits:["mouseenter","mouseleave"],setup(t){const{triggerRef:e,popperInstanceRef:n,contentRef:r}=Ke(Zu,void 0),s=Z(null),i=Z(null),o=Z();Vt(b0,{arrowRef:i,arrowOffset:o});const a=Z(t.zIndex||Mt.nextZIndex()),l=M(()=>[{zIndex:Le(a)},t.popperStyle]),c=M(()=>[{"el-popper":!0,"is-pure":t.pure,[`is-${t.effect}`]:!!t.effect},t.popperClass]),u=({referenceEl:f,popperContentEl:h,arrowEl:p})=>{const g=vN(t,{arrowEl:p,arrowOffset:Le(o)});return cN(f,h,g)},d=()=>{var f;(f=Le(n))==null||f.update(),a.value=t.zIndex||Mt.nextZIndex()};return mt(()=>{let f;Ie(()=>D0(t.referenceEl)||Le(e),h=>{var p;if(f==null||f(),h){(p=n.value)==null||p.destroy();const g=Le(s);r.value=g;const v=Le(i),m=u({referenceEl:h,popperContentEl:Le(s),arrowEl:v});n.value=m,f=Ie(()=>h.getBoundingClientRect(),()=>{d()},{immediate:!0})}else n.value=null},{immediate:!0})}),{popperContentRef:s,popperInstanceRef:n,contentStyle:l,contentClass:c,updatePopper:d}}});function wN(t,e,n,r,s,i){return C(),F("div",{ref:"popperContentRef",style:Ge(t.contentStyle),class:ie(t.contentClass),role:"tooltip",onMouseenter:e[0]||(e[0]=o=>t.$emit("mouseenter",o)),onMouseleave:e[1]||(e[1]=o=>t.$emit("mouseleave",o))},[Fe(t.$slots,"default")],38)}var LN=qe(AN,[["render",wN]]);const IN=Wt(rF),CN=ye({name:"ElVisuallyHidden",props:{style:{type:[String,Object,Array]}},setup(t){return{computedStyle:M(()=>[t.style,{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}])}}});function RN(t,e,n,r,s,i){return C(),F("span",Qn(t.$attrs,{style:t.computedStyle}),null,16)}var $N=qe(CN,[["render",RN]]);const zr={...TP,...R0,...vt({appendTo:{type:ze([String,Object]),default:yP},content:{type:String,default:""},rawContent:{type:Boolean,default:!1},persistent:Boolean,ariaLabel:String,visible:{type:ze(Boolean),default:null},transition:{type:String,default:"el-fade-in-linear"},teleported:{type:Boolean,default:!0},disabled:{type:Boolean}})},P0={...$0,disabled:Boolean,trigger:{type:[String,Array],default:"hover"}},kN=vt({openDelay:{type:Number},visibleArrow:{type:Boolean,default:void 0},hideAfter:{type:Number,default:200},showArrow:{type:Boolean,default:!0}}),ld=Symbol("elTooltip"),DN=ye({name:"ElTooltipContent",components:{ElPopperContent:LN,ElVisuallyHidden:$N},inheritAttrs:!1,props:zr,setup(t){const e=Z(null),n=Z(!1),r=Z(!1),s=Z(!1),{controlled:i,id:o,open:a,trigger:l,onClose:c,onOpen:u,onShow:d,onHide:f}=Ke(ld,void 0),h=M(()=>t.persistent),p=M(()=>Le(h)?!0:Le(a)),g=M(()=>t.disabled?!1:Le(a)),v=M(()=>{var P;return(P=t.style)!=null?P:{}}),m=M(()=>!Le(a));vP(c);const y=()=>{f()},T=()=>{if(Le(i))return!0},E=ir(T,()=>{t.enterable&&Le(l)==="hover"&&u()}),S=ir(T,()=>{Le(l)==="hover"&&c()}),_=()=>{var P,$;($=(P=e.value)==null?void 0:P.updatePopper)==null||$.call(P)},R=()=>{d()};let k;return Ie(()=>Le(a),P=>{P?k=yk(M(()=>{var $;return($=e.value)==null?void 0:$.popperContentRef}),()=>{if(Le(i))return;Le(l)!=="hover"&&c()}):k==null||k()},{flush:"post"}),{ariaHidden:m,entering:r,leaving:s,id:o,intermediateOpen:n,contentStyle:v,contentRef:e,shouldRender:p,shouldShow:g,open:a,onAfterShow:R,onBeforeEnter:_,onContentEnter:E,onContentLeave:S,onTransitionLeave:y}}});function PN(t,e,n,r,s,i){const o=Ce("el-visually-hidden"),a=Ce("el-popper-content");return C(),Se(Vu,{disabled:!t.teleported,to:t.appendTo},[Y(Ht,{name:t.transition,onAfterLeave:t.onTransitionLeave,onBeforeEnter:t.onBeforeEnter,onAfterEnter:t.onAfterShow},{default:ue(()=>[t.shouldRender?at((C(),Se(a,Qn({key:0,ref:"contentRef"},t.$attrs,{"aria-hidden":t.ariaHidden,"boundaries-padding":t.boundariesPadding,"fallback-placements":t.fallbackPlacements,"gpu-acceleration":t.gpuAcceleration,offset:t.offset,placement:t.placement,"popper-options":t.popperOptions,strategy:t.strategy,effect:t.effect,enterable:t.enterable,pure:t.pure,"popper-class":t.popperClass,"popper-style":[t.popperStyle,t.contentStyle],"reference-el":t.referenceEl,"z-index":t.zIndex,onMouseenter:t.onContentEnter,onMouseleave:t.onContentLeave}),{default:ue(()=>[Fe(t.$slots,"default"),Y(o,{id:t.id,role:"tooltip"},{default:ue(()=>[st(be(t.ariaLabel),1)]),_:1},8,["id"])]),_:3},16,["aria-hidden","boundaries-padding","fallback-placements","gpu-acceleration","offset","placement","popper-options","strategy","effect","enterable","pure","popper-class","popper-style","reference-el","z-index","onMouseenter","onMouseleave"])),[[pt,t.shouldShow]]):ce("v-if",!0)]),_:3},8,["name","onAfterLeave","onBeforeEnter","onAfterEnter"])],8,["disabled","to"])}var ON=qe(DN,[["render",PN]]);const MN=(t,e)=>ke(t)?t.includes(e):t===e,fs=(t,e,n)=>r=>{MN(Le(t),e)&&n(r)},xN=ye({name:"ElTooltipTrigger",components:{ElPopperTrigger:_N},props:P0,setup(t){const{controlled:e,id:n,open:r,onOpen:s,onClose:i,onToggle:o}=Ke(ld,void 0),a=Z(null),l=()=>{if(Le(e)||t.disabled)return!0},c=rs(t,"trigger"),u=ir(l,fs(c,"hover",s)),d=ir(l,fs(c,"hover",i)),f=ir(l,fs(c,"click",m=>{m.button===0&&o(m)})),h=ir(l,fs(c,"focus",s)),p=ir(l,fs(c,"focus",i)),g=ir(l,fs(c,"contextmenu",m=>{m.preventDefault(),o(m)})),v=ir(l,m=>{const{code:y}=m;(y===Jt.enter||y===Jt.space)&&o(m)});return{onBlur:p,onContextMenu:g,onFocus:h,onMouseenter:u,onMouseleave:d,onClick:f,onKeydown:v,open:r,id:n,triggerRef:a}}});function FN(t,e,n,r,s,i){const o=Ce("el-popper-trigger");return C(),Se(o,{id:t.id,"virtual-ref":t.virtualRef,open:t.open,"virtual-triggering":t.virtualTriggering,class:"el-tooltip__trigger",onBlur:t.onBlur,onClick:t.onClick,onContextmenu:t.onContextMenu,onFocus:t.onFocus,onMouseenter:t.onMouseenter,onMouseleave:t.onMouseleave,onKeydown:t.onKeydown},{default:ue(()=>[Fe(t.$slots,"default")]),_:3},8,["id","virtual-ref","open","virtual-triggering","onBlur","onClick","onContextmenu","onFocus","onMouseenter","onMouseleave","onKeydown"])}var NN=qe(xN,[["render",FN]]);const{useModelToggleProps:BN,useModelToggle:UN,useModelToggleEmits:VN}=n0("visible"),HN=ye({name:"ElTooltip",components:{ElPopper:IN,ElPopperArrow:pN,ElTooltipContent:ON,ElTooltipTrigger:NN},props:{...BN,...zr,...P0,...C0,...kN},emits:[...VN,"show","hide"],setup(t,{emit:e}){bP();const n=M(()=>(Bc(t.openDelay),t.openDelay||t.showAfter)),r=M(()=>(Bc(t.visibleArrow),Nc(t.visibleArrow)?t.visibleArrow:t.showArrow)),s=mP(),i=Z(null),o=()=>{var h;const p=Le(i);p&&((h=p.popperInstanceRef)==null||h.update())},a=Z(!1),{show:l,hide:c}=UN({indicator:a}),{onOpen:u,onClose:d}=EP({showAfter:n,hideAfter:rs(t,"hideAfter"),open:l,close:c}),f=M(()=>Nc(t.visible));return Vt(ld,{controlled:f,id:s,open:$u(a),trigger:rs(t,"trigger"),onOpen:u,onClose:d,onToggle:()=>{Le(a)?d():u()},onShow:()=>{e("show")},onHide:()=>{e("hide")},updatePopper:o}),{compatShowAfter:n,compatShowArrow:r,popperRef:i,open:a,hide:c,updatePopper:o,onOpen:u,onClose:d}}}),GN=["innerHTML"],KN={key:1};function qN(t,e,n,r,s,i){const o=Ce("el-tooltip-trigger"),a=Ce("el-popper-arrow"),l=Ce("el-tooltip-content"),c=Ce("el-popper");return C(),Se(c,{ref:"popperRef"},{default:ue(()=>[Y(o,{disabled:t.disabled,trigger:t.trigger,"virtual-ref":t.virtualRef,"virtual-triggering":t.virtualTriggering},{default:ue(()=>[t.$slots.default?Fe(t.$slots,"default",{key:0}):ce("v-if",!0)]),_:3},8,["disabled","trigger","virtual-ref","virtual-triggering"]),Y(l,{"aria-label":t.ariaLabel,"boundaries-padding":t.boundariesPadding,content:t.content,disabled:t.disabled,effect:t.effect,enterable:t.enterable,"fallback-placements":t.fallbackPlacements,"hide-after":t.hideAfter,"gpu-acceleration":t.gpuAcceleration,offset:t.offset,persistent:t.persistent,"popper-class":t.popperClass,"popper-style":t.popperStyle,placement:t.placement,"popper-options":t.popperOptions,pure:t.pure,"raw-content":t.rawContent,"reference-el":t.referenceEl,"show-after":t.compatShowAfter,strategy:t.strategy,teleported:t.teleported,transition:t.transition,"z-index":t.zIndex},{default:ue(()=>[Fe(t.$slots,"content",{},()=>[t.rawContent?(C(),F("span",{key:0,innerHTML:t.content},null,8,GN)):(C(),F("span",KN,be(t.content),1))]),t.compatShowArrow?(C(),Se(a,{key:0,"arrow-offset":t.arrowOffset},null,8,["arrow-offset"])):ce("v-if",!0)]),_:3},8,["aria-label","boundaries-padding","content","disabled","effect","enterable","fallback-placements","hide-after","gpu-acceleration","offset","persistent","popper-class","popper-style","placement","popper-options","pure","raw-content","reference-el","show-after","strategy","teleported","transition","z-index"])]),_:3},512)}var jN=qe(HN,[["render",qN]]);const O0=Wt(jN),zN=vt({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"}}),WN=ye({name:"ElBadge",props:zN,setup(t){const e=Gt("badge"),n=M(()=>t.isDot?"":typeof t.value=="number"&&typeof t.max=="number"?t.max<t.value?`${t.max}+`:`${t.value}`:`${t.value}`);return{ns:e,content:n}}}),YN=["textContent"];function XN(t,e,n,r,s,i){return C(),F("div",{class:ie(t.ns.b())},[Fe(t.$slots,"default"),Y(Ht,{name:"el-zoom-in-center"},{default:ue(()=>[at(L("sup",{class:ie([t.ns.e("content"),t.ns.em("content",t.type),t.ns.is("fixed",!!t.$slots.default),t.ns.is("dot",t.isDot)]),textContent:be(t.content)},null,10,YN),[[pt,!t.hidden&&(t.content||t.content==="0"||t.isDot)]])]),_:1})],2)}var QN=qe(WN,[["render",XN]]);const JN=Wt(QN);function xt(t,e){ZN(t)&&(t="100%");var n=e3(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function vo(t){return Math.min(1,Math.max(0,t))}function ZN(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function e3(t){return typeof t=="string"&&t.indexOf("%")!==-1}function M0(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function yo(t){return t<=1?"".concat(Number(t)*100,"%"):t}function Xr(t){return t.length===1?"0"+t:String(t)}function t3(t,e,n){return{r:xt(t,255)*255,g:xt(e,255)*255,b:xt(n,255)*255}}function Mh(t,e,n){t=xt(t,255),e=xt(e,255),n=xt(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=0,a=(r+s)/2;if(r===s)o=0,i=0;else{var l=r-s;switch(o=a>.5?l/(2-r-s):l/(r+s),r){case t:i=(e-n)/l+(e<n?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4;break}i/=6}return{h:i,s:o,l:a}}function vl(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function n3(t,e,n){var r,s,i;if(t=xt(t,360),e=xt(e,100),n=xt(n,100),e===0)s=n,i=n,r=n;else{var o=n<.5?n*(1+e):n+e-n*e,a=2*n-o;r=vl(a,o,t+1/3),s=vl(a,o,t),i=vl(a,o,t-1/3)}return{r:r*255,g:s*255,b:i*255}}function xh(t,e,n){t=xt(t,255),e=xt(e,255),n=xt(n,255);var r=Math.max(t,e,n),s=Math.min(t,e,n),i=0,o=r,a=r-s,l=r===0?0:a/r;if(r===s)i=0;else{switch(r){case t:i=(e-n)/a+(e<n?6:0);break;case e:i=(n-t)/a+2;break;case n:i=(t-e)/a+4;break}i/=6}return{h:i,s:l,v:o}}function r3(t,e,n){t=xt(t,360)*6,e=xt(e,100),n=xt(n,100);var r=Math.floor(t),s=t-r,i=n*(1-e),o=n*(1-s*e),a=n*(1-(1-s)*e),l=r%6,c=[n,o,i,i,a,n][l],u=[a,n,n,o,i,i][l],d=[i,i,a,n,n,o][l];return{r:c*255,g:u*255,b:d*255}}function Fh(t,e,n,r){var s=[Xr(Math.round(t).toString(16)),Xr(Math.round(e).toString(16)),Xr(Math.round(n).toString(16))];return r&&s[0].startsWith(s[0].charAt(1))&&s[1].startsWith(s[1].charAt(1))&&s[2].startsWith(s[2].charAt(1))?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function s3(t,e,n,r,s){var i=[Xr(Math.round(t).toString(16)),Xr(Math.round(e).toString(16)),Xr(Math.round(n).toString(16)),Xr(i3(r))];return s&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function i3(t){return Math.round(parseFloat(t)*255).toString(16)}function Nh(t){return cn(t)/255}function cn(t){return parseInt(t,16)}function o3(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var jc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function a3(t){var e={r:0,g:0,b:0},n=1,r=null,s=null,i=null,o=!1,a=!1;return typeof t=="string"&&(t=u3(t)),typeof t=="object"&&(nr(t.r)&&nr(t.g)&&nr(t.b)?(e=t3(t.r,t.g,t.b),o=!0,a=String(t.r).substr(-1)==="%"?"prgb":"rgb"):nr(t.h)&&nr(t.s)&&nr(t.v)?(r=yo(t.s),s=yo(t.v),e=r3(t.h,r,s),o=!0,a="hsv"):nr(t.h)&&nr(t.s)&&nr(t.l)&&(r=yo(t.s),i=yo(t.l),e=n3(t.h,r,i),o=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=M0(n),{ok:o,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var l3="[-\\+]?\\d+%?",c3="[-\\+]?\\d*\\.\\d+%?",Rr="(?:".concat(c3,")|(?:").concat(l3,")"),yl="[\\s|\\(]+(".concat(Rr,")[,|\\s]+(").concat(Rr,")[,|\\s]+(").concat(Rr,")\\s*\\)?"),bl="[\\s|\\(]+(".concat(Rr,")[,|\\s]+(").concat(Rr,")[,|\\s]+(").concat(Rr,")[,|\\s]+(").concat(Rr,")\\s*\\)?"),kn={CSS_UNIT:new RegExp(Rr),rgb:new RegExp("rgb"+yl),rgba:new RegExp("rgba"+bl),hsl:new RegExp("hsl"+yl),hsla:new RegExp("hsla"+bl),hsv:new RegExp("hsv"+yl),hsva:new RegExp("hsva"+bl),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function u3(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(jc[t])t=jc[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=kn.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=kn.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=kn.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=kn.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=kn.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=kn.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=kn.hex8.exec(t),n?{r:cn(n[1]),g:cn(n[2]),b:cn(n[3]),a:Nh(n[4]),format:e?"name":"hex8"}:(n=kn.hex6.exec(t),n?{r:cn(n[1]),g:cn(n[2]),b:cn(n[3]),format:e?"name":"hex"}:(n=kn.hex4.exec(t),n?{r:cn(n[1]+n[1]),g:cn(n[2]+n[2]),b:cn(n[3]+n[3]),a:Nh(n[4]+n[4]),format:e?"name":"hex8"}:(n=kn.hex3.exec(t),n?{r:cn(n[1]+n[1]),g:cn(n[2]+n[2]),b:cn(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function nr(t){return!!kn.CSS_UNIT.exec(String(t))}var bo=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var r;if(e instanceof t)return e;typeof e=="number"&&(e=o3(e)),this.originalInput=e;var s=a3(e);this.originalInput=e,this.r=s.r,this.g=s.g,this.b=s.b,this.a=s.a,this.roundA=Math.round(100*this.a)/100,this.format=(r=n.format)!==null&&r!==void 0?r:s.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=s.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,r,s,i=e.r/255,o=e.g/255,a=e.b/255;return i<=.03928?n=i/12.92:n=Math.pow((i+.055)/1.055,2.4),o<=.03928?r=o/12.92:r=Math.pow((o+.055)/1.055,2.4),a<=.03928?s=a/12.92:s=Math.pow((a+.055)/1.055,2.4),.2126*n+.7152*r+.0722*s},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=M0(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=xh(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=xh(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsva(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=Mh(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=Mh(this.r,this.g,this.b),n=Math.round(e.h*360),r=Math.round(e.s*100),s=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(r,"%, ").concat(s,"%)"):"hsla(".concat(n,", ").concat(r,"%, ").concat(s,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),Fh(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),s3(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),r=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(r,")"):"rgba(".concat(e,", ").concat(n,", ").concat(r,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(xt(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(xt(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+Fh(this.r,this.g,this.b,!1),n=0,r=Object.entries(jc);n<r.length;n++){var s=r[n],i=s[0],o=s[1];if(e===o)return i}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var r=!1,s=this.a<1&&this.a>=0,i=!n&&s&&(e.startsWith("hex")||e==="name");return i?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=vo(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=vo(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=vo(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=vo(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var r=this.toRgb(),s=new t(e).toRgb(),i=n/100,o={r:(s.r-r.r)*i+r.r,g:(s.g-r.g)*i+r.g,b:(s.b-r.b)*i+r.b,a:(s.a-r.a)*i+r.a};return new t(o)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var r=this.toHsl(),s=360/n,i=[this];for(r.h=(r.h-(s*e>>1)+720)%360;--e;)r.h=(r.h+s)%360,i.push(new t(r));return i},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),r=n.h,s=n.s,i=n.v,o=[],a=1/e;e--;)o.push(new t({h:r,s,v:i})),i=(i+a)%1;return o},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),r=new t(e).toRgb(),s=n.a+r.a*(1-n.a);return new t({r:(n.r*n.a+r.r*r.a*(1-n.a))/s,g:(n.g*n.a+r.g*r.a*(1-n.a))/s,b:(n.b*n.a+r.b*r.a*(1-n.a))/s,a:s})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),r=n.h,s=[this],i=360/e,o=1;o<e;o++)s.push(new t({h:(r+o*i)%360,s:n.s,l:n.l}));return s},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();const d3=["default","primary","success","warning","info","danger","text",""],f3=["button","submit","reset"],zc=vt({size:By,disabled:Boolean,type:{type:String,values:d3,default:""},icon:{type:ze([String,Object]),default:""},nativeType:{type:String,values:f3,default:"button"},loading:Boolean,loadingIcon:{type:ze([String,Object]),default:()=>Yu},plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean,color:String,autoInsertSpace:{type:Boolean,default:void 0}}),h3={click:t=>t instanceof MouseEvent},p3=ye({name:"ElButton",components:{ElIcon:gr,Loading:Yu},props:zc,emits:h3,setup(t,{emit:e,slots:n}){const r=Z(),s=Ke(Gm,void 0),i=Wi("button"),o=Gt("button"),a=M(()=>{var v,m,y;return(y=(m=t.autoInsertSpace)!=null?m:(v=i.value)==null?void 0:v.autoInsertSpace)!=null?y:!1}),l=M(()=>{var v;const m=(v=n.default)==null?void 0:v.call(n);if(a.value&&(m==null?void 0:m.length)===1){const y=m[0];if((y==null?void 0:y.type)===Vs){const T=y.children;return new RegExp("^\\p{Unified_Ideograph}{2}$","u").test(T)}}return!1}),{form:c}=Vy(),u=Ys(M(()=>s==null?void 0:s.size)),d=Uy(),f=M(()=>t.type||(s==null?void 0:s.type)||""),h=M(()=>bk(`--el-color-${t.type}`).value),p=M(()=>{let v={};const m=t.color||h.value;if(m){const y=new bo(m).shade(10).toString();if(t.plain)v={"--el-button-bg-color":new bo(m).tint(90).toString(),"--el-button-text-color":m,"--el-button-hover-text-color":"var(--el-color-white)","--el-button-hover-bg-color":m,"--el-button-hover-border-color":m,"--el-button-active-bg-color":y,"--el-button-active-text-color":"var(--el-color-white)","--el-button-active-border-color":y};else{const T=new bo(m).tint(20).toString();v={"--el-button-bg-color":m,"--el-button-border-color":m,"--el-button-hover-bg-color":T,"--el-button-hover-border-color":T,"--el-button-active-bg-color":y,"--el-button-active-border-color":y}}if(d.value){const T=new bo(m).tint(50).toString();v["--el-button-disabled-bg-color"]=T,v["--el-button-disabled-border-color"]=T}}return v});return{buttonRef:r,buttonStyle:p,buttonSize:u,buttonType:f,buttonDisabled:d,shouldAddSpace:l,handleClick:v=>{t.nativeType==="reset"&&(c==null||c.resetFields()),e("click",v)},ns:o}}}),g3=["disabled","autofocus","type"];function m3(t,e,n,r,s,i){const o=Ce("el-icon");return C(),F("button",{ref:"buttonRef",class:ie([t.ns.b(),t.ns.m(t.buttonType),t.ns.m(t.buttonSize),t.ns.is("disabled",t.buttonDisabled),t.ns.is("loading",t.loading),t.ns.is("plain",t.plain),t.ns.is("round",t.round),t.ns.is("circle",t.circle)]),disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType,style:Ge(t.buttonStyle),onClick:e[0]||(e[0]=(...a)=>t.handleClick&&t.handleClick(...a))},[t.loading?(C(),F(Ne,{key:0},[t.$slots.loading?Fe(t.$slots,"loading",{key:0}):(C(),Se(o,{key:1,class:ie(t.ns.is("loading"))},{default:ue(()=>[(C(),Se(Fn(t.loadingIcon)))]),_:1},8,["class"]))],2112)):t.icon?(C(),Se(o,{key:1},{default:ue(()=>[(C(),Se(Fn(t.icon)))]),_:1})):ce("v-if",!0),t.$slots.default?(C(),F("span",{key:2,class:ie({[t.ns.em("text","expand")]:t.shouldAddSpace})},[Fe(t.$slots,"default")],2)):ce("v-if",!0)],14,g3)}var v3=qe(p3,[["render",m3]]);const y3={size:zc.size,type:zc.type},b3=ye({name:"ElButtonGroup",props:y3,setup(t){return Vt(Gm,gt({size:rs(t,"size"),type:rs(t,"type")})),{ns:Gt("button")}}});function T3(t,e,n,r,s,i){return C(),F("div",{class:ie(`${t.ns.b("group")}`)},[Fe(t.$slots,"default")],2)}var x0=qe(b3,[["render",T3]]);const E3=Wt(v3,{ButtonGroup:x0});Pr(x0);var S3=hk;function _3(t,e){return S3(t,e)}var A3=_3;const Wc=j(A3),F0=t=>["","large","default","small"].includes(t);function w3(t,e){if(!it)return;if(!e){t.scrollTop=0;return}const n=[];let r=e.offsetParent;for(;r!==null&&t!==r&&t.contains(r);)n.push(r),r=r.offsetParent;const s=e.offsetTop+n.reduce((l,c)=>l+c.offsetTop,0),i=s+e.offsetHeight,o=t.scrollTop,a=o+t.clientHeight;s<o?t.scrollTop=s:i>a&&(t.scrollTop=i-t.clientHeight)}const L3=vt({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:["large","default","small"]},effect:{type:String,values:["dark","light","plain"],default:"light"}}),I3={close:t=>t instanceof MouseEvent,click:t=>t instanceof MouseEvent},C3=ye({name:"ElTag",components:{ElIcon:gr,Close:xa},props:L3,emits:I3,setup(t,{emit:e}){const n=Ys(),r=Gt("tag"),s=M(()=>{const{type:a,hit:l,effect:c,closable:u}=t;return[r.b(),r.is("closable",u),r.m(a),r.m(n.value),r.m(c),r.is("hit",l)]});return{ns:r,classes:s,handleClose:a=>{a.stopPropagation(),e("close",a)},handleClick:a=>{e("click",a)}}}});function R3(t,e,n,r,s,i){const o=Ce("close"),a=Ce("el-icon");return t.disableTransitions?(C(),Se(Ht,{key:1,name:`${t.ns.namespace.value}-zoom-in-center`},{default:ue(()=>[L("span",{class:ie(t.classes),style:Ge({backgroundColor:t.color}),onClick:e[1]||(e[1]=(...l)=>t.handleClick&&t.handleClick(...l))},[L("span",{class:ie(t.ns.e("content"))},[Fe(t.$slots,"default")],2),t.closable?(C(),Se(a,{key:0,class:ie(t.ns.e("close")),onClick:t.handleClose},{default:ue(()=>[Y(o)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6)]),_:3},8,["name"])):(C(),F("span",{key:0,class:ie(t.classes),style:Ge({backgroundColor:t.color}),onClick:e[0]||(e[0]=(...l)=>t.handleClick&&t.handleClick(...l))},[L("span",{class:ie(t.ns.e("content"))},[Fe(t.$slots,"default")],2),t.closable?(C(),Se(a,{key:0,class:ie(t.ns.e("close")),onClick:t.handleClose},{default:ue(()=>[Y(o)]),_:1},8,["class","onClick"])):ce("v-if",!0)],6))}var $3=qe(C3,[["render",R3]]);const k3=Wt($3),Bh={};vt({locale:{type:ze(Object)},size:{type:String,values:["large","default","small"]},button:{type:ze(Object)},message:{type:ze(Object)},zIndex:{type:Number},namespace:{type:String,default:"el"}});const D3=ye({name:"ElContainer",props:{direction:{type:String,default:""}},setup(t,{slots:e}){const n=Gt("container");return{isVertical:M(()=>t.direction==="vertical"?!0:t.direction==="horizontal"?!1:e&&e.default?e.default().some(i=>{const o=i.type.name;return o==="ElHeader"||o==="ElFooter"}):!1),ns:n}}});function P3(t,e,n,r,s,i){return C(),F("section",{class:ie([t.ns.b(),t.ns.is("vertical",t.isVertical)])},[Fe(t.$slots,"default")],2)}var O3=qe(D3,[["render",P3]]);const M3=ye({name:"ElAside",props:{width:{type:String,default:null}},setup(t){const e=Gt("aside");return{style:M(()=>t.width?{"--el-aside-width":t.width}:{}),ns:e}}});function x3(t,e,n,r,s,i){return C(),F("aside",{class:ie(t.ns.b()),style:Ge(t.style)},[Fe(t.$slots,"default")],6)}var N0=qe(M3,[["render",x3]]);const F3=ye({name:"ElFooter",props:{height:{type:String,default:null}},setup(t){const e=Gt("footer");return{style:M(()=>t.height?{"--el-footer-height":t.height}:{}),ns:e}}});function N3(t,e,n,r,s,i){return C(),F("footer",{class:ie(t.ns.b()),style:Ge(t.style)},[Fe(t.$slots,"default")],6)}var B0=qe(F3,[["render",N3]]);const B3=ye({name:"ElHeader",props:{height:{type:String,default:null}},setup(t){const e=Gt("header");return{style:M(()=>t.height?{"--el-header-height":t.height}:{}),ns:e}}});function U3(t,e,n,r,s,i){return C(),F("header",{class:ie(t.ns.b()),style:Ge(t.style)},[Fe(t.$slots,"default")],6)}var U0=qe(B3,[["render",U3]]);const V3=ye({name:"ElMain",setup(){return{ns:Gt("main")}}});function H3(t,e,n,r,s,i){return C(),F("main",{class:ie(t.ns.b())},[Fe(t.$slots,"default")],2)}var V0=qe(V3,[["render",H3]]);const G3=Wt(O3,{Aside:N0,Footer:B0,Header:U0,Main:V0}),K3=Pr(N0);Pr(B0);Pr(U0);const q3=Pr(V0);var Fo=(t=>(t[t.TEXT=1]="TEXT",t[t.CLASS=2]="CLASS",t[t.STYLE=4]="STYLE",t[t.PROPS=8]="PROPS",t[t.FULL_PROPS=16]="FULL_PROPS",t[t.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",t[t.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",t[t.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",t[t.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",t[t.NEED_PATCH=512]="NEED_PATCH",t[t.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",t[t.HOISTED=-1]="HOISTED",t[t.BAIL=-2]="BAIL",t))(Fo||{});const j3=vt({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:ze([String,Array,Object])},zIndex:{type:ze([String,Number])}}),z3={click:t=>t instanceof MouseEvent};var W3=ye({name:"ElOverlay",props:j3,emits:z3,setup(t,{slots:e,emit:n}){const r=a=>{n("click",a)},{onClick:s,onMousedown:i,onMouseup:o}=r0(t.customMaskEvent?void 0:r);return()=>t.mask?Y("div",{class:["el-overlay",t.overlayClass],style:{zIndex:t.zIndex},onClick:s,onMousedown:i,onMouseup:o},[Fe(e,"default")],Fo.STYLE|Fo.CLASS|Fo.PROPS,["onClick","onMouseup","onMousedown"]):zt("div",{class:t.overlayClass,style:{zIndex:t.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Fe(e,"default")])}});const Y3=W3,X3=vt({appendToBody:{type:Boolean,default:!1},beforeClose:{type:ze(Function)},destroyOnClose:{type:Boolean,default:!1},center:{type:Boolean,default:!1},customClass:{type:String,default:""},closeIcon:{type:ze([String,Object]),default:""},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},fullscreen:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},title:{type:String,default:""},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,required:!0},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number}}),Q3={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[hn]:t=>typeof t=="boolean"},J3=(t,{emit:e},n)=>{const r=Z(!1),s=Z(!1),i=Z(!1),o=Z(t.zIndex||Mt.nextZIndex());let a,l;const c=M(()=>Jn(t.width)?`${t.width}px`:t.width),u=M(()=>{const S={},_="--el-dialog";return t.fullscreen||(t.top&&(S[`${_}-margin-top`]=t.top),t.width&&(S[`${_}-width`]=c.value)),S});function d(){e("opened")}function f(){e("closed"),e(hn,!1),t.destroyOnClose&&(i.value=!1)}function h(){e("close")}function p(){l==null||l(),a==null||a(),t.openDelay&&t.openDelay>0?{stop:a}=Fc(()=>T(),t.openDelay):T()}function g(){a==null||a(),l==null||l(),t.closeDelay&&t.closeDelay>0?{stop:l}=Fc(()=>E(),t.closeDelay):E()}function v(S){S||(s.value=!0,r.value=!1)}function m(){t.beforeClose?t.beforeClose(v):g()}function y(){t.closeOnClickModal&&m()}function T(){it&&(r.value=!0)}function E(){r.value=!1}return t.lockScroll&&oP(r),t.closeOnPressEscape&&dP({handleClose:m},r),fP(r),Ie(()=>t.modelValue,S=>{S?(s.value=!1,p(),i.value=!0,e("open"),o.value=t.zIndex?o.value++:Mt.nextZIndex(),nt(()=>{n.value&&(n.value.scrollTop=0)})):r.value&&g()}),mt(()=>{t.modelValue&&(r.value=!0,i.value=!0,p())}),{afterEnter:d,afterLeave:f,beforeLeave:h,handleClose:m,onModalClick:y,close:g,doClose:E,closed:s,style:u,rendered:i,visible:r,zIndex:o}},Z3=ye({name:"ElDialog",components:{ElOverlay:Y3,ElIcon:gr,...qM},directives:{TrapFocus:Lx},props:X3,emits:Q3,setup(t,e){const n=Z(),r=J3(t,e,n),s=r0(r.onModalClick);return{dialogRef:n,overlayEvent:s,...r}}}),e4=["aria-label"],t4={class:"el-dialog__header"},n4={class:"el-dialog__title"},r4={key:0,class:"el-dialog__body"},s4={key:1,class:"el-dialog__footer"};function i4(t,e,n,r,s,i){const o=Ce("el-icon"),a=Ce("el-overlay"),l=hm("trap-focus");return C(),Se(Vu,{to:"body",disabled:!t.appendToBody},[Y(Ht,{name:"dialog-fade",onAfterEnter:t.afterEnter,onAfterLeave:t.afterLeave,onBeforeLeave:t.beforeLeave},{default:ue(()=>[at(Y(a,{"custom-mask-event":"",mask:t.modal,"overlay-class":t.modalClass,"z-index":t.zIndex},{default:ue(()=>[L("div",{class:"el-overlay-dialog",onClick:e[2]||(e[2]=(...c)=>t.overlayEvent.onClick&&t.overlayEvent.onClick(...c)),onMousedown:e[3]||(e[3]=(...c)=>t.overlayEvent.onMousedown&&t.overlayEvent.onMousedown(...c)),onMouseup:e[4]||(e[4]=(...c)=>t.overlayEvent.onMouseup&&t.overlayEvent.onMouseup(...c))},[at((C(),F("div",{ref:"dialogRef",class:ie(["el-dialog",{"is-fullscreen":t.fullscreen,"el-dialog--center":t.center},t.customClass]),"aria-modal":"true",role:"dialog","aria-label":t.title||"dialog",style:Ge(t.style),onClick:e[1]||(e[1]=ut(()=>{},["stop"]))},[L("div",t4,[Fe(t.$slots,"title",{},()=>[L("span",n4,be(t.title),1)]),t.showClose?(C(),F("button",{key:0,"aria-label":"close",class:"el-dialog__headerbtn",type:"button",onClick:e[0]||(e[0]=(...c)=>t.handleClose&&t.handleClose(...c))},[Y(o,{class:"el-dialog__close"},{default:ue(()=>[(C(),Se(Fn(t.closeIcon||"close")))]),_:1})])):ce("v-if",!0)]),t.rendered?(C(),F("div",r4,[Fe(t.$slots,"default")])):ce("v-if",!0),t.$slots.footer?(C(),F("div",s4,[Fe(t.$slots,"footer")])):ce("v-if",!0)],14,e4)),[[l]])],32)]),_:3},8,["mask","overlay-class","z-index"]),[[pt,t.visible]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"])}var o4=qe(Z3,[["render",i4]]);const a4=Wt(o4);function l4(){const t=Z([]),e=M(()=>{if(!t.value.length)return"0";const i=Math.max(...t.value);return i?`${i}px`:""});function n(i){return t.value.indexOf(i)}function r(i,o){if(i&&o){const a=n(o);t.value.splice(a,1,i)}else i&&t.value.push(i)}function s(i){const o=n(i);o>-1&&t.value.splice(o,1)}return{autoLabelWidth:e,registerLabelWidth:r,deregisterLabelWidth:s}}const c4=ye({name:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:{type:[String,Number],default:""},labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:Boolean},emits:["validate"],setup(t,{emit:e}){const n=[];Ie(()=>t.rules,()=>{n.forEach(p=>{p.evaluateValidationEnabled()}),t.validateOnRuleChange&&u(()=>({}))});const r=Ys(),s="el-form",i=M(()=>{const{labelPosition:p,inline:g}=t;return[s,`${s}--${r.value}`,p?`${s}--label-${p}`:"",g?`${s}--inline`:""]}),o=p=>{p&&n.push(p)},a=p=>{p.prop&&n.splice(n.indexOf(p),1)},l=()=>{t.model&&n.forEach(p=>{p.resetField()})},c=(p=[])=>{(p.length?typeof p=="string"?n.filter(v=>p===v.prop):n.filter(v=>p.indexOf(v.prop)>-1):n).forEach(v=>{v.clearValidate()})},u=p=>{if(!t.model)return;let g;typeof p!="function"&&(g=new Promise((E,S)=>{p=function(_,R){_?E(!0):S(R)}})),n.length===0&&p(!0);let v=!0,m=0,y={},T;for(const E of n)E.validate("",(S,_)=>{S&&(v=!1,T||(T=_)),y={...y,..._},++m===n.length&&p(v,y)});return!v&&t.scrollToError&&f(Object.keys(T)[0]),g},d=(p,g)=>{p=[].concat(p);const v=n.filter(m=>p.indexOf(m.prop)!==-1);n.length&&v.forEach(m=>{m.validate("",g)})},f=p=>{n.forEach(g=>{g.prop===p&&g.$el.scrollIntoView()})},h=gt({...In(t),resetFields:l,clearValidate:c,validateField:d,emit:e,addField:o,removeField:a,...l4()});return Vt(cs,h),{formKls:i,validate:u,resetFields:l,clearValidate:c,validateField:d,scrollToField:f}}});function u4(t,e,n,r,s,i){return C(),F("form",{class:ie(t.formKls)},[Fe(t.$slots,"default")],2)}var d4=qe(c4,[["render",u4]]);function Qr(){return Qr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qr.apply(this,arguments)}function f4(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Fi(t,e)}function Yc(t){return Yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yc(t)}function Fi(t,e){return Fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Fi(t,e)}function h4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function No(t,e,n){return h4()?No=Reflect.construct.bind():No=function(s,i,o){var a=[null];a.push.apply(a,i);var l=Function.bind.apply(s,a),c=new l;return o&&Fi(c,o.prototype),c},No.apply(null,arguments)}function p4(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Xc(t){var e=typeof Map=="function"?new Map:void 0;return Xc=function(r){if(r===null||!p4(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(r))return e.get(r);e.set(r,s)}function s(){return No(r,arguments,Yc(this).constructor)}return s.prototype=Object.create(r.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),Fi(s,r)},Xc(t)}var g4=/%[sdj%]/g,m4=function(){};function Qc(t){if(!t||!t.length)return null;var e={};return t.forEach(function(n){var r=n.field;e[r]=e[r]||[],e[r].push(n)}),e}function gn(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var s=0,i=n.length;if(typeof t=="function")return t.apply(null,n);if(typeof t=="string"){var o=t.replace(g4,function(a){if(a==="%%")return"%";if(s>=i)return a;switch(a){case"%s":return String(n[s++]);case"%d":return Number(n[s++]);case"%j":try{return JSON.stringify(n[s++])}catch{return"[Circular]"}break;default:return a}});return o}return t}function v4(t){return t==="string"||t==="url"||t==="hex"||t==="email"||t==="date"||t==="pattern"}function Ct(t,e){return!!(t==null||e==="array"&&Array.isArray(t)&&!t.length||v4(e)&&typeof t=="string"&&!t)}function y4(t,e,n){var r=[],s=0,i=t.length;function o(a){r.push.apply(r,a||[]),s++,s===i&&n(r)}t.forEach(function(a){e(a,o)})}function Uh(t,e,n){var r=0,s=t.length;function i(o){if(o&&o.length){n(o);return}var a=r;r=r+1,a<s?e(t[a],i):n([])}i([])}function b4(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n]||[])}),e}var Vh=function(t){f4(e,t);function e(n,r){var s;return s=t.call(this,"Async Validation Error")||this,s.errors=n,s.fields=r,s}return e}(Xc(Error));function T4(t,e,n,r,s){if(e.first){var i=new Promise(function(f,h){var p=function(m){return r(m),m.length?h(new Vh(m,Qc(m))):f(s)},g=b4(t);Uh(g,n,p)});return i.catch(function(f){return f}),i}var o=e.firstFields===!0?Object.keys(t):e.firstFields||[],a=Object.keys(t),l=a.length,c=0,u=[],d=new Promise(function(f,h){var p=function(v){if(u.push.apply(u,v),c++,c===l)return r(u),u.length?h(new Vh(u,Qc(u))):f(s)};a.length||(r(u),f(s)),a.forEach(function(g){var v=t[g];o.indexOf(g)!==-1?Uh(v,n,p):y4(v,n,p)})});return d.catch(function(f){return f}),d}function E4(t){return!!(t&&t.message!==void 0)}function S4(t,e){for(var n=t,r=0;r<e.length;r++){if(n==null)return n;n=n[e[r]]}return n}function Hh(t,e){return function(n){var r;return t.fullFields?r=S4(e,t.fullFields):r=e[n.field||t.fullField],E4(n)?(n.field=n.field||t.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||t.fullField}}}function Gh(t,e){if(e){for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];typeof r=="object"&&typeof t[n]=="object"?t[n]=Qr({},t[n],r):t[n]=r}}return t}var H0=function(e,n,r,s,i,o){e.required&&(!r.hasOwnProperty(e.field)||Ct(n,o||e.type))&&s.push(gn(i.messages.required,e.fullField))},_4=function(e,n,r,s,i){(/^\s+$/.test(n)||n==="")&&s.push(gn(i.messages.whitespace,e.fullField))},To,A4=function(){if(To)return To;var t="[a-fA-F\\d:]",e=function(E){return E&&E.includeBoundaries?"(?:(?<=\\s|^)(?="+t+")|(?<="+t+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",s=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+s+"$)"),o=new RegExp("^"+n+"$"),a=new RegExp("^"+s+"$"),l=function(E){return E&&E.exact?i:new RegExp("(?:"+e(E)+n+e(E)+")|(?:"+e(E)+s+e(E)+")","g")};l.v4=function(T){return T&&T.exact?o:new RegExp(""+e(T)+n+e(T),"g")},l.v6=function(T){return T&&T.exact?a:new RegExp(""+e(T)+s+e(T),"g")};var c="(?:(?:[a-z]+:)?//)",u="(?:\\S+(?::\\S*)?@)?",d=l.v4().source,f=l.v6().source,h="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",p="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",m='(?:[/?#][^\\s"]*)?',y="(?:"+c+"|www\\.)"+u+"(?:localhost|"+d+"|"+f+"|"+h+p+g+")"+v+m;return To=new RegExp("(?:^"+y+"$)","i"),To},Kh={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},ci={integer:function(e){return ci.number(e)&&parseInt(e,10)===e},float:function(e){return ci.number(e)&&!ci.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch{return!1}},date:function(e){return typeof e.getTime=="function"&&typeof e.getMonth=="function"&&typeof e.getYear=="function"&&!isNaN(e.getTime())},number:function(e){return isNaN(e)?!1:typeof e=="number"},object:function(e){return typeof e=="object"&&!ci.array(e)},method:function(e){return typeof e=="function"},email:function(e){return typeof e=="string"&&e.length<=320&&!!e.match(Kh.email)},url:function(e){return typeof e=="string"&&e.length<=2048&&!!e.match(A4())},hex:function(e){return typeof e=="string"&&!!e.match(Kh.hex)}},w4=function(e,n,r,s,i){if(e.required&&n===void 0){H0(e,n,r,s,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],a=e.type;o.indexOf(a)>-1?ci[a](n)||s.push(gn(i.messages.types[a],e.fullField,e.type)):a&&typeof n!==e.type&&s.push(gn(i.messages.types[a],e.fullField,e.type))},L4=function(e,n,r,s,i){var o=typeof e.len=="number",a=typeof e.min=="number",l=typeof e.max=="number",c=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=n,d=null,f=typeof n=="number",h=typeof n=="string",p=Array.isArray(n);if(f?d="number":h?d="string":p&&(d="array"),!d)return!1;p&&(u=n.length),h&&(u=n.replace(c,"_").length),o?u!==e.len&&s.push(gn(i.messages[d].len,e.fullField,e.len)):a&&!l&&u<e.min?s.push(gn(i.messages[d].min,e.fullField,e.min)):l&&!a&&u>e.max?s.push(gn(i.messages[d].max,e.fullField,e.max)):a&&l&&(u<e.min||u>e.max)&&s.push(gn(i.messages[d].range,e.fullField,e.min,e.max))},hs="enum",I4=function(e,n,r,s,i){e[hs]=Array.isArray(e[hs])?e[hs]:[],e[hs].indexOf(n)===-1&&s.push(gn(i.messages[hs],e.fullField,e[hs].join(", ")))},C4=function(e,n,r,s,i){if(e.pattern){if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(n)||s.push(gn(i.messages.pattern.mismatch,e.fullField,n,e.pattern));else if(typeof e.pattern=="string"){var o=new RegExp(e.pattern);o.test(n)||s.push(gn(i.messages.pattern.mismatch,e.fullField,n,e.pattern))}}},We={required:H0,whitespace:_4,type:w4,range:L4,enum:I4,pattern:C4},R4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n,"string")&&!e.required)return r();We.required(e,n,s,o,i,"string"),Ct(n,"string")||(We.type(e,n,s,o,i),We.range(e,n,s,o,i),We.pattern(e,n,s,o,i),e.whitespace===!0&&We.whitespace(e,n,s,o,i))}r(o)},$4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&We.type(e,n,s,o,i)}r(o)},k4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n===""&&(n=void 0),Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&(We.type(e,n,s,o,i),We.range(e,n,s,o,i))}r(o)},D4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&We.type(e,n,s,o,i)}r(o)},P4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),Ct(n)||We.type(e,n,s,o,i)}r(o)},O4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&(We.type(e,n,s,o,i),We.range(e,n,s,o,i))}r(o)},M4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&(We.type(e,n,s,o,i),We.range(e,n,s,o,i))}r(o)},x4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(n==null&&!e.required)return r();We.required(e,n,s,o,i,"array"),n!=null&&(We.type(e,n,s,o,i),We.range(e,n,s,o,i))}r(o)},F4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&We.type(e,n,s,o,i)}r(o)},N4="enum",B4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i),n!==void 0&&We[N4](e,n,s,o,i)}r(o)},U4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n,"string")&&!e.required)return r();We.required(e,n,s,o,i),Ct(n,"string")||We.pattern(e,n,s,o,i)}r(o)},V4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n,"date")&&!e.required)return r();if(We.required(e,n,s,o,i),!Ct(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),We.type(e,l,s,o,i),l&&We.range(e,l.getTime(),s,o,i)}}r(o)},H4=function(e,n,r,s,i){var o=[],a=Array.isArray(n)?"array":typeof n;We.required(e,n,s,o,i,a),r(o)},Tl=function(e,n,r,s,i){var o=e.type,a=[],l=e.required||!e.required&&s.hasOwnProperty(e.field);if(l){if(Ct(n,o)&&!e.required)return r();We.required(e,n,s,a,i,o),Ct(n,o)||We.type(e,n,s,a,i)}r(a)},G4=function(e,n,r,s,i){var o=[],a=e.required||!e.required&&s.hasOwnProperty(e.field);if(a){if(Ct(n)&&!e.required)return r();We.required(e,n,s,o,i)}r(o)},Si={string:R4,method:$4,number:k4,boolean:D4,regexp:P4,integer:O4,float:M4,array:x4,object:F4,enum:B4,pattern:U4,date:V4,url:Tl,hex:Tl,email:Tl,required:H4,any:G4};function Jc(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Zc=Jc(),Qi=function(){function t(n){this.rules=null,this._messages=Zc,this.define(n)}var e=t.prototype;return e.define=function(r){var s=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];s.rules[i]=Array.isArray(o)?o:[o]})},e.messages=function(r){return r&&(this._messages=Gh(Jc(),r)),this._messages},e.validate=function(r,s,i){var o=this;s===void 0&&(s={}),i===void 0&&(i=function(){});var a=r,l=s,c=i;if(typeof l=="function"&&(c=l,l={}),!this.rules||Object.keys(this.rules).length===0)return c&&c(null,a),Promise.resolve(a);function u(g){var v=[],m={};function y(E){if(Array.isArray(E)){var S;v=(S=v).concat.apply(S,E)}else v.push(E)}for(var T=0;T<g.length;T++)y(g[T]);v.length?(m=Qc(v),c(v,m)):c(null,a)}if(l.messages){var d=this.messages();d===Zc&&(d=Jc()),Gh(d,l.messages),l.messages=d}else l.messages=this.messages();var f={},h=l.keys||Object.keys(this.rules);h.forEach(function(g){var v=o.rules[g],m=a[g];v.forEach(function(y){var T=y;typeof T.transform=="function"&&(a===r&&(a=Qr({},a)),m=a[g]=T.transform(m)),typeof T=="function"?T={validator:T}:T=Qr({},T),T.validator=o.getValidationMethod(T),T.validator&&(T.field=g,T.fullField=T.fullField||g,T.type=o.getType(T),f[g]=f[g]||[],f[g].push({rule:T,value:m,source:a,field:g}))})});var p={};return T4(f,l,function(g,v){var m=g.rule,y=(m.type==="object"||m.type==="array")&&(typeof m.fields=="object"||typeof m.defaultField=="object");y=y&&(m.required||!m.required&&g.value),m.field=g.field;function T(_,R){return Qr({},R,{fullField:m.fullField+"."+_,fullFields:m.fullFields?[].concat(m.fullFields,[_]):[_]})}function E(_){_===void 0&&(_=[]);var R=Array.isArray(_)?_:[_];!l.suppressWarning&&R.length&&t.warning("async-validator:",R),R.length&&m.message!==void 0&&(R=[].concat(m.message));var k=R.map(Hh(m,a));if(l.first&&k.length)return p[m.field]=1,v(k);if(!y)v(k);else{if(m.required&&!g.value)return m.message!==void 0?k=[].concat(m.message).map(Hh(m,a)):l.error&&(k=[l.error(m,gn(l.messages.required,m.field))]),v(k);var P={};m.defaultField&&Object.keys(g.value).map(function(w){P[w]=m.defaultField}),P=Qr({},P,g.rule.fields);var $={};Object.keys(P).forEach(function(w){var U=P[w],z=Array.isArray(U)?U:[U];$[w]=z.map(T.bind(null,w))});var N=new t($);N.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),N.validate(g.value,g.rule.options||l,function(w){var U=[];k&&k.length&&U.push.apply(U,k),w&&w.length&&U.push.apply(U,w),v(U.length?U:null)})}}var S;if(m.asyncValidator)S=m.asyncValidator(m,g.value,E,g.source,l);else if(m.validator){try{S=m.validator(m,g.value,E,g.source,l)}catch(_){console.error==null||console.error(_),l.suppressValidatorError||setTimeout(function(){throw _},0),E(_.message)}S===!0?E():S===!1?E(typeof m.message=="function"?m.message(m.fullField||m.field):m.message||(m.fullField||m.field)+" fails"):S instanceof Array?E(S):S instanceof Error&&E(S.message)}S&&S.then&&S.then(function(){return E()},function(_){return E(_)})},function(g){u(g)},a)},e.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Si.hasOwnProperty(r.type))throw new Error(gn("Unknown rule type %s",r.type));return r.type||"string"},e.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var s=Object.keys(r),i=s.indexOf("message");return i!==-1&&s.splice(i,1),s.length===1&&s[0]==="required"?Si.required:Si[this.getType(r)]||void 0},t}();Qi.register=function(e,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Si[e]=n};Qi.warning=m4;Qi.messages=Zc;Qi.validators=Si;var K4=ye({name:"ElLabelWrap",props:{isAutoWidth:Boolean,updateAll:Boolean},setup(t,{slots:e}){const n=Z(null),r=Ke(cs),s=Ke(Ki),i=Z(0);Ie(i,(u,d)=>{t.updateAll&&(r.registerLabelWidth(u,d),s.updateComputedLabelWidth(u))});const o=()=>{var u;if((u=n.value)!=null&&u.firstElementChild){const d=window.getComputedStyle(n.value.firstElementChild).width;return Math.ceil(parseFloat(d))}else return 0},a=(u="update")=>{nt(()=>{e.default&&t.isAutoWidth&&(u==="update"?i.value=o():u==="remove"&&r.deregisterLabelWidth(i.value))})},l=()=>a("update");mt(()=>{Xu(n.value.firstElementChild,l),l()}),Fu(l),Un(()=>{var u;a("remove"),Qu((u=n.value)==null?void 0:u.firstElementChild,l)});function c(){var u,d;if(!e)return null;if(t.isAutoWidth){const f=r.autoLabelWidth,h={};if(f&&f!=="auto"){const p=Math.max(0,parseInt(f,10)-i.value),g=r.labelPosition==="left"?"marginRight":"marginLeft";p&&(h[g]=`${p}px`)}return zt("div",{ref:n,class:["el-form-item__label-wrap"],style:h},(u=e.default)==null?void 0:u.call(e))}else return zt(Ne,{ref:n},(d=e.default)==null?void 0:d.call(e))}return c}});const q4=ye({name:"ElFormItem",componentName:"ElFormItem",components:{LabelWrap:K4},props:{label:String,labelWidth:{type:[String,Number],default:""},prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:{type:String,validator:F0}},setup(t,{slots:e}){const n=Ke(cs,{}),r=Z(""),s=Z(""),i=Z(!1),o=Z(""),a=Z(),l=_t(),c=M(()=>{let w=l.parent;for(;w&&w.type.name!=="ElForm";){if(w.type.name==="ElFormItem")return!0;w=w.parent}return!1});let u;Ie(()=>t.error,w=>{s.value=w,r.value=w?"error":""},{immediate:!0}),Ie(()=>t.validateStatus,w=>{r.value=w});const d=M(()=>t.for||t.prop),f=M(()=>{const w={};if(n.labelPosition==="top")return w;const U=Oi(t.labelWidth||n.labelWidth);return U&&(w.width=U),w}),h=M(()=>{const w={};if(n.labelPosition==="top"||n.inline||!t.label&&!t.labelWidth&&c.value)return w;const U=Oi(t.labelWidth||n.labelWidth);return!t.label&&!e.label&&(w.marginLeft=U),w}),p=M(()=>{const w=n.model;if(!w||!t.prop)return;let U=t.prop;return U.indexOf(":")!==-1&&(U=U.replace(/:/,".")),pl(w,U,!0).v}),g=M(()=>{const w=E();let U=!1;return w&&w.length&&w.every(z=>z.required?(U=!0,!1):!0),U}),v=Ys(void 0,{formItem:!1}),m=(w,U=At)=>{if(!i.value){U();return}const z=S(w);if((!z||z.length===0)&&t.required===void 0){U();return}r.value="validating";const ne={};z&&z.length>0&&z.forEach(q=>{delete q.trigger}),ne[t.prop]=z;const oe=new Qi(ne),W={};W[t.prop]=p.value,oe.validate(W,{firstFields:!0},(q,pe)=>{var J;r.value=q?"error":"success",s.value=q?q[0].message||`${t.prop} is required`:"",U(s.value,q?pe:{}),(J=n.emit)==null||J.call(n,"validate",t.prop,!q,s.value||null)})},y=()=>{r.value="",s.value=""},T=()=>{const w=n.model,U=p.value;let z=t.prop;z.indexOf(":")!==-1&&(z=z.replace(/:/,"."));const ne=pl(w,z,!0);Array.isArray(U)?ne.o[ne.k]=[].concat(u):ne.o[ne.k]=u,nt(()=>{y()})},E=()=>{const w=n.rules,U=t.rules,z=t.required!==void 0?{required:!!t.required}:[],ne=pl(w,t.prop||"",!1),oe=w?ne.o[t.prop||""]||ne.v:[];return[].concat(U||oe||[]).concat(z)},S=w=>E().filter(z=>!z.trigger||w===""?!0:Array.isArray(z.trigger)?z.trigger.indexOf(w)>-1:z.trigger===w).map(z=>({...z})),_=()=>{var w;i.value=!!((w=E())!=null&&w.length)},R=w=>{o.value=w?`${w}px`:""},k=gt({...In(t),size:v,validateState:r,$el:a,evaluateValidationEnabled:_,resetField:T,clearValidate:y,validate:m,updateComputedLabelWidth:R});mt(()=>{if(t.prop){n==null||n.addField(k);const w=p.value;u=Array.isArray(w)?[...w]:w,_()}}),Un(()=>{n==null||n.removeField(k)}),Vt(Ki,k);const P=M(()=>[{"el-form-item--feedback":n.statusIcon,"is-error":r.value==="error","is-validating":r.value==="validating","is-success":r.value==="success","is-required":g.value||t.required,"is-no-asterisk":n.hideRequiredAsterisk},v.value?`el-form-item--${v.value}`:""]),$=M(()=>r.value==="error"&&t.showMessage&&n.showMessage),N=M(()=>(t.label||"")+(n.labelSuffix||""));return{formItemRef:a,formItemClass:P,shouldShowError:$,elForm:n,labelStyle:f,contentStyle:h,validateMessage:s,labelFor:d,resetField:T,clearValidate:y,currentLabel:N}}}),j4=["for"];function z4(t,e,n,r,s,i){const o=Ce("LabelWrap");return C(),F("div",{ref:"formItemRef",class:ie(["el-form-item",t.formItemClass])},[Y(o,{"is-auto-width":t.labelStyle.width==="auto","update-all":t.elForm.labelWidth==="auto"},{default:ue(()=>[t.label||t.$slots.label?(C(),F("label",{key:0,for:t.labelFor,class:"el-form-item__label",style:Ge(t.labelStyle)},[Fe(t.$slots,"label",{label:t.currentLabel},()=>[st(be(t.currentLabel),1)])],12,j4)):ce("v-if",!0)]),_:3},8,["is-auto-width","update-all"]),L("div",{class:"el-form-item__content",style:Ge(t.contentStyle)},[Fe(t.$slots,"default"),Y(Ht,{name:"el-zoom-in-top"},{default:ue(()=>[t.shouldShowError?Fe(t.$slots,"error",{key:0,error:t.validateMessage},()=>[L("div",{class:ie(["el-form-item__error",{"el-form-item__error--inline":typeof t.inlineMessage=="boolean"?t.inlineMessage:t.elForm.inlineMessage||!1}])},be(t.validateMessage),3)]):ce("v-if",!0)]),_:3})],4)],2)}var G0=qe(q4,[["render",z4]]);const W4=Wt(d4,{FormItem:G0}),Y4=Pr(G0),X4=vt({urlList:{type:ze(Array),default:()=>qi([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0},infinite:{type:Boolean,default:!0},hideOnClickModal:{type:Boolean,default:!1}}),Q4={close:()=>!0,switch:t=>typeof t=="number"},ni={CONTAIN:{name:"contain",icon:jo(xO)},ORIGINAL:{name:"original",icon:jo(mM)}},J4=Dk()?"DOMMouseScroll":"mousewheel",Z4=ye({name:"ElImageViewer",components:{ElIcon:gr,Close:xa,ArrowLeft:o0,ArrowRight:a0,ZoomOut:KM,ZoomIn:NM,RefreshLeft:sM,RefreshRight:uM},props:X4,emits:Q4,setup(t,{emit:e}){const{t:n}=pr(),r=Gt("image-viewer"),s=Z(),i=Z([]),o=Ug(),a=Z(!0),l=Z(t.initialIndex),c=Z(ni.CONTAIN),u=Z({scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}),d=M(()=>{const{urlList:N}=t;return N.length<=1}),f=M(()=>l.value===0),h=M(()=>l.value===t.urlList.length-1),p=M(()=>t.urlList[l.value]),g=M(()=>{const{scale:N,deg:w,offsetX:U,offsetY:z,enableTransition:ne}=u.value;let oe=U/N,W=z/N;switch(w%360){case 90:case-270:[oe,W]=[W,-oe];break;case 180:case-180:[oe,W]=[-oe,-W];break;case 270:case-90:[oe,W]=[-W,oe];break}const q={transform:`scale(${N}) rotate(${w}deg) translate(${oe}px, ${W}px)`,transition:ne?"transform .3s":""};return c.value.name===ni.CONTAIN.name&&(q.maxWidth=q.maxHeight="100%"),q});function v(){y(),e("close")}function m(){const N=gl(U=>{switch(U.code){case Jt.esc:v();break;case Jt.space:R();break;case Jt.left:k();break;case Jt.up:$("zoomIn");break;case Jt.right:P();break;case Jt.down:$("zoomOut");break}}),w=gl(U=>{(U.wheelDelta?U.wheelDelta:-U.detail)>0?$("zoomIn",{zoomRate:1.2,enableTransition:!1}):$("zoomOut",{zoomRate:1.2,enableTransition:!1})});o.run(()=>{pn(document,"keydown",N),pn(document,J4,w)})}function y(){o.stop()}function T(){a.value=!1}function E(N){a.value=!1,N.target.alt=n("el.image.error")}function S(N){if(a.value||N.button!==0||!s.value)return;u.value.enableTransition=!1;const{offsetX:w,offsetY:U}=u.value,z=N.pageX,ne=N.pageY,oe=gl(q=>{u.value={...u.value,offsetX:w+q.pageX-z,offsetY:U+q.pageY-ne}}),W=pn(document,"mousemove",oe);pn(document,"mouseup",()=>{W()}),N.preventDefault()}function _(){u.value={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}function R(){if(a.value)return;const N=Object.keys(ni),w=Object.values(ni),U=c.value.name,ne=(w.findIndex(oe=>oe.name===U)+1)%N.length;c.value=ni[N[ne]],_()}function k(){if(f.value&&!t.infinite)return;const N=t.urlList.length;l.value=(l.value-1+N)%N}function P(){if(h.value&&!t.infinite)return;const N=t.urlList.length;l.value=(l.value+1)%N}function $(N,w={}){if(a.value)return;const{zoomRate:U,rotateDeg:z,enableTransition:ne}={zoomRate:1.4,rotateDeg:90,enableTransition:!0,...w};switch(N){case"zoomOut":u.value.scale>.2&&(u.value.scale=parseFloat((u.value.scale/U).toFixed(3)));break;case"zoomIn":u.value.scale<7&&(u.value.scale=parseFloat((u.value.scale*U).toFixed(3)));break;case"clockwise":u.value.deg+=z;break;case"anticlockwise":u.value.deg-=z;break}u.value.enableTransition=ne}return Ie(p,()=>{nt(()=>{const N=i.value[0];N!=null&&N.complete||(a.value=!0)})}),Ie(l,N=>{_(),e("switch",N)}),mt(()=>{var N,w;m(),(w=(N=s.value)==null?void 0:N.focus)==null||w.call(N)}),{index:l,wrapper:s,imgRefs:i,isSingle:d,isFirst:f,isLast:h,currentImg:p,imgStyle:g,mode:c,handleActions:$,prev:k,next:P,hide:v,toggleMode:R,handleImgLoad:T,handleImgError:E,handleMouseDown:S,ns:r}}}),eB=["src"];function tB(t,e,n,r,s,i){const o=Ce("close"),a=Ce("el-icon"),l=Ce("arrow-left"),c=Ce("arrow-right"),u=Ce("zoom-out"),d=Ce("zoom-in"),f=Ce("refresh-left"),h=Ce("refresh-right");return C(),Se(Ht,{name:"viewer-fade"},{default:ue(()=>[L("div",{ref:"wrapper",tabindex:-1,class:ie(t.ns.e("wrapper")),style:Ge({zIndex:t.zIndex})},[L("div",{class:ie(t.ns.e("mask")),onClick:e[0]||(e[0]=ut(p=>t.hideOnClickModal&&t.hide(),["self"]))},null,2),ce(" CLOSE "),L("span",{class:ie([t.ns.e("btn"),t.ns.e("close")]),onClick:e[1]||(e[1]=(...p)=>t.hide&&t.hide(...p))},[Y(a,null,{default:ue(()=>[Y(o)]),_:1})],2),ce(" ARROW "),t.isSingle?ce("v-if",!0):(C(),F(Ne,{key:0},[L("span",{class:ie([t.ns.e("btn"),t.ns.e("prev"),t.ns.is("disabled",!t.infinite&&t.isFirst)]),onClick:e[2]||(e[2]=(...p)=>t.prev&&t.prev(...p))},[Y(a,null,{default:ue(()=>[Y(l)]),_:1})],2),L("span",{class:ie([t.ns.e("btn"),t.ns.e("next"),t.ns.is("disabled",!t.infinite&&t.isLast)]),onClick:e[3]||(e[3]=(...p)=>t.next&&t.next(...p))},[Y(a,null,{default:ue(()=>[Y(c)]),_:1})],2)],64)),ce(" ACTIONS "),L("div",{class:ie([t.ns.e("btn"),t.ns.e("actions")])},[L("div",{class:ie(t.ns.e("actions__inner"))},[Y(a,{onClick:e[4]||(e[4]=p=>t.handleActions("zoomOut"))},{default:ue(()=>[Y(u)]),_:1}),Y(a,{onClick:e[5]||(e[5]=p=>t.handleActions("zoomIn"))},{default:ue(()=>[Y(d)]),_:1}),L("i",{class:ie(t.ns.e("actions__divider"))},null,2),Y(a,{onClick:t.toggleMode},{default:ue(()=>[(C(),Se(Fn(t.mode.icon)))]),_:1},8,["onClick"]),L("i",{class:ie(t.ns.e("actions__divider"))},null,2),Y(a,{onClick:e[6]||(e[6]=p=>t.handleActions("anticlockwise"))},{default:ue(()=>[Y(f)]),_:1}),Y(a,{onClick:e[7]||(e[7]=p=>t.handleActions("clockwise"))},{default:ue(()=>[Y(h)]),_:1})],2)],2),ce(" CANVAS "),L("div",{class:ie(t.ns.e("canvas"))},[(C(!0),F(Ne,null,kt(t.urlList,(p,g)=>at((C(),F("img",{ref_for:!0,ref:v=>t.imgRefs[g]=v,key:p,src:p,style:Ge(t.imgStyle),class:ie(t.ns.e("img")),onLoad:e[8]||(e[8]=(...v)=>t.handleImgLoad&&t.handleImgLoad(...v)),onError:e[9]||(e[9]=(...v)=>t.handleImgError&&t.handleImgError(...v)),onMousedown:e[10]||(e[10]=(...v)=>t.handleMouseDown&&t.handleMouseDown(...v))},null,46,eB)),[[pt,g===t.index]])),128))],2),Fe(t.$slots,"default")],6)]),_:3})}var nB=qe(Z4,[["render",tB]]);const rB=Wt(nB),sB=vt({appendToBody:{type:Boolean,default:!1},hideOnClickModal:{type:Boolean,default:!1},src:{type:String,default:""},fit:{type:String,values:["","contain","cover","fill","none","scale-down"],default:""},lazy:{type:Boolean,default:!1},scrollContainer:{type:ze([String,Object])},previewSrcList:{type:ze(Array),default:()=>qi([])},zIndex:{type:Number,default:2e3},initialIndex:{type:Number,default:0}}),iB={error:t=>t instanceof Event,switch:t=>Jn(t),close:()=>!0},oB=t=>t&&t.nodeType===Node.ELEMENT_NODE;let qh="";const aB=ye({name:"ElImage",components:{ImageViewer:rB},inheritAttrs:!1,props:sB,emits:iB,setup(t,{emit:e,attrs:n}){const{t:r}=pr(),s=Gt("image"),i=Hm(),o=Z(!1),a=Z(!0),l=Z(0),c=Z(0),u=Z(!1),d=Z(),f=Z();let h,p;const g=M(()=>n.style),v=M(()=>{const{fit:z}=t;return it&&z?{objectFit:z}:{}}),m=M(()=>{const{previewSrcList:z}=t;return Array.isArray(z)&&z.length>0}),y=M(()=>{const{previewSrcList:z,initialIndex:ne}=t;let oe=ne;return ne>z.length-1&&(oe=0),oe}),T=()=>{if(!it)return;a.value=!0,o.value=!1;const z=new Image,ne=t.src;z.addEventListener("load",oe=>{ne===t.src&&E(oe,z)}),z.addEventListener("error",oe=>{ne===t.src&&S(oe)}),Object.entries(i.value).forEach(([oe,W])=>{oe.toLowerCase()!=="onload"&&z.setAttribute(oe,W)}),z.src=ne};function E(z,ne){l.value=ne.width,c.value=ne.height,a.value=!1,o.value=!1}function S(z){a.value=!1,o.value=!0,e("error",z)}function _(){iP(d.value,f.value)&&(T(),P())}const R=vk(_,200);async function k(){var z;if(!it)return;await nt();const{scrollContainer:ne}=t;oB(ne)?f.value=ne:lt(ne)&&ne!==""?f.value=(z=document.querySelector(ne))!=null?z:void 0:d.value&&(f.value=sP(d.value)),f.value&&(h=pn(f,"scroll",R),setTimeout(()=>_(),100))}function P(){!it||!f.value||!R||(h(),f.value=void 0)}function $(z){if(z.ctrlKey){if(z.deltaY<0)return z.preventDefault(),!1;if(z.deltaY>0)return z.preventDefault(),!1}}function N(){m.value&&(p=pn("wheel",$,{passive:!1}),qh=document.body.style.overflow,document.body.style.overflow="hidden",u.value=!0)}function w(){p==null||p(),document.body.style.overflow=qh,u.value=!1,e("close")}function U(z){e("switch",z)}return Ie(()=>t.src,()=>{t.lazy?(a.value=!0,o.value=!1,P(),k()):T()}),mt(()=>{t.lazy?k():T()}),{attrs:i,loading:a,hasLoadError:o,showViewer:u,containerStyle:g,imageStyle:v,preview:m,imageIndex:y,container:d,ns:s,clickHandler:N,closeViewer:w,switchViewer:U,t:r}}}),lB=["src"],cB={key:0};function uB(t,e,n,r,s,i){const o=Ce("image-viewer");return C(),F("div",{ref:"container",class:ie([t.ns.b(),t.$attrs.class]),style:Ge(t.containerStyle)},[t.loading?Fe(t.$slots,"placeholder",{key:0},()=>[L("div",{class:ie(t.ns.e("placeholder"))},null,2)]):t.hasLoadError?Fe(t.$slots,"error",{key:1},()=>[L("div",{class:ie(t.ns.e("error"))},be(t.t("el.image.error")),3)]):(C(),F("img",Qn({key:2},t.attrs,{src:t.src,style:t.imageStyle,class:[t.ns.e("inner"),t.preview?t.ns.e("preview"):""],onClick:e[0]||(e[0]=(...a)=>t.clickHandler&&t.clickHandler(...a))}),null,16,lB)),(C(),Se(Vu,{to:"body",disabled:!t.appendToBody},[t.preview?(C(),F(Ne,{key:0},[t.showViewer?(C(),Se(o,{key:0,"z-index":t.zIndex,"initial-index":t.imageIndex,"url-list":t.previewSrcList,"hide-on-click-modal":t.hideOnClickModal,onClose:t.closeViewer,onSwitch:t.switchViewer},{default:ue(()=>[t.$slots.viewer?(C(),F("div",cB,[Fe(t.$slots,"viewer")])):ce("v-if",!0)]),_:3},8,["z-index","initial-index","url-list","hide-on-click-modal","onClose","onSwitch"])):ce("v-if",!0)],2112)):ce("v-if",!0)],8,["disabled"]))],6)}var dB=qe(aB,[["render",uB]]);const cd=Wt(dB),fB={disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String,default:""}},hB=ye({name:"ElPaginationPrev",components:{ElIcon:gr,ArrowLeft:o0},props:fB,emits:["click"],setup(t){return{internalDisabled:M(()=>t.disabled||t.currentPage<=1)}}}),pB=["disabled","aria-disabled"],gB={key:0};function mB(t,e,n,r,s,i){const o=Ce("arrow-left"),a=Ce("el-icon");return C(),F("button",{type:"button",class:"btn-prev",disabled:t.internalDisabled,"aria-disabled":t.internalDisabled,onClick:e[0]||(e[0]=l=>t.$emit("click",l))},[t.prevText?(C(),F("span",gB,be(t.prevText),1)):(C(),Se(a,{key:1},{default:ue(()=>[Y(o)]),_:1}))],8,pB)}var vB=qe(hB,[["render",mB]]);const yB={disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String,default:""}},bB=ye({name:"ElPaginationNext",components:{ElIcon:gr,ArrowRight:a0},props:yB,emits:["click"],setup(t){return{internalDisabled:M(()=>t.disabled||t.currentPage===t.pageCount||t.pageCount===0)}}}),TB=["disabled","aria-disabled"],EB={key:0};function SB(t,e,n,r,s,i){const o=Ce("arrow-right"),a=Ce("el-icon");return C(),F("button",{type:"button",class:"btn-next",disabled:t.internalDisabled,"aria-disabled":t.internalDisabled,onClick:e[0]||(e[0]=l=>t.$emit("click",l))},[t.nextText?(C(),F("span",EB,be(t.nextText),1)):(C(),Se(a,{key:1},{default:ue(()=>[Y(o)]),_:1}))],8,TB)}var _B=qe(bB,[["render",SB]]);const K0="ElSelectGroup",Na="ElSelect";function AB(t,e){const n=Ke(Na),r=Ke(K0,{disabled:!1}),s=M(()=>Object.prototype.toString.call(t.value).toLowerCase()==="[object object]"),i=M(()=>n.props.multiple?d(n.props.modelValue,t.value):f(t.value,n.props.modelValue)),o=M(()=>{if(n.props.multiple){const g=n.props.modelValue||[];return!i.value&&g.length>=n.props.multipleLimit&&n.props.multipleLimit>0}else return!1}),a=M(()=>t.label||(s.value?"":t.value)),l=M(()=>t.value||t.label||""),c=M(()=>t.disabled||e.groupDisabled||o.value),u=_t(),d=(g=[],v)=>{if(s.value){const m=n.props.valueKey;return g&&g.some(y=>Pn(y,m)===Pn(v,m))}else return g&&g.indexOf(v)>-1},f=(g,v)=>{if(s.value){const{valueKey:m}=n.props;return Pn(g,m)===Pn(v,m)}else return g===v},h=()=>{!t.disabled&&!r.disabled&&(n.hoverIndex=n.optionsArray.indexOf(u.proxy))};Ie(()=>a.value,()=>{!t.created&&!n.props.remote&&n.setSelected()}),Ie(()=>t.value,(g,v)=>{const{remote:m,valueKey:y}=n.props;if(!t.created&&!m){if(y&&typeof g=="object"&&typeof v=="object"&&g[y]===v[y])return;n.setSelected()}}),Ie(()=>r.disabled,()=>{e.groupDisabled=r.disabled},{immediate:!0});const{queryChange:p}=Qe(n);return Ie(p,g=>{const{query:v}=Le(g),m=new RegExp(kk(v),"i");e.visible=m.test(a.value)||t.created,e.visible||n.filteredOptionsCount--}),{select:n,currentLabel:a,currentValue:l,itemSelected:i,isDisabled:c,hoverItem:h}}const wB=ye({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(t){const e=gt({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:n,itemSelected:r,isDisabled:s,select:i,hoverItem:o}=AB(t,e),{visible:a,hover:l}=In(e),c=_t().proxy,u=c.value;i.onOptionCreate(c),Un(()=>{const{selected:f}=i,h=i.props.multiple?f:[f],p=i.cachedOptions.has(u),g=h.some(v=>v.value===c.value);p&&!g&&i.cachedOptions.delete(u),i.onOptionDestroy(u)});function d(){t.disabled!==!0&&e.groupDisabled!==!0&&i.handleOptionSelect(c,!0)}return{currentLabel:n,itemSelected:r,isDisabled:s,select:i,hoverItem:o,visible:a,hover:l,selectOptionClick:d,states:e}}});function LB(t,e,n,r,s,i){return at((C(),F("li",{class:ie(["el-select-dropdown__item",{selected:t.itemSelected,"is-disabled":t.isDisabled,hover:t.hover}]),onMouseenter:e[0]||(e[0]=(...o)=>t.hoverItem&&t.hoverItem(...o)),onClick:e[1]||(e[1]=ut((...o)=>t.selectOptionClick&&t.selectOptionClick(...o),["stop"]))},[Fe(t.$slots,"default",{},()=>[L("span",null,be(t.currentLabel),1)])],34)),[[pt,t.visible]])}var ud=qe(wB,[["render",LB]]);const IB=ye({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const t=Ke(Na),e=M(()=>t.props.popperClass),n=M(()=>t.props.multiple),r=M(()=>t.props.fitInputWidth),s=Z("");function i(){var o;s.value=`${(o=t.selectWrapper)==null?void 0:o.getBoundingClientRect().width}px`}return mt(()=>{i(),Xu(t.selectWrapper,i)}),Un(()=>{Qu(t.selectWrapper,i)}),{minWidth:s,popperClass:e,isMultiple:n,isFitInputWidth:r}}});function CB(t,e,n,r,s,i){return C(),F("div",{class:ie(["el-select-dropdown",[{"is-multiple":t.isMultiple},t.popperClass]]),style:Ge({[t.isFitInputWidth?"width":"minWidth"]:t.minWidth})},[Fe(t.$slots,"default")],6)}var RB=qe(IB,[["render",CB]]);function $B(t){const{t:e}=pr();return gt({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:t.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:e("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:0,tagInMultiLine:!1})}const kB=(t,e,n)=>{const{t:r}=pr(),s=Z(null),i=Z(null),o=Z(null),a=Z(null),l=Z(null),c=Z(null),u=Z(-1),d=zo({query:""}),f=zo(""),h=Ke(cs,{}),p=Ke(Ki,{}),g=M(()=>!t.filterable||t.multiple||!e.visible),v=M(()=>t.disabled||h.disabled),m=M(()=>{const x=t.multiple?Array.isArray(t.modelValue)&&t.modelValue.length>0:t.modelValue!==void 0&&t.modelValue!==null&&t.modelValue!=="";return t.clearable&&!v.value&&e.inputHovering&&x}),y=M(()=>t.remote&&t.filterable?"":t.suffixIcon),T=M(()=>y.value&&e.visible?"is-reverse":""),E=M(()=>t.remote?300:0),S=M(()=>t.loading?t.loadingText||r("el.select.loading"):t.remote&&e.query===""&&e.options.size===0?!1:t.filterable&&e.query&&e.options.size>0&&e.filteredOptionsCount===0?t.noMatchText||r("el.select.noMatch"):e.options.size===0?t.noDataText||r("el.select.noData"):null),_=M(()=>Array.from(e.options.values())),R=M(()=>Array.from(e.cachedOptions.values())),k=M(()=>{const x=_.value.filter(te=>!te.created).some(te=>te.currentLabel===e.query);return t.filterable&&t.allowCreate&&e.query!==""&&!x}),P=Ys(),$=M(()=>["small"].indexOf(P.value)>-1?"small":"default"),N=M({get(){return e.visible&&S.value!==!1},set(x){e.visible=x}});Ie(()=>v.value,()=>{nt(()=>{w()})}),Ie(()=>t.placeholder,x=>{e.cachedPlaceHolder=e.currentPlaceholder=x}),Ie(()=>t.modelValue,(x,te)=>{var Ee;t.multiple&&(w(),x&&x.length>0||i.value&&e.query!==""?e.currentPlaceholder="":e.currentPlaceholder=e.cachedPlaceHolder,t.filterable&&!t.reserveKeyword&&(e.query="",U(e.query))),oe(),t.filterable&&!t.multiple&&(e.inputLength=20),Wc(x,te)||(Ee=p.validate)==null||Ee.call(p,"change")},{flush:"post",deep:!0}),Ie(()=>e.visible,x=>{var te,Ee,Oe;x?((Ee=(te=o.value)==null?void 0:te.updatePopper)==null||Ee.call(te),t.filterable&&(e.filteredOptionsCount=e.optionsCount,e.query=t.remote?"":e.selectedLabel,t.multiple?(Oe=i.value)==null||Oe.focus():e.selectedLabel&&(e.currentPlaceholder=e.selectedLabel,e.selectedLabel=""),U(e.query),!t.multiple&&!t.remote&&(d.value.query="",Qs(d),Qs(f)))):(i.value&&i.value.blur(),e.query="",e.previousQuery=null,e.selectedLabel="",e.inputLength=20,e.menuVisibleOnFocus=!1,q(),nt(()=>{i.value&&i.value.value===""&&e.selected.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)}),t.multiple||(e.selected&&(t.filterable&&t.allowCreate&&e.createdSelected&&e.createdLabel?e.selectedLabel=e.createdLabel:e.selectedLabel=e.selected.currentLabel,t.filterable&&(e.query=e.selectedLabel)),t.filterable&&(e.currentPlaceholder=e.cachedPlaceHolder))),n.emit("visible-change",x)}),Ie(()=>e.options.entries(),()=>{var x,te,Ee;if(!it)return;(te=(x=o.value)==null?void 0:x.updatePopper)==null||te.call(x),t.multiple&&w();const Oe=((Ee=l.value)==null?void 0:Ee.querySelectorAll("input"))||[];Array.from(Oe).indexOf(document.activeElement)===-1&&oe(),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&ne()},{flush:"post"}),Ie(()=>e.hoverIndex,x=>{typeof x=="number"&&x>-1&&(u.value=_.value[x]||{}),_.value.forEach(te=>{te.hover=u.value===te})});const w=()=>{t.collapseTags&&!t.filterable||nt(()=>{var x,te;if(!s.value)return;const Ee=s.value.$el.childNodes,Oe=Array.from(Ee).filter(Ft=>Ft.tagName==="INPUT")[0],Et=a.value,Kt=e.initialInputHeight||40;Oe.style.height=e.selected.length===0?`${Kt}px`:`${Math.max(Et?Et.clientHeight+(Et.clientHeight>Kt?6:0):0,Kt)}px`,e.tagInMultiLine=parseFloat(Oe.style.height)>Kt,e.visible&&S.value!==!1&&((te=(x=o.value)==null?void 0:x.updatePopper)==null||te.call(x))})},U=x=>{if(!(e.previousQuery===x||e.isOnComposition)){if(e.previousQuery===null&&(typeof t.filterMethod=="function"||typeof t.remoteMethod=="function")){e.previousQuery=x;return}e.previousQuery=x,nt(()=>{var te,Ee;e.visible&&((Ee=(te=o.value)==null?void 0:te.updatePopper)==null||Ee.call(te))}),e.hoverIndex=-1,t.multiple&&t.filterable&&nt(()=>{const te=i.value.value.length*15+20;e.inputLength=t.collapseTags?Math.min(50,te):te,z(),w()}),t.remote&&typeof t.remoteMethod=="function"?(e.hoverIndex=-1,t.remoteMethod(x)):typeof t.filterMethod=="function"?(t.filterMethod(x),Qs(f)):(e.filteredOptionsCount=e.optionsCount,d.value.query=x,Qs(d),Qs(f)),t.defaultFirstOption&&(t.filterable||t.remote)&&e.filteredOptionsCount&&ne()}},z=()=>{e.currentPlaceholder!==""&&(e.currentPlaceholder=i.value.value?"":e.cachedPlaceHolder)},ne=()=>{const x=_.value.filter(Oe=>Oe.visible&&!Oe.disabled&&!Oe.states.groupDisabled),te=x.filter(Oe=>Oe.created)[0],Ee=x[0];e.hoverIndex=fe(_.value,te||Ee)},oe=()=>{var x;if(!t.multiple){const Ee=W(t.modelValue);(x=Ee.props)!=null&&x.created?(e.createdLabel=Ee.props.value,e.createdSelected=!0):e.createdSelected=!1,e.selectedLabel=Ee.currentLabel,e.selected=Ee,t.filterable&&(e.query=e.selectedLabel);return}const te=[];Array.isArray(t.modelValue)&&t.modelValue.forEach(Ee=>{te.push(W(Ee))}),e.selected=te,nt(()=>{w()})},W=x=>{let te;const Ee=ko(x).toLowerCase()==="object",Oe=ko(x).toLowerCase()==="null",Et=ko(x).toLowerCase()==="undefined";for(let yn=e.cachedOptions.size-1;yn>=0;yn--){const Ye=R.value[yn];if(Ee?Pn(Ye.value,t.valueKey)===Pn(x,t.valueKey):Ye.value===x){te={value:x,currentLabel:Ye.currentLabel,isDisabled:Ye.isDisabled};break}}if(te)return te;const Ft={value:x,currentLabel:!Ee&&!Oe&&!Et?x:""};return t.multiple&&(Ft.hitState=!1),Ft},q=()=>{setTimeout(()=>{const x=t.valueKey;t.multiple?e.selected.length>0?e.hoverIndex=Math.min.apply(null,e.selected.map(te=>_.value.findIndex(Ee=>Pn(Ee,x)===Pn(te,x)))):e.hoverIndex=-1:e.hoverIndex=_.value.findIndex(te=>_e(te)===_e(e.selected))},300)},pe=()=>{var x,te;J(),(te=(x=o.value)==null?void 0:x.updatePopper)==null||te.call(x),t.multiple&&w()},J=()=>{var x;e.inputWidth=(x=s.value)==null?void 0:x.$el.getBoundingClientRect().width},le=()=>{t.filterable&&e.query!==e.selectedLabel&&(e.query=e.selectedLabel,U(e.query))},me=Hc(()=>{le()},E.value),Ve=Hc(x=>{U(x.target.value)},E.value),je=x=>{Wc(t.modelValue,x)||n.emit(v0,x)},He=x=>{if(x.target.value.length<=0&&!D()){const te=t.modelValue.slice();te.pop(),n.emit(hn,te),je(te)}x.target.value.length===1&&t.modelValue.length===0&&(e.currentPlaceholder=e.cachedPlaceHolder)},Je=(x,te)=>{const Ee=e.selected.indexOf(te);if(Ee>-1&&!v.value){const Oe=t.modelValue.slice();Oe.splice(Ee,1),n.emit(hn,Oe),je(Oe),n.emit("remove-tag",te.value)}x.stopPropagation()},H=x=>{x.stopPropagation();const te=t.multiple?[]:"";if(typeof te!="string")for(const Ee of e.selected)Ee.isDisabled&&te.push(Ee.value);n.emit(hn,te),je(te),e.visible=!1,n.emit("clear")},he=(x,te)=>{var Ee;if(t.multiple){const Oe=(t.modelValue||[]).slice(),Et=fe(Oe,x.value);Et>-1?Oe.splice(Et,1):(t.multipleLimit<=0||Oe.length<t.multipleLimit)&&Oe.push(x.value),n.emit(hn,Oe),je(Oe),x.created&&(e.query="",U(""),e.inputLength=20),t.filterable&&((Ee=i.value)==null||Ee.focus())}else n.emit(hn,x.value),je(x.value),e.visible=!1;e.isSilentBlur=te,Te(),!e.visible&&nt(()=>{Ue(x)})},fe=(x=[],te)=>{if(!et(te))return x.indexOf(te);const Ee=t.valueKey;let Oe=-1;return x.some((Et,Kt)=>Pn(Et,Ee)===Pn(te,Ee)?(Oe=Kt,!0):!1),Oe},Te=()=>{e.softFocus=!0;const x=i.value||s.value;x&&(x==null||x.focus())},Ue=x=>{var te,Ee,Oe,Et,Kt;const Ft=Array.isArray(x)?x[0]:x;let yn=null;if(Ft!=null&&Ft.value){const Ye=_.value.filter(yt=>yt.value===Ft.value);Ye.length>0&&(yn=Ye[0].$el)}if(o.value&&yn){const Ye=(Et=(Oe=(Ee=(te=o.value)==null?void 0:te.popperRef)==null?void 0:Ee.contentRef)==null?void 0:Oe.querySelector)==null?void 0:Et.call(Oe,".el-select-dropdown__wrap");Ye&&w3(Ye,yn)}(Kt=c.value)==null||Kt.handleScroll()},rt=x=>{e.optionsCount++,e.filteredOptionsCount++,e.options.set(x.value,x),e.cachedOptions.set(x.value,x)},A=x=>{e.optionsCount--,e.filteredOptionsCount--,e.options.delete(x)},I=x=>{x.code!==Jt.backspace&&D(!1),e.inputLength=i.value.value.length*15+20,w()},D=x=>{if(!Array.isArray(e.selected))return;const te=e.selected[e.selected.length-1];if(te)return x===!0||x===!1?(te.hitState=x,x):(te.hitState=!te.hitState,te.hitState)},V=x=>{const te=x.target.value;if(x.type==="compositionend")e.isOnComposition=!1,nt(()=>U(te));else{const Ee=te[te.length-1]||"";e.isOnComposition=!y0(Ee)}},G=()=>{nt(()=>Ue(e.selected))},ae=x=>{e.softFocus?e.softFocus=!1:((t.automaticDropdown||t.filterable)&&(e.visible=!0,t.filterable&&(e.menuVisibleOnFocus=!0)),n.emit("focus",x))},ge=()=>{var x;e.visible=!1,(x=s.value)==null||x.blur()},se=x=>{nt(()=>{e.isSilentBlur?e.isSilentBlur=!1:n.emit("blur",x)}),e.softFocus=!1},de=x=>{H(x)},re=()=>{e.visible=!1},ve=()=>{var x;t.automaticDropdown||v.value||(e.menuVisibleOnFocus?e.menuVisibleOnFocus=!1:e.visible=!e.visible,e.visible&&((x=i.value||s.value)==null||x.focus()))},we=()=>{e.visible?_.value[e.hoverIndex]&&he(_.value[e.hoverIndex],void 0):ve()},_e=x=>et(x.value)?Pn(x.value,t.valueKey):x.value,$e=M(()=>_.value.filter(x=>x.visible).every(x=>x.disabled)),Be=x=>{if(!e.visible){e.visible=!0;return}if(!(e.options.size===0||e.filteredOptionsCount===0)&&!e.isOnComposition&&!$e.value){x==="next"?(e.hoverIndex++,e.hoverIndex===e.options.size&&(e.hoverIndex=0)):x==="prev"&&(e.hoverIndex--,e.hoverIndex<0&&(e.hoverIndex=e.options.size-1));const te=_.value[e.hoverIndex];(te.disabled===!0||te.states.groupDisabled===!0||!te.visible)&&Be(x),nt(()=>Ue(u.value))}};return{optionsArray:_,selectSize:P,handleResize:pe,debouncedOnInputChange:me,debouncedQueryChange:Ve,deletePrevTag:He,deleteTag:Je,deleteSelected:H,handleOptionSelect:he,scrollToOption:Ue,readonly:g,resetInputHeight:w,showClose:m,iconComponent:y,iconReverse:T,showNewOption:k,collapseTagSize:$,setSelected:oe,managePlaceholder:z,selectDisabled:v,emptyText:S,toggleLastOptionHitState:D,resetInputState:I,handleComposition:V,onOptionCreate:rt,onOptionDestroy:A,handleMenuEnter:G,handleFocus:ae,blur:ge,handleBlur:se,handleClearClick:de,handleClose:re,toggleMenu:ve,selectOption:we,getValueKey:_e,navigateOptions:Be,dropMenuVisible:N,queryChange:d,groupQueryChange:f,reference:s,input:i,tooltipRef:o,tags:a,selectWrapper:l,scrollbar:c}},DB=ye({name:"ElSelect",componentName:"ElSelect",components:{ElInput:Ju,ElSelectMenu:RB,ElOption:ud,ElTag:k3,ElScrollbar:eF,ElTooltip:O0,ElIcon:gr},directives:{ClickOutside:wx},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:F0},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0},clearIcon:{type:[String,Object],default:Wu},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:[String,Object],default:YP},tagType:{type:String,default:"info"}},emits:[hn,v0,"remove-tag","clear","visible-change","focus","blur"],setup(t,e){const{t:n}=pr(),r=$B(t),{optionsArray:s,selectSize:i,readonly:o,handleResize:a,collapseTagSize:l,debouncedOnInputChange:c,debouncedQueryChange:u,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,setSelected:v,resetInputHeight:m,managePlaceholder:y,showClose:T,selectDisabled:E,iconComponent:S,iconReverse:_,showNewOption:R,emptyText:k,toggleLastOptionHitState:P,resetInputState:$,handleComposition:N,onOptionCreate:w,onOptionDestroy:U,handleMenuEnter:z,handleFocus:ne,blur:oe,handleBlur:W,handleClearClick:q,handleClose:pe,toggleMenu:J,selectOption:le,getValueKey:me,navigateOptions:Ve,dropMenuVisible:je,reference:He,input:Je,tooltipRef:H,tags:he,selectWrapper:fe,scrollbar:Te,queryChange:Ue,groupQueryChange:rt}=kB(t,r,e),{focus:A}=Ok(He),{inputWidth:I,selected:D,inputLength:V,filteredOptionsCount:G,visible:ae,softFocus:ge,selectedLabel:se,hoverIndex:de,query:re,inputHovering:ve,currentPlaceholder:we,menuVisibleOnFocus:_e,isOnComposition:$e,isSilentBlur:Be,options:x,cachedOptions:te,optionsCount:Ee,prefixWidth:Oe,tagInMultiLine:Et}=In(r),Kt=M(()=>{const Ye=["el-select"],yt=Le(i);return yt&&Ye.push(`el-select--${yt}`),t.disabled&&Ye.push("el-select--disabled"),Ye}),Ft=M(()=>({maxWidth:`${Le(I)-32}px`,width:"100%"}));Vt(Na,gt({props:t,options:x,optionsArray:s,cachedOptions:te,optionsCount:Ee,filteredOptionsCount:G,hoverIndex:de,handleOptionSelect:p,onOptionCreate:w,onOptionDestroy:U,selectWrapper:fe,selected:D,setSelected:v,queryChange:Ue,groupQueryChange:rt})),mt(()=>{if(r.cachedPlaceHolder=we.value=t.placeholder||n("el.select.placeholder"),t.multiple&&Array.isArray(t.modelValue)&&t.modelValue.length>0&&(we.value=""),Xu(fe.value,a),He.value&&He.value.$el){const Ye={large:36,default:32,small:28},yt=He.value.input;r.initialInputHeight=yt.getBoundingClientRect().height||Ye[i.value]}t.remote&&t.multiple&&m(),nt(()=>{if(He.value&&(He.value.$el&&(I.value=He.value.$el.getBoundingClientRect().width),e.slots.prefix)){const Ye=He.value.$el.childNodes,yt=Array.from(Ye).filter(X1=>X1.tagName==="INPUT")[0],no=He.value.$el.querySelector(".el-input__prefix");Oe.value=Math.max(no.getBoundingClientRect().width+5,30),r.prefixWidth&&(yt.style.paddingLeft=`${Math.max(r.prefixWidth,30)}px`)}}),v()}),Un(()=>{Qu(fe.value,a)}),t.multiple&&!Array.isArray(t.modelValue)&&e.emit(hn,[]),!t.multiple&&Array.isArray(t.modelValue)&&e.emit(hn,"");const yn=M(()=>{var Ye,yt;return(yt=(Ye=H.value)==null?void 0:Ye.popperRef)==null?void 0:yt.contentRef});return{tagInMultiLine:Et,prefixWidth:Oe,selectSize:i,readonly:o,handleResize:a,collapseTagSize:l,debouncedOnInputChange:c,debouncedQueryChange:u,deletePrevTag:d,deleteTag:f,deleteSelected:h,handleOptionSelect:p,scrollToOption:g,inputWidth:I,selected:D,inputLength:V,filteredOptionsCount:G,visible:ae,softFocus:ge,selectedLabel:se,hoverIndex:de,query:re,inputHovering:ve,currentPlaceholder:we,menuVisibleOnFocus:_e,isOnComposition:$e,isSilentBlur:Be,options:x,resetInputHeight:m,managePlaceholder:y,showClose:T,selectDisabled:E,iconComponent:S,iconReverse:_,showNewOption:R,emptyText:k,toggleLastOptionHitState:P,resetInputState:$,handleComposition:N,handleMenuEnter:z,handleFocus:ne,blur:oe,handleBlur:W,handleClearClick:q,handleClose:pe,toggleMenu:J,selectOption:le,getValueKey:me,navigateOptions:Ve,dropMenuVisible:je,focus:A,reference:He,input:Je,tooltipRef:H,popperPaneRef:yn,tags:he,selectWrapper:fe,scrollbar:Te,wrapperKls:Kt,selectTagsStyle:Ft}}}),PB={class:"select-trigger"},OB={key:0},MB={class:"el-select__tags-text"},xB=["disabled","autocomplete"],FB={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}},NB={key:1,class:"el-select-dropdown__empty"};function BB(t,e,n,r,s,i){const o=Ce("el-tag"),a=Ce("el-icon"),l=Ce("el-input"),c=Ce("el-option"),u=Ce("el-scrollbar"),d=Ce("el-select-menu"),f=Ce("el-tooltip"),h=hm("click-outside");return at((C(),F("div",{ref:"selectWrapper",class:ie(t.wrapperKls),onClick:e[24]||(e[24]=ut((...p)=>t.toggleMenu&&t.toggleMenu(...p),["stop"]))},[Y(f,{ref:"tooltipRef",visible:t.dropMenuVisible,"onUpdate:visible":e[23]||(e[23]=p=>t.dropMenuVisible=p),placement:"bottom-start","append-to-body":t.popperAppendToBody,"popper-class":`el-select__popper ${t.popperClass}`,"fallback-placements":["bottom-start","top-start","right","left"],effect:"light",pure:"",trigger:"click",transition:"el-zoom-in-top","stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:"",onShow:t.handleMenuEnter},{default:ue(()=>[L("div",PB,[t.multiple?(C(),F("div",{key:0,ref:"tags",class:"el-select__tags",style:Ge(t.selectTagsStyle)},[t.collapseTags&&t.selected.length?(C(),F("span",OB,[Y(o,{closable:!t.selectDisabled&&!t.selected[0].isDisabled,size:t.collapseTagSize,hit:t.selected[0].hitState,type:t.tagType,"disable-transitions":"",onClose:e[0]||(e[0]=p=>t.deleteTag(p,t.selected[0]))},{default:ue(()=>[L("span",{class:"el-select__tags-text",style:Ge({maxWidth:t.inputWidth-123+"px"})},be(t.selected[0].currentLabel),5)]),_:1},8,["closable","size","hit","type"]),t.selected.length>1?(C(),Se(o,{key:0,closable:!1,size:t.collapseTagSize,type:t.tagType,"disable-transitions":""},{default:ue(()=>[L("span",MB,"+ "+be(t.selected.length-1),1)]),_:1},8,["size","type"])):ce("v-if",!0)])):ce("v-if",!0),ce(" <div> "),t.collapseTags?ce("v-if",!0):(C(),Se(Ht,{key:1,onAfterLeave:t.resetInputHeight},{default:ue(()=>[L("span",{style:Ge({marginLeft:t.prefixWidth&&t.selected.length?`${t.prefixWidth}px`:null})},[(C(!0),F(Ne,null,kt(t.selected,p=>(C(),Se(o,{key:t.getValueKey(p),closable:!t.selectDisabled&&!p.isDisabled,size:t.collapseTagSize,hit:p.hitState,type:t.tagType,"disable-transitions":"",onClose:g=>t.deleteTag(g,p)},{default:ue(()=>[L("span",{class:"el-select__tags-text",style:Ge({maxWidth:t.inputWidth-75+"px"})},be(p.currentLabel),5)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],4)]),_:1},8,["onAfterLeave"])),ce(" </div> "),t.filterable?at((C(),F("input",{key:2,ref:"input","onUpdate:modelValue":e[1]||(e[1]=p=>t.query=p),type:"text",class:ie(["el-select__input",[t.selectSize?`is-${t.selectSize}`:""]]),disabled:t.selectDisabled,autocomplete:t.autocomplete,style:Ge({marginLeft:t.prefixWidth&&!t.selected.length||t.tagInMultiLine?`${t.prefixWidth}px`:null,flexGrow:"1",width:`${t.inputLength/(t.inputWidth-32)}%`,maxWidth:`${t.inputWidth-42}px`}),onFocus:e[2]||(e[2]=(...p)=>t.handleFocus&&t.handleFocus(...p)),onBlur:e[3]||(e[3]=(...p)=>t.handleBlur&&t.handleBlur(...p)),onKeyup:e[4]||(e[4]=(...p)=>t.managePlaceholder&&t.managePlaceholder(...p)),onKeydown:[e[5]||(e[5]=(...p)=>t.resetInputState&&t.resetInputState(...p)),e[6]||(e[6]=Pt(ut(p=>t.navigateOptions("next"),["prevent"]),["down"])),e[7]||(e[7]=Pt(ut(p=>t.navigateOptions("prev"),["prevent"]),["up"])),e[8]||(e[8]=Pt(ut(p=>t.visible=!1,["stop","prevent"]),["esc"])),e[9]||(e[9]=Pt(ut((...p)=>t.selectOption&&t.selectOption(...p),["stop","prevent"]),["enter"])),e[10]||(e[10]=Pt((...p)=>t.deletePrevTag&&t.deletePrevTag(...p),["delete"])),e[11]||(e[11]=Pt(p=>t.visible=!1,["tab"]))],onCompositionstart:e[12]||(e[12]=(...p)=>t.handleComposition&&t.handleComposition(...p)),onCompositionupdate:e[13]||(e[13]=(...p)=>t.handleComposition&&t.handleComposition(...p)),onCompositionend:e[14]||(e[14]=(...p)=>t.handleComposition&&t.handleComposition(...p)),onInput:e[15]||(e[15]=(...p)=>t.debouncedQueryChange&&t.debouncedQueryChange(...p))},null,46,xB)),[[gS,t.query]]):ce("v-if",!0)],4)):ce("v-if",!0),Y(l,{id:t.id,ref:"reference",modelValue:t.selectedLabel,"onUpdate:modelValue":e[16]||(e[16]=p=>t.selectedLabel=p),type:"text",placeholder:t.currentPlaceholder,name:t.name,autocomplete:t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,class:ie({"is-focus":t.visible}),tabindex:t.multiple&&t.filterable?-1:void 0,onFocus:t.handleFocus,onBlur:t.handleBlur,onInput:t.debouncedOnInputChange,onPaste:t.debouncedOnInputChange,onCompositionstart:t.handleComposition,onCompositionupdate:t.handleComposition,onCompositionend:t.handleComposition,onKeydown:[e[17]||(e[17]=Pt(ut(p=>t.navigateOptions("next"),["stop","prevent"]),["down"])),e[18]||(e[18]=Pt(ut(p=>t.navigateOptions("prev"),["stop","prevent"]),["up"])),Pt(ut(t.selectOption,["stop","prevent"]),["enter"]),e[19]||(e[19]=Pt(ut(p=>t.visible=!1,["stop","prevent"]),["esc"])),e[20]||(e[20]=Pt(p=>t.visible=!1,["tab"]))],onMouseenter:e[21]||(e[21]=p=>t.inputHovering=!0),onMouseleave:e[22]||(e[22]=p=>t.inputHovering=!1)},aE({suffix:ue(()=>[t.iconComponent?at((C(),Se(a,{key:0,class:ie(["el-select__caret","el-input__icon",t.iconReverse])},{default:ue(()=>[(C(),Se(Fn(t.iconComponent)))]),_:1},8,["class"])),[[pt,!t.showClose]]):ce("v-if",!0),t.showClose&&t.clearIcon?(C(),Se(a,{key:1,class:"el-select__caret el-input__icon",onClick:t.handleClearClick},{default:ue(()=>[(C(),Se(Fn(t.clearIcon)))]),_:1},8,["onClick"])):ce("v-if",!0)]),_:2},[t.$slots.prefix?{name:"prefix",fn:ue(()=>[L("div",FB,[Fe(t.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])])]),content:ue(()=>[Y(d,null,{default:ue(()=>[at(Y(u,{ref:"scrollbar",tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list",class:ie({"is-empty":!t.allowCreate&&t.query&&t.filteredOptionsCount===0})},{default:ue(()=>[t.showNewOption?(C(),Se(c,{key:0,value:t.query,created:!0},null,8,["value"])):ce("v-if",!0),Fe(t.$slots,"default")]),_:3},8,["class"]),[[pt,t.options.size>0&&!t.loading]]),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&t.options.size===0)?(C(),F(Ne,{key:0},[t.$slots.empty?Fe(t.$slots,"empty",{key:0}):(C(),F("p",NB,be(t.emptyText),1))],2112)):ce("v-if",!0)]),_:3})]),_:3},8,["visible","append-to-body","popper-class","onShow"])],2)),[[h,t.handleClose,t.popperPaneRef]])}var UB=qe(DB,[["render",BB]]);const VB=ye({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(t){const e=Z(!0),n=_t(),r=Z([]);Vt(K0,gt({...In(t)}));const s=Ke(Na);mt(()=>{r.value=i(n.subTree)});const i=a=>{const l=[];return Array.isArray(a.children)&&a.children.forEach(c=>{var u;c.type&&c.type.name==="ElOption"&&c.component&&c.component.proxy?l.push(c.component.proxy):(u=c.children)!=null&&u.length&&l.push(...i(c))}),l},{groupQueryChange:o}=Qe(s);return Ie(o,()=>{e.value=r.value.some(a=>a.visible===!0)}),{visible:e}}}),HB={class:"el-select-group__wrap"},GB={class:"el-select-group__title"},KB={class:"el-select-group"};function qB(t,e,n,r,s,i){return at((C(),F("ul",HB,[L("li",GB,be(t.label),1),L("li",null,[L("ul",KB,[Fe(t.$slots,"default")])])],512)),[[pt,t.visible]])}var q0=qe(VB,[["render",qB]]);const j0=Wt(UB,{Option:ud,OptionGroup:q0}),z0=Pr(ud),jB=Pr(q0),dd=()=>Ke(Km,{}),zB=vt({pageSize:{type:Number,required:!0},pageSizes:{type:ze(Array),default:()=>qi([10,20,30,40,50,100])},popperClass:{type:String,default:""},disabled:Boolean,size:{type:String,default:"default"}}),WB=ye({name:"ElPaginationSizes",components:{ElSelect:j0,ElOption:z0},props:zB,emits:["page-size-change"],setup(t,{emit:e}){const{t:n}=pr(),r=dd(),s=Z(t.pageSize);Ie(()=>t.pageSizes,(a,l)=>{if(!Wc(a,l)&&Array.isArray(a)){const c=a.indexOf(t.pageSize)>-1?t.pageSize:t.pageSizes[0];e("page-size-change",c)}}),Ie(()=>t.pageSize,a=>{s.value=a});const i=M(()=>t.pageSizes);function o(a){var l;a!==s.value&&(s.value=a,(l=r.handleSizeChange)==null||l.call(r,Number(a)))}return{innerPagesizes:i,innerPageSize:s,t:n,handleChange:o}}}),YB={class:"el-pagination__sizes"};function XB(t,e,n,r,s,i){const o=Ce("el-option"),a=Ce("el-select");return C(),F("span",YB,[Y(a,{"model-value":t.innerPageSize,disabled:t.disabled,"popper-class":t.popperClass,size:t.size,onChange:t.handleChange},{default:ue(()=>[(C(!0),F(Ne,null,kt(t.innerPagesizes,l=>(C(),Se(o,{key:l,value:l,label:l+t.t("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","onChange"])])}var QB=qe(WB,[["render",XB]]);const JB=ye({name:"ElPaginationJumper",components:{ElInput:Ju},setup(){const{t}=pr(),{pageCount:e,disabled:n,currentPage:r,changeEvent:s}=dd(),i=Z(),o=M(()=>{var c;return(c=i.value)!=null?c:r==null?void 0:r.value});function a(c){i.value=+c}function l(c){c=Math.trunc(+c),s==null||s(+c),i.value=void 0}return{pageCount:e,disabled:n,innerValue:o,t,handleInput:a,handleChange:l}}}),ZB=["disabled"];function e8(t,e,n,r,s,i){const o=Ce("el-input");return C(),F("span",{class:"el-pagination__jump",disabled:t.disabled},[st(be(t.t("el.pagination.goto"))+" ",1),Y(o,{size:"small",class:"el-pagination__editor is-in-pagination",min:1,max:t.pageCount,disabled:t.disabled,"model-value":t.innerValue,type:"number","onUpdate:modelValue":t.handleInput,onChange:t.handleChange},null,8,["max","disabled","model-value","onUpdate:modelValue","onChange"]),st(" "+be(t.t("el.pagination.pageClassifier")),1)],8,ZB)}var t8=qe(JB,[["render",e8]]);const n8={total:{type:Number,default:1e3}},r8=ye({name:"ElPaginationTotal",props:n8,setup(){const{t}=pr(),{disabled:e}=dd();return{t,disabled:e}}}),s8=["disabled"];function i8(t,e,n,r,s,i){return C(),F("span",{class:"el-pagination__total",disabled:t.disabled},be(t.t("el.pagination.total",{total:t.total})),9,s8)}var o8=qe(r8,[["render",i8]]);const a8={currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean},l8=ye({name:"ElPaginationPager",components:{DArrowLeft:AO,DArrowRight:$O,MoreFilled:JO},props:a8,emits:["change"],setup(t,{emit:e}){const n=Z(!1),r=Z(!1),s=Z(!1),i=Z(!1),o=M(()=>{const u=t.pagerCount,d=(u-1)/2,f=Number(t.currentPage),h=Number(t.pageCount);let p=!1,g=!1;h>u&&(f>u-d&&(p=!0),f<h-d&&(g=!0));const v=[];if(p&&!g){const m=h-(u-2);for(let y=m;y<h;y++)v.push(y)}else if(!p&&g)for(let m=2;m<u;m++)v.push(m);else if(p&&g){const m=Math.floor(u/2)-1;for(let y=f-m;y<=f+m;y++)v.push(y)}else for(let m=2;m<h;m++)v.push(m);return v});YT(()=>{const u=(t.pagerCount-1)/2;n.value=!1,r.value=!1,t.pageCount>t.pagerCount&&(t.currentPage>t.pagerCount-u&&(n.value=!0),t.currentPage<t.pageCount-u&&(r.value=!0))});function a(u){t.disabled||(u==="left"?s.value=!0:i.value=!0)}function l(u){const d=u.target;if(d.tagName.toLowerCase()==="li"&&Array.from(d.classList).includes("number")){const f=Number(d.textContent);f!==t.currentPage&&e("change",f)}}function c(u){const d=u.target;if(d.tagName.toLowerCase()==="ul"||t.disabled)return;let f=Number(d.textContent);const h=t.pageCount,p=t.currentPage,g=t.pagerCount-2;d.className.includes("more")&&(d.className.includes("quickprev")?f=p-g:d.className.includes("quicknext")&&(f=p+g)),isNaN(f)||(f<1&&(f=1),f>h&&(f=h)),f!==p&&e("change",f)}return{showPrevMore:n,showNextMore:r,quickPrevHover:s,quickNextHover:i,pagers:o,onMouseenter:a,onPagerClick:c,onEnter:l}}}),c8=["aria-current"],u8=["aria-current"],d8=["aria-current"];function f8(t,e,n,r,s,i){const o=Ce("d-arrow-left"),a=Ce("more-filled"),l=Ce("d-arrow-right");return C(),F("ul",{class:"el-pager",onClick:e[4]||(e[4]=(...c)=>t.onPagerClick&&t.onPagerClick(...c)),onKeyup:e[5]||(e[5]=Pt((...c)=>t.onEnter&&t.onEnter(...c),["enter"]))},[t.pageCount>0?(C(),F("li",{key:0,class:ie([{active:t.currentPage===1,disabled:t.disabled},"number"]),"aria-current":t.currentPage===1,tabindex:"0"}," 1 ",10,c8)):ce("v-if",!0),t.showPrevMore?(C(),F("li",{key:1,class:ie(["el-icon more btn-quickprev",{disabled:t.disabled}]),onMouseenter:e[0]||(e[0]=c=>t.onMouseenter("left")),onMouseleave:e[1]||(e[1]=c=>t.quickPrevHover=!1)},[t.quickPrevHover?(C(),Se(o,{key:0})):(C(),Se(a,{key:1}))],34)):ce("v-if",!0),(C(!0),F(Ne,null,kt(t.pagers,c=>(C(),F("li",{key:c,class:ie([{active:t.currentPage===c,disabled:t.disabled},"number"]),"aria-current":t.currentPage===c,tabindex:"0"},be(c),11,u8))),128)),t.showNextMore?(C(),F("li",{key:2,class:ie(["el-icon more btn-quicknext",{disabled:t.disabled}]),onMouseenter:e[2]||(e[2]=c=>t.onMouseenter("right")),onMouseleave:e[3]||(e[3]=c=>t.quickNextHover=!1)},[t.quickNextHover?(C(),Se(l,{key:0})):(C(),Se(a,{key:1}))],34)):ce("v-if",!0),t.pageCount>1?(C(),F("li",{key:3,class:ie([{active:t.currentPage===t.pageCount,disabled:t.disabled},"number"]),"aria-current":t.currentPage===t.pageCount,tabindex:"0"},be(t.pageCount),11,d8)):ce("v-if",!0)],32)}var h8=qe(l8,[["render",f8]]);const qt=t=>typeof t!="number",p8=vt({total:Number,pageSize:Number,defaultPageSize:Number,currentPage:Number,defaultCurrentPage:Number,pageCount:Number,pagerCount:{type:Number,validator:t=>typeof t=="number"&&(t|0)===t&&t>4&&t<22&&t%2===1,default:7},layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:ze(Array),default:()=>qi([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},nextText:{type:String,default:""},small:Boolean,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean}),g8={"update:current-page":t=>typeof t=="number","update:page-size":t=>typeof t=="number","size-change":t=>typeof t=="number","current-change":t=>typeof t=="number","prev-click":t=>typeof t=="number","next-click":t=>typeof t=="number"},jh="ElPagination";var m8=ye({name:jh,props:p8,emits:g8,setup(t,{emit:e,slots:n}){const{t:r}=pr(),s=_t().vnode.props||{},i="onUpdate:currentPage"in s||"onUpdate:current-page"in s||"onCurrentChange"in s,o="onUpdate:pageSize"in s||"onUpdate:page-size"in s||"onSizeChange"in s,a=M(()=>{if(qt(t.total)&&qt(t.pageCount)||!qt(t.currentPage)&&!i)return!1;if(t.layout.includes("sizes")){if(qt(t.pageCount)){if(!qt(t.total)&&!qt(t.pageSize)&&!o)return!1}else if(!o)return!1}return!0}),l=Z(qt(t.defaultPageSize)?10:t.defaultPageSize),c=Z(qt(t.defaultCurrentPage)?1:t.defaultCurrentPage),u=M({get(){return qt(t.pageSize)?l.value:t.pageSize},set(y){qt(t.pageSize)&&(l.value=y),o&&(e("update:page-size",y),e("size-change",y))}}),d=M(()=>{let y=0;return qt(t.pageCount)?qt(t.total)||(y=Math.max(1,Math.ceil(t.total/u.value))):y=t.pageCount,y}),f=M({get(){return qt(t.currentPage)?c.value:t.currentPage},set(y){let T=y;y<1?T=1:y>d.value&&(T=d.value),qt(t.currentPage)&&(c.value=T),i&&(e("update:current-page",T),e("current-change",T))}});Ie(d,y=>{f.value>y&&(f.value=y)});function h(y){f.value=y}function p(y){u.value=y;const T=d.value;f.value>T&&(f.value=T)}function g(){t.disabled||(f.value-=1,e("prev-click",f.value))}function v(){t.disabled||(f.value+=1,e("next-click",f.value))}function m(y,T){y&&(y.props||(y.props={}),y.props.class=[y.props.class,T].join(" "))}return Vt(Km,{pageCount:d,disabled:M(()=>t.disabled),currentPage:f,changeEvent:h,handleSizeChange:p}),()=>{var y,T;if(!a.value)return r("el.pagination.deprecationWarning"),null;if(!t.layout||t.hideOnSinglePage&&d.value<=1)return null;const E=[],S=[],_=zt("div",{class:"el-pagination__rightwrapper"},S),R={prev:zt(vB,{disabled:t.disabled,currentPage:f.value,prevText:t.prevText,onClick:g}),jumper:zt(t8),pager:zt(h8,{currentPage:f.value,pageCount:d.value,pagerCount:t.pagerCount,onChange:h,disabled:t.disabled}),next:zt(_B,{disabled:t.disabled,currentPage:f.value,pageCount:d.value,nextText:t.nextText,onClick:v}),sizes:zt(QB,{pageSize:u.value,pageSizes:t.pageSizes,popperClass:t.popperClass,disabled:t.disabled,size:t.small?"small":"default"}),slot:(T=(y=n==null?void 0:n.default)==null?void 0:y.call(n))!=null?T:null,total:zt(o8,{total:qt(t.total)?0:t.total})},k=t.layout.split(",").map($=>$.trim());let P=!1;return k.forEach($=>{if($==="->"){P=!0;return}P?S.push(R[$]):E.push(R[$])}),P&&S.length>0&&E.unshift(_),m(E[0],"is-first"),m(E[E.length-1],"is-last"),zt("div",{role:"pagination","aria-label":"pagination",class:["el-pagination",{"is-background":t.background,"el-pagination--small":t.small}]},E)}}});const v8=Wt(m8),y8={content:zr.content,popperStyle:zr.popperStyle,popperClass:zr.popperClass,enterable:{...zr.enterable,default:!0},effect:{...zr.effect,default:"light"},...vt({title:String,width:{type:[String,Number],default:150}})},b8=["update:visible","after-enter","after-leave"],T8="ElPopover",E8=ye({name:T8,components:{ElTooltip:O0},props:y8,emits:b8,setup(t,{emit:e}){const n=Z(null),r=M(()=>{var u;return(u=Le(n))==null?void 0:u.popperRef}),s=M(()=>lt(t.width)?t.width:`${t.width}px`),i=M(()=>[{width:s.value},t.popperStyle]);return{kls:M(()=>[{"el-popover--plain":!!t.content},"el-popover",t.popperClass]),style:i,tooltipRef:n,popperRef:r,hide:()=>{var u;(u=n.value)==null||u.hide()},afterEnter:()=>{e("after-enter")},afterLeave:()=>{e("after-leave")}}}}),S8={key:0,class:"el-popover__title",role:"title"};function _8(t,e,n,r,s,i){const o=Ce("el-tooltip");return C(),Se(o,Qn({ref:"tooltipRef"},t.$attrs,{"aria-label":t.title,effect:t.effect,enterable:t.enterable,"popper-class":t.kls,"popper-style":t.style,persistent:"",onShow:t.afterEnter,onHide:t.afterLeave}),{content:ue(()=>[t.title?(C(),F("div",S8,be(t.title),1)):ce("v-if",!0),Fe(t.$slots,"default",{},()=>[st(be(t.content),1)])]),default:ue(()=>[t.$slots.reference?Fe(t.$slots,"reference",{key:0}):ce("v-if",!0)]),_:3},16,["aria-label","effect","enterable","popper-class","popper-style","onShow","onHide"])}var _i=qe(E8,[["render",_8]]);const zh=(t,e)=>{const n=e.arg||e.value,r=n==null?void 0:n.popperRef;r&&(r.triggerRef=t)};var eu={mounted(t,e){zh(t,e)},updated(t,e){zh(t,e)}};const A8="popover";_i.install=t=>{t.component(_i.name,_i)};eu.install=t=>{t.directive(A8,eu)};const w8=eu;_i.directive=w8;const L8=_i,I8=L8,W0=["success","info","warning","error"],C8=vt({customClass:{type:String,default:""},center:{type:Boolean,default:!1},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:3e3},icon:{type:ze([String,Object]),default:""},id:{type:String,default:""},message:{type:ze([String,Object]),default:""},onClose:{type:ze(Function),required:!1},showClose:{type:Boolean,default:!1},type:{type:String,values:W0,default:"info"},offset:{type:Number,default:20},zIndex:{type:Number,default:0},grouping:{type:Boolean,default:!1},repeatNum:{type:Number,default:1}}),R8={destroy:()=>!0},$8=ye({name:"ElMessage",components:{ElBadge:JN,ElIcon:gr,...jM},props:C8,emits:R8,setup(t){const e=Z(!1),n=Z(t.type?t.type==="error"?"danger":t.type:"info");let r;const s=M(()=>{const d=t.type;return d&&mh[d]?`el-message-icon--${d}`:""}),i=M(()=>t.icon||mh[t.type]||""),o=M(()=>({top:`${t.offset}px`,zIndex:t.zIndex}));function a(){t.duration>0&&({stop:r}=Fc(()=>{e.value&&c()},t.duration))}function l(){r==null||r()}function c(){e.value=!1}function u({code:d}){d===Jt.esc?e.value&&c():a()}return mt(()=>{a(),e.value=!0}),Ie(()=>t.repeatNum,()=>{l(),a()}),pn(document,"keydown",u),{typeClass:s,iconComponent:i,customStyle:o,visible:e,badgeType:n,close:c,clearTimer:l,startTimer:a}}}),k8=["id"],D8={key:0,class:"el-message__content"},P8=["innerHTML"];function O8(t,e,n,r,s,i){const o=Ce("el-badge"),a=Ce("el-icon"),l=Ce("close");return C(),Se(Ht,{name:"el-message-fade",onBeforeLeave:t.onClose,onAfterLeave:e[2]||(e[2]=c=>t.$emit("destroy"))},{default:ue(()=>[at(L("div",{id:t.id,class:ie(["el-message",t.type&&!t.icon?`el-message--${t.type}`:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass]),style:Ge(t.customStyle),role:"alert",onMouseenter:e[0]||(e[0]=(...c)=>t.clearTimer&&t.clearTimer(...c)),onMouseleave:e[1]||(e[1]=(...c)=>t.startTimer&&t.startTimer(...c))},[t.repeatNum>1?(C(),Se(o,{key:0,value:t.repeatNum,type:t.badgeType,class:"el-message__badge"},null,8,["value","type"])):ce("v-if",!0),t.iconComponent?(C(),Se(a,{key:1,class:ie(["el-message__icon",t.typeClass])},{default:ue(()=>[(C(),Se(Fn(t.iconComponent)))]),_:1},8,["class"])):ce("v-if",!0),Fe(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(C(),F(Ne,{key:1},[ce(" Caution here, message could've been compromised, never use user's input as message "),L("p",{class:"el-message__content",innerHTML:t.message},null,8,P8)],2112)):(C(),F("p",D8,be(t.message),1))]),t.showClose?(C(),Se(a,{key:2,class:"el-message__closeBtn",onClick:ut(t.close,["stop"])},{default:ue(()=>[Y(l)]),_:1},8,["onClick"])):ce("v-if",!0)],46,k8),[[pt,t.visible]])]),_:3},8,["onBeforeLeave"])}var M8=qe($8,[["render",O8]]);const fn=[];let x8=1;const ra=function(t={}){if(!it)return{close:()=>{}};if(Jn(Bh.max)&&fn.length>=Bh.max)return{close:()=>{}};if(!lr(t)&&typeof t=="object"&&t.grouping&&!lr(t.message)&&fn.length){const c=fn.find(u=>{var d,f,h;return`${(f=(d=u.vm.props)==null?void 0:d.message)!=null?f:""}`==`${(h=t.message)!=null?h:""}`});if(c)return c.vm.component.props.repeatNum+=1,c.vm.component.props.type=t==null?void 0:t.type,{close:()=>l.component.proxy.visible=!1}}(typeof t=="string"||lr(t))&&(t={message:t});let e=t.offset||20;fn.forEach(({vm:c})=>{var u;e+=(((u=c.el)==null?void 0:u.offsetHeight)||0)+16}),e+=16;const n=`message_${x8++}`,r=t.onClose,s={zIndex:Mt.nextZIndex(),offset:e,...t,id:n,onClose:()=>{F8(n,r)}};let i=document.body;t.appendTo instanceof HTMLElement?i=t.appendTo:typeof t.appendTo=="string"&&(i=document.querySelector(t.appendTo)),i instanceof HTMLElement||(i=document.body);const o=document.createElement("div");o.className=`container_${n}`;const a=s.message,l=Y(M8,s,lr(s.message)?{default:()=>a}:null);return l.props.onDestroy=()=>{If(null,o)},If(l,o),fn.push({vm:l}),i.appendChild(o.firstElementChild),{close:()=>l.component.proxy.visible=!1}};W0.forEach(t=>{ra[t]=(e={})=>((typeof e=="string"||lr(e))&&(e={message:e}),ra({...e,type:t}))});function F8(t,e){const n=fn.findIndex(({vm:o})=>t===o.component.props.id);if(n===-1)return;const{vm:r}=fn[n];if(!r)return;e==null||e(r);const s=r.el.offsetHeight;fn.splice(n,1);const i=fn.length;if(!(i<1))for(let o=n;o<i;o++){const a=parseInt(fn[o].vm.el.style.top,10)-s-16;fn[o].vm.component.props.offset=a}}function N8(){var t;for(let e=fn.length-1;e>=0;e--){const n=fn[e].vm.component;(t=n==null?void 0:n.proxy)==null||t.close()}}ra.closeAll=N8;const Y0=RP(ra,"$message");function B8(){return X0().__VUE_DEVTOOLS_GLOBAL_HOOK__}function X0(){return typeof navigator<"u"&&typeof window<"u"?window:typeof globalThis<"u"?globalThis:{}}const U8=typeof Proxy=="function",V8="devtools-plugin:setup",H8="plugin:settings:set";let ps,tu;function G8(){var t;return ps!==void 0||(typeof window<"u"&&window.performance?(ps=!0,tu=window.performance):typeof globalThis<"u"&&(!((t=globalThis.perf_hooks)===null||t===void 0)&&t.performance)?(ps=!0,tu=globalThis.perf_hooks.performance):ps=!1),ps}function K8(){return G8()?tu.now():Date.now()}class q8{constructor(e,n){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=e,this.hook=n;const r={};if(e.settings)for(const o in e.settings){const a=e.settings[o];r[o]=a.defaultValue}const s=`__vue-devtools-plugin-settings__${e.id}`;let i=Object.assign({},r);try{const o=localStorage.getItem(s),a=JSON.parse(o);Object.assign(i,a)}catch{}this.fallbacks={getSettings(){return i},setSettings(o){try{localStorage.setItem(s,JSON.stringify(o))}catch{}i=o},now(){return K8()}},n&&n.on(H8,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(c=>{this.targetQueue.push({method:a,args:l,resolve:c})})})}async setRealTarget(e){this.target=e;for(const n of this.onQueue)this.target.on[n.method](...n.args);for(const n of this.targetQueue)n.resolve(await this.target[n.method](...n.args))}}function j8(t,e){const n=t,r=X0(),s=B8(),i=U8&&n.enableEarlyProxy;if(s&&(r.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!i))s.emit(V8,t,e);else{const o=i?new q8(n,s):null;(r.__VUE_DEVTOOLS_PLUGINS__=r.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:n,setupFn:e,proxy:o}),o&&e(o.proxiedTarget)}}/*!
 * vuex v4.1.0
 * (c) 2022 Evan You
 * @license MIT
 */var Q0="store";function us(t){return t===void 0&&(t=null),Ke(t!==null?t:Q0)}function Xs(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function z8(t){return t!==null&&typeof t=="object"}function W8(t){return t&&typeof t.then=="function"}function Y8(t,e){return function(){return t(e)}}function J0(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var r=e.indexOf(t);r>-1&&e.splice(r,1)}}function Z0(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Ba(t,n,[],t._modules.root,!0),fd(t,n,e)}function fd(t,e,n){var r=t._state,s=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var i=t._wrappedGetters,o={},a={},l=Ug(!0);l.run(function(){Xs(i,function(c,u){o[u]=Y8(c,t),a[u]=M(function(){return o[u]()}),Object.defineProperty(t.getters,u,{get:function(){return a[u].value},enumerable:!0})})}),t._state=gt({data:e}),t._scope=l,t.strict&&e5(t),r&&n&&t._withCommit(function(){r.data=null}),s&&s.stop()}function Ba(t,e,n,r,s){var i=!n.length,o=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=r),!i&&!s){var a=hd(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit(function(){a[l]=r.state})}var c=r.context=X8(t,o,n);r.forEachMutation(function(u,d){var f=o+d;Q8(t,f,u,c)}),r.forEachAction(function(u,d){var f=u.root?d:o+d,h=u.handler||u;J8(t,f,h,c)}),r.forEachGetter(function(u,d){var f=o+d;Z8(t,f,u,c)}),r.forEachChild(function(u,d){Ba(t,e,n.concat(d),u,s)})}function X8(t,e,n){var r=e==="",s={dispatch:r?t.dispatch:function(i,o,a){var l=sa(i,o,a),c=l.payload,u=l.options,d=l.type;return(!u||!u.root)&&(d=e+d),t.dispatch(d,c)},commit:r?t.commit:function(i,o,a){var l=sa(i,o,a),c=l.payload,u=l.options,d=l.type;(!u||!u.root)&&(d=e+d),t.commit(d,c,u)}};return Object.defineProperties(s,{getters:{get:r?function(){return t.getters}:function(){return eb(t,e)}},state:{get:function(){return hd(t.state,n)}}}),s}function eb(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach(function(s){if(s.slice(0,r)===e){var i=s.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[s]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function Q8(t,e,n,r){var s=t._mutations[e]||(t._mutations[e]=[]);s.push(function(o){n.call(t,r.state,o)})}function J8(t,e,n,r){var s=t._actions[e]||(t._actions[e]=[]);s.push(function(o){var a=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},o);return W8(a)||(a=Promise.resolve(a)),t._devtoolHook?a.catch(function(l){throw t._devtoolHook.emit("vuex:error",l),l}):a})}function Z8(t,e,n,r){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(i){return n(r.state,r.getters,i.state,i.getters)})}function e5(t){Ie(function(){return t._state.data},function(){},{deep:!0,flush:"sync"})}function hd(t,e){return e.reduce(function(n,r){return n[r]},t)}function sa(t,e,n){return z8(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var t5="vuex bindings",Wh="vuex:mutations",El="vuex:actions",gs="vuex",n5=0;function r5(t,e){j8({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[t5]},function(n){n.addTimelineLayer({id:Wh,label:"Vuex Mutations",color:Yh}),n.addTimelineLayer({id:El,label:"Vuex Actions",color:Yh}),n.addInspector({id:gs,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree(function(r){if(r.app===t&&r.inspectorId===gs)if(r.filter){var s=[];sb(s,e._modules.root,r.filter,""),r.rootNodes=s}else r.rootNodes=[rb(e._modules.root,"")]}),n.on.getInspectorState(function(r){if(r.app===t&&r.inspectorId===gs){var s=r.nodeId;eb(e,s),r.state=o5(l5(e._modules,s),s==="root"?e.getters:e._makeLocalGettersCache,s)}}),n.on.editInspectorState(function(r){if(r.app===t&&r.inspectorId===gs){var s=r.nodeId,i=r.path;s!=="root"&&(i=s.split("/").filter(Boolean).concat(i)),e._withCommit(function(){r.set(e._state.data,i,r.state.value)})}}),e.subscribe(function(r,s){var i={};r.payload&&(i.payload=r.payload),i.state=s,n.notifyComponentUpdate(),n.sendInspectorTree(gs),n.sendInspectorState(gs),n.addTimelineEvent({layerId:Wh,event:{time:Date.now(),title:r.type,data:i}})}),e.subscribeAction({before:function(r,s){var i={};r.payload&&(i.payload=r.payload),r._id=n5++,r._time=Date.now(),i.state=s,n.addTimelineEvent({layerId:El,event:{time:r._time,title:r.type,groupId:r._id,subtitle:"start",data:i}})},after:function(r,s){var i={},o=Date.now()-r._time;i.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},r.payload&&(i.payload=r.payload),i.state=s,n.addTimelineEvent({layerId:El,event:{time:Date.now(),title:r.type,groupId:r._id,subtitle:"end",data:i}})}})})}var Yh=8702998,s5=6710886,i5=16777215,tb={label:"namespaced",textColor:i5,backgroundColor:s5};function nb(t){return t&&t!=="root"?t.split("/").slice(-2,-1)[0]:"Root"}function rb(t,e){return{id:e||"root",label:nb(e),tags:t.namespaced?[tb]:[],children:Object.keys(t._children).map(function(n){return rb(t._children[n],e+n+"/")})}}function sb(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[tb]:[]}),Object.keys(e._children).forEach(function(s){sb(t,e._children[s],n,r+s+"/")})}function o5(t,e,n){e=n==="root"?e:e[n];var r=Object.keys(e),s={state:Object.keys(t.state).map(function(o){return{key:o,editable:!0,value:t.state[o]}})};if(r.length){var i=a5(e);s.getters=Object.keys(i).map(function(o){return{key:o.endsWith("/")?nb(o):o,editable:!1,value:nu(function(){return i[o]})}})}return s}function a5(t){var e={};return Object.keys(t).forEach(function(n){var r=n.split("/");if(r.length>1){var s=e,i=r.pop();r.forEach(function(o){s[o]||(s[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),s=s[o]._custom.value}),s[i]=nu(function(){return t[n]})}else e[n]=nu(function(){return t[n]})}),e}function l5(t,e){var n=e.split("/").filter(function(r){return r});return n.reduce(function(r,s,i){var o=r[s];if(!o)throw new Error('Missing module "'+s+'" for path "'+e+'".');return i===n.length-1?o:o._children},e==="root"?t:t.root._children)}function nu(t){try{return t()}catch(e){return e}}var Vn=function(e,n){this.runtime=n,this._children=Object.create(null),this._rawModule=e;var r=e.state;this.state=(typeof r=="function"?r():r)||{}},ib={namespaced:{configurable:!0}};ib.namespaced.get=function(){return!!this._rawModule.namespaced};Vn.prototype.addChild=function(e,n){this._children[e]=n};Vn.prototype.removeChild=function(e){delete this._children[e]};Vn.prototype.getChild=function(e){return this._children[e]};Vn.prototype.hasChild=function(e){return e in this._children};Vn.prototype.update=function(e){this._rawModule.namespaced=e.namespaced,e.actions&&(this._rawModule.actions=e.actions),e.mutations&&(this._rawModule.mutations=e.mutations),e.getters&&(this._rawModule.getters=e.getters)};Vn.prototype.forEachChild=function(e){Xs(this._children,e)};Vn.prototype.forEachGetter=function(e){this._rawModule.getters&&Xs(this._rawModule.getters,e)};Vn.prototype.forEachAction=function(e){this._rawModule.actions&&Xs(this._rawModule.actions,e)};Vn.prototype.forEachMutation=function(e){this._rawModule.mutations&&Xs(this._rawModule.mutations,e)};Object.defineProperties(Vn.prototype,ib);var ds=function(e){this.register([],e,!1)};ds.prototype.get=function(e){return e.reduce(function(n,r){return n.getChild(r)},this.root)};ds.prototype.getNamespace=function(e){var n=this.root;return e.reduce(function(r,s){return n=n.getChild(s),r+(n.namespaced?s+"/":"")},"")};ds.prototype.update=function(e){ob([],this.root,e)};ds.prototype.register=function(e,n,r){var s=this;r===void 0&&(r=!0);var i=new Vn(n,r);if(e.length===0)this.root=i;else{var o=this.get(e.slice(0,-1));o.addChild(e[e.length-1],i)}n.modules&&Xs(n.modules,function(a,l){s.register(e.concat(l),a,r)})};ds.prototype.unregister=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1],s=n.getChild(r);s&&s.runtime&&n.removeChild(r)};ds.prototype.isRegistered=function(e){var n=this.get(e.slice(0,-1)),r=e[e.length-1];return n?n.hasChild(r):!1};function ob(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;ob(t.concat(r),e.getChild(r),n.modules[r])}}function c5(t){return new sn(t)}var sn=function(e){var n=this;e===void 0&&(e={});var r=e.plugins;r===void 0&&(r=[]);var s=e.strict;s===void 0&&(s=!1);var i=e.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new ds(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=i;var o=this,a=this,l=a.dispatch,c=a.commit;this.dispatch=function(f,h){return l.call(o,f,h)},this.commit=function(f,h,p){return c.call(o,f,h,p)},this.strict=s;var u=this._modules.root.state;Ba(this,u,[],this._modules.root),fd(this,u),r.forEach(function(d){return d(n)})},pd={state:{configurable:!0}};sn.prototype.install=function(e,n){e.provide(n||Q0,this),e.config.globalProperties.$store=this;var r=this._devtools!==void 0?this._devtools:!1;r&&r5(e,this)};pd.state.get=function(){return this._state.data};pd.state.set=function(t){};sn.prototype.commit=function(e,n,r){var s=this,i=sa(e,n,r),o=i.type,a=i.payload,l={type:o,payload:a},c=this._mutations[o];c&&(this._withCommit(function(){c.forEach(function(d){d(a)})}),this._subscribers.slice().forEach(function(u){return u(l,s.state)}))};sn.prototype.dispatch=function(e,n){var r=this,s=sa(e,n),i=s.type,o=s.payload,a={type:i,payload:o},l=this._actions[i];if(l){try{this._actionSubscribers.slice().filter(function(u){return u.before}).forEach(function(u){return u.before(a,r.state)})}catch{}var c=l.length>1?Promise.all(l.map(function(u){return u(o)})):l[0](o);return new Promise(function(u,d){c.then(function(f){try{r._actionSubscribers.filter(function(h){return h.after}).forEach(function(h){return h.after(a,r.state)})}catch{}u(f)},function(f){try{r._actionSubscribers.filter(function(h){return h.error}).forEach(function(h){return h.error(a,r.state,f)})}catch{}d(f)})})}};sn.prototype.subscribe=function(e,n){return J0(e,this._subscribers,n)};sn.prototype.subscribeAction=function(e,n){var r=typeof e=="function"?{before:e}:e;return J0(r,this._actionSubscribers,n)};sn.prototype.watch=function(e,n,r){var s=this;return Ie(function(){return e(s.state,s.getters)},n,Object.assign({},r))};sn.prototype.replaceState=function(e){var n=this;this._withCommit(function(){n._state.data=e})};sn.prototype.registerModule=function(e,n,r){r===void 0&&(r={}),typeof e=="string"&&(e=[e]),this._modules.register(e,n),Ba(this,this.state,e,this._modules.get(e),r.preserveState),fd(this,this.state)};sn.prototype.unregisterModule=function(e){var n=this;typeof e=="string"&&(e=[e]),this._modules.unregister(e),this._withCommit(function(){var r=hd(n.state,e.slice(0,-1));delete r[e[e.length-1]]}),Z0(this)};sn.prototype.hasModule=function(e){return typeof e=="string"&&(e=[e]),this._modules.isRegistered(e)};sn.prototype.hotUpdate=function(e){this._modules.update(e),Z0(this,!0)};sn.prototype._withCommit=function(e){var n=this._committing;this._committing=!0,e(),this._committing=n};Object.defineProperties(sn.prototype,pd);const Hn=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},u5={name:"Audio",setup(t,{emit:e}){const n=us(),r=Z(null),s=gt({initAudioReady:!1,playMode:0}),i=M(()=>n.getters.playIndex),o=M(()=>n.getters.playList),a=M(()=>n.getters.isPlayed),l=M(()=>o.value[i.value]),c=E=>{E==="play"?(n.commit("SET_PLAYSTATUS",!a.value),n.commit("SET_PLAYINDEX",i.value)):m(E)},u=E=>{s.playMode=E},d=E=>{const S=r.value;S.muted=E},f=E=>{const S=r.value;S.volume=E,S.muted=E?0:1},h=E=>{const S=r.value;S.currentTime=E},p=E=>{s.initAudioReady=!0},g=E=>{s.initAudioReady=!0,n.commit("SET_PLAYSTATUS",!0)},v=E=>{s.playMode===1?y():m("next")},m=E=>{if(o.value.length!==1){let S=i.value;s.playMode===2?S=Math.floor(Math.random()*o.value.length-1)+1:E==="prev"?S=S===0?o.value.length-1:--S:S=S>=o.value.length-1?0:++S,s.initAudioReady=!1,n.commit("SET_PLAYSTATUS",!1),n.commit("SET_PLAYINDEX",S)}else y()},y=()=>{const E=r.value;E.currentTime=0,E.play(),n.commit("SET_PLAYSTATUS",!0)},T=E=>{s.initAudioReady&&e("setCurrentTime",E.target.currentTime)};return Ie(l,(E,S)=>{!E||S&&E.id===S.id||(s.initAudioReady=!1,s.currentTime=0,e("setCurrentTime",0),nt(()=>{const _=r.value;_&&_.play()}))},{deep:!0}),Ie(()=>a.value,E=>{s.initAudioReady&&nt(()=>{const S=r.value;S&&(E?S.play():S.pause())})}),{...In(s),myAudio:r,curSongInfo:l,canplaySong:p,playSong:g,endedSong:v,loopSong:y,updateSongTime:T,playAudioType:c,playAudioMode:u,setVolumeHandler:d,setvolumeProgress:f,setAudioProgress:h}}},d5=["src"];function f5(t,e,n,r,s,i){return r.curSongInfo?(C(),F("audio",{key:0,ref:"myAudio",preload:"auto",onCanplay:e[0]||(e[0]=(...o)=>r.canplaySong&&r.canplaySong(...o)),onPlaying:e[1]||(e[1]=(...o)=>r.playSong&&r.playSong(...o)),onEnded:e[2]||(e[2]=(...o)=>r.endedSong&&r.endedSong(...o)),onError:e[3]||(e[3]=(...o)=>t.errorSong&&t.errorSong(...o)),onTimeupdate:e[4]||(e[4]=(...o)=>r.updateSongTime&&r.updateSongTime(...o)),src:r.curSongInfo.url},null,40,d5)):ce("",!0)}const ab=Hn(u5,[["render",f5]]),h5={name:"ProgressLine",props:{progressWidth:{type:String,default:"0"},isShowBtn:{type:Boolean,default:!0}},setup(t,{emit:e}){const n=Z(null),r=()=>(document.onmousemove=a=>{i(a,!1)},document.body.onselectstart=function(){return!1},document.onmouseup=function(a){i(a),document.onmousemove=document.onmouseup=document.body.onselectstart=null},!1),s=a=>{i(a)},i=(a,l=!0)=>{const c=n.value,u=a.clientX-o(c)>=c.offsetWidth?c.offsetWidth:a.clientX-o(c)<=0?0:a.clientX-o(c);e("setProgressLine",{val:u/c.offsetWidth,flag:l})},o=a=>{let l=a.offsetLeft,c=a.offsetParent;for(;c!==null;)l+=c.offsetLeft,c=c.offsetParent;return l};return{progress:n,move:r,point:s}}},p5=t=>(Cn("data-v-744ece2c"),t=t(),Rn(),t),g5=p5(()=>L("div",{class:"progress-line"},null,-1));function m5(t,e,n,r,s,i){return C(),F("div",{class:"progress",onClick:e[1]||(e[1]=ut((...o)=>r.point&&r.point(...o),["stop"])),ref:"progress"},[g5,L("div",{class:"progress-bg",style:Ge({width:n.progressWidth})},[n.isShowBtn?(C(),F("div",{key:0,class:"progress-btn",onMousedown:e[0]||(e[0]=ut(o=>r.move(),["self","stop"]))},null,32)):ce("",!0)],4)],512)}const Ua=Hn(h5,[["render",m5],["__scopeId","data-v-744ece2c"]]),v5={name:"MiniBar",setup(t,{emit:e}){const n=us(),{proxy:r}=_t(),s=gt({currentTime:Ke("currentTime"),playMode:0,isMini:!1}),i=M(()=>n.getters.playIndex),o=M(()=>n.getters.playList),a=M(()=>n.getters.isPlayed),l=M(()=>o.value[i.value]),c=m=>{e("audioHandler",m)},u=()=>{s.playMode=s.playMode>=2?0:s.playMode+1,e("playAudioMode",s.playMode)},d=M(()=>s.currentTime/r.$utils.formatSongSecond(l.value.duration)*100+"%"),f=m=>{s.currentTime=m.val*r.$utils.formatSongSecond(l.value.duration),m.flag&&e("setAudioProgress",s.currentTime)},h=M(()=>a.value?"icon-audio-pause":"icon-audio-play"),p=M(()=>[{className:"icon-loop",title:"循环模式"},{className:"icon-single-cycle",title:"单曲循环"},{className:"icon-shuffle",title:"随机播放"}][s.playMode]),g=()=>{s.isMini=!s.isMini},v=()=>{e("changeMini","Bar")};return{...In(s),isPlayed:a,modeIcon:p,audioHandler:c,changePlayMode:u,audioProgressWidth:d,setAudioProgress:f,curSongInfo:l,changeBar:v,playIcon:h,changeWrapper:g}},components:{ProgressLine:Ua}},lb=t=>(Cn("data-v-6d0a8118"),t=t(),Rn(),t),y5={class:"playbar-mini"},b5=lb(()=>L("div",{class:"play-l"},null,-1)),T5=lb(()=>L("div",{slot:"placeholder",class:"image-slot"},[L("i",{class:"iconfont icon-placeholder"})],-1)),E5={class:"play-main"},S5={class:"play-name"},_5={class:"play-closed"},A5={class:"play-singer"},w5={class:"play-time"},L5={class:"audioProgress"},I5={class:"play-footer"},C5={class:"play-control"},R5=["title"];function $5(t,e,n,r,s,i){const o=cd,a=Ce("router-link"),l=Ua;return C(),F("div",y5,[L("div",{class:ie(["wrapper",{active:t.isMini}])},[b5,L("div",{class:ie(["play-circle",[r.isPlayed?"active":""]]),onClick:e[0]||(e[0]=(...c)=>r.changeWrapper&&r.changeWrapper(...c))},[Y(o,{src:r.curSongInfo.album.picUrl,class:"bar-cover-img"},{default:ue(()=>[T5]),_:1},8,["src"])],2),L("div",E5,[L("div",S5,[Y(a,{to:{path:"/song",query:{id:r.curSongInfo.id}},class:"song_name"},{default:ue(()=>[st(be(r.curSongInfo.name),1)]),_:1},8,["to"]),L("span",_5,[L("i",{class:"iconfont icon-closed",onClick:e[1]||(e[1]=(...c)=>r.changeBar&&r.changeBar(...c))})])]),L("div",A5,[(C(!0),F(Ne,null,kt(r.curSongInfo.singer,(c,u)=>(C(),Se(a,{to:{path:"/singer",query:{id:c.id}},class:"song_author",key:c.name},{default:ue(()=>[st(be(u!==0?" / "+c.name:c.name),1)]),_:2},1032,["to"]))),128))]),L("div",w5,[L("span",null,be(t.$utils.formatSongTime((t.$utils.formatSongSecond(r.curSongInfo.duration)-t.currentTime)*1e3)),1)]),L("div",L5,[Y(l,{progressWidth:r.audioProgressWidth,isShowBtn:!1,onSetProgressLine:r.setAudioProgress},null,8,["progressWidth","onSetProgressLine"])]),L("div",I5,[L("div",C5,[L("i",{class:"iconfont icon-audio-prev",title:"上一首",onClick:e[2]||(e[2]=ut(c=>r.audioHandler("prev"),["stop"]))}),L("i",{class:ie(["iconfont",r.playIcon]),onClick:e[3]||(e[3]=ut(c=>r.audioHandler("play"),["stop"]))},null,2),L("i",{class:"iconfont icon-audio-next",title:"下一首",onClick:e[4]||(e[4]=ut(c=>r.audioHandler("next"),["stop"]))})]),L("i",{class:ie(["iconfont",r.modeIcon.className]),title:r.modeIcon.title,onClick:e[5]||(e[5]=ut((...c)=>r.changePlayMode&&r.changePlayMode(...c),["stop"]))},null,10,R5)])])],2)])}const cb=Hn(v5,[["render",$5],["__scopeId","data-v-6d0a8118"]]),k5={name:"SongList",components:{},props:{songList:{type:Array,required:!0},typeSize:{type:String,default:"normal"},stripe:{type:Boolean,default:!1},height:{type:[Number,String],default:"auto"},isScroll:{type:Boolean,default:!1},offset:{type:Number,default:0},pageSize:{type:Number,default:20}},setup(t,e){const n=Z(null),r=us(),s=gt({typeSize:t.typeSize,height:t.height,curScroll:-1,pageSize:t.pageSize,currentPage:1,playing:!1,timer:null}),i=M(()=>r.getters.playList),o=M(()=>r.getters.isPlayed);mt(()=>{v(h)});const a=M(()=>t.isScroll?t.songList:t.songList.slice((s.currentPage-1)*s.pageSize,s.currentPage*s.pageSize)),l=M(()=>`transform: translateY(${s.curScroll}px)`),c=T=>t.isScroll?T+1:(s.currentPage-1)*s.pageSize+T+1+t.offset,u=M(()=>(T,E)=>["list-item",t.stripe&&E%2===0?"stripe":"",o.value&&T.id===h.value.id?"active":"",T.license||T.vip?"disable":"",T.vip?"vip":""]),d=M(()=>T=>["iconfont","playicon",o.value&&T.id===h.value.id?"icon-pause":"icon-play"]),f=T=>{!h.value||T.id!==h.value.id?r.dispatch("selectPlay",{list:[T]}):r.commit("SET_PLAYSTATUS",!o.value)},h=M(()=>i.value[r.getters.playIndex]),p=T=>{r.dispatch("addList",{list:[T]}),r.commit("SET_PLAYLISTTIPS",!0)},g=T=>{i.value.length>1?(i.value.splice(T,1),r.commit("SET_PLAYLIST",i.value)):(r.commit("SET_PLAYSTATUS",!1),r.commit("SET_PLAYLIST",[]))},v=T=>{if(t.isScroll){const E=t.songList.findIndex(_=>_.id===T.id);E>7&&E<t.songList.length-8?s.curScroll=-(E-4)*50:E>=t.songList.length-8&&t.songList.length-8>0?s.curScroll=-(t.songList.length-8)*50:s.curScroll=0,n.value.addEventListener("wheel",_=>{_.wheelDelta>0||_.detail<0?s.curScroll=Math.abs(s.curScroll)>0?s.curScroll+50:0:s.curScroll=Math.abs(s.curScroll)<(t.songList.length-8)/2*100?s.curScroll-50:s.curScroll},{passive:!0})}},m=M(()=>t.songList.length>s.pageSize&&!t.isScroll),y=T=>{s.currentPage=T};return Ie(h,T=>{nt(()=>{T&&v(T)})},{deep:!0}),Ie(()=>t.songList,()=>{s.currentPage=1}),{...In(s),list:a,curSongRef:n,curSongSty:l,currentSong:f,indexMethod:c,isCurSong:u,playIcon:d,curSongInfo:h,addSongList:p,delList:g,currentChange:y,isShowPagination:m}}},Ji=t=>(Cn("data-v-ba12feae"),t=t(),Rn(),t),D5={class:"songs-list-main"},P5={class:"list-header flex"},O5=Ji(()=>L("div",{class:"columnIndex"},"序号",-1)),M5=Ji(()=>L("div",{class:"columnSong"},"歌曲",-1)),x5=Ji(()=>L("div",{class:"columnSinger"},"歌手",-1)),F5={key:0,class:"columnAlbum"},N5=Ji(()=>L("div",{class:"columnTime"},"时长",-1)),B5={class:"columnIndex"},U5={class:"songlist-index"},V5=OE('<div class="audio-icon" data-v-ba12feae><div class="column" style="animation-delay:-1.2s;" data-v-ba12feae></div><div class="column" data-v-ba12feae></div><div class="column" style="animation-delay:-1.5s;" data-v-ba12feae></div><div class="column" style="animation-delay:-0.9s;" data-v-ba12feae></div><div class="column" style="animation-delay:-0.6s;" data-v-ba12feae></div></div>',1),H5=["onClick"],G5={class:"columnSong songlist-name"},K5=Ji(()=>L("i",{class:"iconfont icon-mv"},null,-1)),q5={key:1,class:"iconfont icon-vip"},j5={class:"columnSinger songlist-singer"},z5={key:0,class:"columnAlbum"},W5={class:"columnTime"},Y5={class:"songlist-time"},X5={class:"songlist-oper"},Q5=["onClick"],J5=["onClick"],Z5=["onClick"],eU={key:0,class:"pagination"};function tU(t,e,n,r,s,i){const o=Ce("router-link"),a=v8;return C(),F("div",D5,[L("div",P5,[O5,M5,x5,n.typeSize!=="mini"?(C(),F("div",F5,"专辑")):ce("",!0),N5]),L("div",{class:"list-scroll",style:Ge({height:n.height+"px"}),ref:"curSongRef"},[L("div",{class:"list-main",style:Ge(r.curSongSty)},[(C(!0),F(Ne,null,kt(r.list,(l,c)=>(C(),F("div",{class:ie(r.isCurSong(l,c)),key:l.id},[L("div",B5,[L("span",U5,be(r.indexMethod(c)),1),V5,L("i",{class:ie(r.playIcon(l)),onClick:u=>r.currentSong(l)},null,10,H5)]),L("div",G5,[Y(o,{class:ie(n.typeSize),to:{path:"/song",query:{id:l.id}}},{default:ue(()=>[st(be(l.name),1)]),_:2},1032,["class","to"]),n.typeSize!=="mini"?(C(),F(Ne,{key:0},[l.mvId?(C(),Se(o,{key:0,class:"mv-name",to:{path:"/mvlist/mv",query:{id:l.mvId}}},{default:ue(()=>[K5]),_:2},1032,["to"])):ce("",!0),l.vip?(C(),F("i",q5)):ce("",!0)],64)):ce("",!0)]),L("div",j5,[(C(!0),F(Ne,null,kt(l.singer,(u,d)=>(C(),Se(o,{to:{path:"/singer",query:{id:u.id}},class:"song_name",key:u.name},{default:ue(()=>[st(be(d!==0?" / "+u.name:u.name),1)]),_:2},1032,["to"]))),128))]),n.typeSize!=="mini"?(C(),F("div",z5,[l.album?(C(),Se(o,{key:0,class:"songlist-album",to:{path:"/album",query:{id:l.album.id}}},{default:ue(()=>[st(be(l.album.name),1)]),_:2},1032,["to"])):ce("",!0)])):ce("",!0),L("div",W5,[L("div",Y5,be(l.duration),1),L("div",X5,[n.typeSize!=="mini"?(C(),F("i",{key:0,class:"iconfont icon-add",title:"添加到列表",onClick:u=>r.addSongList(l)},null,8,Q5)):ce("",!0),L("i",{class:"iconfont icon-collect",onClick:u=>t.likeSong(l)},null,8,J5),n.typeSize==="mini"?(C(),F("i",{key:1,class:"iconfont icon-del",title:"删除",onClick:ut(u=>r.delList(c),["stop"])},null,8,Z5)):ce("",!0)])])],2))),128))],4)],4),r.isShowPagination?(C(),F("div",eU,[Y(a,{onCurrentChange:r.currentChange,"page-size":n.pageSize,"current-page":t.currentPage,layout:"prev, pager, next",total:n.songList.length},null,8,["onCurrentChange","page-size","current-page","total"])])):ce("",!0)])}const ub=Hn(k5,[["render",tU],["__scopeId","data-v-ba12feae"]]),nU={name:"lyrics",props:{sId:{type:[Number,String],default:0},currentTime:{type:Number,default:0},maxH:{type:[Number,String],default:390}},setup(t){const{proxy:e}=_t(),n=gt({lyric:null,lyricObj:[],curIndex:0,isFull:!1}),r=M(()=>c=>c===n.curIndex&&t.currentTime?"active":""),s=M(()=>n.curIndex>6?`transform: translateY(-${30*(n.curIndex-6)}px)`:"transform: translateY(0)"),i=async c=>{const{data:u}=await e.$http.lyrics({id:c});if(u.code!==200)return e.$msg.error("数据请求失败");o(u.lrc)},o=c=>{const u=/^\[(\d{2}):(\d{2}.\d{2,})\]\s*(.+)$/;if(!c.lyric){n.lyric=!0;return}const d=c.lyric.split(`
`);n.lyric=c.lyric,d.forEach(f=>{const h=u.exec(f);h&&n.lyricObj.push({t:h[1]*60*1+h[2]*1,txt:h[3]})}),n.lyricObj.sort((f,h)=>f.t-h.t)},a=c=>{for(let u=0;u<n.lyricObj.length;u++)if(c<=n.lyricObj[u].t)return u;return n.lyricObj.length},l=()=>{n.isFull=!n.isFull};return mt(()=>{i(t.sId)}),Ie(()=>t.sId,(c,u)=>{n.lyric=null,n.lyricObj=[],n.curIndex=0,i(c)}),Ie(()=>t.currentTime,(c,u)=>{n.lyricObj.length&&(n.curIndex=a(c)-1)}),{...In(n),isCurLyric:r,transform:s,getLyrics:i,formartLyric:o,findCurIndex:a,fullLyric:l}}},rU={key:1,class:"lyric-empty"},sU={key:0},iU={key:1};function oU(t,e,n,r,s,i){return C(),F("div",null,[L("div",{class:"lyrics-main",style:Ge({maxHeight:n.maxH+"px"})},[t.lyricObj.length?(C(),F("div",{key:0,class:"lyrics",ref:"lyrics",style:Ge(r.transform)},[(C(!0),F(Ne,null,kt(t.lyricObj,(o,a)=>(C(),F("p",{class:ie([r.isCurLyric(a)]),key:a},be(o.txt),3))),128))],4)):(C(),F("div",rU,[t.lyric?(C(),F("p",sU,"纯音乐，无歌词")):(C(),F("p",iU,"歌词加载中......"))]))],4)])}const db=Hn(nU,[["render",oU],["__scopeId","data-v-4fc48d98"]]),aU={name:"Bar",setup(t,{emit:e}){const n=us(),{proxy:r}=_t(),s=gt({isLock:!1,locked:!1,lockName:"active",manual:!0,currentTime:Ke("currentTime"),isMuted:!1,playMode:0,volumeNum:1,oldVolume:0,isPip:!1,timer:null,tipsTimer:null});mt(()=>{k(),n.commit("SET_PLAYLIST",o.value)}),Un(()=>{clearTimeout(s.timer),clearTimeout(s.tipsTimer)});const i=M(()=>n.getters.playIndex),o=M(()=>n.getters.playList),a=M(()=>n.getters.isPlayed),l=M(()=>{let W=n.getters.isShowPlayListTips;return W&&(clearTimeout(s.tipsTimer),s.tipsTimer=setTimeout(()=>{n.commit("SET_PLAYLISTTIPS",!1)},3e3)),W}),c=M(()=>o.value[i.value]),u=M(()=>[{className:"icon-loop",title:"循环模式"},{className:"icon-single-cycle",title:"单曲循环"},{className:"icon-shuffle",title:"随机播放"}][s.playMode]),d=()=>{s.playMode=s.playMode>=2?0:s.playMode+1,e("playAudioMode",s.playMode)},f=M(()=>s.currentTime/r.$utils.formatSongSecond(c.value.duration)*100+"%"),h=M(()=>s.volumeNum/1*100+"%"),p=()=>{s.isMuted=s.isMuted?0:1,s.isMuted&&(s.oldVolume=s.volumeNum),s.volumeNum=s.isMuted?0:s.oldVolume,e("setVolumeHandler",s.isMuted)},g=W=>{s.volumeNum=W.val,s.oldVolume=W.val,s.isMuted=W.val?0:1,e("setvolumeProgress",W.val)},v=M(()=>a.value?"icon-audio-pause":"icon-audio-play"),m=M(()=>s.isMuted?"icon-volume-active":"icon-volume"),y=W=>{e("audioHandler",W),s.isPip&&z()},T=W=>{s.initAudioReady=!1,s.currentTime=W.val*r.$utils.formatSongSecond(c.value.duration),W.flag&&e("setAudioProgress",s.currentTime)},E=()=>{e("changeMini","MiniBar")},S=()=>{s.isLock=!0},_=()=>{s.isLock=!1,k()},R=()=>{clearTimeout(s.timer),s.lockName="active"},k=W=>{!s.isLock&&!s.locked&&(clearTimeout(s.timer),s.timer=setTimeout(()=>{s.lockName=s.isLock?"active":""},3e3))},P=()=>{s.locked=!s.locked,s.isLock=s.locked,k()},$=()=>{n.commit("SET_PLAYSTATUS",!1),n.commit("SET_PLAYLIST",[]),n.commit("SET_PLAYINDEX",0)},N=document.createElement("canvas");N.width=250,N.height=250;const w=document.createElement("video");w.srcObject=N.captureStream(),w.muted=!0;const U=()=>{s.isPip=!s.isPip,z()},z=()=>{navigator.mediaSession.metadata=new MediaMetadata({title:c.value.name,artist:c.value.singer[0].name,album:c.value.album.name,artwork:[{src:c.value.album.picUrl}]}),s.isPip?ne():document.exitPictureInPicture()},ne=async()=>{const W=new Image;W.crossOrigin=!0,W.src=[...navigator.mediaSession.metadata.artwork].pop().src,await W.decode(),N.getContext("2d").drawImage(W,0,0,250,250),await w.play(),await w.requestPictureInPicture()},oe=[["play","play"],["pause","play"],["previoustrack","prev"],["nexttrack","next"]];for(const[W,q]of oe)navigator.mediaSession.setActionHandler(W,()=>{y(q),z(),W=="play"?navigator.mediaSession.playbackState="playing":W=="pause"&&(navigator.mediaSession.playbackState="paused")});return w.addEventListener("leavepictureinpicture",()=>{s.isPip=!1},!1),{leaveBar:k,enterBar:R,lockBar:P,...In(s),playList:o,isShowPlayListTips:l,curSongInfo:c,modeIcon:u,playIcon:v,mutedIcon:m,audioHandler:y,volumeHandler:p,audioProgressWidth:f,changePlayMode:d,popverClose:_,popverHandle:S,clearSonglist:$,setAudioProgress:T,volumeProgressWidth:h,setvolumeProgress:g,picInpic:U,changeMini:E}},components:{ProgressLine:Ua,Lyrics:db,SongList:ub}},Va=t=>(Cn("data-v-7d427856"),t=t(),Rn(),t),lU={class:"fold"},cU={class:"wrapper"},uU={class:"play-bar-inside"},dU={class:"bar-l"},fU=Va(()=>L("div",{slot:"placeholder",class:"image-slot"},[L("i",{class:"iconfont icon-placeholder"})],-1)),hU={class:"bar-name"},pU={class:"bar-time"},gU={class:"bar-m"},mU={class:"bar-control"},vU={class:"bar-r"},yU={class:"bar-oper"},bU={class:"volume-main"},TU=["title"],EU={class:"popver"},SU={class:"lyric"},_U={class:"lyrics-container"},AU=Va(()=>L("h3",{class:"lyrics-header"},[L("span",null,"歌词")],-1)),wU={key:0,class:"tips"},LU=Va(()=>L("i",{class:"iconfont icon-playsong",title:"播放列表"},null,-1)),IU={class:"playlist-num"},CU={class:"playlist-container"},RU={class:"playlist-header"},$U=Va(()=>L("i",{class:"iconfont icon-del",title:"清空列表"},null,-1));function kU(t,e,n,r,s,i){const o=Ua,a=cd,l=Ce("router-link"),c=db,u=I8,d=ub;return r.curSongInfo?(C(),F("div",{key:0,class:ie(["play-bar",t.lockName]),onMouseenter:e[11]||(e[11]=f=>r.enterBar(f)),onMouseleave:e[12]||(e[12]=f=>r.leaveBar(f))},[L("div",lU,[L("div",{class:"fold-btn",onClick:e[0]||(e[0]=(...f)=>r.lockBar&&r.lockBar(...f))},[L("i",{class:ie(["iconfont icon-lock",[t.locked?"active":""]])},null,2)])]),Y(o,{class:"audioProgress",progressWidth:r.audioProgressWidth,onSetProgressLine:r.setAudioProgress},null,8,["progressWidth","onSetProgressLine"]),L("div",cU,[L("div",uU,[L("div",dU,[Y(l,{to:{path:"/song",query:{id:r.curSongInfo.id}}},{default:ue(()=>[Y(a,{src:r.curSongInfo.album.picUrl,class:"bar-cover-img"},{default:ue(()=>[fU]),_:1},8,["src"])]),_:1},8,["to"]),L("div",hU,[Y(l,{to:{path:"/song",query:{id:r.curSongInfo.id}},class:"song_name"},{default:ue(()=>[st(be(r.curSongInfo.name),1)]),_:1},8,["to"]),L("p",null,[(C(!0),F(Ne,null,kt(r.curSongInfo.singer,(f,h)=>(C(),Se(l,{to:{path:"/singer",query:{id:f.id}},class:"song_author",key:f.name},{default:ue(()=>[st(be(h!==0?" / "+f.name:f.name),1)]),_:2},1032,["to"]))),128))])]),L("div",pU,[L("span",null,be(t.$utils.formatSongTime(t.currentTime*1e3)),1),st(" / "+be(r.curSongInfo.duration),1)])]),L("div",gU,[L("div",mU,[L("i",{class:"iconfont icon-audio-prev",title:"上一首",onClick:e[1]||(e[1]=ut(f=>r.audioHandler("prev"),["stop"]))}),L("i",{class:ie(["iconfont",r.playIcon]),onClick:e[2]||(e[2]=ut(f=>r.audioHandler("play"),["stop"]))},null,2),L("i",{class:"iconfont icon-audio-next",title:"下一首",onClick:e[3]||(e[3]=ut(f=>r.audioHandler("next"),["stop"]))})])]),L("div",vU,[L("div",yU,[L("div",bU,[L("i",{class:ie(["iconfont",r.mutedIcon]),title:"音量",onClick:e[4]||(e[4]=ut((...f)=>r.volumeHandler&&r.volumeHandler(...f),["stop"]))},null,2),Y(o,{class:"volumeLine",progressWidth:r.volumeProgressWidth,onSetProgressLine:r.setvolumeProgress},null,8,["progressWidth","onSetProgressLine"])]),L("i",{class:ie(["iconfont",r.modeIcon.className]),title:r.modeIcon.title,onClick:e[5]||(e[5]=ut((...f)=>r.changePlayMode&&r.changePlayMode(...f),["stop"]))},null,10,TU),L("div",EU,[Y(u,{placement:"top",width:400,trigger:"click",onHide:r.popverClose},{reference:ue(()=>[L("div",SU,[L("span",{class:"lyric-btn",title:"歌词",onClick:e[6]||(e[6]=(...f)=>r.popverHandle&&r.popverHandle(...f))},"词")])]),default:ue(()=>[L("div",_U,[AU,Y(c,{sId:r.curSongInfo.id,currentTime:t.currentTime},null,8,["sId","currentTime"])])]),_:1},8,["onHide"]),Y(u,{placement:"top",width:550,trigger:"click",onHide:r.popverClose},{reference:ue(()=>[L("div",{class:"playlist",onClick:e[7]||(e[7]=(...f)=>r.popverHandle&&r.popverHandle(...f))},[r.isShowPlayListTips?(C(),F("span",wU,"已添加到播放列表")):ce("",!0),LU,L("div",IU,be(99>r.playList.length?r.playList.length:"99+"),1)])]),default:ue(()=>[L("div",CU,[L("h3",RU,[L("span",null,[st("播放列表"),L("em",null,"(共"+be(r.playList.length)+"首)",1)]),L("div",{class:"delSonglist",onClick:e[8]||(e[8]=(...f)=>r.clearSonglist&&r.clearSonglist(...f))},[$U,st("清空列表")])]),Y(d,{songList:r.playList,isScroll:!0,height:400,typeSize:"mini",isShowTips:!1},null,8,["songList"])])]),_:1},8,["onHide"]),L("i",{class:ie(["iconfont icon-pip",[t.isPip?"active":""]]),onClick:e[9]||(e[9]=(...f)=>r.picInpic&&r.picInpic(...f))},null,2),L("i",{class:"iconfont icon-m",onClick:e[10]||(e[10]=(...f)=>r.changeMini&&r.changeMini(...f))})])])])])])],34)):ce("",!0)}const fb=Hn(aU,[["render",kU],["__scopeId","data-v-7d427856"]]),DU={name:"PlayBar",setup(){const t=Z(null),e=Z(0),n=Z("Bar"),r=u=>{t.value.playAudioType(u)},s=u=>{t.value.playAudioMode(u)},i=u=>{t.value.setvolumeProgress(u)},o=u=>{t.value.setVolumeHandler(u)},a=u=>{t.value.setAudioProgress(u)},l=u=>{e.value=u},c=u=>{n.value=u};return Vt("currentTime",e),{barType:n,audioRef:t,changeMini:c,setCurrentTime:l,playSongStates:r,playAudioMode:s,setVolumeHandler:o,setAudioProgress:a,setvolumeProgress:i}},components:{AudioBox:ab,MiniBar:cb,Bar:fb}},PU={class:"play-bar-main"};function OU(t,e,n,r,s,i){const o=fb,a=cb,l=ab;return C(),F("div",PU,[Y(Ht,{name:"fade-bar"},{default:ue(()=>[r.barType=="Bar"?(C(),Se(o,{key:0,onChangeMini:r.changeMini,onAudioHandler:r.playSongStates,onPlayAudioMode:r.playAudioMode,onSetvolumeProgress:r.setvolumeProgress,onSetAudioProgress:r.setAudioProgress,onSetVolumeHandler:r.setVolumeHandler},null,8,["onChangeMini","onAudioHandler","onPlayAudioMode","onSetvolumeProgress","onSetAudioProgress","onSetVolumeHandler"])):ce("",!0)]),_:1}),Y(Ht,{name:"fade-mini"},{default:ue(()=>[r.barType=="MiniBar"?(C(),Se(a,{key:0,onChangeMini:r.changeMini,onAudioHandler:r.playSongStates,onPlayAudioMode:r.playAudioMode,onSetAudioProgress:r.setAudioProgress},null,8,["onChangeMini","onAudioHandler","onPlayAudioMode","onSetAudioProgress"])):ce("",!0)]),_:1}),Y(l,{ref:"audioRef",onSetCurrentTime:r.setCurrentTime},null,8,["onSetCurrentTime"])])}const MU=Hn(DU,[["render",OU],["__scopeId","data-v-d4ed505c"]]),hb="/assets/logo--eqLS-ds.png";/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const _s=typeof document<"u";function xU(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const ot=Object.assign;function Sl(t,e){const n={};for(const r in e){const s=e[r];n[r]=Bn(s)?s.map(t):t(s)}return n}const Ai=()=>{},Bn=Array.isArray,pb=/#/g,FU=/&/g,NU=/\//g,BU=/=/g,UU=/\?/g,gb=/\+/g,VU=/%5B/g,HU=/%5D/g,mb=/%5E/g,GU=/%60/g,vb=/%7B/g,KU=/%7C/g,yb=/%7D/g,qU=/%20/g;function gd(t){return encodeURI(""+t).replace(KU,"|").replace(VU,"[").replace(HU,"]")}function jU(t){return gd(t).replace(vb,"{").replace(yb,"}").replace(mb,"^")}function ru(t){return gd(t).replace(gb,"%2B").replace(qU,"+").replace(pb,"%23").replace(FU,"%26").replace(GU,"`").replace(vb,"{").replace(yb,"}").replace(mb,"^")}function zU(t){return ru(t).replace(BU,"%3D")}function WU(t){return gd(t).replace(pb,"%23").replace(UU,"%3F")}function YU(t){return t==null?"":WU(t).replace(NU,"%2F")}function Ni(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const XU=/\/$/,QU=t=>t.replace(XU,"");function _l(t,e,n="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=t(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=t6(r??e,n),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:Ni(o)}}function JU(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Xh(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function ZU(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Fs(e.matched[r],n.matched[s])&&bb(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Fs(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function bb(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!e6(t[n],e[n]))return!1;return!0}function e6(t,e){return Bn(t)?Qh(t,e):Bn(e)?Qh(e,t):t===e}function Qh(t,e){return Bn(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function t6(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(o).join("/")}var Bi;(function(t){t.pop="pop",t.push="push"})(Bi||(Bi={}));var wi;(function(t){t.back="back",t.forward="forward",t.unknown=""})(wi||(wi={}));function n6(t){if(!t)if(_s){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),QU(t)}const r6=/^[^#]+#/;function s6(t,e){return t.replace(r6,"#")+e}function i6(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Ha=()=>({left:window.scrollX,top:window.scrollY});function o6(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=i6(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Jh(t,e){return(history.state?history.state.position-e:-1)+t}const su=new Map;function a6(t,e){su.set(t,e)}function l6(t){const e=su.get(t);return su.delete(t),e}let c6=()=>location.protocol+"//"+location.host;function Tb(t,e){const{pathname:n,search:r,hash:s}=e,i=t.indexOf("#");if(i>-1){let a=s.includes(t.slice(i))?t.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),Xh(l,"")}return Xh(n,t)+r+s}function u6(t,e,n,r){let s=[],i=[],o=null;const a=({state:f})=>{const h=Tb(t,location),p=n.value,g=e.value;let v=0;if(f){if(n.value=h,e.value=f,o&&o===p){o=null;return}v=g?f.position-g.position:0}else r(h);s.forEach(m=>{m(n.value,p,{delta:v,type:Bi.pop,direction:v?v>0?wi.forward:wi.back:wi.unknown})})};function l(){o=n.value}function c(f){s.push(f);const h=()=>{const p=s.indexOf(f);p>-1&&s.splice(p,1)};return i.push(h),h}function u(){const{history:f}=window;f.state&&f.replaceState(ot({},f.state,{scroll:Ha()}),"")}function d(){for(const f of i)f();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function Zh(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Ha():null}}function d6(t){const{history:e,location:n}=window,r={value:Tb(t,n)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+l:c6()+t+l;try{e[u?"replaceState":"pushState"](c,"",f),s.value=c}catch(h){console.error(h),n[u?"replace":"assign"](f)}}function o(l,c){const u=ot({},e.state,Zh(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=ot({},s.value,e.state,{forward:l,scroll:Ha()});i(u.current,u,!0);const d=ot({},Zh(r.value,l,null),{position:u.position+1},c);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function f6(t){t=n6(t);const e=d6(t),n=u6(t,e.state,e.location,e.replace);function r(i,o=!0){o||n.pauseListeners(),history.go(i)}const s=ot({location:"",base:t,go:r,createHref:s6.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function h6(t){return typeof t=="string"||t&&typeof t=="object"}function Eb(t){return typeof t=="string"||typeof t=="symbol"}const br={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},Sb=Symbol("");var ep;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(ep||(ep={}));function Ns(t,e){return ot(new Error,{type:t,[Sb]:!0},e)}function rr(t,e){return t instanceof Error&&Sb in t&&(e==null||!!(t.type&e))}const tp="[^/]+?",p6={sensitive:!1,strict:!1,start:!0,end:!0},g6=/[.+*?^${}()[\]/\\]/g;function m6(t,e){const n=ot({},p6,e),r=[];let s=n.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];n.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const f=c[d];let h=40+(n.sensitive?.25:0);if(f.type===0)d||(s+="/"),s+=f.value.replace(g6,"\\$&"),h+=40;else if(f.type===1){const{value:p,repeatable:g,optional:v,regexp:m}=f;i.push({name:p,repeatable:g,optional:v});const y=m||tp;if(y!==tp){h+=10;try{new RegExp(`(${y})`)}catch(E){throw new Error(`Invalid custom RegExp for param "${p}" (${y}): `+E.message)}}let T=g?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;d||(T=v&&c.length<2?`(?:/${T})`:"/"+T),v&&(T+="?"),s+=T,h+=20,v&&(h+=-8),g&&(h+=-20),y===".*"&&(h+=-50)}u.push(h)}r.push(u)}if(n.strict&&n.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const h=u[f]||"",p=i[f-1];d[p.name]=h&&p.repeatable?h.split("/"):h}return d}function l(c){let u="",d=!1;for(const f of t){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const h of f)if(h.type===0)u+=h.value;else if(h.type===1){const{value:p,repeatable:g,optional:v}=h,m=p in c?c[p]:"";if(Bn(m)&&!g)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const y=Bn(m)?m.join("/"):m;if(!y)if(v)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${p}"`);u+=y}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function v6(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function y6(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const i=v6(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(np(r))return 1;if(np(s))return-1}return s.length-r.length}function np(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const b6={type:0,value:""},T6=/[a-zA-Z0-9_]/;function E6(t){if(!t)return[[]];if(t==="/")return[[b6]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(h){throw new Error(`ERR (${n})/"${c}": ${h}`)}let n=0,r=n;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(n===0?i.push({type:0,value:c}):n===1||n===2||n===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<t.length;){if(l=t[a++],l==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),n=1):f();break;case 4:f(),n=r;break;case 1:l==="("?n=2:T6.test(l)?f():(d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:n=3:u+=l;break;case 3:d(),n=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function S6(t,e,n){const r=m6(E6(t.path),n),s=ot(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function _6(t,e){const n=[],r=new Map;e=ip({strict:!1,end:!0,sensitive:!1},e);function s(u){return r.get(u)}function i(u,d,f){const h=!f,p=A6(u);p.aliasOf=f&&f.record;const g=ip(e,u),v=[p];if("alias"in u){const T=typeof u.alias=="string"?[u.alias]:u.alias;for(const E of T)v.push(ot({},p,{components:f?f.record.components:p.components,path:E,aliasOf:f?f.record:p}))}let m,y;for(const T of v){const{path:E}=T;if(d&&E[0]!=="/"){const S=d.record.path,_=S[S.length-1]==="/"?"":"/";T.path=d.record.path+(E&&_+E)}if(m=S6(T,d,g),f?f.alias.push(m):(y=y||m,y!==m&&y.alias.push(m),h&&u.name&&!sp(m)&&o(u.name)),p.children){const S=p.children;for(let _=0;_<S.length;_++)i(S[_],m,f&&f.children[_])}f=f||m,(m.record.components&&Object.keys(m.record.components).length||m.record.name||m.record.redirect)&&l(m)}return y?()=>{o(y)}:Ai}function o(u){if(Eb(u)){const d=r.get(u);d&&(r.delete(u),n.splice(n.indexOf(d),1),d.children.forEach(o),d.alias.forEach(o))}else{const d=n.indexOf(u);d>-1&&(n.splice(d,1),u.record.name&&r.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return n}function l(u){let d=0;for(;d<n.length&&y6(u,n[d])>=0&&(u.record.path!==n[d].record.path||!_b(u,n[d]));)d++;n.splice(d,0,u),u.record.name&&!sp(u)&&r.set(u.record.name,u)}function c(u,d){let f,h={},p,g;if("name"in u&&u.name){if(f=r.get(u.name),!f)throw Ns(1,{location:u});g=f.record.name,h=ot(rp(d.params,f.keys.filter(y=>!y.optional).concat(f.parent?f.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),u.params&&rp(u.params,f.keys.map(y=>y.name))),p=f.stringify(h)}else if(u.path!=null)p=u.path,f=n.find(y=>y.re.test(p)),f&&(h=f.parse(p),g=f.record.name);else{if(f=d.name?r.get(d.name):n.find(y=>y.re.test(d.path)),!f)throw Ns(1,{location:u,currentLocation:d});g=f.record.name,h=ot({},d.params,u.params),p=f.stringify(h)}const v=[];let m=f;for(;m;)v.unshift(m.record),m=m.parent;return{name:g,path:p,params:h,matched:v,meta:L6(v)}}return t.forEach(u=>i(u)),{addRoute:i,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function rp(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function A6(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:w6(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function w6(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function sp(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function L6(t){return t.reduce((e,n)=>ot(e,n.meta),{})}function ip(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}function _b(t,e){return e.children.some(n=>n===t||_b(t,n))}function I6(t){const e={};if(t===""||t==="?")return e;const r=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(gb," "),o=i.indexOf("="),a=Ni(o<0?i:i.slice(0,o)),l=o<0?null:Ni(i.slice(o+1));if(a in e){let c=e[a];Bn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function op(t){let e="";for(let n in t){const r=t[n];if(n=zU(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(Bn(r)?r.map(i=>i&&ru(i)):[r&&ru(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+n,i!=null&&(e+="="+i))})}return e}function C6(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=Bn(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const Ab=Symbol(""),ap=Symbol(""),Ga=Symbol(""),md=Symbol(""),iu=Symbol("");function ri(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function R6(t,e,n){const r=()=>{t[e].delete(n)};Us(r),bm(r),ym(()=>{t[e].add(n)}),t[e].add(n)}function fW(t){const e=Ke(Ab,{}).value;e&&R6(e,"updateGuards",t)}function Lr(t,e,n,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Ns(4,{from:n,to:e})):f instanceof Error?l(f):h6(f)?l(Ns(2,{from:e,to:f})):(o&&r.enterCallbacks[s]===o&&typeof f=="function"&&o.push(f),a())},u=i(()=>t.call(r&&r.instances[s],e,n,c));let d=Promise.resolve(u);t.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function Al(t,e,n,r,s=i=>i()){const i=[];for(const o of t)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if($6(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Lr(u,n,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=xU(u)?u.default:u;o.components[a]=d;const h=(d.__vccOpts||d)[e];return h&&Lr(h,n,r,o,a,s)()}))}}return i}function $6(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function lp(t){const e=Ke(Ga),n=Ke(md),r=M(()=>e.resolve(Le(t.to))),s=M(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=n.matched;if(!u||!d.length)return-1;const f=d.findIndex(Fs.bind(null,u));if(f>-1)return f;const h=cp(l[c-2]);return c>1&&cp(u)===h&&d[d.length-1].path!==h?d.findIndex(Fs.bind(null,l[c-2])):f}),i=M(()=>s.value>-1&&O6(n.params,r.value.params)),o=M(()=>s.value>-1&&s.value===n.matched.length-1&&bb(n.params,r.value.params));function a(l={}){return P6(l)?e[Le(t.replace)?"replace":"push"](Le(t.to)).catch(Ai):Promise.resolve()}return{route:r,href:M(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}const k6=ye({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:lp,setup(t,{slots:e}){const n=gt(lp(t)),{options:r}=Ke(Ga),s=M(()=>({[up(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[up(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=e.default&&e.default(n);return t.custom?i:zt("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),D6=k6;function P6(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function O6(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Bn(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function cp(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const up=(t,e,n)=>t??e??n,M6=ye({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=Ke(iu),s=M(()=>t.route||r.value),i=Ke(ap,0),o=M(()=>{let c=Le(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=M(()=>s.value.matched[o.value]);Vt(ap,M(()=>o.value+1)),Vt(Ab,a),Vt(iu,s);const l=Z();return Ie(()=>[l.value,a.value,t.name],([c,u,d],[f,h,p])=>{u&&(u.instances[d]=c,h&&h!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=h.leaveGuards),u.updateGuards.size||(u.updateGuards=h.updateGuards))),c&&u&&(!h||!Fs(u,h)||!f)&&(u.enterCallbacks[d]||[]).forEach(g=>g(c))},{flush:"post"}),()=>{const c=s.value,u=t.name,d=a.value,f=d&&d.components[u];if(!f)return dp(n.default,{Component:f,route:c});const h=d.props[u],p=h?h===!0?c.params:typeof h=="function"?h(c):h:null,v=zt(f,ot({},p,e,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return dp(n.default,{Component:v,route:c})||v}}});function dp(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const x6=M6;function F6(t){const e=_6(t.routes,t),n=t.parseQuery||I6,r=t.stringifyQuery||op,s=t.history,i=ri(),o=ri(),a=ri(),l=zo(br);let c=br;_s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Sl.bind(null,H=>""+H),d=Sl.bind(null,YU),f=Sl.bind(null,Ni);function h(H,he){let fe,Te;return Eb(H)?(fe=e.getRecordMatcher(H),Te=he):Te=H,e.addRoute(Te,fe)}function p(H){const he=e.getRecordMatcher(H);he&&e.removeRoute(he)}function g(){return e.getRoutes().map(H=>H.record)}function v(H){return!!e.getRecordMatcher(H)}function m(H,he){if(he=ot({},he||l.value),typeof H=="string"){const I=_l(n,H,he.path),D=e.resolve({path:I.path},he),V=s.createHref(I.fullPath);return ot(I,D,{params:f(D.params),hash:Ni(I.hash),redirectedFrom:void 0,href:V})}let fe;if(H.path!=null)fe=ot({},H,{path:_l(n,H.path,he.path).path});else{const I=ot({},H.params);for(const D in I)I[D]==null&&delete I[D];fe=ot({},H,{params:d(I)}),he.params=d(he.params)}const Te=e.resolve(fe,he),Ue=H.hash||"";Te.params=u(f(Te.params));const rt=JU(r,ot({},H,{hash:jU(Ue),path:Te.path})),A=s.createHref(rt);return ot({fullPath:rt,hash:Ue,query:r===op?C6(H.query):H.query||{}},Te,{redirectedFrom:void 0,href:A})}function y(H){return typeof H=="string"?_l(n,H,l.value.path):ot({},H)}function T(H,he){if(c!==H)return Ns(8,{from:he,to:H})}function E(H){return R(H)}function S(H){return E(ot(y(H),{replace:!0}))}function _(H){const he=H.matched[H.matched.length-1];if(he&&he.redirect){const{redirect:fe}=he;let Te=typeof fe=="function"?fe(H):fe;return typeof Te=="string"&&(Te=Te.includes("?")||Te.includes("#")?Te=y(Te):{path:Te},Te.params={}),ot({query:H.query,hash:H.hash,params:Te.path!=null?{}:H.params},Te)}}function R(H,he){const fe=c=m(H),Te=l.value,Ue=H.state,rt=H.force,A=H.replace===!0,I=_(fe);if(I)return R(ot(y(I),{state:typeof I=="object"?ot({},Ue,I.state):Ue,force:rt,replace:A}),he||fe);const D=fe;D.redirectedFrom=he;let V;return!rt&&ZU(r,Te,fe)&&(V=Ns(16,{to:D,from:Te}),le(Te,Te,!0,!1)),(V?Promise.resolve(V):$(D,Te)).catch(G=>rr(G)?rr(G,2)?G:J(G):q(G,D,Te)).then(G=>{if(G){if(rr(G,2))return R(ot({replace:A},y(G.to),{state:typeof G.to=="object"?ot({},Ue,G.to.state):Ue,force:rt}),he||D)}else G=w(D,Te,!0,A,Ue);return N(D,Te,G),G})}function k(H,he){const fe=T(H,he);return fe?Promise.reject(fe):Promise.resolve()}function P(H){const he=je.values().next().value;return he&&typeof he.runWithContext=="function"?he.runWithContext(H):H()}function $(H,he){let fe;const[Te,Ue,rt]=N6(H,he);fe=Al(Te.reverse(),"beforeRouteLeave",H,he);for(const I of Te)I.leaveGuards.forEach(D=>{fe.push(Lr(D,H,he))});const A=k.bind(null,H,he);return fe.push(A),Je(fe).then(()=>{fe=[];for(const I of i.list())fe.push(Lr(I,H,he));return fe.push(A),Je(fe)}).then(()=>{fe=Al(Ue,"beforeRouteUpdate",H,he);for(const I of Ue)I.updateGuards.forEach(D=>{fe.push(Lr(D,H,he))});return fe.push(A),Je(fe)}).then(()=>{fe=[];for(const I of rt)if(I.beforeEnter)if(Bn(I.beforeEnter))for(const D of I.beforeEnter)fe.push(Lr(D,H,he));else fe.push(Lr(I.beforeEnter,H,he));return fe.push(A),Je(fe)}).then(()=>(H.matched.forEach(I=>I.enterCallbacks={}),fe=Al(rt,"beforeRouteEnter",H,he,P),fe.push(A),Je(fe))).then(()=>{fe=[];for(const I of o.list())fe.push(Lr(I,H,he));return fe.push(A),Je(fe)}).catch(I=>rr(I,8)?I:Promise.reject(I))}function N(H,he,fe){a.list().forEach(Te=>P(()=>Te(H,he,fe)))}function w(H,he,fe,Te,Ue){const rt=T(H,he);if(rt)return rt;const A=he===br,I=_s?history.state:{};fe&&(Te||A?s.replace(H.fullPath,ot({scroll:A&&I&&I.scroll},Ue)):s.push(H.fullPath,Ue)),l.value=H,le(H,he,fe,A),J()}let U;function z(){U||(U=s.listen((H,he,fe)=>{if(!He.listening)return;const Te=m(H),Ue=_(Te);if(Ue){R(ot(Ue,{replace:!0}),Te).catch(Ai);return}c=Te;const rt=l.value;_s&&a6(Jh(rt.fullPath,fe.delta),Ha()),$(Te,rt).catch(A=>rr(A,12)?A:rr(A,2)?(R(A.to,Te).then(I=>{rr(I,20)&&!fe.delta&&fe.type===Bi.pop&&s.go(-1,!1)}).catch(Ai),Promise.reject()):(fe.delta&&s.go(-fe.delta,!1),q(A,Te,rt))).then(A=>{A=A||w(Te,rt,!1),A&&(fe.delta&&!rr(A,8)?s.go(-fe.delta,!1):fe.type===Bi.pop&&rr(A,20)&&s.go(-1,!1)),N(Te,rt,A)}).catch(Ai)}))}let ne=ri(),oe=ri(),W;function q(H,he,fe){J(H);const Te=oe.list();return Te.length?Te.forEach(Ue=>Ue(H,he,fe)):console.error(H),Promise.reject(H)}function pe(){return W&&l.value!==br?Promise.resolve():new Promise((H,he)=>{ne.add([H,he])})}function J(H){return W||(W=!H,z(),ne.list().forEach(([he,fe])=>H?fe(H):he()),ne.reset()),H}function le(H,he,fe,Te){const{scrollBehavior:Ue}=t;if(!_s||!Ue)return Promise.resolve();const rt=!fe&&l6(Jh(H.fullPath,0))||(Te||!fe)&&history.state&&history.state.scroll||null;return nt().then(()=>Ue(H,he,rt)).then(A=>A&&o6(A)).catch(A=>q(A,H,he))}const me=H=>s.go(H);let Ve;const je=new Set,He={currentRoute:l,listening:!0,addRoute:h,removeRoute:p,hasRoute:v,getRoutes:g,resolve:m,options:t,push:E,replace:S,go:me,back:()=>me(-1),forward:()=>me(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:oe.add,isReady:pe,install(H){const he=this;H.component("RouterLink",D6),H.component("RouterView",x6),H.config.globalProperties.$router=he,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>Le(l)}),_s&&!Ve&&l.value===br&&(Ve=!0,E(s.location).catch(Ue=>{}));const fe={};for(const Ue in br)Object.defineProperty(fe,Ue,{get:()=>l.value[Ue],enumerable:!0});H.provide(Ga,he),H.provide(md,em(fe)),H.provide(iu,l);const Te=H.unmount;je.add(H),H.unmount=function(){je.delete(H),je.size<1&&(c=br,U&&U(),U=null,l.value=br,Ve=!1,W=!1),Te()}}};function Je(H){return H.reduce((he,fe)=>he.then(()=>P(fe)),Promise.resolve())}return He}function N6(t,e){const n=[],r=[],s=[],i=Math.max(e.matched.length,t.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(t.matched.find(c=>Fs(c,a))?r.push(a):n.push(a));const l=t.matched[o];l&&(e.matched.find(c=>Fs(c,l))||s.push(l))}return[n,r,s]}function wb(){return Ke(Ga)}function vd(){return Ke(md)}const B6=t=>(Cn("data-v-bf2a47de"),t=t(),Rn(),t),U6={class:"side-main"},V6=B6(()=>L("img",{src:hb,alt:""},null,-1)),H6={class:"nav"},G6=["onClick"],K6={__name:"Sidebar",setup(t){const e=vd(),n=wb(),r=gt([{name:"首页",path:"index"},{name:"排行榜",path:"rank"},{name:"歌单",path:"playlist"},{name:"MV",path:"mvlist"},{name:"歌手",path:"artist"},{name:"我的音乐",path:"my"}]),s=M(()=>e.path),i=o=>{n.push({path:"/"+o})};return(o,a)=>{const l=Ce("router-link");return C(),F("div",U6,[Y(l,{to:"/",class:"logo"},{default:ue(()=>[V6]),_:1}),L("ul",H6,[(C(!0),F(Ne,null,kt(r,c=>(C(),F("li",{class:ie({"is-active":s.value.indexOf(c.path)>=0}),key:c.path,onClick:u=>i(c.path)},[L("i",{class:ie(["iconfont",`icon-${c.path}`])},null,2),L("span",null,be(c.name),1)],10,G6))),128))])])}}},q6=Hn(K6,[["__scopeId","data-v-bf2a47de"]]),j6=ye({setup(){const{proxy:t}=_t(),e=vd(),n=wb(),r=gt({keyVal:"",serachHot:[],suggestInfo:[],loading:!1,listType:{songs:"单曲",artists:"歌手",albums:"专辑",playlists:"歌单"}}),s=u=>{r.keyVal=u,r.keyVal&&(r.loading=!0,r.suggestInfo=[],a())},i=()=>{console.log(r.keyVal),r.keyVal&&(r.loading=!0,r.suggestInfo=[],a())},o=async()=>{const{data:u}=await t.$http.serachHot();if(u.code!==200)return t.$msg.error("数据请求失败");r.serachHot=u.result.hots},a=async()=>{const{data:u}=await t.$http.serachSuggest({keywords:r.keyVal});if(r.loading=!1,u.code!==200)return t.$msg.error("数据请求失败");u.result.order&&(r.suggestInfo=u.result.order.map(d=>({label:d,info:u.result[d]})))},l=u=>{r.keyVal=u.first,u.first!==e.query.key&&n.push({path:"/search",query:{key:u.first}})},c=(u,d)=>{switch(d){case"songs":n.push({path:"/song",query:{id:u.id}});break;case"artists":n.push({path:"/singer",query:{id:u.id}});break;case"albums":n.push({path:"/album",query:{id:u.id}});break;case"playlists":n.push({path:"/playlist/detail",query:{id:u.id}});break}};return mt(()=>{o()}),{...In(r),remoteMethod:s,handleFocus:i,getSerachSuggest:a,jumpSearch:l,jumpPage:c}}}),z6=t=>(Cn("data-v-cba6c4b6"),t=t(),Rn(),t),W6={class:"search"},Y6={key:0,class:"hot-search"},X6=z6(()=>L("h5",null,"热门搜索",-1)),Q6={class:"artists"};function J6(t,e,n,r,s,i){const o=z0,a=jB,l=j0;return C(),F("div",W6,[Y(l,{modelValue:t.keyVal,"onUpdate:modelValue":e[0]||(e[0]=c=>t.keyVal=c),class:"keyVal",clearable:"",filterable:"",remote:"",placeholder:"请输入歌名、歌词、歌手或专辑","remote-method":t.remoteMethod,"fit-input-width":!0,loading:t.loading,"loading-text":"搜索中...",onFocus:t.handleFocus},{default:ue(()=>[t.keyVal?(C(!0),F(Ne,{key:1},kt(t.suggestInfo,c=>(C(),Se(a,{key:t.listType[c.label],label:t.listType[c.label],class:"aaa"},{default:ue(()=>[(C(!0),F(Ne,null,kt(c.info,(u,d)=>(C(),Se(o,{key:c.label+d,label:u.name,value:c.label+u.name,class:"item",onClick:f=>t.jumpPage(u,c.label)},{default:ue(()=>[st(be(u.name)+" ",1),c.label==="songs"?(C(),F(Ne,{key:0},[st(" - "),(C(!0),F(Ne,null,kt(u.artists,(f,h)=>(C(),F("span",{class:"artists",key:h},be((h!==0?" / ":"")+f.name),1))),128))],64)):c.label==="albums"?(C(),F(Ne,{key:1},[st(" - "),L("span",Q6,be(u.artist.name),1)],64)):ce("",!0)]),_:2},1032,["label","value","onClick"]))),128))]),_:2},1032,["label"]))),128)):(C(),F("div",Y6,[X6,(C(!0),F(Ne,null,kt(t.serachHot,(c,u)=>(C(),Se(o,{key:u,label:c.first,value:c.first,onClick:d=>t.jumpSearch(c)},{default:ue(()=>[L("span",{class:ie([u<3?"top-"+u:""])},be(u+1+"."),3),st(" "+be(c.first),1)]),_:2},1032,["label","value","onClick"]))),128))]))]),_:1},8,["modelValue","remote-method","loading","onFocus"])])}const Z6=Hn(j6,[["render",J6],["__scopeId","data-v-cba6c4b6"]]),Ka=t=>(Cn("data-v-289649d5"),t=t(),Rn(),t),eV={class:"header"},tV=Ka(()=>L("div",{class:"menu"},null,-1)),nV={key:0,class:"logined"},rV=Ka(()=>L("div",{slot:"placeholder",class:"image-slot"},[L("i",{class:"iconfont icon-placeholder"})],-1)),sV={class:"nickname"},iV=Ka(()=>L("span",{class:"set"},[L("i",{class:"iconfont icon-set"})],-1)),oV=Ka(()=>L("i",{class:"iconfont icon-quit"},null,-1)),aV=[oV],lV={__name:"Header",setup(t){const e=us(),n=vd(),{proxy:r}=_t(),s=()=>e.commit("setLoginDialog",!0),i=M(()=>e.getters.isLogin),o=M(()=>e.getters.userInfo),a=async()=>{const{data:l}=await r.$http.logout();if(l.code!==200)return r.$msg.error("数据请求失败");Y0.success("退出成功"),window.localStorage.removeItem("token"),window.localStorage.removeItem("cookie"),window.localStorage.removeItem("userInfo"),window.localStorage.removeItem("isLogin"),e.commit("setUserInfo",{}),e.commit("SET_LOGIN",!1),n.path.indexOf("/my")>=0&&router.push({path:"/"})};return(l,c)=>{const u=cd;return C(),F("header",eV,[tV,Y(Z6),L("div",{class:ie(i.value?"user-avatar":"login")},[i.value?(C(),F("div",nV,[Y(u,{src:o.value.avatarUrl,class:"avatar"},{default:ue(()=>[rV]),_:1},8,["src"]),L("span",sV,be(o.value.nickname),1),iV,L("span",{class:"quit",onClick:a},aV)])):(C(),F("span",{key:1,class:"login-btn",onClick:s},"登录"))],2)])}}},cV=Hn(lV,[["__scopeId","data-v-289649d5"]]),uV={name:"Login",setup(t){const e=us(),{proxy:n}=_t(),r=Z(!0),s=()=>e.commit("setLoginDialog",!1),i=gt({loginForm:{phone:"",pwd:""},loginFormRules:{phone:[{required:!0,message:"请输入网易帐号",trigger:"blur"}],pwd:[{required:!0,message:"请输入网易密码",trigger:"blur"}]}}),o=()=>{n.$refs.loginFormRef.validate(async l=>{if(l){const{data:c}=await n.$http.login(i.loginForm);c.code!==200?n.$msg.error(c.msg):(a(c.profile.userId),window.localStorage.setItem("token",c.token),window.localStorage.setItem("cookie",c.cookie),e.commit("setLoginDialog",!1))}})},a=async l=>{const{data:c}=await n.$http.getUserInfo({uid:l});c.code!==200?n.$msg.error(c.msg):(window.localStorage.setItem("isLogin",!0),window.localStorage.setItem("userInfo",JSON.stringify(c.profile)),e.commit("SET_LOGIN",!0),e.commit("setUserInfo",c.profile))};return{handleClose:s,isVisible:r,...In(i),submitForm:o}}},dV=t=>(Cn("data-v-73b83a92"),t=t(),Rn(),t),fV={class:"login"},hV={class:"login-wrapper"},pV=dV(()=>L("img",{src:hb,alt:"",class:"login-logo"},null,-1)),gV={class:"dialog-footer"};function mV(t,e,n,r,s,i){const o=Ju,a=Y4,l=W4,c=E3,u=a4;return C(),F("div",fV,[Y(u,{modelValue:r.isVisible,"onUpdate:modelValue":e[2]||(e[2]=d=>r.isVisible=d),width:"30%","before-close":r.handleClose},{footer:ue(()=>[L("span",gV,[Y(c,{type:"primary",onClick:r.submitForm},{default:ue(()=>[st("登录")]),_:1},8,["onClick"])])]),default:ue(()=>[L("div",hV,[pV,Y(l,{ref:"loginFormRef",model:t.loginForm,rules:t.loginFormRules,"label-width":""},{default:ue(()=>[Y(a,{prop:"phone","label-width":""},{default:ue(()=>[Y(o,{modelValue:t.loginForm.phone,"onUpdate:modelValue":e[0]||(e[0]=d=>t.loginForm.phone=d),placeholder:"请输入网易云帐号登录"},null,8,["modelValue"])]),_:1}),Y(a,{prop:"pwd","label-width":""},{default:ue(()=>[Y(o,{modelValue:t.loginForm.pwd,"onUpdate:modelValue":e[1]||(e[1]=d=>t.loginForm.pwd=d),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"])])}const vV=Hn(uV,[["render",mV],["__scopeId","data-v-73b83a92"]]),yV={__name:"App",setup(t){const e=us(),n=M(()=>e.getters.loginDialogVisible);return mt(()=>{const r=document.createElement("script");r.src="https://s9.cnzz.com/z_stat.php?id=1280869713&web_id=1280869713",r.type="text/javascript",document.body.appendChild(r)}),(r,s)=>{const i=K3,o=Ce("router-view"),a=q3,l=MU,c=G3;return C(),Se(c,null,{default:ue(()=>[Y(i,null,{default:ue(()=>[Y(q6)]),_:1}),Y(a,null,{default:ue(()=>[Y(cV),Y(o)]),_:1}),at(Y(vV,null,null,512),[[pt,n.value]]),Y(l)]),_:1})}}},Zi=TS(yV),bV="modulepreload",TV=function(t){return"/"+t},fp={},an=function(e,n,r){if(!n||n.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(n.map(i=>{if(i=TV(i),i in fp)return;fp[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let u=s.length-1;u>=0;u--){const d=s[u];if(d.href===i&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":bV,o||(c.as="script",c.crossOrigin=""),c.href=i,document.head.appendChild(c),o)return new Promise((u,d)=>{c.addEventListener("load",u),c.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},EV=[{path:"/",redirect:"/index"},{path:"/index",name:"index",component:()=>an(()=>import("./Index-78h6fhi-.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))},{path:"/rank",name:"rank",component:()=>an(()=>import("./Index-PY6y49cR.js"),__vite__mapDeps([11,12,13,14]))},{path:"/playlist",name:"playlist",component:()=>an(()=>import("./Index-_1tYaEHb.js"),__vite__mapDeps([15,16,9,12,13,7,2,3,8,17]))},{path:"/playlist/detail",name:"playlistdetail",component:()=>an(()=>import("./Detail-GOIKBLIx.js"),__vite__mapDeps([18,12,13,19]))},{path:"/user",name:"user",component:()=>an(()=>import("./Index-duOTZaU7.js"),__vite__mapDeps([]))},{path:"/song",name:"song",component:()=>an(()=>import("./Index-5VFnMuVJ.js"),__vite__mapDeps([20,21,22,23]))},{path:"/singer",name:"singer",component:()=>an(()=>import("./Index-69NrRiEx.js"),__vite__mapDeps([24,25]))},{path:"/album",name:"album",component:()=>an(()=>import("./Index-97aTa9-c.js"),__vite__mapDeps([26,21,22,27]))},{path:"/artist",name:"artist",component:()=>an(()=>import("./Index-Wa6xTehp.js"),__vite__mapDeps([28,16,9,29,30,12,13,31,32,33]))},{path:"/mvlist",name:"mvlist",component:()=>an(()=>import("./Index-2RY_ewQo.js"),__vite__mapDeps([34,16,9,29,30,12,13,1,2,3,4,35]))},{path:"/mvlist/mv",name:"mv",component:()=>an(()=>import("./Detail-pr9f5e08.js"),__vite__mapDeps([36,21,22,37]))},{path:"/dj",name:"dj",component:()=>an(()=>import("./Index--fJKEeXb.js"),__vite__mapDeps([]))},{path:"/search",name:"search",component:()=>an(()=>import("./Index-ASMeWtXG.js"),__vite__mapDeps([38,1,2,3,4,7,8,5,6,12,13,31,32,39]))}],SV=F6({history:f6(),routes:EV}),_V={isLogin:!1,loginDialogVisible:!1,isPlayed:!1,playList:[],userInfo:null,playIndex:0,isShowPlayListTips:!1},AV="SET_LOGIN",ou="SET_PLAYSTATUS",Bo="SET_PLAYLIST",au="SET_PLAYINDEX",Lb="SET_PLAYLISTTIPS",wV={[AV](t,e=!1){t.isLogin=e},setUserInfo(t,e){t.userInfo=e},setLoginDialog(t,e){t.loginDialogVisible=e},[ou](t,e=!1){t.isPlayed=e},[Bo](t,e=null){t.playList=e,window.localStorage.setItem("playList",JSON.stringify(e))},[au](t,e=0){t.playIndex=e,window.localStorage.setItem("playIndex",e)},[Lb](t,e=!1){t.isShowPlayListTips=e}},LV={isLogin(t){return t.isLogin||JSON.parse(window.localStorage.getItem("isLogin"))},isPlayed(t){return t.isPlayed},loginDialogVisible(t){return t.loginDialogVisible},userInfo(t){return t.userInfo||JSON.parse(window.localStorage.getItem("userInfo")||"{}")},playList(t){return t.playList.length?t.playList:JSON.parse(window.localStorage.getItem("playList"))||[]},playIndex(t){return t.playIndex||JSON.parse(window.localStorage.getItem("playIndex"))||0},isShowPlayListTips(t){return t.isShowPlayListTips}};class IV{constructor({id:e,name:n,mvId:r,singer:s,album:i,alia:o,duration:a,url:l,vip:c,license:u,publishTime:d}){this.id=e,this.name=n,this.mvId=r,this.singer=s,this.album=i,this.alia=o,this.duration=a,this.url=l,this.vip=c,this.license=u,this.publishTime=d}}function CV(t){return new IV({id:String(t.id),name:t.name,mvId:t.mv,singer:t.ar,album:t.al,alia:t.alia,vip:t.fee===1,license:t.license,duration:ia.formatSongTime(t.dt),url:`https://music.163.com/song/media/outer/url?id=${t.id}.mp3`,publishTime:ia.formatMsgTime(t.publishTime)})}const ia={formartNum(t){let e=0;return t>9999?e=Math.round(t/1e4*10)/10+"万":e=t,e},formartDate(t,e){const n=new Date(t),r={yyyy:n.getFullYear(),MM:(n.getMonth()+1+"").padStart(2,"0"),dd:(n.getDate()+"").padStart(2,"0"),HH:(n.getHours()+"").padStart(2,"0"),mm:(n.getMinutes()+"").padStart(2,"0"),ss:(n.getSeconds()+"").padStart(2,"0")};for(const s in r){const i=new RegExp("("+s+")").exec(e);i&&(e=e.replace(i[1],r[s]))}return e},formatSongSecond(t){let e=t.split(":"),n=0;for(let r=0;r<e.length;r++)n+=e[r]*60*(e.length-1-r);return n+=e[e.length-1]*1,n},formatSongTime(t=0){t=t>=0?t/1e3:0;const e=(Math.floor(t/60)+"").padStart(2,"0"),n=(Math.floor(t%60)+"").padStart(2,"0");return`${e}:${n}`},formatMsgTime(t){let e="";const n=new Date,r=new Date(t);return n.toDateString()===r.toDateString()?e=this.formartDate(t,"HH:mm"):r.getFullYear()===n.getFullYear()?e=this.formartDate(t,"MM月dd日 HH:mm"):e=this.formartDate(t,"yyyy年MM月dd日"),e},concatPlayList(t=[],e=[]){const n=[...e,...t],r=new Map;for(const s of n)r.has(s.id)||r.set(s.id,s);return[...r.values()]},formatSongs(t,e){const n=[];return t.map((r,s)=>{r.id&&(r.license=!e[s].cp,n.push(CV(r)))}),n}},wl=(t,e=[])=>ia.concatPlayList(t.filter(n=>!n.license&&!n.vip),e),RV=(t,e)=>e.findIndex(n=>n.id===t.id),$V={loginSuc(t,e){t.commit("setLoginDialog",e)},playAll({commit:t},{list:e}){t(Bo,wl(e)),t(ou,!0),t(au,0)},selectPlay({commit:t,state:e},{list:n}){const r=wl(n,e.playList);t(Bo,r),t(ou,!0),t(au,RV(n[0],r))},addList({commit:t,state:e},{list:n}){const r=wl(n,e.playList);t(Bo,r),t(Lb,!0)}},kV=c5({state:_V,mutations:wV,getters:LV,actions:$V});var yd={exports:{}},Ib=function(e,n){return function(){for(var s=new Array(arguments.length),i=0;i<s.length;i++)s[i]=arguments[i];return e.apply(n,s)}};const DV=j(Ib),PV=X({__proto__:null,default:DV},[Ib]),Cb=Q(PV);var OV=Cb,Mr=Object.prototype.toString;function bd(t){return Array.isArray(t)}function lu(t){return typeof t>"u"}function MV(t){return t!==null&&!lu(t)&&t.constructor!==null&&!lu(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Rb(t){return Mr.call(t)==="[object ArrayBuffer]"}function xV(t){return Mr.call(t)==="[object FormData]"}function FV(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Rb(t.buffer),e}function NV(t){return typeof t=="string"}function BV(t){return typeof t=="number"}function $b(t){return t!==null&&typeof t=="object"}function Uo(t){if(Mr.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function UV(t){return Mr.call(t)==="[object Date]"}function VV(t){return Mr.call(t)==="[object File]"}function HV(t){return Mr.call(t)==="[object Blob]"}function kb(t){return Mr.call(t)==="[object Function]"}function GV(t){return $b(t)&&kb(t.pipe)}function KV(t){return Mr.call(t)==="[object URLSearchParams]"}function qV(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function jV(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function Td(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),bd(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}function cu(){var t={};function e(s,i){Uo(t[i])&&Uo(s)?t[i]=cu(t[i],s):Uo(s)?t[i]=cu({},s):bd(s)?t[i]=s.slice():t[i]=s}for(var n=0,r=arguments.length;n<r;n++)Td(arguments[n],e);return t}function zV(t,e,n){return Td(e,function(s,i){n&&typeof s=="function"?t[i]=OV(s,n):t[i]=s}),t}function WV(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Db={isArray:bd,isArrayBuffer:Rb,isBuffer:MV,isFormData:xV,isArrayBufferView:FV,isString:NV,isNumber:BV,isObject:$b,isPlainObject:Uo,isUndefined:lu,isDate:UV,isFile:VV,isBlob:HV,isFunction:kb,isStream:GV,isURLSearchParams:KV,isStandardBrowserEnv:jV,forEach:Td,merge:cu,extend:zV,trim:qV,stripBOM:WV};const YV=j(Db),XV=X({__proto__:null,default:YV},[Db]),on=Q(XV);var ms=on;function hp(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Pb=function(e,n,r){if(!n)return e;var s;if(r)s=r(n);else if(ms.isURLSearchParams(n))s=n.toString();else{var i=[];ms.forEach(n,function(l,c){l===null||typeof l>"u"||(ms.isArray(l)?c=c+"[]":l=[l],ms.forEach(l,function(d){ms.isDate(d)?d=d.toISOString():ms.isObject(d)&&(d=JSON.stringify(d)),i.push(hp(c)+"="+hp(d))}))}),s=i.join("&")}if(s){var o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+s}return e};const QV=j(Pb),JV=X({__proto__:null,default:QV},[Pb]),Ob=Q(JV);var ZV=on;function qa(){this.handlers=[]}qa.prototype.use=function(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};qa.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};qa.prototype.forEach=function(e){ZV.forEach(this.handlers,function(r){r!==null&&e(r)})};var Mb=qa;const eH=j(Mb),tH=X({__proto__:null,default:eH},[Mb]),nH=Q(tH);var rH=on,xb=function(e,n){rH.forEach(e,function(s,i){i!==n&&i.toUpperCase()===n.toUpperCase()&&(e[n]=s,delete e[i])})};const sH=j(xb),iH=X({__proto__:null,default:sH},[xb]),oH=Q(iH);var Fb=function(e,n,r,s,i){return e.config=n,r&&(e.code=r),e.request=s,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e};const aH=j(Fb),lH=X({__proto__:null,default:aH},[Fb]),Nb=Q(lH);var Ll,pp;function Bb(){if(pp)return Ll;pp=1;var t=Nb;return Ll=function(n,r,s,i,o){var a=new Error(n);return t(a,r,s,i,o)},Ll}var Il,gp;function cH(){if(gp)return Il;gp=1;var t=Bb();return Il=function(n,r,s){var i=s.config.validateStatus;!s.status||!i||i(s.status)?n(s):r(t("Request failed with status code "+s.status,s.config,null,s.request,s))},Il}var Cl,mp;function uH(){if(mp)return Cl;mp=1;var t=on;return Cl=t.isStandardBrowserEnv()?function(){return{write:function(r,s,i,o,a,l){var c=[];c.push(r+"="+encodeURIComponent(s)),t.isNumber(i)&&c.push("expires="+new Date(i).toGMTString()),t.isString(o)&&c.push("path="+o),t.isString(a)&&c.push("domain="+a),l===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(r){var s=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),Cl}var Rl,vp;function dH(){return vp||(vp=1,Rl=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),Rl}var $l,yp;function fH(){return yp||(yp=1,$l=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}),$l}var kl,bp;function hH(){if(bp)return kl;bp=1;var t=dH(),e=fH();return kl=function(r,s){return r&&!t(s)?e(r,s):s},kl}var Dl,Tp;function pH(){if(Tp)return Dl;Tp=1;var t=on,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return Dl=function(r){var s={},i,o,a;return r&&t.forEach(r.split(`
`),function(c){if(a=c.indexOf(":"),i=t.trim(c.substr(0,a)).toLowerCase(),o=t.trim(c.substr(a+1)),i){if(s[i]&&e.indexOf(i)>=0)return;i==="set-cookie"?s[i]=(s[i]?s[i]:[]).concat([o]):s[i]=s[i]?s[i]+", "+o:o}}),s},Dl}var Pl,Ep;function gH(){if(Ep)return Pl;Ep=1;var t=on;return Pl=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),s;function i(o){var a=o;return n&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=i(window.location.href),function(a){var l=t.isString(a)?i(a):a;return l.protocol===s.protocol&&l.host===s.host}}():function(){return function(){return!0}}(),Pl}var Ol,Sp;function ja(){if(Sp)return Ol;Sp=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,Ol=t,Ol}var Ml,_p;function Ap(){if(_p)return Ml;_p=1;var t=on,e=cH(),n=uH(),r=Ob,s=hH(),i=pH(),o=gH(),a=Bb(),l=za(),c=ja();return Ml=function(d){return new Promise(function(h,p){var g=d.data,v=d.headers,m=d.responseType,y;function T(){d.cancelToken&&d.cancelToken.unsubscribe(y),d.signal&&d.signal.removeEventListener("abort",y)}t.isFormData(g)&&delete v["Content-Type"];var E=new XMLHttpRequest;if(d.auth){var S=d.auth.username||"",_=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";v.Authorization="Basic "+btoa(S+":"+_)}var R=s(d.baseURL,d.url);E.open(d.method.toUpperCase(),r(R,d.params,d.paramsSerializer),!0),E.timeout=d.timeout;function k(){if(E){var $="getAllResponseHeaders"in E?i(E.getAllResponseHeaders()):null,N=!m||m==="text"||m==="json"?E.responseText:E.response,w={data:N,status:E.status,statusText:E.statusText,headers:$,config:d,request:E};e(function(z){h(z),T()},function(z){p(z),T()},w),E=null}}if("onloadend"in E?E.onloadend=k:E.onreadystatechange=function(){!E||E.readyState!==4||E.status===0&&!(E.responseURL&&E.responseURL.indexOf("file:")===0)||setTimeout(k)},E.onabort=function(){E&&(p(a("Request aborted",d,"ECONNABORTED",E)),E=null)},E.onerror=function(){p(a("Network Error",d,null,E)),E=null},E.ontimeout=function(){var N=d.timeout?"timeout of "+d.timeout+"ms exceeded":"timeout exceeded",w=d.transitional||l.transitional;d.timeoutErrorMessage&&(N=d.timeoutErrorMessage),p(a(N,d,w.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",E)),E=null},t.isStandardBrowserEnv()){var P=(d.withCredentials||o(R))&&d.xsrfCookieName?n.read(d.xsrfCookieName):void 0;P&&(v[d.xsrfHeaderName]=P)}"setRequestHeader"in E&&t.forEach(v,function(N,w){typeof g>"u"&&w.toLowerCase()==="content-type"?delete v[w]:E.setRequestHeader(w,N)}),t.isUndefined(d.withCredentials)||(E.withCredentials=!!d.withCredentials),m&&m!=="json"&&(E.responseType=d.responseType),typeof d.onDownloadProgress=="function"&&E.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&E.upload&&E.upload.addEventListener("progress",d.onUploadProgress),(d.cancelToken||d.signal)&&(y=function($){E&&(p(!$||$&&$.type?new c("canceled"):$),E.abort(),E=null)},d.cancelToken&&d.cancelToken.subscribe(y),d.signal&&(d.signal.aborted?y():d.signal.addEventListener("abort",y))),g||(g=null),E.send(g)})},Ml}var xl,wp;function za(){if(wp)return xl;wp=1;var t=on,e=oH,n=Nb,r={"Content-Type":"application/x-www-form-urlencoded"};function s(l,c){!t.isUndefined(l)&&t.isUndefined(l["Content-Type"])&&(l["Content-Type"]=c)}function i(){var l;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(l=Ap()),l}function o(l,c,u){if(t.isString(l))try{return(c||JSON.parse)(l),t.trim(l)}catch(d){if(d.name!=="SyntaxError")throw d}return(u||JSON.stringify)(l)}var a={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:i(),transformRequest:[function(c,u){return e(u,"Accept"),e(u,"Content-Type"),t.isFormData(c)||t.isArrayBuffer(c)||t.isBuffer(c)||t.isStream(c)||t.isFile(c)||t.isBlob(c)?c:t.isArrayBufferView(c)?c.buffer:t.isURLSearchParams(c)?(s(u,"application/x-www-form-urlencoded;charset=utf-8"),c.toString()):t.isObject(c)||u&&u["Content-Type"]==="application/json"?(s(u,"application/json"),o(c)):c}],transformResponse:[function(c){var u=this.transitional||a.transitional,d=u&&u.silentJSONParsing,f=u&&u.forcedJSONParsing,h=!d&&this.responseType==="json";if(h||f&&t.isString(c)&&c.length)try{return JSON.parse(c)}catch(p){if(h)throw p.name==="SyntaxError"?n(p,this,"E_JSON_PARSE"):p}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};return t.forEach(["delete","get","head"],function(c){a.headers[c]={}}),t.forEach(["post","put","patch"],function(c){a.headers[c]=t.merge(r)}),xl=a,xl}var mH=on,vH=za(),Ub=function(e,n,r){var s=this||vH;return mH.forEach(r,function(o){e=o.call(s,e,n)}),e};const yH=j(Ub),bH=X({__proto__:null,default:yH},[Ub]),TH=Q(bH);var Fl,Lp;function Vb(){return Lp||(Lp=1,Fl=function(e){return!!(e&&e.__CANCEL__)}),Fl}var Ip=on,Nl=TH,EH=Vb(),SH=za(),_H=ja();function Bl(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _H("canceled")}var Hb=function(e){Bl(e),e.headers=e.headers||{},e.data=Nl.call(e,e.data,e.headers,e.transformRequest),e.headers=Ip.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),Ip.forEach(["delete","get","head","post","put","patch","common"],function(s){delete e.headers[s]});var n=e.adapter||SH.adapter;return n(e).then(function(s){return Bl(e),s.data=Nl.call(e,s.data,s.headers,e.transformResponse),s},function(s){return EH(s)||(Bl(e),s&&s.response&&(s.response.data=Nl.call(e,s.response.data,s.response.headers,e.transformResponse))),Promise.reject(s)})};const AH=j(Hb),wH=X({__proto__:null,default:AH},[Hb]),LH=Q(wH);var ln=on,Gb=function(e,n){n=n||{};var r={};function s(u,d){return ln.isPlainObject(u)&&ln.isPlainObject(d)?ln.merge(u,d):ln.isPlainObject(d)?ln.merge({},d):ln.isArray(d)?d.slice():d}function i(u){if(ln.isUndefined(n[u])){if(!ln.isUndefined(e[u]))return s(void 0,e[u])}else return s(e[u],n[u])}function o(u){if(!ln.isUndefined(n[u]))return s(void 0,n[u])}function a(u){if(ln.isUndefined(n[u])){if(!ln.isUndefined(e[u]))return s(void 0,e[u])}else return s(void 0,n[u])}function l(u){if(u in n)return s(e[u],n[u]);if(u in e)return s(void 0,e[u])}var c={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l};return ln.forEach(Object.keys(e).concat(Object.keys(n)),function(d){var f=c[d]||i,h=f(d);ln.isUndefined(h)&&f!==l||(r[d]=h)}),r};const IH=j(Gb),CH=X({__proto__:null,default:IH},[Gb]),Kb=Q(CH);var Ul,Cp;function qb(){return Cp||(Cp=1,Ul={version:"0.25.0"}),Ul}var RH=qb().version,Ed={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){Ed[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});var Rp={};Ed.transitional=function(e,n,r){function s(i,o){return"[Axios v"+RH+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return function(i,o,a){if(e===!1)throw new Error(s(o," has been removed"+(n?" in "+n:"")));return n&&!Rp[o]&&(Rp[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function $H(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var r=Object.keys(t),s=r.length;s-- >0;){var i=r[s],o=e[i];if(o){var a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new TypeError("option "+i+" must be "+l);continue}if(n!==!0)throw Error("Unknown option "+i)}}var jb={assertOptions:$H,validators:Ed};const kH=j(jb),DH=X({__proto__:null,default:kH},[jb]),PH=Q(DH);var zb=on,OH=Ob,$p=nH,kp=LH,Wa=Kb,Wb=PH,vs=Wb.validators;function eo(t){this.defaults=t,this.interceptors={request:new $p,response:new $p}}eo.prototype.request=function(e,n){if(typeof e=="string"?(n=n||{},n.url=e):n=e||{},!n.url)throw new Error("Provided config url is not valid");n=Wa(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&Wb.assertOptions(r,{silentJSONParsing:vs.transitional(vs.boolean),forcedJSONParsing:vs.transitional(vs.boolean),clarifyTimeoutError:vs.transitional(vs.boolean)},!1);var s=[],i=!0;this.interceptors.request.forEach(function(h){typeof h.runWhen=="function"&&h.runWhen(n)===!1||(i=i&&h.synchronous,s.unshift(h.fulfilled,h.rejected))});var o=[];this.interceptors.response.forEach(function(h){o.push(h.fulfilled,h.rejected)});var a;if(!i){var l=[kp,void 0];for(Array.prototype.unshift.apply(l,s),l=l.concat(o),a=Promise.resolve(n);l.length;)a=a.then(l.shift(),l.shift());return a}for(var c=n;s.length;){var u=s.shift(),d=s.shift();try{c=u(c)}catch(f){d(f);break}}try{a=kp(c)}catch(f){return Promise.reject(f)}for(;o.length;)a=a.then(o.shift(),o.shift());return a};eo.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=Wa(this.defaults,e),OH(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};zb.forEach(["delete","get","head","options"],function(e){eo.prototype[e]=function(n,r){return this.request(Wa(r||{},{method:e,url:n,data:(r||{}).data}))}});zb.forEach(["post","put","patch"],function(e){eo.prototype[e]=function(n,r,s){return this.request(Wa(s||{},{method:e,url:n,data:r}))}});var Yb=eo;const MH=j(Yb),xH=X({__proto__:null,default:MH},[Yb]),FH=Q(xH);var Vl,Dp;function NH(){if(Dp)return Vl;Dp=1;var t=ja();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(o){r=o});var s=this;this.promise.then(function(i){if(s._listeners){var o,a=s._listeners.length;for(o=0;o<a;o++)s._listeners[o](i);s._listeners=null}}),this.promise.then=function(i){var o,a=new Promise(function(l){s.subscribe(l),o=l}).then(i);return a.cancel=function(){s.unsubscribe(o)},a},n(function(o){s.reason||(s.reason=new t(o),r(s.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},e.prototype.unsubscribe=function(r){if(this._listeners){var s=this._listeners.indexOf(r);s!==-1&&this._listeners.splice(s,1)}},e.source=function(){var r,s=new e(function(o){r=o});return{token:s,cancel:r}},Vl=e,Vl}var Hl,Pp;function BH(){return Pp||(Pp=1,Hl=function(e){return function(r){return e.apply(null,r)}}),Hl}var Gl,Op;function UH(){if(Op)return Gl;Op=1;var t=on;return Gl=function(n){return t.isObject(n)&&n.isAxiosError===!0},Gl}var Mp=on,VH=Cb,Vo=FH,HH=Kb,GH=za();function Xb(t){var e=new Vo(t),n=VH(Vo.prototype.request,e);return Mp.extend(n,Vo.prototype,e),Mp.extend(n,e),n.create=function(s){return Xb(HH(t,s))},n}var tr=Xb(GH);tr.Axios=Vo;tr.Cancel=ja();tr.CancelToken=NH();tr.isCancel=Vb();tr.VERSION=qb().version;tr.all=function(e){return Promise.all(e)};tr.spread=BH();tr.isAxiosError=UH();yd.exports=tr;yd.exports.default=tr;var Qb=yd.exports;const KH=j(Qb),qH=X({__proto__:null,default:KH},[Qb]),jH=Q(qH);var zH=jH;const WH=j(zH),Sd=WH.create({timeout:1e3*60,withCredentials:!0,validateStatus:t=>t>=200&&t<300,baseURL:"https://api.trtst.com/"});Sd.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)});Sd.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)});const YH=["get","post"],Ae={};YH.forEach(t=>{Ae[t]=function(e,n,r){return new Promise(function(s,i){Sd[t](e,n,r).then(o=>{s(o)}).catch(o=>{i(o)})})}});const XH=()=>Ae.get("/banner",{}),QH=({keywords:t=""})=>Ae.get(`/search?keywords=${t}`,{}),JH=({keywords:t="",limit:e=30,offset:n=0,type:r="1"})=>Ae.get(`/cloudsearch?keywords=${t}&limit=${e}&offset=${n}&type=${r}`,{}),ZH=()=>Ae.get("/search/hot",{}),e9=()=>Ae.get("/search/hot/detail",{}),t9=({keywords:t=""})=>Ae.get(`/search/suggest?keywords=${t}`,{}),n9=({keywords:t=""})=>Ae.get(`/search/multimatch?keywords=${t}`,{}),r9=({phone:t="",pwd:e="",realIP:n="43.241.243.255"})=>Ae.post("/login/cellphone",{phone:t,password:e,realIP:n}),s9=()=>Ae.get("/logout",{}),i9=({uid:t=""})=>Ae.get(`/user/detail?uid=${t}`,{}),o9=({id:t=""})=>Ae.get(`/check/music?id=${t}`,{}),a9=()=>Ae.get("/playlist/hot",{}),l9=({order:t="hot",cat:e="",limit:n=50,offset:r=0})=>Ae.get(`/top/playlist?limit=${n}&order=${t}&cat=${e}&offset=${r}`,{}),c9=(t=30)=>Ae.get(`/personalized?limit=${t}`,{}),u9=(t=20,e=0)=>Ae.get(`/top/playlist/highquality?limit=${t}&before=${e}`,{}),d9=()=>Ae.get("/playlist/highquality/tags",{}),f9=()=>Ae.get("/playlist/catlist",{}),h9=({id:t="",s:e=8})=>Ae.get(`/playlist/detail?id=${t}&s=${e}`,{}),p9=({id:t="",limit:e=20,offset:n=0})=>Ae.get(`/playlist/subscribers?id=${t}&limit=${e}&offset=${n}`,{}),g9=({id:t=""})=>Ae.get(`/related/playlist?id=${t}`,{}),m9=({id:t="",limit:e=20,offset:n=0,before:r=0})=>Ae.get(`/comment/playlist?id=${t}&limit=${e}&offset=${n}&before=${r}`,{}),v9=({t=1,id:e=""})=>Ae.get(`/playlist/subscribe?t=${t}&id=${e}`,{}),y9=({uid:t="",limit:e=30,offset:n=0})=>Ae.get(`/user/playlist?uid=${t}&limit=${e}&offset=${n}`,{}),b9=({op:t="add",pid:e="",tracks:n=""})=>Ae.get(`/playlist/tracks?op=${t}&pid=${e}&tracks=${n}`,{}),T9=({ids:t="",timestamp:e=0})=>Ae.post(`/song/detail?timestamp=${e}`,{ids:t}),E9=({id:t=""})=>Ae.get(`/song/url?id=${t}`,{}),S9=({id:t="",like:e=!1})=>Ae.get(`/like?id=${t}&like=${e}`,{}),_9=({id:t=""})=>Ae.get(`/lyric?id=${t}`,{}),A9=({id:t=""})=>Ae.get(`/simi/song?id=${t}`,{}),w9=({id:t=""})=>Ae.get(`/simi/playlist?id=${t}`,{}),L9=({id:t="",limit:e=20,offset:n=0,before:r=0,timestamp:s=0})=>Ae.get(`/comment/music?id=${t}&limit=${e}&offset=${n}&before=${r}&timestamp=${s}`,{}),I9=({t=1,type:e=0,id:n="",content:r="",commentId:s=""})=>Ae.get(`/comment?t=${t}&type=${e}&id=${n}&content=${r}&commentId=${s}`,{}),C9=({id:t="",cid:e="",t:n=1,type:r=0})=>Ae.get(`/comment/like?id=${t}&cid=${e}&t=${n}&type=${r}`,{}),R9=({id:t=""})=>Ae.get(`/album?id=${t}`,{}),$9=({id:t=""})=>Ae.get(`/album/detail/dynamic?id=${t}`,{}),k9=({id:t="",t:e=1})=>Ae.get(`/album/sub?id=${t}&t=${e}`,{}),D9=({id:t="",limit:e=20,offset:n=0,before:r=0,timestamp:s=0})=>Ae.get(`/comment/album?id=${t}&limit=${e}&offset=${n}&before=${r}&timestamp=${s}`,{}),P9=({id:t=""})=>Ae.get(`/artist/desc?id=${t}`,{}),O9=({id:t=""})=>Ae.get(`/artists?id=${t}`,{}),M9=({id:t="",t:e="1"})=>Ae.get(`/artist/sub?id=${t}&t=${e}`,{}),x9=({id:t="",limit:e=50,offset:n=0})=>Ae.get(`/artist/album?id=${t}&limit=${e}&offset=${n}`,{}),F9=({id:t="",limit:e=50,offset:n=0})=>Ae.get(`/artist/mv?id=${t}&limit=${e}&offset=${n}`,{}),N9=({type:t=-1,area:e=-1,initial:n="",limit:r=50,offset:s=0})=>Ae.get(`/artist/list?type=${t}&area=${e}&initial=${n}&limit=${r}&offset=${s}`,{}),B9=()=>Ae.get("/artist/sublist",{}),U9=({area:t="",type:e="",order:n="",limit:r=50,offset:s=0})=>Ae.get(`/mv/all?area=${t}&type=${e}&order=${n}&limit=${r}&offset=${s}`,{}),V9=({id:t=""})=>Ae.get(`/mv/detail?mvid=${t}`,{}),H9=({id:t="",r:e=1080})=>Ae.get(`/mv/url?id=${t}&r=${e}`,{}),G9=({id:t="",limit:e=20,offset:n=0,before:r=0,timestamp:s=0})=>Ae.get(`/comment/mv?id=${t}&limit=${e}&offset=${n}&before=${r}&timestamp=${s}`,{}),K9=({id:t=""})=>Ae.get(`/simi/mv?mvid=${t}`,{}),q9=()=>Ae.get("/toplist",{}),j9=({id:t="",s:e=8})=>Ae.get(`/playlist/detail?id=${t}&s=${e}`,{}),z9=()=>Ae.get("/toplist/detail",{}),W9=({id:t="",s:e=8})=>Ae.get(`/playlist/detail?id=${t}&s=${e}`,{}),Y9=({id:t="",r:e=1080})=>Ae.get(`/video/url?id=${t}&r=${e}`,{}),X9=({id:t=""})=>Ae.get(`/video/detail?id=${t}`,{}),Q9=({id:t=""})=>Ae.get(`/related/allvideo?id=${t}`,{}),J9=({id:t="",limit:e=20,offset:n=0,before:r=0,timestamp:s=0})=>Ae.get(`/comment/video?id=${t}&limit=${e}&offset=${n}&before=${r}&timestamp=${s}`,{}),Z9=(t=20,e=0)=>Ae.get(`/hot/topic?limit=${t}&offset=${e}`,{}),eG=({limit:t=20,offset:e=0,area:n="all",type:r="new",year:s="",month:i=""})=>Ae.get(`/top/album?limit=${t}&offset=${e}&area=${n}&type=${r}&year=${s}&month=${i}`,{}),tG=({limit:t=30,offset:e=0})=>Ae.get(`/top/artists?limit=${t}&offset=${e}`,{}),nG=({limit:t=30,area:e=""})=>Ae.get(`/mv/first?limit=${t}&area=${e}`,{}),rG=({limit:t=30,offset:e=0})=>Ae.get(`/dj/hot?limit=${t}&offset=${e}`,{}),sG=Object.freeze(Object.defineProperty({__proto__:null,addPlayList:b9,album:R9,albumComment:D9,albumDynamic:$9,albumSub:k9,artistAlbum:x9,artistDesc:P9,artistList:N9,artistMv:F9,artistSub:M9,artists:O9,catlist:f9,checkSong:o9,cloudsearch:JH,comment:I9,commentLike:C9,commentMv:G9,commentSong:L9,commentVideo:J9,getBanner:XH,getHotDj:rG,getNewMv:nG,getUserInfo:i9,highquality:u9,highqualitytag:d9,hotList:a9,hotTopic:Z9,likeSong:S9,listDetail:W9,login:r9,logout:s9,lyrics:_9,mv:U9,mvDetail:V9,mvUrl:H9,personalized:c9,playList:l9,playlistComment:m9,playlistRelated:g9,playlistSCollect:p9,playlistUser:y9,playlistdetail:h9,search:QH,serachHot:ZH,serachHotDetail:e9,serachMatch:n9,serachSuggest:t9,simiMv:K9,simiPlayList:w9,simiSong:A9,simiVideo:Q9,songDetail:T9,songUrl:E9,subArtist:B9,subPlayList:v9,topAlbum:eG,topArtists:tG,topListDetail:z9,topRankList:j9,toplist:q9,videoDetail:X9,videoUrl:Y9},Symbol.toStringTag,{value:"Module"})),iG=[{name:"全部",code:"all"},{name:"华语",code:"zh"},{name:"欧美",code:"ea"},{name:"韩国",code:"kr"},{name:"日本",code:"jp"}],oG=["全部","内地","港台","欧美","日本","韩国"],aG=["全部","官方版","原生","现场版","网易出品"],lG=[{label:"全部",val:-1},{label:"华语",val:7},{label:"欧美",val:96},{label:"日本",val:8},{label:"韩国",val:16},{label:"其他",val:0}],cG=[{label:"全部",val:-1},{label:"男歌手",val:1},{label:"女歌手",val:2},{label:"乐队",val:3}],uG={ALBUM_AREA:iG,MV_AREA:oG,MV_TYPE:aG,ARTIST_AREA:lG,ARTIST_TYPE:cG};function dG(t,e,n){var r=n||{},s=r.noTrailing,i=s===void 0?!1:s,o=r.noLeading,a=o===void 0?!1:o,l=r.debounceMode,c=l===void 0?void 0:l,u,d=!1,f=0;function h(){u&&clearTimeout(u)}function p(v){var m=v||{},y=m.upcomingOnly,T=y===void 0?!1:y;h(),d=!T}function g(){for(var v=arguments.length,m=new Array(v),y=0;y<v;y++)m[y]=arguments[y];var T=this,E=Date.now()-f;if(d)return;function S(){f=Date.now(),e.apply(T,m)}function _(){u=void 0}!a&&c&&!u&&S(),h(),c===void 0&&E>t?a?(f=Date.now(),i||(u=setTimeout(c?_:S,t))):S():i!==!0&&(u=setTimeout(c?_:S,c===void 0?t-E:t))}return g.cancel=p,g}function xp(t,e,n){var r=n||{},s=r.atBegin,i=s===void 0?!1:s;return dG(t,e,{debounceMode:i!==!1})}function fG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Jb={exports:{}};(function(t,e){(function(n){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=a.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=a.normalizePath(d.path),a.buildURLFromParts(d)}var f=a.parseURL(c);if(!f)throw new Error("Error trying to parse relative URL.");if(f.scheme)return u.alwaysNormalize?(f.path=a.normalizePath(f.path),a.buildURLFromParts(f)):c;var h=a.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");if(!h.netLoc&&h.path&&h.path[0]!=="/"){var p=s.exec(h.path);h.netLoc=p[1],h.path=p[2]}h.netLoc&&!h.path&&(h.path="/");var g={scheme:h.scheme,netLoc:f.netLoc,path:null,params:f.params,query:f.query,fragment:f.fragment};if(!f.netLoc&&(g.netLoc=h.netLoc,f.path[0]!=="/"))if(!f.path)g.path=h.path,f.params||(g.params=h.params,f.query||(g.query=h.query));else{var v=h.path,m=v.substring(0,v.lastIndexOf("/")+1)+f.path;g.path=a.normalizePath(m)}return g.path===null&&(g.path=u.alwaysNormalize?a.normalizePath(f.path):f.path),a.buildURLFromParts(g)},parseURL:function(l){var c=r.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(i,"");l.length!==(l=l.replace(o,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=a})()})(Jb);var _d=Jb.exports;function Fp(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fp(Object(n),!0).forEach(function(r){hG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function hG(t,e,n){return e=gG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Rt(){return Rt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rt.apply(this,arguments)}function pG(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gG(t){var e=pG(t,"string");return typeof e=="symbol"?e:String(e)}const Re=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)};let b=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t}({}),De=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),K=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.UNKNOWN="unknown",t}({});const Kr=function(){},uu={trace:Kr,debug:Kr,log:Kr,warn:Kr,info:Kr,error:Kr};let Li=uu;function mG(t){const e=self.console[t];return e?e.bind(self.console,`[${t}] >`):Kr}function vG(t,...e){e.forEach(function(n){Li[n]=t[n]?t[n].bind(t):mG(n)})}function yG(t,e){if(self.console&&t===!0||typeof t=="object"){vG(t,"debug","log","info","warn","error");try{Li.log(`Debug logs enabled for "${e}" in hls.js version 1.4.12`)}catch{Li=uu}}else Li=uu}const O=Li,bG=/^(\d+)x(\d+)$/,Np=/(.+?)=(".*?"|.*?)(?:,|$)/g;class bt{constructor(e){typeof e=="string"&&(e=bt.parseAttrList(e));for(const n in e)e.hasOwnProperty(n)&&(n.substring(0,2)==="X-"&&(this.clientAttrs=this.clientAttrs||[],this.clientAttrs.push(n)),this[n]=e[n])}decimalInteger(e){const n=parseInt(this[e],10);return n>Number.MAX_SAFE_INTEGER?1/0:n}hexadecimalInteger(e){if(this[e]){let n=(this[e]||"0x").slice(2);n=(n.length&1?"0":"")+n;const r=new Uint8Array(n.length/2);for(let s=0;s<n.length/2;s++)r[s]=parseInt(n.slice(s*2,s*2+2),16);return r}else return null}hexadecimalIntegerAsNumber(e){const n=parseInt(this[e],16);return n>Number.MAX_SAFE_INTEGER?1/0:n}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,n){const r=this[e];return r?parseFloat(r):n}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const n=bG.exec(this[e]);if(n!==null)return{width:parseInt(n[1],10),height:parseInt(n[2],10)}}static parseAttrList(e){let n;const r={},s='"';for(Np.lastIndex=0;(n=Np.exec(e))!==null;){let i=n[2];i.indexOf(s)===0&&i.lastIndexOf(s)===i.length-1&&(i=i.slice(1,-1));const o=n[1].trim();r[o]=i}return r}}function TG(t){return t!=="ID"&&t!=="CLASS"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function EG(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"}class Zb{constructor(e,n){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,n){const r=n.attr;for(const s in r)if(Object.prototype.hasOwnProperty.call(e,s)&&e[s]!==r[s]){O.warn(`DATERANGE tag attribute: "${s}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=s;break}e=Rt(new bt({}),r,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const r=new Date(this.attr["END-DATE"]);Re(r.getTime())&&(this._endDate=r)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Re(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Re(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class Ya{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var ct={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class e1{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[ct.AUDIO]:null,[ct.VIDEO]:null,[ct.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,n){const r=e.split("@",2),s=[];r.length===1?s[0]=n?n.byteRangeEndOffset:0:s[0]=parseInt(r[1]),s[1]=parseInt(r[0])+s[0],this._byteRange=s}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=_d.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class Kl extends e1{constructor(e,n){super(n),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new Ya,this.urlId=0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const n=this.levelkeys.identity;if(n)this._decryptdata=n.getDecryptData(this.sn);else{const r=Object.keys(this.levelkeys);if(r.length===1)return this._decryptdata=this.levelkeys[r[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Re(this.programDateTime))return null;const e=Re(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&this.levelkeys[n[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const n=this.levelkeys[e];n&&!this._decryptdata&&(this._decryptdata=n.getDecryptData(this.sn))}}abortRequests(){var e,n;(e=this.loader)==null||e.abort(),(n=this.keyLoader)==null||n.abort()}setElementaryStreamInfo(e,n,r,s,i,o=!1){const{elementaryStreams:a}=this,l=a[e];if(!l){a[e]={startPTS:n,endPTS:r,startDTS:s,endDTS:i,partial:o};return}l.startPTS=Math.min(l.startPTS,n),l.endPTS=Math.max(l.endPTS,r),l.startDTS=Math.min(l.startDTS,s),l.endDTS=Math.max(l.endDTS,i)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[ct.AUDIO]=null,e[ct.VIDEO]=null,e[ct.AUDIOVIDEO]=null}}class SG extends e1{constructor(e,n,r,s,i){super(r),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new Ya,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=n,this.index=s;const o=e.enumeratedString("BYTERANGE");o&&this.setByteRange(o,i),i&&(this.fragOffset=i.fragOffset+i.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}const _G=10;class AG{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const n=this.lastPartSn-e.lastPartSn,r=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!r||!!n||!this.live,this.advanced=this.endSN>e.endSN||n>0||n===0&&r>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Re(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||_G}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function Ad(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function wG(t){const e=t1(t).subarray(0,16),n=new Uint8Array(16);return n.set(e,16-e.length),n}function LG(t){const e=function(n,r,s){const i=n[r];n[r]=n[s],n[s]=i};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function IG(t){const e=t.split(":");let n=null;if(e[0]==="data"&&e.length===2){const r=e[1].split(";"),s=r[r.length-1].split(",");if(s.length===2){const i=s[0]==="base64",o=s[1];i?(r.splice(-1,1),n=Ad(o)):n=wG(o)}}return n}function t1(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}var Tt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Zt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Bp(t){switch(t){case Zt.FAIRPLAY:return Tt.FAIRPLAY;case Zt.PLAYREADY:return Tt.PLAYREADY;case Zt.WIDEVINE:return Tt.WIDEVINE;case Zt.CLEARKEY:return Tt.CLEARKEY}}var n1={WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function CG(t){if(t===n1.WIDEVINE)return Tt.WIDEVINE}function Up(t){switch(t){case Tt.FAIRPLAY:return Zt.FAIRPLAY;case Tt.PLAYREADY:return Zt.PLAYREADY;case Tt.WIDEVINE:return Zt.WIDEVINE;case Tt.CLEARKEY:return Zt.CLEARKEY}}function ql(t){const{drmSystems:e,widevineLicenseUrl:n}=t,r=e?[Tt.FAIRPLAY,Tt.WIDEVINE,Tt.PLAYREADY,Tt.CLEARKEY].filter(s=>!!e[s]):[];return!r[Tt.WIDEVINE]&&n&&r.push(Tt.WIDEVINE),r}const r1=function(){return typeof self<"u"&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function RG(t,e,n,r){let s;switch(t){case Tt.FAIRPLAY:s=["cenc","sinf"];break;case Tt.WIDEVINE:case Tt.PLAYREADY:s=["cenc"];break;case Tt.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return $G(s,e,n,r)}function $G(t,e,n,r){return[{initDataTypes:t,persistentState:r.persistentState||"not-allowed",distinctiveIdentifier:r.distinctiveIdentifier||"not-allowed",sessionTypes:r.sessionTypes||[r.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:r.audioRobustness||"",encryptionScheme:r.audioEncryptionScheme||null})),videoCapabilities:n.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:r.videoRobustness||"",encryptionScheme:r.videoEncryptionScheme||null}))}]}function ns(t,e,n){return Uint8Array.prototype.slice?t.slice(e,n):new Uint8Array(Array.prototype.slice.call(t,e,n))}const wd=(t,e)=>e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,s1=(t,e)=>e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128,oa=(t,e)=>{const n=e;let r=0;for(;wd(t,e);){r+=10;const s=Xa(t,e+6);r+=s,s1(t,e+10)&&(r+=10),e+=r}if(r>0)return t.subarray(n,n+r)},Xa=(t,e)=>{let n=0;return n=(t[e]&127)<<21,n|=(t[e+1]&127)<<14,n|=(t[e+2]&127)<<7,n|=t[e+3]&127,n},kG=(t,e)=>wd(t,e)&&Xa(t,e+6)+10<=t.length-e,DG=t=>{const e=o1(t);for(let n=0;n<e.length;n++){const r=e[n];if(i1(r))return NG(r)}},i1=t=>t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp",PG=t=>{const e=String.fromCharCode(t[0],t[1],t[2],t[3]),n=Xa(t,4),r=10;return{type:e,size:n,data:t.subarray(r,r+n)}},o1=t=>{let e=0;const n=[];for(;wd(t,e);){const r=Xa(t,e+6);e+=10;const s=e+r;for(;e+8<s;){const i=PG(t.subarray(e)),o=OG(i);o&&n.push(o),e+=i.size+10}s1(t,e)&&(e+=10)}return n},OG=t=>t.type==="PRIV"?MG(t):t.type[0]==="W"?FG(t):xG(t),MG=t=>{if(t.size<2)return;const e=Xn(t.data,!0),n=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:n.buffer}},xG=t=>{if(t.size<2)return;if(t.type==="TXXX"){let n=1;const r=Xn(t.data.subarray(n),!0);n+=r.length+1;const s=Xn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Xn(t.data.subarray(1));return{key:t.type,data:e}},FG=t=>{if(t.type==="WXXX"){if(t.size<2)return;let n=1;const r=Xn(t.data.subarray(n),!0);n+=r.length+1;const s=Xn(t.data.subarray(n));return{key:t.type,info:r,data:s}}const e=Xn(t.data);return{key:t.type,data:e}},NG=t=>{if(t.data.byteLength===8){const e=new Uint8Array(t.data),n=e[3]&1;let r=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return r/=45,n&&(r+=4772185884e-2),Math.round(r)}},Xn=(t,e=!1)=>{const n=BG();if(n){const c=n.decode(t);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const r=t.length;let s,i,o,a="",l=0;for(;l<r;){if(s=t[l++],s===0&&e)return a;if(!(s===0||s===3))switch(s>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(s);break;case 12:case 13:i=t[l++],a+=String.fromCharCode((s&31)<<6|i&63);break;case 14:i=t[l++],o=t[l++],a+=String.fromCharCode((s&15)<<12|(i&63)<<6|(o&63)<<0);break}}return a};let jl;function BG(){return!jl&&typeof self.TextDecoder<"u"&&(jl=new self.TextDecoder("utf-8")),jl}const Kn={hexDump:function(t){let e="";for(let n=0;n<t.length;n++){let r=t[n].toString(16);r.length<2&&(r="0"+r),e+=r}return e}},aa=Math.pow(2,32)-1,UG=[].push,a1={video:1,audio:2,id3:3,text:4};function Dt(t){return String.fromCharCode.apply(null,t)}function l1(t,e){const n=t[e]<<8|t[e+1];return n<0?65536+n:n}function xe(t,e){const n=c1(t,e);return n<0?4294967296+n:n}function c1(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function zl(t,e,n){t[e]=n>>24,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n&255}function Ze(t,e){const n=[];if(!e.length)return n;const r=t.byteLength;for(let s=0;s<r;){const i=xe(t,s),o=Dt(t.subarray(s+4,s+8)),a=i>1?s+i:r;if(o===e[0])if(e.length===1)n.push(t.subarray(s+8,a));else{const l=Ze(t.subarray(s+8,a),e.slice(1));l.length&&UG.apply(n,l)}s=a}return n}function VG(t){const e=[],n=t[0];let r=8;const s=xe(t,r);r+=4;const i=0,o=0;n===0?r+=8:r+=16,r+=2;let a=t.length+o;const l=l1(t,r);r+=2;for(let c=0;c<l;c++){let u=r;const d=xe(t,u);u+=4;const f=d&2147483647;if((d&2147483648)>>>31===1)return O.warn("SIDX has hierarchical references (not supported)"),null;const h=xe(t,u);u+=4,e.push({referenceSize:f,subsegmentDuration:h,info:{duration:h/s,start:a,end:a+f-1}}),a+=f,u+=4,r=u}return{earliestPresentationTime:i,timescale:s,version:n,referencesCount:l,references:e}}function u1(t){const e=[],n=Ze(t,["moov","trak"]);for(let r=0;r<n.length;r++){const s=n[r],i=Ze(s,["tkhd"])[0];if(i){let o=i[0],a=o===0?12:20;const l=xe(i,a),c=Ze(s,["mdia","mdhd"])[0];if(c){o=c[0],a=o===0?12:20;const u=xe(c,a),d=Ze(s,["mdia","hdlr"])[0];if(d){const f=Dt(d.subarray(8,12)),h={soun:ct.AUDIO,vide:ct.VIDEO}[f];if(h){const p=Ze(s,["mdia","minf","stbl","stsd"])[0];let g;p&&(g=Dt(p.subarray(12,16))),e[l]={timescale:u,type:h},e[h]={timescale:u,id:l,codec:g}}}}}}return Ze(t,["moov","mvex","trex"]).forEach(r=>{const s=xe(r,4),i=e[s];i&&(i.default={duration:xe(r,12),flags:xe(r,20)})}),e}function HG(t,e){if(!t||!e)return t;const n=e.keyId;return n&&e.isCommonEncryption&&Ze(t,["moov","trak"]).forEach(r=>{const s=Ze(r,["mdia","minf","stbl","stsd"])[0].subarray(8);let i=Ze(s,["enca"]);const o=i.length>0;o||(i=Ze(s,["encv"])),i.forEach(a=>{const l=o?a.subarray(28):a.subarray(78);Ze(l,["sinf"]).forEach(c=>{const u=d1(c);if(u){const d=u.subarray(8,24);d.some(f=>f!==0)||(O.log(`[eme] Patching keyId in 'enc${o?"a":"v"}>sinf>>tenc' box: ${Kn.hexDump(d)} -> ${Kn.hexDump(n)}`),u.set(n,8))}})})}),t}function d1(t){const e=Ze(t,["schm"])[0];if(e){const n=Dt(e.subarray(4,8));if(n==="cbcs"||n==="cenc")return Ze(t,["schi","tenc"])[0]}return O.error("[eme] missing 'schm' box"),null}function GG(t,e){return Ze(e,["moof","traf"]).reduce((n,r)=>{const s=Ze(r,["tfdt"])[0],i=s[0],o=Ze(r,["tfhd"]).reduce((a,l)=>{const c=xe(l,4),u=t[c];if(u){let d=xe(s,4);if(i===1){if(d===aa)return O.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),a;d*=aa+1,d+=xe(s,8)}const f=u.timescale||9e4,h=d/f;if(isFinite(h)&&(a===null||h<a))return h}return a},null);return o!==null&&isFinite(o)&&(n===null||o<n)?o:n},null)}function KG(t,e){let n=0,r=0,s=0;const i=Ze(t,["moof","traf"]);for(let o=0;o<i.length;o++){const a=i[o],l=Ze(a,["tfhd"])[0],c=xe(l,4),u=e[c];if(!u)continue;const d=u.default,f=xe(l,0)|(d==null?void 0:d.flags);let h=d==null?void 0:d.duration;f&8&&(f&2?h=xe(l,12):h=xe(l,8));const p=u.timescale||9e4,g=Ze(a,["trun"]);for(let v=0;v<g.length;v++){if(n=qG(g[v]),!n&&h){const m=xe(g[v],4);n=h*m}u.type===ct.VIDEO?r+=n/p:u.type===ct.AUDIO&&(s+=n/p)}}if(r===0&&s===0){let o=0;const a=Ze(t,["sidx"]);for(let l=0;l<a.length;l++){const c=VG(a[l]);c!=null&&c.references&&(o+=c.references.reduce((u,d)=>u+d.info.duration||0,0))}return o}return r||s}function qG(t){const e=xe(t,0);let n=8;e&1&&(n+=4),e&4&&(n+=4);let r=0;const s=xe(t,4);for(let i=0;i<s;i++){if(e&256){const o=xe(t,n);r+=o,n+=4}e&512&&(n+=4),e&1024&&(n+=4),e&2048&&(n+=4)}return r}function jG(t,e,n){Ze(e,["moof","traf"]).forEach(r=>{Ze(r,["tfhd"]).forEach(s=>{const i=xe(s,4),o=t[i];if(!o)return;const a=o.timescale||9e4;Ze(r,["tfdt"]).forEach(l=>{const c=l[0];let u=xe(l,4);if(c===0)u-=n*a,u=Math.max(u,0),zl(l,4,u);else{u*=Math.pow(2,32),u+=xe(l,8),u-=n*a,u=Math.max(u,0);const d=Math.floor(u/(aa+1)),f=Math.floor(u%(aa+1));zl(l,4,d),zl(l,8,f)}})})})}function zG(t){const e={valid:null,remainder:null},n=Ze(t,["moof"]);if(n){if(n.length<2)return e.remainder=t,e}else return e;const r=n[n.length-1];return e.valid=ns(t,0,r.byteOffset-8),e.remainder=ns(t,r.byteOffset-8),e}function is(t,e){const n=new Uint8Array(t.length+e.length);return n.set(t),n.set(e,t.length),n}function Vp(t,e){const n=[],r=e.samples,s=e.timescale,i=e.id;let o=!1;return Ze(r,["moof"]).map(a=>{const l=a.byteOffset-8;Ze(a,["traf"]).map(c=>{const u=Ze(c,["tfdt"]).map(d=>{const f=d[0];let h=xe(d,4);return f===1&&(h*=Math.pow(2,32),h+=xe(d,8)),h/s})[0];return u!==void 0&&(t=u),Ze(c,["tfhd"]).map(d=>{const f=xe(d,4),h=xe(d,0)&16777215,p=(h&1)!==0,g=(h&2)!==0,v=(h&8)!==0;let m=0;const y=(h&16)!==0;let T=0;const E=(h&32)!==0;let S=8;f===i&&(p&&(S+=8),g&&(S+=4),v&&(m=xe(d,S),S+=4),y&&(T=xe(d,S),S+=4),E&&(S+=4),e.type==="video"&&(o=WG(e.codec)),Ze(c,["trun"]).map(_=>{const R=_[0],k=xe(_,0)&16777215,P=(k&1)!==0;let $=0;const N=(k&4)!==0,w=(k&256)!==0;let U=0;const z=(k&512)!==0;let ne=0;const oe=(k&1024)!==0,W=(k&2048)!==0;let q=0;const pe=xe(_,4);let J=8;P&&($=xe(_,J),J+=4),N&&(J+=4);let le=$+l;for(let me=0;me<pe;me++){if(w?(U=xe(_,J),J+=4):U=m,z?(ne=xe(_,J),J+=4):ne=T,oe&&(J+=4),W&&(R===0?q=xe(_,J):q=c1(_,J),J+=4),e.type===ct.VIDEO){let Ve=0;for(;Ve<ne;){const je=xe(r,le);if(le+=4,YG(o,r[le])){const He=r.subarray(le,le+je);f1(He,o?2:1,t+q/s,n)}le+=je,Ve+=je+4}}t+=U/s}}))})})}),n}function WG(t){if(!t)return!1;const e=t.indexOf("."),n=e<0?t:t.substring(0,e);return n==="hvc1"||n==="hev1"||n==="dvh1"||n==="dvhe"}function YG(t,e){if(t){const n=e>>1&63;return n===39||n===40}else return(e&31)===6}function f1(t,e,n,r){const s=h1(t);let i=0;i+=e;let o=0,a=0,l=!1,c=0;for(;i<s.length;){o=0;do{if(i>=s.length)break;c=s[i++],o+=c}while(c===255);a=0;do{if(i>=s.length)break;c=s[i++],a+=c}while(c===255);const u=s.length-i;if(!l&&o===4&&i<s.length){if(l=!0,s[i++]===181){const d=l1(s,i);if(i+=2,d===49){const f=xe(s,i);if(i+=4,f===1195456820){const h=s[i++];if(h===3){const p=s[i++],g=31&p,v=64&p,m=v?2+g*3:0,y=new Uint8Array(m);if(v){y[0]=p;for(let T=1;T<m;T++)y[T]=s[i++]}r.push({type:h,payloadType:o,pts:n,bytes:y})}}}}}else if(o===5&&a<u){if(l=!0,a>16){const d=[];for(let p=0;p<16;p++){const g=s[i++].toString(16);d.push(g.length==1?"0"+g:g),(p===3||p===5||p===7||p===9)&&d.push("-")}const f=a-16,h=new Uint8Array(f);for(let p=0;p<f;p++)h[p]=s[i++];r.push({payloadType:o,pts:n,uuid:d.join(""),userData:Xn(h),userDataBytes:h})}}else if(a<u)i+=a;else if(a>u)break}}function h1(t){const e=t.byteLength,n=[];let r=1;for(;r<e-2;)t[r]===0&&t[r+1]===0&&t[r+2]===3?(n.push(r+2),r+=2):r++;if(n.length===0)return t;const s=e-n.length,i=new Uint8Array(s);let o=0;for(r=0;r<s;o++,r++)o===n[0]&&(o++,n.shift()),i[r]=t[o];return i}function XG(t){const e=t[0];let n="",r="",s=0,i=0,o=0,a=0,l=0,c=0;if(e===0){for(;Dt(t.subarray(c,c+1))!=="\0";)n+=Dt(t.subarray(c,c+1)),c+=1;for(n+=Dt(t.subarray(c,c+1)),c+=1;Dt(t.subarray(c,c+1))!=="\0";)r+=Dt(t.subarray(c,c+1)),c+=1;r+=Dt(t.subarray(c,c+1)),c+=1,s=xe(t,12),i=xe(t,16),a=xe(t,20),l=xe(t,24),c=28}else if(e===1){c+=4,s=xe(t,c),c+=4;const d=xe(t,c);c+=4;const f=xe(t,c);for(c+=4,o=2**32*d+f,Number.isSafeInteger(o)||(o=Number.MAX_SAFE_INTEGER,O.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),a=xe(t,c),c+=4,l=xe(t,c),c+=4;Dt(t.subarray(c,c+1))!=="\0";)n+=Dt(t.subarray(c,c+1)),c+=1;for(n+=Dt(t.subarray(c,c+1)),c+=1;Dt(t.subarray(c,c+1))!=="\0";)r+=Dt(t.subarray(c,c+1)),c+=1;r+=Dt(t.subarray(c,c+1)),c+=1}const u=t.subarray(c,t.byteLength);return{schemeIdUri:n,value:r,timeScale:s,presentationTime:o,presentationTimeDelta:i,eventDuration:a,id:l,payload:u}}function QG(t,...e){const n=e.length;let r=8,s=n;for(;s--;)r+=e[s].byteLength;const i=new Uint8Array(r);for(i[0]=r>>24&255,i[1]=r>>16&255,i[2]=r>>8&255,i[3]=r&255,i.set(t,4),s=0,r=8;s<n;s++)i.set(e[s],r),r+=e[s].byteLength;return i}function JG(t,e,n){if(t.byteLength!==16)throw new RangeError("Invalid system id");let r,s;if(e){r=1,s=new Uint8Array(e.length*16);for(let a=0;a<e.length;a++){const l=e[a];if(l.byteLength!==16)throw new RangeError("Invalid key");s.set(l,a*16)}}else r=0,s=new Uint8Array;let i;r>0?(i=new Uint8Array(4),e.length>0&&new DataView(i.buffer).setUint32(0,e.length,!1)):i=new Uint8Array;const o=new Uint8Array(4);return n&&n.byteLength>0&&new DataView(o.buffer).setUint32(0,n.byteLength,!1),QG([112,115,115,104],new Uint8Array([r,0,0,0]),t,i,s,o,n||new Uint8Array)}function ZG(t){if(!(t instanceof ArrayBuffer)||t.byteLength<32)return null;const e={version:0,systemId:"",kids:null,data:null},n=new DataView(t),r=n.getUint32(0);if(t.byteLength!==r&&r>44||n.getUint32(4)!==1886614376||(e.version=n.getUint32(8)>>>24,e.version>1))return null;e.systemId=Kn.hexDump(new Uint8Array(t,12,16));const s=n.getUint32(28);if(e.version===0){if(r-32<s)return null;e.data=new Uint8Array(t,32,s)}else if(e.version===1){e.kids=[];for(let i=0;i<s;i++)e.kids.push(new Uint8Array(t,32+i*16,16))}return e}let Eo={};class Ui{static clearKeyUriToKeyIdMap(){Eo={}}constructor(e,n,r,s=[1],i=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=n,this.keyFormat=r,this.keyFormatVersions=s,this.iv=i,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Zt.FAIRPLAY:case Zt.WIDEVINE:case Zt.PLAYREADY:case Zt.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&O.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const r=eK(e);return new Ui(this.method,this.uri,"identity",this.keyFormatVersions,r)}const n=IG(this.uri);if(n)switch(this.keyFormat){case Zt.WIDEVINE:this.pssh=n,n.length>=22&&(this.keyId=n.subarray(n.length-22,n.length-6));break;case Zt.PLAYREADY:{const r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=JG(r,null,n);const s=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),i=String.fromCharCode.apply(null,Array.from(s)),o=i.substring(i.indexOf("<"),i.length),a=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("KID")[0];if(a){const l=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(l){const c=Ad(l).subarray(0,16);LG(c),this.keyId=c}}break}default:{let r=n.subarray(0,16);if(r.length!==16){const s=new Uint8Array(16);s.set(r,16-r.length),r=s}this.keyId=r;break}}if(!this.keyId||this.keyId.byteLength!==16){let r=Eo[this.uri];if(!r){const s=Object.keys(Eo).length%Number.MAX_SAFE_INTEGER;r=new Uint8Array(16),new DataView(r.buffer,12,4).setUint32(0,s),Eo[this.uri]=r}this.keyId=r}return this}}function eK(t){const e=new Uint8Array(16);for(let n=12;n<16;n++)e[n]=t>>8*(15-n)&255;return e}const p1=/\{\$([a-zA-Z0-9-_]+)\}/g;function Hp(t){return p1.test(t)}function Xt(t,e,n){if(t.variableList!==null||t.hasVariableRefs)for(let r=n.length;r--;){const s=n[r],i=e[s];i&&(e[s]=du(t,i))}}function du(t,e){if(t.variableList!==null||t.hasVariableRefs){const n=t.variableList;return e.replace(p1,r=>{const s=r.substring(2,r.length-1),i=n==null?void 0:n[s];return i===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),r):i})}return e}function Gp(t,e,n){let r=t.variableList;r||(t.variableList=r={});let s,i;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const o=new self.URL(n).searchParams;if(o.has(s))i=o.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${n}"`)}catch(o){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${o.message}`))}}else s=e.NAME,i=e.VALUE;s in r?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):r[s]=i||""}function tK(t,e,n){const r=e.IMPORT;if(n&&r in n){let s=t.variableList;s||(t.variableList=s={}),s[r]=n[r]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${r}"`))}function Qa(){if(!(typeof self>"u"))return self.MediaSource||self.WebKitMediaSource}const nK={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},Kp=Qa();function rK(t,e){const n=nK[e];return!!n&&n[t.slice(0,4)]===!0}function Wl(t,e){var n;return(n=Kp==null?void 0:Kp.isTypeSupported(`${e||"video"}/mp4;codecs="${t}"`))!=null?n:!1}const qp=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,jp=/#EXT-X-MEDIA:(.*)/g,sK=/^#EXT(?:INF|-X-TARGETDURATION):/m,zp=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),iK=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class Mn{static findGroup(e,n){for(let r=0;r<e.length;r++){const s=e[r];if(s.id===n)return s}}static convertAVC1ToAVCOTI(e){const n=e.split(".");if(n.length>2){let r=n.shift()+".";return r+=parseInt(n.shift()).toString(16),r+=("000"+parseInt(n.shift()).toString(16)).slice(-4),r}return e}static resolve(e,n){return _d.buildAbsoluteURL(n,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return sK.test(e)}static parseMasterPlaylist(e,n){const r=Hp(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:r},i=[];qp.lastIndex=0;let o;for(;(o=qp.exec(e))!=null;)if(o[1]){var a;const c=new bt(o[1]);Xt(s,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=du(s,o[2]),d={attrs:c,bitrate:c.decimalInteger("AVERAGE-BANDWIDTH")||c.decimalInteger("BANDWIDTH"),name:c.NAME,url:Mn.resolve(u,n)},f=c.decimalResolution("RESOLUTION");f&&(d.width=f.width,d.height=f.height),oK((c.CODECS||"").split(/[ ,]+/).filter(h=>h),d),d.videoCodec&&d.videoCodec.indexOf("avc1")!==-1&&(d.videoCodec=Mn.convertAVC1ToAVCOTI(d.videoCodec)),(a=d.unknownCodecs)!=null&&a.length||i.push(d),s.levels.push(d)}else if(o[3]){const c=o[3],u=o[4];switch(c){case"SESSION-DATA":{const d=new bt(u);Xt(s,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const f=d["DATA-ID"];f&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[f]=d);break}case"SESSION-KEY":{const d=Wp(u,n,s);d.encrypted&&d.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(d)):O.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new bt(u);Xt(s,d,["NAME","VALUE","QUERYPARAM"]),Gp(s,d,n)}break}case"CONTENT-STEERING":{const d=new bt(u);Xt(s,d,["SERVER-URI","PATHWAY-ID"]),s.contentSteering={uri:Mn.resolve(d["SERVER-URI"],n),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Yp(u);break}}}const l=i.length>0&&i.length<s.levels.length;return s.levels=l?i:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,n,r){let s;const i={},o=r.levels,a={AUDIO:o.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:o.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(jp.lastIndex=0;(s=jp.exec(e))!==null;){const c=new bt(s[1]),u=c.TYPE;if(u){const d=a[u],f=i[u]||[];i[u]=f,Xt(r,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const h={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",instreamId:c["INSTREAM-ID"],name:c.NAME||c.LANGUAGE||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:c.LANGUAGE,url:c.URI?Mn.resolve(c.URI,n):""};if(d!=null&&d.length){const p=Mn.findGroup(d,h.groupId)||d[0];Xp(h,p,"audioCodec"),Xp(h,p,"textCodec")}f.push(h)}}return i}static parseLevelPlaylist(e,n,r,s,i,o){const a=new AG(n),l=a.fragments;let c=null,u=0,d=0,f=0,h=0,p=null,g=new Kl(s,n),v,m,y,T=-1,E=!1;for(zp.lastIndex=0,a.m3u8=e,a.hasVariableRefs=Hp(e);(v=zp.exec(e))!==null;){E&&(E=!1,g=new Kl(s,n),g.start=f,g.sn=u,g.cc=h,g.level=r,c&&(g.initSegment=c,g.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null));const k=v[1];if(k){g.duration=parseFloat(k);const P=(" "+v[2]).slice(1);g.title=P||null,g.tagList.push(P?["INF",k,P]:["INF",k])}else if(v[3]){if(Re(g.duration)){g.start=f,y&&Zp(g,y,a),g.sn=u,g.level=r,g.cc=h,g.urlId=i,l.push(g);const P=(" "+v[3]).slice(1);g.relurl=du(a,P),Qp(g,p),p=g,f+=g.duration,u++,d=0,E=!0}}else if(v[4]){const P=(" "+v[4]).slice(1);p?g.setByteRange(P,p):g.setByteRange(P)}else if(v[5])g.rawProgramDateTime=(" "+v[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),T===-1&&(T=l.length);else{if(v=v[0].match(iK),!v){O.warn("No matches on slow regex match for level playlist!");continue}for(m=1;m<v.length&&!(typeof v[m]<"u");m++);const P=(" "+v[m]).slice(1),$=(" "+v[m+1]).slice(1),N=v[m+2]?(" "+v[m+2]).slice(1):"";switch(P){case"PLAYLIST-TYPE":a.type=$.toUpperCase();break;case"MEDIA-SEQUENCE":u=a.startSN=parseInt($);break;case"SKIP":{const w=new bt($);Xt(a,w,["RECENTLY-REMOVED-DATERANGES"]);const U=w.decimalInteger("SKIPPED-SEGMENTS");if(Re(U)){a.skippedSegments=U;for(let ne=U;ne--;)l.unshift(null);u+=U}const z=w.enumeratedString("RECENTLY-REMOVED-DATERANGES");z&&(a.recentlyRemovedDateranges=z.split("	"));break}case"TARGETDURATION":a.targetduration=Math.max(parseInt($),1);break;case"VERSION":a.version=parseInt($);break;case"EXTM3U":break;case"ENDLIST":a.live=!1;break;case"#":($||N)&&g.tagList.push(N?[$,N]:[$]);break;case"DISCONTINUITY":h++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([P]);break;case"BITRATE":g.tagList.push([P,$]);break;case"DATERANGE":{const w=new bt($);Xt(a,w,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Xt(a,w,w.clientAttrs);const U=new Zb(w,a.dateRanges[w.ID]);U.isValid||a.skippedSegments?a.dateRanges[U.id]=U:O.warn(`Ignoring invalid DATERANGE tag: "${$}"`),g.tagList.push(["EXT-X-DATERANGE",$]);break}case"DEFINE":{{const w=new bt($);Xt(a,w,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in w?tK(a,w,o):Gp(a,w,n)}break}case"DISCONTINUITY-SEQUENCE":h=parseInt($);break;case"KEY":{const w=Wp($,n,a);if(w.isSupported()){if(w.method==="NONE"){y=void 0;break}y||(y={}),y[w.keyFormat]&&(y=Rt({},y)),y[w.keyFormat]=w}else O.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${$}"`);break}case"START":a.startTimeOffset=Yp($);break;case"MAP":{const w=new bt($);if(Xt(a,w,["BYTERANGE","URI"]),g.duration){const U=new Kl(s,n);Jp(U,w,r,y),c=U,g.initSegment=c,c.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=c.rawProgramDateTime)}else Jp(g,w,r,y),c=g,E=!0;break}case"SERVER-CONTROL":{const w=new bt($);a.canBlockReload=w.bool("CAN-BLOCK-RELOAD"),a.canSkipUntil=w.optionalFloat("CAN-SKIP-UNTIL",0),a.canSkipDateRanges=a.canSkipUntil>0&&w.bool("CAN-SKIP-DATERANGES"),a.partHoldBack=w.optionalFloat("PART-HOLD-BACK",0),a.holdBack=w.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const w=new bt($);a.partTarget=w.decimalFloatingPoint("PART-TARGET");break}case"PART":{let w=a.partList;w||(w=a.partList=[]);const U=d>0?w[w.length-1]:void 0,z=d++,ne=new bt($);Xt(a,ne,["BYTERANGE","URI"]);const oe=new SG(ne,g,n,z,U);w.push(oe),g.duration+=oe.duration;break}case"PRELOAD-HINT":{const w=new bt($);Xt(a,w,["URI"]),a.preloadHint=w;break}case"RENDITION-REPORT":{const w=new bt($);Xt(a,w,["URI"]),a.renditionReports=a.renditionReports||[],a.renditionReports.push(w);break}default:O.warn(`line parsed but not handled: ${v}`);break}}}p&&!p.relurl?(l.pop(),f-=p.duration,a.partList&&(a.fragmentHint=p)):a.partList&&(Qp(g,p),g.cc=h,a.fragmentHint=g,y&&Zp(g,y,a));const S=l.length,_=l[0],R=l[S-1];if(f+=a.skippedSegments*a.targetduration,f>0&&S&&R){a.averagetargetduration=f/S;const k=R.sn;a.endSN=k!=="initSegment"?k:0,a.live||(R.endList=!0),_&&(a.startCC=_.cc)}else a.endSN=0,a.startCC=0;return a.fragmentHint&&(f+=a.fragmentHint.duration),a.totalduration=f,a.endCC=h,T>0&&aK(l,T),a}}function Wp(t,e,n){var r,s;const i=new bt(t);Xt(n,i,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const o=(r=i.METHOD)!=null?r:"",a=i.URI,l=i.hexadecimalInteger("IV"),c=i.KEYFORMATVERSIONS,u=(s=i.KEYFORMAT)!=null?s:"identity";a&&i.IV&&!l&&O.error(`Invalid IV: ${i.IV}`);const d=a?Mn.resolve(a,e):"",f=(c||"1").split("/").map(Number).filter(Number.isFinite);return new Ui(o,d,u,f,l)}function Yp(t){const e=new bt(t).decimalFloatingPoint("TIME-OFFSET");return Re(e)?e:null}function oK(t,e){["video","audio","text"].forEach(n=>{const r=t.filter(s=>rK(s,n));if(r.length){const s=r.filter(i=>i.lastIndexOf("avc1",0)===0||i.lastIndexOf("mp4a",0)===0);e[`${n}Codec`]=s.length>0?s[0]:r[0],t=t.filter(i=>r.indexOf(i)===-1)}}),e.unknownCodecs=t}function Xp(t,e,n){const r=e[n];r&&(t[n]=r)}function aK(t,e){let n=t[e];for(let r=e;r--;){const s=t[r];if(!s)return;s.programDateTime=n.programDateTime-s.duration*1e3,n=s}}function Qp(t,e){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime),Re(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}function Jp(t,e,n,r){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=n,t.sn="initSegment",r&&(t.levelkeys=r),t.initSegment=null}function Zp(t,e,n){t.levelkeys=e;const{encryptedFragments:r}=n;(!r.length||r[r.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&r.push(t)}var tt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},Pe={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function eg(t){const{type:e}=t;switch(e){case tt.AUDIO_TRACK:return Pe.AUDIO;case tt.SUBTITLE_TRACK:return Pe.SUBTITLE;default:return Pe.MAIN}}function Yl(t,e){let n=t.url;return(n===void 0||n.indexOf("data:")===0)&&(n=e.url),n}class lK{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.LEVEL_LOADING,this.onLevelLoading,this),e.on(b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.LEVEL_LOADING,this.onLevelLoading,this),e.off(b.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(b.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const n=this.hls.config,r=n.pLoader,s=n.loader,i=r||s,o=new i(n);return this.loaders[e.type]=o,o}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const n=this.loaders[e];n&&n.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,n){const{url:r}=n;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:tt.MANIFEST,url:r,deliveryDirectives:null})}onLevelLoading(e,n){const{id:r,level:s,url:i,deliveryDirectives:o}=n;this.load({id:r,level:s,responseType:"text",type:tt.LEVEL,url:i,deliveryDirectives:o})}onAudioTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:tt.AUDIO_TRACK,url:i,deliveryDirectives:o})}onSubtitleTrackLoading(e,n){const{id:r,groupId:s,url:i,deliveryDirectives:o}=n;this.load({id:r,groupId:s,level:null,responseType:"text",type:tt.SUBTITLE_TRACK,url:i,deliveryDirectives:o})}load(e){var n;const r=this.hls.config;let s=this.getInternalLoader(e);if(s){const c=s.context;if(c&&c.url===e.url){O.trace("[playlist-loader]: playlist request ongoing");return}O.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let i;if(e.type===tt.MANIFEST?i=r.manifestLoadPolicy.default:i=Rt({},r.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),(n=e.deliveryDirectives)!=null&&n.part){let c;if(e.type===tt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===tt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===tt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const f=Math.max(u*3,d*.8)*1e3;i=Rt({},i,{maxTimeToFirstByteMs:Math.min(f,i.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(f,i.maxTimeToFirstByteMs)})}}}const o=i.errorRetry||i.timeoutRetry||{},a={loadPolicy:i,timeout:i.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},l={onSuccess:(c,u,d,f)=>{const h=this.getInternalLoader(d);this.resetInternalLoader(d.type);const p=c.data;if(p.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),f||null,u);return}u.parsing.start=performance.now(),Mn.isMediaPlaylist(p)?this.handleTrackOrLevelPlaylist(c,u,d,f||null,h):this.handleMasterPlaylist(c,u,d,f)},onError:(c,u,d,f)=>{this.handleNetworkError(u,d,!1,c,f)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};s.load(e,a,l)}handleMasterPlaylist(e,n,r,s){const i=this.hls,o=e.data,a=Yl(e,r),l=Mn.parseMasterPlaylist(o,a);if(l.playlistParsingError){this.handleManifestParsingError(e,r,l.playlistParsingError,s,n);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p}=l;this.variableList=p;const{AUDIO:g=[],SUBTITLES:v,"CLOSED-CAPTIONS":m}=Mn.parseMasterPlaylistMedia(o,a,l);g.length&&!g.some(y=>!y.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(O.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new bt({}),bitrate:0,url:""})),i.trigger(b.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:v,captions:m,contentSteering:c,url:a,stats:n,networkDetails:s,sessionData:d,sessionKeys:f,startTimeOffset:h,variableList:p})}handleTrackOrLevelPlaylist(e,n,r,s,i){const o=this.hls,{id:a,level:l,type:c}=r,u=Yl(e,r),d=Re(a)?a:0,f=Re(l)?l:d,h=eg(r),p=Mn.parseLevelPlaylist(e.data,u,f,h,d,this.variableList);if(c===tt.MANIFEST){const g={attrs:new bt({}),bitrate:0,details:p,name:"",url:u};o.trigger(b.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:n,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}n.parsing.end=performance.now(),r.levelDetails=p,this.handlePlaylistLoaded(p,e,n,r,s,i)}handleManifestParsingError(e,n,r,s,i){this.hls.trigger(b.ERROR,{type:De.NETWORK_ERROR,details:K.MANIFEST_PARSING_ERROR,fatal:n.type===tt.MANIFEST,url:e.url,err:r,error:r,reason:r.message,response:e,context:n,networkDetails:s,stats:i})}handleNetworkError(e,n,r=!1,s,i){let o=`A network ${r?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===tt.LEVEL?o+=`: ${e.level} id: ${e.id}`:(e.type===tt.AUDIO_TRACK||e.type===tt.SUBTITLE_TRACK)&&(o+=` id: ${e.id} group-id: "${e.groupId}"`);const a=new Error(o);O.warn(`[playlist-loader]: ${o}`);let l=K.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case tt.MANIFEST:l=r?K.MANIFEST_LOAD_TIMEOUT:K.MANIFEST_LOAD_ERROR,c=!0;break;case tt.LEVEL:l=r?K.LEVEL_LOAD_TIMEOUT:K.LEVEL_LOAD_ERROR,c=!1;break;case tt.AUDIO_TRACK:l=r?K.AUDIO_TRACK_LOAD_TIMEOUT:K.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case tt.SUBTITLE_TRACK:l=r?K.SUBTITLE_TRACK_LOAD_TIMEOUT:K.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:De.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:a,networkDetails:n,stats:i};if(s){const f=(n==null?void 0:n.url)||e.url;d.response=rn({url:f,data:void 0},s)}this.hls.trigger(b.ERROR,d)}handlePlaylistLoaded(e,n,r,s,i,o){const a=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:f}=s,h=Yl(n,s),p=eg(s),g=typeof s.level=="number"&&p===Pe.MAIN?c:void 0;if(!e.fragments.length){const m=new Error("No Segments found in Playlist");a.trigger(b.ERROR,{type:De.NETWORK_ERROR,details:K.LEVEL_EMPTY_ERROR,fatal:!1,url:h,error:m,reason:m.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const v=e.playlistParsingError;if(v){a.trigger(b.ERROR,{type:De.NETWORK_ERROR,details:K.LEVEL_PARSING_ERROR,fatal:!1,url:h,error:v,reason:v.message,response:n,context:s,level:g,parent:p,networkDetails:i,stats:r});return}switch(e.live&&o&&(o.getCacheAge&&(e.ageHeader=o.getCacheAge()||0),(!o.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case tt.MANIFEST:case tt.LEVEL:a.trigger(b.LEVEL_LOADED,{details:e,level:g||0,id:u||0,stats:r,networkDetails:i,deliveryDirectives:f});break;case tt.AUDIO_TRACK:a.trigger(b.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break;case tt.SUBTITLE_TRACK:a.trigger(b.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:r,networkDetails:i,deliveryDirectives:f});break}}}function g1(t,e){let n;try{n=new Event("addtrack")}catch{n=document.createEvent("Event"),n.initEvent("addtrack",!1,!1)}n.track=t,e.dispatchEvent(n)}function m1(t,e){const n=t.mode;if(n==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(r){O.debug(`[texttrack-utils]: ${r}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,t.addCue(s)}catch(s){O.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}n==="disabled"&&(t.mode=n)}function As(t){const e=t.mode;if(e==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)t.removeCue(t.cues[n]);e==="disabled"&&(t.mode=e)}function fu(t,e,n,r){const s=t.mode;if(s==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const i=uK(t.cues,e,n);for(let o=0;o<i.length;o++)(!r||r(i[o]))&&t.removeCue(i[o])}s==="disabled"&&(t.mode=s)}function cK(t,e){if(e<t[0].startTime)return 0;const n=t.length-1;if(e>t[n].endTime)return-1;let r=0,s=n;for(;r<=s;){const i=Math.floor((s+r)/2);if(e<t[i].startTime)s=i-1;else if(e>t[i].startTime&&r<n)r=i+1;else return i}return t[r].startTime-e<e-t[s].startTime?r:s}function uK(t,e,n){const r=[],s=cK(t,e);if(s>-1)for(let i=s,o=t.length;i<o;i++){const a=t[i];if(a.startTime>=e&&a.endTime<=n)r.push(a);else if(a.startTime>n)return r}return r}var On={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const dK=.25;function hu(){if(!(typeof self>"u"))return self.WebKitDataCue||self.VTTCue||self.TextTrackCue}const So=(()=>{const t=hu();try{new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function Xl(t,e){return t.getTime()/1e3-e}function fK(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class hK{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(b.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(b.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,n){this.media=n.media}onMediaDetaching(){this.id3Track&&(As(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const n=this.getID3Track(e.textTracks);return n.mode="hidden",n}getID3Track(e){if(this.media){for(let n=0;n<e.length;n++){const r=e[n];if(r.kind==="metadata"&&r.label==="id3")return g1(r,this.media),r}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,n){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:r,enableID3MetadataCues:s}}}=this;if(!r&&!s)return;const{samples:i}=n;this.id3Track||(this.id3Track=this.createTrack(this.media));const o=hu();for(let a=0;a<i.length;a++){const l=i[a].type;if(l===On.emsg&&!r||!s)continue;const c=o1(i[a].data);if(c){const u=i[a].pts;let d=u+i[a].duration;d>So&&(d=So),d-u<=0&&(d=u+dK);for(let f=0;f<c.length;f++){const h=c[f];if(!i1(h)){this.updateId3CueEnds(u,l);const p=new o(u,d,"");p.value=h,l&&(p.type=l),this.id3Track.addCue(p)}}}}}updateId3CueEnds(e,n){var r;const s=(r=this.id3Track)==null?void 0:r.cues;if(s)for(let i=s.length;i--;){const o=s[i];o.type===n&&o.startTime<e&&o.endTime===So&&(o.endTime=e)}}onBufferFlushing(e,{startOffset:n,endOffset:r,type:s}){const{id3Track:i,hls:o}=this;if(!o)return;const{config:{enableEmsgMetadataCues:a,enableID3MetadataCues:l}}=o;if(i&&(a||l)){let c;s==="audio"?c=u=>u.type===On.audioId3&&l:s==="video"?c=u=>u.type===On.emsg&&a:c=u=>u.type===On.audioId3&&l||u.type===On.emsg&&a,fu(i,n,r,c)}}onLevelUpdated(e,{details:n}){if(!this.media||!n.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:r,id3Track:s}=this,{dateRanges:i}=n,o=Object.keys(i);if(s){const u=Object.keys(r).filter(d=>!o.includes(d));for(let d=u.length;d--;){const f=u[d];Object.keys(r[f].cues).forEach(h=>{s.removeCue(r[f].cues[h])}),delete r[f]}}const a=n.fragments[n.fragments.length-1];if(o.length===0||!Re(a==null?void 0:a.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=a.programDateTime/1e3-a.start,c=hu();for(let u=0;u<o.length;u++){const d=o[u],f=i[d],h=r[d],p=(h==null?void 0:h.cues)||{};let g=(h==null?void 0:h.durationKnown)||!1;const v=Xl(f.startDate,l);let m=So;const y=f.endDate;if(y)m=Xl(y,l),g=!0;else if(f.endOnNext&&!g){const E=o.reduce((S,_)=>{const R=i[_];return R.class===f.class&&R.id!==_&&R.startDate>f.startDate&&S.push(R),S},[]).sort((S,_)=>S.startDate.getTime()-_.startDate.getTime())[0];E&&(m=Xl(E.startDate,l),g=!0)}const T=Object.keys(f.attr);for(let E=0;E<T.length;E++){const S=T[E];if(!TG(S))continue;let _=p[S];if(_)g&&!h.durationKnown&&(_.endTime=m);else{let R=f.attr[S];_=new c(v,m,""),EG(S)&&(R=fK(R)),_.value={key:S,data:R},_.type=On.dateRange,_.id=d,this.id3Track.addCue(_),p[S]=_}}r[d]={cues:p,dateRange:f,durationKnown:g}}}}class pK{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:n}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:n?e.liveMaxLatencyDurationCount*n.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:n,partHoldBack:r,targetduration:s}=e,{liveSyncDuration:i,liveSyncDurationCount:o,lowLatencyMode:a}=this.config,l=this.hls.userConfig;let c=a&&r||n;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=i!==void 0?i:o*s);const u=s,d=1;return c+Math.min(this.stallCount*d,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),n=this.targetLatency,r=this.levelDetails;if(e===null||n===null||r===null)return null;const s=r.edge,i=e-n-this.edgeStalled,o=s-r.totalduration,a=s-(this.config.lowLatencyMode&&r.partTarget||r.targetduration);return Math.min(Math.max(o,i),a)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const n=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-n,0)}get forwardBufferLength(){const{media:e,levelDetails:n}=this;if(!e||!n)return 0;const r=e.buffered.length;return(r?e.buffered.end(r-1):n.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(b.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(b.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(b.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(b.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:n}){this.levelDetails=n,n.advanced&&this.timeupdate(),!n.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,n){var r;n.details===K.BUFFER_STALLED_ERROR&&(this.stallCount++,(r=this.levelDetails)!=null&&r.live&&O.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:n}=this;if(!e||!n)return;this.currentTime=e.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:i}=this.config;if(!s||i===1)return;const o=this.targetLatency;if(o===null)return;const a=r-o,l=Math.min(this.maxLatency,o+n.targetduration),c=a<l;if(n.live&&c&&a>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,i)),d=Math.round(2/(1+Math.exp(-.75*a-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const pu=["NONE","TYPE-0","TYPE-1",null];var Ii={No:"",Yes:"YES",v2:"v2"};function gK(t,e){const{canSkipUntil:n,canSkipDateRanges:r,endSN:s}=t,i=e!==void 0?e-s:0;return n&&i<n?r?Ii.v2:Ii.Yes:Ii.No}class tg{constructor(e,n,r){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=n,this.skip=r}addDirectives(e){const n=new self.URL(e);return this.msn!==void 0&&n.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&n.searchParams.set("_HLS_part",this.part.toString()),this.skip&&n.searchParams.set("_HLS_skip",this.skip),n.href}}class Vi{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.unknownCodecs=void 0,this.audioGroupIds=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.textGroupIds=void 0,this.url=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.unknownCodecs=e.unknownCodecs,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>n).join(",").replace(/\.[^.,]+/g,"")}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get attrs(){return this._attrs[this._urlId]}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get uri(){return this.url[this._urlId]||""}get urlId(){return this._urlId}set urlId(e){const n=e%this.url.length;this._urlId!==n&&(this.fragmentError=0,this.loadError=0,this.details=void 0,this._urlId=n)}get audioGroupId(){var e;return(e=this.audioGroupIds)==null?void 0:e[this.urlId]}get textGroupId(){var e;return(e=this.textGroupIds)==null?void 0:e[this.urlId]}addFallback(e){this.url.push(e.url),this._attrs.push(e.attrs)}}function Ql(t,e){const n=e.startPTS;if(Re(n)){let r=0,s;e.sn>t.sn?(r=n-t.start,s=t):(r=t.start-n,s=e),s.duration!==r&&(s.duration=r)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.start=t.start+(t.minEndPTS-t.start):e.start=t.start+t.duration:e.start=Math.max(t.start-e.duration,0)}function v1(t,e,n,r,s,i){r-n<=0&&(O.warn("Fragment should have a positive duration",e),r=n+e.duration,i=s+e.duration);let o=n,a=r;const l=e.startPTS,c=e.endPTS;if(Re(l)){const g=Math.abs(l-n);Re(e.deltaPTS)?e.deltaPTS=Math.max(g,e.deltaPTS):e.deltaPTS=g,o=Math.max(n,l),n=Math.min(n,l),s=Math.min(s,e.startDTS),a=Math.min(r,c),r=Math.max(r,c),i=Math.max(i,e.endDTS)}const u=n-e.start;e.start!==0&&(e.start=n),e.duration=r-e.start,e.startPTS=n,e.maxStartPTS=o,e.startDTS=s,e.endPTS=r,e.minEndPTS=a,e.endDTS=i;const d=e.sn;if(!t||d<t.startSN||d>t.endSN)return 0;let f;const h=d-t.startSN,p=t.fragments;for(p[h]=e,f=h;f>0;f--)Ql(p[f],p[f-1]);for(f=h;f<p.length-1;f++)Ql(p[f],p[f+1]);return t.fragmentHint&&Ql(p[p.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,u}function mK(t,e){let n=null;const r=t.fragments;for(let l=r.length-1;l>=0;l--){const c=r[l].initSegment;if(c){n=c;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s=0,i;if(bK(t,e,(l,c)=>{l.relurl&&(s=l.cc-c.cc),Re(l.startPTS)&&Re(l.endPTS)&&(c.start=c.startPTS=l.startPTS,c.startDTS=l.startDTS,c.maxStartPTS=l.maxStartPTS,c.endPTS=l.endPTS,c.endDTS=l.endDTS,c.minEndPTS=l.minEndPTS,c.duration=l.endPTS-l.startPTS,c.duration&&(i=c),e.PTSKnown=e.alignedSliding=!0),c.elementaryStreams=l.elementaryStreams,c.loader=l.loader,c.stats=l.stats,c.urlId=l.urlId,l.initSegment&&(c.initSegment=l.initSegment,n=l.initSegment)}),n&&(e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments).forEach(l=>{var c;(!l.initSegment||l.initSegment.relurl===((c=n)==null?void 0:c.relurl))&&(l.initSegment=n)}),e.skippedSegments)if(e.deltaUpdateFailed=e.fragments.some(l=>!l),e.deltaUpdateFailed){O.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let l=e.skippedSegments;l--;)e.fragments.shift();e.startSN=e.fragments[0].sn,e.startCC=e.fragments[0].cc}else e.canSkipDateRanges&&(e.dateRanges=vK(t.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));const o=e.fragments;if(s){O.warn("discontinuity sliding from playlist, take drift into account");for(let l=0;l<o.length;l++)o[l].cc+=s}e.skippedSegments&&(e.startCC=e.fragments[0].cc),yK(t.partList,e.partList,(l,c)=>{c.elementaryStreams=l.elementaryStreams,c.stats=l.stats}),i?v1(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):y1(t,e),o.length&&(e.totalduration=e.edge-o[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const l=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=l),e.driftEndTime=a,e.driftEnd=l}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime}function vK(t,e,n){const r=Rt({},t);return n&&n.forEach(s=>{delete r[s]}),Object.keys(e).forEach(s=>{const i=new Zb(e[s].attr,r[s]);i.isValid?r[s]=i:O.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[s].attr)}"`)}),r}function yK(t,e,n){if(t&&e){let r=0;for(let s=0,i=t.length;s<=i;s++){const o=t[s],a=e[s+r];o&&a&&o.index===a.index&&o.fragment.sn===a.fragment.sn?n(o,a):r--}}}function bK(t,e,n){const r=e.skippedSegments,s=Math.max(t.startSN,e.startSN)-e.startSN,i=(t.fragmentHint?1:0)+(r?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,o=e.startSN-t.startSN,a=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let c=s;c<=i;c++){const u=l[o+c];let d=a[c];r&&!d&&c<r&&(d=e.fragments[c]=u),u&&d&&n(u,d)}}function y1(t,e){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments;n<0||n>=r.length||gu(e,r[n].start)}function gu(t,e){if(e){const n=t.fragments;for(let r=t.skippedSegments;r<n.length;r++)n[r].start+=e;t.fragmentHint&&(t.fragmentHint.start+=e)}}function TK(t,e=1/0){let n=1e3*t.targetduration;if(t.updated){const r=t.fragments,s=4;if(r.length&&n*s>e){const i=r[r.length-1].duration*1e3;i<n&&(n=i)}}else n/=2;return Math.round(n)}function EK(t,e,n){if(!(t!=null&&t.details))return null;const r=t.details;let s=r.fragments[e-r.startSN];return s||(s=r.fragmentHint,s&&s.sn===e)?s:e<r.startSN&&n&&n.sn===e?n:null}function ng(t,e,n){var r;return t!=null&&t.details?b1((r=t.details)==null?void 0:r.partList,e,n):null}function b1(t,e,n){if(t)for(let r=t.length;r--;){const s=t[r];if(s.index===n&&s.fragment.sn===e)return s}return null}function la(t){switch(t.details){case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_TIMEOUT:case K.LEVEL_LOAD_TIMEOUT:case K.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function rg(t,e){const n=la(e);return t.default[`${n?"timeout":"error"}Retry`]}function Ld(t,e){const n=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(n*t.retryDelayMs,t.maxRetryDelayMs)}function sg(t){return rn(rn({},t),{errorRetry:null,timeoutRetry:null})}function ca(t,e,n,r){return!!t&&e<t.maxNumRetry&&(SK(r)||!!n)}function SK(t){return t===0&&navigator.onLine===!1||!!t&&(t<400||t>499)}const T1={search:function(t,e){let n=0,r=t.length-1,s=null,i=null;for(;n<=r;){s=(n+r)/2|0,i=t[s];const o=e(i);if(o>0)n=s+1;else if(o<0)r=s-1;else return i}return null}};function _K(t,e,n){if(e===null||!Array.isArray(t)||!t.length||!Re(e))return null;const r=t[0].programDateTime;if(e<(r||0))return null;const s=t[t.length-1].endProgramDateTime;if(e>=(s||0))return null;n=n||0;for(let i=0;i<t.length;++i){const o=t[i];if(AK(e,n,o))return o}return null}function Hi(t,e,n=0,r=0){let s=null;if(t?s=e[t.sn-e[0].sn+1]||null:n===0&&e[0].start===0&&(s=e[0]),s&&mu(n,r,s)===0)return s;const i=T1.search(e,mu.bind(null,n,r));return i&&(i!==t||!s)?i:s}function mu(t=0,e=0,n){if(n.start<=t&&n.start+n.duration>t)return 0;const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0));return n.start+n.duration-r<=t?1:n.start-r>t&&n.start?-1:0}function AK(t,e,n){const r=Math.min(e,n.duration+(n.deltaPTS?n.deltaPTS:0))*1e3;return(n.endProgramDateTime||0)-r>t}function wK(t,e){return T1.search(t,n=>n.cc<e?1:n.cc>e?-1:0)}const LK=3e5;var Bt={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},En={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,SwitchToSDR:4};class IK{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=O.log.bind(O,"[info]:"),this.warn=O.warn.bind(O,"[warning]:"),this.error=O.error.bind(O,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(b.ERROR,this.onError,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(b.ERROR,this.onError,this),e.off(b.ERROR,this.onErrorOut,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){this.playlistError=0}stopLoad(){}getVariantLevelIndex(e){return(e==null?void 0:e.type)===Pe.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,n){var r,s;if(n.fatal)return;const i=this.hls,o=n.context;switch(n.details){case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:n.errorAction=this.getFragRetryOrSwitchAction(n);return;case K.FRAG_PARSING_ERROR:if((r=n.frag)!=null&&r.gap){n.errorAction={action:Bt.DoNothing,flags:En.None};return}case K.FRAG_GAP:case K.FRAG_DECRYPT_ERROR:{n.errorAction=this.getFragRetryOrSwitchAction(n),n.errorAction.action=Bt.SendAlternateToPenaltyBox;return}case K.LEVEL_EMPTY_ERROR:case K.LEVEL_PARSING_ERROR:{var a,l;const c=n.parent===Pe.MAIN?n.level:i.loadLevel;n.details===K.LEVEL_EMPTY_ERROR&&(a=n.context)!=null&&(l=a.levelDetails)!=null&&l.live?n.errorAction=this.getPlaylistRetryOrSwitchAction(n,c):(n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,c))}return;case K.LEVEL_LOAD_ERROR:case K.LEVEL_LOAD_TIMEOUT:typeof(o==null?void 0:o.level)=="number"&&(n.errorAction=this.getPlaylistRetryOrSwitchAction(n,o.level));return;case K.AUDIO_TRACK_LOAD_ERROR:case K.AUDIO_TRACK_LOAD_TIMEOUT:case K.SUBTITLE_LOAD_ERROR:case K.SUBTITLE_TRACK_LOAD_TIMEOUT:if(o){const c=i.levels[i.loadLevel];if(c&&(o.type===tt.AUDIO_TRACK&&o.groupId===c.audioGroupId||o.type===tt.SUBTITLE_TRACK&&o.groupId===c.textGroupId)){n.errorAction=this.getPlaylistRetryOrSwitchAction(n,i.loadLevel),n.errorAction.action=Bt.SendAlternateToPenaltyBox,n.errorAction.flags=En.MoveAllAlternatesMatchingHost;return}}return;case K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=i.levels[i.loadLevel],u=c==null?void 0:c.attrs["HDCP-LEVEL"];u&&(n.errorAction={action:Bt.SendAlternateToPenaltyBox,flags:En.MoveAllAlternatesMatchingHDCP,hdcpLevel:u})}return;case K.BUFFER_ADD_CODEC_ERROR:case K.REMUX_ALLOC_ERROR:n.errorAction=this.getLevelSwitchAction(n,(s=n.level)!=null?s:i.loadLevel);return;case K.INTERNAL_EXCEPTION:case K.BUFFER_APPENDING_ERROR:case K.BUFFER_APPEND_ERROR:case K.BUFFER_FULL_ERROR:case K.LEVEL_SWITCH_ERROR:case K.BUFFER_STALLED_ERROR:case K.BUFFER_SEEK_OVER_HOLE:case K.BUFFER_NUDGE_ON_STALL:n.errorAction={action:Bt.DoNothing,flags:En.None};return}if(n.type===De.KEY_SYSTEM_ERROR){const c=this.getVariantLevelIndex(n.frag);n.levelRetry=!1,n.errorAction=this.getLevelSwitchAction(n,c);return}}getPlaylistRetryOrSwitchAction(e,n){var r;const s=this.hls,i=rg(s.config.playlistLoadPolicy,e),o=this.playlistError++,a=(r=e.response)==null?void 0:r.code;if(ca(i,o,la(e),a))return{action:Bt.RetryRequest,flags:En.None,retryConfig:i,retryCount:o};const l=this.getLevelSwitchAction(e,n);return i&&(l.retryConfig=i,l.retryCount=o),l}getFragRetryOrSwitchAction(e){const n=this.hls,r=this.getVariantLevelIndex(e.frag),s=n.levels[r],{fragLoadPolicy:i,keyLoadPolicy:o}=n.config,a=rg(e.details.startsWith("key")?o:i,e),l=n.levels.reduce((d,f)=>d+f.fragmentError,0);if(s){var c;e.details!==K.FRAG_GAP&&s.fragmentError++;const d=(c=e.response)==null?void 0:c.code;if(ca(a,l,la(e),d))return{action:Bt.RetryRequest,flags:En.None,retryConfig:a,retryCount:l}}const u=this.getLevelSwitchAction(e,r);return a&&(u.retryConfig=a,u.retryCount=l),u}getLevelSwitchAction(e,n){const r=this.hls;n==null&&(n=r.loadLevel);const s=this.hls.levels[n];if(s&&(s.loadError++,r.autoLevelEnabled)){var i,o;let a=-1;const{levels:l,loadLevel:c,minAutoLevel:u,maxAutoLevel:d}=r,f=(i=e.frag)==null?void 0:i.type,{type:h,groupId:p}=(o=e.context)!=null?o:{};for(let g=l.length;g--;){const v=(g+c)%l.length;if(v!==c&&v>=u&&v<=d&&l[v].loadError===0){const m=l[v];if(e.details===K.FRAG_GAP&&e.frag){const y=l[v].details;if(y){const T=Hi(e.frag,y.fragments,e.frag.start);if(T!=null&&T.gap)continue}}else if(h===tt.AUDIO_TRACK&&p===m.audioGroupId||h===tt.SUBTITLE_TRACK&&p===m.textGroupId||f===Pe.AUDIO&&s.audioGroupId===m.audioGroupId||f===Pe.SUBTITLE&&s.textGroupId===m.textGroupId)continue;a=v;break}}if(a>-1&&r.loadLevel!==a)return e.levelRetry=!0,this.playlistError=0,{action:Bt.SendAlternateToPenaltyBox,flags:En.None,nextAutoLevel:a}}return{action:Bt.SendAlternateToPenaltyBox,flags:En.MoveAllAlternatesMatchingHost}}onErrorOut(e,n){var r;switch((r=n.errorAction)==null?void 0:r.action){case Bt.DoNothing:break;case Bt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(n),!n.errorAction.resolved&&n.details!==K.FRAG_GAP&&(n.fatal=!0);break}if(n.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const n=this.hls,r=e.errorAction;if(!r)return;const{flags:s,hdcpLevel:i,nextAutoLevel:o}=r;switch(s){case En.None:this.switchLevel(e,o);break;case En.MoveAllAlternatesMatchingHost:r.resolved||(r.resolved=this.redundantFailover(e));break;case En.MoveAllAlternatesMatchingHDCP:i&&(n.maxHdcpLevel=pu[pu.indexOf(i)-1],r.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${n.maxHdcpLevel}" or lower`);break}r.resolved||this.switchLevel(e,o)}switchLevel(e,n){n!==void 0&&e.errorAction&&(this.warn(`switching to level ${n} after ${e.details}`),this.hls.nextAutoLevel=n,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}redundantFailover(e){const{hls:n,penalizedRenditions:r}=this,s=e.parent===Pe.MAIN?e.level:n.loadLevel,i=n.levels[s],o=i.url.length,a=e.frag?e.frag.urlId:i.urlId;i.urlId===a&&(!e.frag||i.details)&&this.penalizeRendition(i,e);for(let l=1;l<o;l++){const c=(a+l)%o,u=r[c];if(!u||CK(u,e,r[a]))return this.warn(`Switching to Redundant Stream ${c+1}/${o}: "${i.url[c]}" after ${e.details}`),this.playlistError=0,n.levels.forEach(d=>{d.urlId=c}),n.nextLoadLevel=s,!0}return!1}penalizeRendition(e,n){const{penalizedRenditions:r}=this,s=r[e.urlId]||{lastErrorPerfMs:0,errors:[],details:void 0};s.lastErrorPerfMs=performance.now(),s.errors.push(n),s.details=e.details,r[e.urlId]=s}}function CK(t,e,n){if(performance.now()-t.lastErrorPerfMs>LK)return!0;const r=t.details;if(e.details===K.FRAG_GAP&&r&&e.frag){const s=e.frag.start,i=Hi(null,r.fragments,s);if(i&&!i.gap)return!0}if(n&&t.errors.length<n.errors.length){const s=t.errors[t.errors.length-1];if(r&&s.frag&&e.frag&&Math.abs(s.frag.start-e.frag.start)>r.targetduration*3)return!0}return!1}class Id{constructor(e,n){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=O.log.bind(O,`${n}:`),this.warn=O.warn.bind(O,`${n}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){clearTimeout(this.timer),this.timer=-1}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,n){const r=n==null?void 0:n.renditionReports;if(r){let s=-1;for(let i=0;i<r.length;i++){const o=r[i];let a;try{a=new self.URL(o.URI,n.url).href}catch(l){O.warn(`Could not construct new URL for Rendition Report: ${l}`),a=o.URI||""}if(a===e){s=i;break}else a===e.substring(0,a.length)&&(s=i)}if(s!==-1){const i=r[s],o=parseInt(i["LAST-MSN"])||(n==null?void 0:n.lastPartSn);let a=parseInt(i["LAST-PART"])||(n==null?void 0:n.lastPartIndex);if(this.hls.config.lowLatencyMode){const l=Math.min(n.age-n.partTarget,n.targetduration);a>=0&&l>n.partTarget&&(a+=1)}return new tg(o,a>=0?a:void 0,Ii.No)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,n,r){const{details:s,stats:i}=n,o=self.performance.now(),a=i.loading.first?Math.max(0,o-i.loading.first):0;if(s.advancedDateTime=Date.now()-a,s.live||r!=null&&r.live){if(s.reloaded(r),r&&this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),r&&s.fragments.length>0&&mK(r,s),!this.canLoad||!s.live)return;let l,c,u;if(s.canBlockReload&&s.endSN&&s.advanced){const v=this.hls.config.lowLatencyMode,m=s.lastPartSn,y=s.endSN,T=s.lastPartIndex,E=T!==-1,S=m===y,_=v?0:T;E?(c=S?y+1:m,u=S?_:T+1):c=y+1;const R=s.age,k=R+s.ageHeader;let P=Math.min(k-s.partTarget,s.targetduration*1.5);if(P>0){if(r&&P>r.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${r.tuneInGoal} to: ${P} with playlist age: ${s.age}`),P=0;else{const $=Math.floor(P/s.targetduration);if(c+=$,u!==void 0){const N=Math.round(P%s.targetduration/s.partTarget);u+=N}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${R.toFixed(2)}s goal: ${P} skip sn ${$} to part ${u}`)}s.tuneInGoal=P}if(l=this.getDeliveryDirectives(s,n.deliveryDirectives,c,u),v||!S){this.loadPlaylist(l);return}}else(s.canBlockReload||s.canSkipUntil)&&(l=this.getDeliveryDirectives(s,n.deliveryDirectives,c,u));const d=this.hls.mainForwardBufferInfo,f=d?d.end-d.len:0,h=(s.edge-f)*1e3,p=TK(s,h);s.updated&&o>this.requestScheduled+p&&(this.requestScheduled=i.loading.start),c!==void 0&&s.canBlockReload?this.requestScheduled=i.loading.first+p-(s.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+p<o?this.requestScheduled=o:this.requestScheduled-o<=0&&(this.requestScheduled+=p);let g=this.requestScheduled-o;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,n,r,s){let i=gK(e,r);return n!=null&&n.skip&&e.deltaUpdateFailed&&(r=n.msn,s=n.part,i=Ii.No),new tg(r,s,i)}checkRetry(e){const n=e.details,r=la(e),s=e.errorAction,{action:i,retryCount:o=0,retryConfig:a}=s||{},l=!!s&&!!a&&(i===Bt.RetryRequest||!s.resolved&&i===Bt.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,o>=a.maxNumRetry)return!1;if(r&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" without delivery-directives`),this.loadPlaylist();else{const u=Ld(a,o);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${o+1}/${a.maxNumRetry} after "${n}" in ${u}ms`)}e.levelRetry=!0,s.resolved=!0}return l}}let Jl;class RK extends Id{constructor(e,n){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=n,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(b.FRAG_LOADED,this.onFragLoaded,this),e.on(b.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(b.FRAG_LOADED,this.onFragLoaded,this),e.off(b.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}startLoad(){this._levels.forEach(e=>{e.loadError=0,e.fragmentError=0}),super.startLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[]}onManifestLoading(e,n){this.resetLevels()}onManifestLoaded(e,n){const r=[],s={};let i;n.levels.forEach(o=>{var a;const l=o.attrs;((a=o.audioCodec)==null?void 0:a.indexOf("mp4a.40.34"))!==-1&&(Jl||(Jl=/chrome|firefox/i.test(navigator.userAgent)),Jl&&(o.audioCodec=void 0));const{AUDIO:c,CODECS:u,"FRAME-RATE":d,"PATHWAY-ID":f,RESOLUTION:h,SUBTITLES:p}=l,g=`${`${f||"."}-`}${o.bitrate}-${h}-${d}-${u}`;i=s[g],i?i.addFallback(o):(i=new Vi(o),s[g]=i,r.push(i)),ua(i,"audio",c),ua(i,"text",p)}),this.filterAndSortMediaOptions(r,n)}filterAndSortMediaOptions(e,n){let r=[],s=[],i=!1,o=!1,a=!1,l=e.filter(({audioCodec:h,videoCodec:p,width:g,height:v,unknownCodecs:m})=>(i||(i=!!(g&&v)),o||(o=!!p),a||(a=!!h),!(m!=null&&m.length)&&(!h||Wl(h,"audio"))&&(!p||Wl(p,"video"))));if((i||o)&&a&&(l=l.filter(({videoCodec:h,width:p,height:g})=>!!h||!!(p&&g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){const h=new Error("no level with compatible codecs found in manifest");this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:n.url,error:h,reason:h.message})}});return}n.audioTracks&&(r=n.audioTracks.filter(h=>!h.audioCodec||Wl(h.audioCodec,"audio")),ig(r)),n.subtitles&&(s=n.subtitles,ig(s));const c=l.slice(0);l.sort((h,p)=>h.attrs["HDCP-LEVEL"]!==p.attrs["HDCP-LEVEL"]?(h.attrs["HDCP-LEVEL"]||"")>(p.attrs["HDCP-LEVEL"]||"")?1:-1:h.bitrate!==p.bitrate?h.bitrate-p.bitrate:h.attrs["FRAME-RATE"]!==p.attrs["FRAME-RATE"]?h.attrs.decimalFloatingPoint("FRAME-RATE")-p.attrs.decimalFloatingPoint("FRAME-RATE"):h.attrs.SCORE!==p.attrs.SCORE?h.attrs.decimalFloatingPoint("SCORE")-p.attrs.decimalFloatingPoint("SCORE"):i&&h.height!==p.height?h.height-p.height:0);let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let h=0;h<c.length;h++)if(c[h].pathwayId===l[0].pathwayId){u=c[h];break}}this._levels=l;for(let h=0;h<l.length;h++)if(l[h]===u){this._firstLevel=h,this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${u.bitrate}`);break}const d=a&&!o,f={levels:l,audioTracks:r,subtitleTracks:s,sessionData:n.sessionData,sessionKeys:n.sessionKeys,firstLevel:this._firstLevel,stats:n.stats,audio:a,video:o,altAudio:!d&&r.some(h=>!!h.url)};this.hls.trigger(b.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const n=this._levels;if(n.length===0)return;if(e<0||e>=n.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(b.ERROR,{type:De.OTHER_ERROR,details:K.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,n.length-1)}const r=this.currentLevelIndex,s=this.currentLevel,i=s?s.attrs["PATHWAY-ID"]:void 0,o=n[e],a=o.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=o,r===e&&o.details&&s&&i===a)return;this.log(`Switching to level ${e}${a?" with Pathway "+a:""} from level ${r}${i?" with Pathway "+i:""}`);const l=Rt({},o,{level:e,maxBitrate:o.maxBitrate,attrs:o.attrs,uri:o.uri,urlId:o.urlId});delete l._attrs,delete l._urlId,this.hls.trigger(b.LEVEL_SWITCHING,l);const c=o.details;if(!c||c.live){const u=this.switchParams(o.uri,s==null?void 0:s.details);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this._firstLevel}else return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,n){n.fatal||!n.context||n.context.type===tt.LEVEL&&n.context.level===this.level&&this.checkRetry(n)}onFragLoaded(e,{frag:n}){if(n!==void 0&&n.type===Pe.MAIN){const r=this._levels[n.level];r!==void 0&&(r.loadError=0)}}onLevelLoaded(e,n){var r;const{level:s,details:i}=n,o=this._levels[s];if(!o){var a;this.warn(`Invalid level index ${s}`),(a=n.deliveryDirectives)!=null&&a.skip&&(i.deltaUpdateFailed=!0);return}s===this.currentLevelIndex?(o.fragmentError===0&&(o.loadError=0),this.playlistLoaded(s,n,o.details)):(r=n.deliveryDirectives)!=null&&r.skip&&(i.deltaUpdateFailed=!0)}onAudioTrackSwitched(e,n){const r=this.currentLevel;if(!r)return;const s=this.hls.audioTracks[n.id].groupId;if(r.audioGroupIds&&r.audioGroupId!==s){let i=-1;for(let o=0;o<r.audioGroupIds.length;o++)if(r.audioGroupIds[o]===s){i=o;break}i!==-1&&i!==r.urlId&&(r.urlId=i,this.canLoad&&this.startLoad())}}loadPlaylist(e){super.loadPlaylist();const n=this.currentLevelIndex,r=this.currentLevel;if(r&&this.shouldLoadPlaylist(r)){const s=r.urlId;let i=r.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const o=r.attrs["PATHWAY-ID"];this.log(`Loading level index ${n}${(e==null?void 0:e.msn)!==void 0?" at sn "+e.msn+" part "+e.part:""} with${o?" Pathway "+o:""} URI ${s+1}/${r.url.length} ${i}`),this.clearTimer(),this.hls.trigger(b.LEVEL_LOADING,{url:i,level:n,id:s,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e,n){const r=(i,o)=>o!==n,s=this._levels.filter((i,o)=>o!==e?!0:i.url.length>1&&n!==void 0?(i.url=i.url.filter(r),i.audioGroupIds&&(i.audioGroupIds=i.audioGroupIds.filter(r)),i.textGroupIds&&(i.textGroupIds=i.textGroupIds.filter(r)),i.urlId=0,!0):(this.steering&&this.steering.removeLevel(i),!1));this.hls.trigger(b.LEVELS_UPDATED,{levels:s})}onLevelsUpdated(e,{levels:n}){n.forEach((r,s)=>{const{details:i}=r;i!=null&&i.fragments&&i.fragments.forEach(o=>{o.level=s})}),this._levels=n}}function ua(t,e,n){n&&(e==="audio"?(t.audioGroupIds||(t.audioGroupIds=[]),t.audioGroupIds[t.url.length-1]=n):e==="text"&&(t.textGroupIds||(t.textGroupIds=[]),t.textGroupIds[t.url.length-1]=n))}function ig(t){const e={};t.forEach(n=>{const r=n.groupId||"";n.id=e[r]=e[r]||0,e[r]++})}var $t={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class $K{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(b.BUFFER_APPENDED,this.onBufferAppended,this),e.on(b.FRAG_BUFFERED,this.onFragBuffered,this),e.on(b.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.BUFFER_APPENDED,this.onBufferAppended,this),e.off(b.FRAG_BUFFERED,this.onFragBuffered,this),e.off(b.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,n){const r=this.activePartLists[n];if(r)for(let s=r.length;s--;){const i=r[s];if(!i)break;const o=i.end;if(i.start<=e&&o!==null&&e<=o)return i}return this.getBufferedFrag(e,n)}getBufferedFrag(e,n){const{fragments:r}=this,s=Object.keys(r);for(let i=s.length;i--;){const o=r[s[i]];if((o==null?void 0:o.body.type)===n&&o.buffered){const a=o.body;if(a.start<=e&&e<=a.end)return a}}return null}detectEvictedFragments(e,n,r,s){this.timeRanges&&(this.timeRanges[e]=n);const i=(s==null?void 0:s.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a||i>=a.body.sn)return;if(!a.buffered&&!a.loaded){a.body.type===r&&this.removeFragment(a.body);return}const l=a.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,n);return u&&this.removeFragment(a.body),u})})}detectPartialFragments(e){const n=this.timeRanges,{frag:r,part:s}=e;if(!n||r.sn==="initSegment")return;const i=ys(r),o=this.fragments[i];if(!o||o.buffered&&r.gap)return;const a=!r.relurl;Object.keys(n).forEach(l=>{const c=r.elementaryStreams[l];if(!c)return;const u=n[l],d=a||c.partial===!0;o.range[l]=this.getBufferedTimes(r,s,d,u)}),o.loaded=null,Object.keys(o.range).length?(o.buffered=!0,(o.body.endList=r.endList||o.body.endList)&&(this.endListFragments[o.body.type]=o),_o(o)||this.removeParts(r.sn-1,r.type)):this.removeFragment(o.body)}removeParts(e,n){const r=this.activePartLists[n];r&&(this.activePartLists[n]=r.filter(s=>s.fragment.sn>=e))}fragBuffered(e,n){const r=ys(e);let s=this.fragments[r];!s&&n&&(s=this.fragments[r]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,s.buffered=!0)}getBufferedTimes(e,n,r,s){const i={time:[],partial:r},o=e.start,a=e.end,l=e.minEndPTS||a,c=e.maxStartPTS||o;for(let u=0;u<s.length;u++){const d=s.start(u)-this.bufferPadding,f=s.end(u)+this.bufferPadding;if(c>=d&&l<=f){i.time.push({startPTS:Math.max(o,s.start(u)),endPTS:Math.min(a,s.end(u))});break}else if(o<f&&a>d)i.partial=!0,i.time.push({startPTS:Math.max(o,s.start(u)),endPTS:Math.min(a,s.end(u))});else if(a<=d)break}return i}getPartialFragment(e){let n=null,r,s,i,o=0;const{bufferPadding:a,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&_o(u)&&(s=u.body.start-a,i=u.body.end+a,e>=s&&e<=i&&(r=Math.min(e-s,i-e),o<=r&&(n=u.body,o=r)))}),n}isEndListAppended(e){const n=this.endListFragments[e];return n!==void 0&&(n.buffered||_o(n))}getState(e){const n=ys(e),r=this.fragments[n];return r?r.buffered?_o(r)?$t.PARTIAL:$t.OK:$t.APPENDING:$t.NOT_LOADED}isTimeBuffered(e,n,r){let s,i;for(let o=0;o<r.length;o++){if(s=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=s&&n<=i)return!0;if(n<=s)return!1}return!1}onFragLoaded(e,n){const{frag:r,part:s}=n;if(r.sn==="initSegment"||r.bitrateTest)return;const i=s?null:n,o=ys(r);this.fragments[o]={body:r,appendedPTS:null,loaded:i,buffered:!1,range:Object.create(null)}}onBufferAppended(e,n){const{frag:r,part:s,timeRanges:i}=n;if(r.sn==="initSegment")return;const o=r.type;if(s){let a=this.activePartLists[o];a||(this.activePartLists[o]=a=[]),a.push(s)}this.timeRanges=i,Object.keys(i).forEach(a=>{const l=i[a];this.detectEvictedFragments(a,l,o,s)})}onFragBuffered(e,n){this.detectPartialFragments(n)}hasFragment(e){const n=ys(e);return!!this.fragments[n]}hasParts(e){var n;return!!((n=this.activePartLists[e])!=null&&n.length)}removeFragmentsInRange(e,n,r,s,i){s&&!this.hasGaps||Object.keys(this.fragments).forEach(o=>{const a=this.fragments[o];if(!a)return;const l=a.body;l.type!==r||s&&!l.gap||l.start<n&&l.end>e&&(a.buffered||i)&&this.removeFragment(l)})}removeFragment(e){const n=ys(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const r=this.activePartLists[e.type];if(r){const s=e.sn;this.activePartLists[e.type]=r.filter(i=>i.fragment.sn!==s)}delete this.fragments[n],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function _o(t){var e,n,r;return t.buffered&&(t.body.gap||((e=t.range.video)==null?void 0:e.partial)||((n=t.range.audio)==null?void 0:n.partial)||((r=t.range.audiovideo)==null?void 0:r.partial))}function ys(t){return`${t.type}_${t.level}_${t.urlId}_${t.sn}`}const og=Math.pow(2,17);class kK{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,n){const r=e.url;if(!r)return Promise.reject(new or({type:De.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${r?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(h=>h[0]==="GAP")){l(lg(e));return}else e.gap=!1;const c=this.loader=e.loader=i?new i(s):new o(s),u=ag(e),d=sg(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:og};e.stats=c.stats,c.load(u,f,{onSuccess:(h,p,g,v)=>{this.resetLoader(e,c);let m=h.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(m.slice(0,16)),m=m.slice(16)),a({frag:e,part:null,payload:m,networkDetails:v})},onError:(h,p,g,v)=>{this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:rn({url:r,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:v}))},onAbort:(h,p,g)=>{this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))},onProgress:(h,p,g,v)=>{n&&n({frag:e,part:null,payload:g,networkDetails:v})}})})}loadPart(e,n,r){this.abort();const s=this.config,i=s.fLoader,o=s.loader;return new Promise((a,l)=>{if(this.loader&&this.loader.destroy(),e.gap||n.gap){l(lg(e,n));return}const c=this.loader=e.loader=i?new i(s):new o(s),u=ag(e,n),d=sg(s.fragLoadPolicy.default),f={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:og};n.stats=c.stats,c.load(u,f,{onSuccess:(h,p,g,v)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,n);const m={frag:e,part:n,payload:h.data,networkDetails:v};r(m),a(m)},onError:(h,p,g,v)=>{this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:n,response:rn({url:u.url,data:void 0},h),error:new Error(`HTTP Error ${h.code} ${h.text}`),networkDetails:g,stats:v}))},onAbort:(h,p,g)=>{e.stats.aborted=n.stats.aborted,this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.INTERNAL_ABORTED,fatal:!1,frag:e,part:n,error:new Error("Aborted"),networkDetails:g,stats:h}))},onTimeout:(h,p,g)=>{this.resetLoader(e,c),l(new or({type:De.NETWORK_ERROR,details:K.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:n,error:new Error(`Timeout after ${f.timeout}ms`),networkDetails:g,stats:h}))}})})}updateStatsFromPart(e,n){const r=e.stats,s=n.stats,i=s.total;if(r.loaded+=s.loaded,i){const l=Math.round(e.duration/n.duration),c=Math.min(Math.round(r.loaded/i),l),u=(l-c)*Math.round(r.loaded/c);r.total=r.loaded+u}else r.total=Math.max(r.loaded,r.total);const o=r.loading,a=s.loading;o.start?o.first+=a.first-a.start:(o.start=a.start,o.first=a.first),o.end=a.end}resetLoader(e,n){e.loader=null,this.loader===n&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),n.destroy()}}function ag(t,e=null){const n=e||t,r={frag:t,part:e,responseType:"arraybuffer",url:n.url,headers:{},rangeStart:0,rangeEnd:0},s=n.byteRangeStartOffset,i=n.byteRangeEndOffset;if(Re(s)&&Re(i)){var o;let a=s,l=i;if(t.sn==="initSegment"&&((o=t.decryptdata)==null?void 0:o.method)==="AES-128"){const c=i-s;c%16&&(l=i+(16-c%16)),s!==0&&(r.resetIV=!0,a=s-16)}r.rangeStart=a,r.rangeEnd=l}return r}function lg(t,e){const n=new Error(`GAP ${t.gap?"tag":"attribute"} found`),r={type:De.MEDIA_ERROR,details:K.FRAG_GAP,fatal:!1,frag:t,error:n,networkDetails:null};return e&&(r.part=e),(e||t).stats.aborted=!0,new or(r)}class or extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class DK{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const r=this.keyUriToKeyInfo[n].loader;if(r){if(e&&e!==r.context.frag.type)return;r.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e];(n.mediaKeySessionContext||n.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const n=this.keyUriToKeyInfo[e].loader;n&&n.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,n=K.KEY_LOAD_ERROR,r,s,i){return new or({type:De.NETWORK_ERROR,details:n,fatal:!1,frag:e,response:i,error:r,networkDetails:s})}loadClear(e,n){if(this.emeController&&this.config.emeEnabled){const{sn:r,cc:s}=e;for(let i=0;i<n.length;i++){const o=n[i];if(s<=o.cc&&(r==="initSegment"||o.sn==="initSegment"||r<o.sn)){this.emeController.selectKeySystemFormat(o).then(a=>{o.setKeyFormat(a)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController?this.emeController.selectKeySystemFormat(e).then(n=>this.loadInternal(e,n)):this.loadInternal(e)}loadInternal(e,n){var r,s;n&&e.setKeyFormat(n);const i=e.decryptdata;if(!i){const c=new Error(n?`Expected frag.decryptdata to be defined after setting format ${n}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,c))}const o=i.uri;if(!o)return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${o}"`)));let a=this.keyUriToKeyInfo[o];if((r=a)!=null&&r.decryptdata.key)return i.key=a.decryptdata.key,Promise.resolve({frag:e,keyInfo:a});if((s=a)!=null&&s.keyLoadPromise){var l;switch((l=a.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return a.keyLoadPromise.then(c=>(i.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:a}))}}switch(a=this.keyUriToKeyInfo[o]={decryptdata:i,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},i.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return i.keyFormat==="identity"?this.loadKeyHTTP(a,e):this.loadKeyEME(a,e);case"AES-128":return this.loadKeyHTTP(a,e);default:return Promise.reject(this.createKeyLoadError(e,K.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${i.method}"`)))}}loadKeyEME(e,n){const r={frag:n,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const s=this.emeController.loadKey(r);if(s)return(e.keyLoadPromise=s.then(i=>(e.mediaKeySessionContext=i,r))).catch(i=>{throw e.keyLoadPromise=null,i})}return Promise.resolve(r)}loadKeyHTTP(e,n){const r=this.config,s=r.loader,i=new s(r);return n.keyLoader=e.loader=i,e.keyLoadPromise=new Promise((o,a)=>{const l={keyInfo:e,frag:n,responseType:"arraybuffer",url:e.decryptdata.uri},c=r.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{const{frag:v,keyInfo:m,url:y}=p;if(!v.decryptdata||m!==this.keyUriToKeyInfo[y])return a(this.createKeyLoadError(v,K.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));m.decryptdata.key=v.decryptdata.key=new Uint8Array(f.data),v.keyLoader=null,m.loader=null,o({frag:v,keyInfo:m})},onError:(f,h,p,g)=>{this.resetLoader(h),a(this.createKeyLoadError(n,K.KEY_LOAD_ERROR,new Error(`HTTP Error ${f.code} loading key ${f.text}`),p,rn({url:l.url,data:void 0},f)))},onTimeout:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,K.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),p))},onAbort:(f,h,p)=>{this.resetLoader(h),a(this.createKeyLoadError(n,K.INTERNAL_ABORTED,new Error("key loading aborted"),p))}};i.load(l,u,d)})}resetLoader(e){const{frag:n,keyInfo:r,url:s}=e,i=r.loader;n.keyLoader===i&&(n.keyLoader=null,r.loader=null),delete this.keyUriToKeyInfo[s],i&&i.destroy()}}class PK{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}const OK={length:0,start:()=>0,end:()=>0};class ht{static isBuffered(e,n){try{if(e){const r=ht.getBuffered(e);for(let s=0;s<r.length;s++)if(n>=r.start(s)&&n<=r.end(s))return!0}}catch{}return!1}static bufferInfo(e,n,r){try{if(e){const s=ht.getBuffered(e),i=[];let o;for(o=0;o<s.length;o++)i.push({start:s.start(o),end:s.end(o)});return this.bufferedInfo(i,n,r)}}catch{}return{len:0,start:n,end:n,nextStart:void 0}}static bufferedInfo(e,n,r){n=Math.max(0,n),e.sort(function(c,u){return c.start-u.start||u.end-c.end});let s=[];if(r)for(let c=0;c<e.length;c++){const u=s.length;if(u){const d=s[u-1].end;e[c].start-d<r?e[c].end>d&&(s[u-1].end=e[c].end):s.push(e[c])}else s.push(e[c])}else s=e;let i=0,o,a=n,l=n;for(let c=0;c<s.length;c++){const u=s[c].start,d=s[c].end;if(n+r>=u&&n<d)a=u,l=d,i=l-n;else if(n+r<u){o=u;break}}return{len:i,start:a||0,end:l||0,nextStart:o}}static getBuffered(e){try{return e.buffered}catch(n){return O.log("failed to get media.buffered",n),OK}}}class Cd{constructor(e,n,r,s=0,i=-1,o=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Ao(),this.buffering={audio:Ao(),video:Ao(),audiovideo:Ao()},this.level=e,this.sn=n,this.id=r,this.size=s,this.part=i,this.partial=o}}function Ao(){return{start:0,executeStart:0,executeEnd:0,end:0}}function E1(t,e){let n=null;for(let r=0,s=t.length;r<s;r++){const i=t[r];if(i&&i.cc===e){n=i;break}}return n}function MK(t,e,n){return!!(e.details&&(n.endCC>n.startCC||t&&t.cc<n.startCC))}function xK(t,e,n=0){const r=t.fragments,s=e.fragments;if(!s.length||!r.length){O.log("No fragments to align");return}const i=E1(r,s[0].cc);if(!i||i&&!i.startPTS){O.log("No frag in previous level to align on");return}return i}function cg(t,e){if(t){const n=t.start+e;t.start=t.startPTS=n,t.endPTS=n+t.duration}}function Rd(t,e){const n=e.fragments;for(let r=0,s=n.length;r<s;r++)cg(n[r],t);e.fragmentHint&&cg(e.fragmentHint,t),e.alignedSliding=!0}function FK(t,e,n){e&&(NK(t,n,e),!n.alignedSliding&&e.details&&BK(n,e.details),!n.alignedSliding&&e.details&&!n.skippedSegments&&y1(e.details,n))}function NK(t,e,n){if(MK(t,n,e)){const r=xK(n.details,e);r&&Re(r.start)&&(O.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),Rd(r.start,e))}}function BK(t,e){if(!e.fragments.length||!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=e.fragments[0].programDateTime,r=t.fragments[0].programDateTime,s=(r-n)/1e3+e.fragments[0].start;s&&Re(s)&&(O.log(`Adjusting PTS using programDateTime delta ${r-n}ms, sliding:${s.toFixed(3)} ${t.url} `),Rd(s,t))}function S1(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const n=t.fragments,r=e.fragments;if(!n.length||!r.length)return;const s=Math.round(r.length/2)-1,i=r[s],o=E1(n,i.cc)||n[Math.round(n.length/2)-1],a=i.programDateTime,l=o.programDateTime;if(a===null||l===null)return;const c=(l-a)/1e3-(o.start-i.start);Rd(c,t)}class UK{constructor(e,n){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=n}decrypt(e,n){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},n,e)}}class VK{constructor(e,n){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=n}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function HK(t){const e=t.byteLength,n=e&&new DataView(t.buffer).getUint8(e-1);return n?ns(t,0,e-n):t}class GK{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const n=new DataView(e),r=new Uint32Array(4);for(let s=0;s<4;s++)r[s]=n.getUint32(s*4);return r}initTable(){const e=this.sBox,n=this.invSBox,r=this.subMix,s=r[0],i=r[1],o=r[2],a=r[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],f=l[3],h=new Uint32Array(256);let p=0,g=0,v=0;for(v=0;v<256;v++)v<128?h[v]=v<<1:h[v]=v<<1^283;for(v=0;v<256;v++){let m=g^g<<1^g<<2^g<<3^g<<4;m=m>>>8^m&255^99,e[p]=m,n[m]=p;const y=h[p],T=h[y],E=h[T];let S=h[m]*257^m*16843008;s[p]=S<<24|S>>>8,i[p]=S<<16|S>>>16,o[p]=S<<8|S>>>24,a[p]=S,S=E*16843009^T*65537^y*257^p*16843008,c[m]=S<<24|S>>>8,u[m]=S<<16|S>>>16,d[m]=S<<8|S>>>24,f[m]=S,p?(p=y^h[h[h[E^y]]],g^=h[h[g]]):p=g=1}}expandKey(e){const n=this.uint8ArrayToUint32Array_(e);let r=!0,s=0;for(;s<n.length&&r;)r=n[s]===this.key[s],s++;if(r)return;this.key=n;const i=this.keySize=n.length;if(i!==4&&i!==6&&i!==8)throw new Error("Invalid aes key size="+i);const o=this.ksRows=(i+6+1)*4;let a,l;const c=this.keySchedule=new Uint32Array(o),u=this.invKeySchedule=new Uint32Array(o),d=this.sBox,f=this.rcon,h=this.invSubMix,p=h[0],g=h[1],v=h[2],m=h[3];let y,T;for(a=0;a<o;a++){if(a<i){y=c[a]=n[a];continue}T=y,a%i===0?(T=T<<8|T>>>24,T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255],T^=f[a/i|0]<<24):i>6&&a%i===4&&(T=d[T>>>24]<<24|d[T>>>16&255]<<16|d[T>>>8&255]<<8|d[T&255]),c[a]=y=(c[a-i]^T)>>>0}for(l=0;l<o;l++)a=o-l,l&3?T=c[a]:T=c[a-4],l<4||a<=4?u[l]=T:u[l]=p[d[T>>>24]]^g[d[T>>>16&255]]^v[d[T>>>8&255]]^m[d[T&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,n,r){const s=this.keySize+6,i=this.invKeySchedule,o=this.invSBox,a=this.invSubMix,l=a[0],c=a[1],u=a[2],d=a[3],f=this.uint8ArrayToUint32Array_(r);let h=f[0],p=f[1],g=f[2],v=f[3];const m=new Int32Array(e),y=new Int32Array(m.length);let T,E,S,_,R,k,P,$,N,w,U,z,ne,oe;const W=this.networkToHostOrderSwap;for(;n<m.length;){for(N=W(m[n]),w=W(m[n+1]),U=W(m[n+2]),z=W(m[n+3]),R=N^i[0],k=z^i[1],P=U^i[2],$=w^i[3],ne=4,oe=1;oe<s;oe++)T=l[R>>>24]^c[k>>16&255]^u[P>>8&255]^d[$&255]^i[ne],E=l[k>>>24]^c[P>>16&255]^u[$>>8&255]^d[R&255]^i[ne+1],S=l[P>>>24]^c[$>>16&255]^u[R>>8&255]^d[k&255]^i[ne+2],_=l[$>>>24]^c[R>>16&255]^u[k>>8&255]^d[P&255]^i[ne+3],R=T,k=E,P=S,$=_,ne=ne+4;T=o[R>>>24]<<24^o[k>>16&255]<<16^o[P>>8&255]<<8^o[$&255]^i[ne],E=o[k>>>24]<<24^o[P>>16&255]<<16^o[$>>8&255]<<8^o[R&255]^i[ne+1],S=o[P>>>24]<<24^o[$>>16&255]<<16^o[R>>8&255]<<8^o[k&255]^i[ne+2],_=o[$>>>24]<<24^o[R>>16&255]<<16^o[k>>8&255]<<8^o[P&255]^i[ne+3],y[n]=W(T^h),y[n+1]=W(_^p),y[n+2]=W(S^g),y[n+3]=W(E^v),h=N,p=w,g=U,v=z,n=n+4}return y.buffer}}const KK=16;class $d{constructor(e,{removePKCS7Padding:n=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=n,n)try{const r=self.crypto;r&&(this.subtle=r.subtle||r.webkitSubtle)}catch{}this.subtle===null&&(this.useSoftware=!0)}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:n}=this;if(!e||n)return this.reset(),null;const r=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?HK(r):r}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,n,r){return this.useSoftware?new Promise((s,i)=>{this.softwareDecrypt(new Uint8Array(e),n,r);const o=this.flush();o?s(o.buffer):i(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),n,r)}softwareDecrypt(e,n,r){const{currentIV:s,currentResult:i,remainderData:o}=this;this.logOnce("JS AES decrypt"),o&&(e=is(o,e),this.remainderData=null);const a=this.getValidChunk(e);if(!a.length)return null;s&&(r=s);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new GK),l.expandKey(n);const c=i;return this.currentResult=l.decrypt(a.buffer,0,r),this.currentIV=ns(a,-16).buffer,c||null}webCryptoDecrypt(e,n,r){const s=this.subtle;return(this.key!==n||!this.fastAesKey)&&(this.key=n,this.fastAesKey=new VK(s,n)),this.fastAesKey.expandKey().then(i=>s?(this.logOnce("WebCrypto AES decrypt"),new UK(s,new Uint8Array(r)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(O.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,n,r)))}onWebCryptoError(e,n,r){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,n,r);const s=this.flush();if(s)return s.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let n=e;const r=e.length-e.length%KK;return r!==e.length&&(n=ns(e,0,r),this.remainderData=ns(e,r)),n}logOnce(e){this.logEnabled&&(O.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const qK={toString:function(t){let e="";const n=t.length;for(let r=0;r<n;r++)e+=`[${t.start(r).toFixed(3)}-${t.end(r).toFixed(3)}]`;return e}},ee={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class kd extends PK{constructor(e,n,r,s,i){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=ee.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=i,this.logPrefix=s,this.log=O.log.bind(O,`${s}:`),this.warn=O.warn.bind(O,`${s}:`),this.hls=e,this.fragmentLoader=new kK(e.config),this.keyLoader=r,this.fragmentTracker=n,this.config=e.config,this.decrypter=new $d(e.config),e.on(b.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ee.STOPPED}_streamEnded(e,n){if(n.live||e.nextStart||!e.end||!this.media)return!1;const r=n.partList;if(r!=null&&r.length){const i=r[r.length-1];return ht.isBuffered(this.media,i.start+i.duration/2)}const s=n.fragments[n.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(s)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levels[this.levelLastLoaded])==null?void 0:e.details}}onMediaAttached(e,n){const r=this.media=this.mediaBuffer=n.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),r.addEventListener("seeking",this.onvseeking),r.addEventListener("ended",this.onvended);const s=this.config;this.levels&&s.autoStartLoad&&this.state===ee.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:n,media:r,mediaBuffer:s,state:i}=this,o=r?r.currentTime:0,a=ht.bufferInfo(s||r,o,e.maxBufferHole);if(this.log(`media seeking to ${Re(o)?o.toFixed(3):o}, state: ${i}`),this.state===ee.ENDED)this.resetLoadingState();else if(n){const l=e.maxFragLookUpTolerance,c=n.start-l,u=n.start+n.duration+l;if(!a.len||u<a.start||c>a.end){const d=o>u;(o<c||d)&&(d&&n.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),n.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}r&&(this.fragmentTracker.removeFragmentsInRange(o,1/0,this.playlistType,!0),this.lastCurrentTime=o),!this.loadedmetadata&&!a.len&&(this.nextLoadPosition=this.startPosition=o),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,n){this.startTimeOffset=n.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.stopLoad(),super.onHandlerDestroying()}onHandlerDestroyed(){this.state=ee.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,n,r){this._loadFragForPlayback(e,n,r)}_loadFragForPlayback(e,n,r){const s=i=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${i.part?" p: "+i.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(i)};this._doFragLoad(e,n,r,s).then(i=>{if(!i)return;const o=this.state;if(this.fragContextChanged(e)){(o===ee.FRAG_LOADING||!this.fragCurrent&&o===ee.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=ee.IDLE);return}"payload"in i&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(b.FRAG_LOADED,i)),this._handleFragmentLoadComplete(i)}).catch(i=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var n;const{fragmentTracker:r}=this;if(r.getState(e)===$t.APPENDING){const s=e.type,i=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,i?i.len:this.config.maxBufferLength);this.reduceMaxBufferLength(o)&&r.removeFragment(e)}else((n=this.mediaBuffer)==null?void 0:n.buffered.length)===0?r.removeAllFragments():r.hasParts(e.type)&&(r.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),r.getState(e)===$t.PARTIAL&&r.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const n=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:n,part:null,stats:n.stats,id:n.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,n,r=null){if(!(e-n))return;const s={startOffset:e,endOffset:n,type:r};this.hls.trigger(b.BUFFER_FLUSHING,s)}_loadInitSegment(e,n){this._doFragLoad(e,n).then(r=>{if(!r||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return r}).then(r=>{const{hls:s}=this,{payload:i}=r,o=e.decryptdata;if(i&&i.byteLength>0&&o&&o.key&&o.iv&&o.method==="AES-128"){const a=self.performance.now();return this.decrypter.decrypt(new Uint8Array(i),o.key.buffer,o.iv.buffer).catch(l=>{throw s.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return s.trigger(b.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:a,tdecrypt:c}}),r.payload=l,r})}return r}).then(r=>{const{fragCurrent:s,hls:i,levels:o}=this;if(!o)throw new Error("init load aborted, missing levels");const a=e.stats;this.state=ee.IDLE,n.fragmentError=0,e.data=new Uint8Array(r.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),r.frag===s&&i.trigger(b.FRAG_BUFFERED,{stats:a,frag:s,part:null,id:e.type}),this.tick()}).catch(r=>{this.state===ee.STOPPED||this.state===ee.ERROR||(this.warn(r),this.resetFragmentLoading(e))})}fragContextChanged(e){const{fragCurrent:n}=this;return!e||!n||e.level!==n.level||e.sn!==n.sn||e.urlId!==n.urlId}fragBufferedComplete(e,n){var r,s,i,o;const a=this.mediaBuffer?this.mediaBuffer:this.media;this.log(`Buffered ${e.type} sn: ${e.sn}${n?" part: "+n.index:""} of ${this.playlistType===Pe.MAIN?"level":"track"} ${e.level} (frag:[${((r=e.startPTS)!=null?r:NaN).toFixed(3)}-${((s=e.endPTS)!=null?s:NaN).toFixed(3)}] > buffer:${a?qK.toString(ht.getBuffered(a)):"(detached)"})`),this.state=ee.IDLE,a&&(!this.loadedmetadata&&e.type==Pe.MAIN&&a.buffered.length&&((i=this.fragCurrent)==null?void 0:i.sn)===((o=this.fragPrevious)==null?void 0:o.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:n}=this;if(!n)return;const{frag:r,part:s,partsLoaded:i}=e,o=!i||i.length===0||i.some(l=>!l),a=new Cd(r.level,r.sn,r.stats.chunkCount+1,0,s?s.index:-1,!o);n.flush(a)}_handleFragmentLoadProgress(e){}_doFragLoad(e,n,r=null,s){var i;const o=n==null?void 0:n.details;if(!this.levels||!o)throw new Error(`frag load aborted, missing level${o?"":" detail"}s`);let a=null;if(e.encrypted&&!((i=e.decryptdata)!=null&&i.key)?(this.log(`Loading key for ${e.sn} of [${o.startSN}-${o.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=ee.KEY_LOADING,this.fragCurrent=e,a=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(b.KEY_LOADED,u),this.state===ee.KEY_LOADING&&(this.state=ee.IDLE),u}),this.hls.trigger(b.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(a=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&o.encryptedFragments.length&&this.keyLoader.loadClear(e,o.encryptedFragments),r=Math.max(e.start,r||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=o.partList;if(u&&s){r>e.end&&o.fragmentHint&&(e=o.fragmentHint);const d=this.getNextPart(u,e,r);if(d>-1){const f=u[d];this.log(`Loading part sn: ${e.sn} p: ${f.index} cc: ${e.cc} of playlist [${o.startSN}-${o.endSN}] parts [0-${d}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),this.nextLoadPosition=f.start+f.duration,this.state=ee.FRAG_LOADING;let h;return a?h=a.then(p=>!p||this.fragContextChanged(p.frag)?null:this.doFragPartsLoad(e,f,n,s)).catch(p=>this.handleFragLoadError(p)):h=this.doFragPartsLoad(e,f,n,s).catch(p=>this.handleFragLoadError(p)),this.hls.trigger(b.FRAG_LOADING,{frag:e,part:f,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):h}else if(!e.url||this.loadedEndOfParts(u,r))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${o?"of ["+o.startSN+"-"+o.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(r.toFixed(3))}`),Re(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=ee.FRAG_LOADING;const l=this.config.progressive;let c;return l&&a?c=a.then(u=>!u||this.fragContextChanged(u==null?void 0:u.frag)?null:this.fragmentLoader.load(e,s)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?s:void 0),a]).then(([u])=>(!l&&u&&s&&s(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(b.FRAG_LOADING,{frag:e,targetBufferTime:r}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,n,r,s){return new Promise((i,o)=>{var a;const l=[],c=(a=r.details)==null?void 0:a.partList,u=d=>{this.fragmentLoader.loadPart(e,d,s).then(f=>{l[d.index]=f;const h=f.part;this.hls.trigger(b.FRAG_LOADED,f);const p=ng(r,e.sn,d.index+1)||b1(c,e.sn,d.index+1);if(p)u(p);else return i({frag:e,part:h,partsLoaded:l})}).catch(o)};u(n)})}handleFragLoadError(e){if("data"in e){const n=e.data;e.data&&n.details===K.INTERNAL_ABORTED?this.handleFragLoadAborted(n.frag,n.part):this.hls.trigger(b.ERROR,n)}else this.hls.trigger(b.ERROR,{type:De.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const n=this.getCurrentContext(e);if(!n||this.state!==ee.PARSING){!this.fragCurrent&&this.state!==ee.STOPPED&&this.state!==ee.ERROR&&(this.state=ee.IDLE);return}const{frag:r,part:s,level:i}=n,o=self.performance.now();r.stats.parsing.end=o,s&&(s.stats.parsing.end=o),this.updateLevelTiming(r,s,i,e.partial)}getCurrentContext(e){const{levels:n,fragCurrent:r}=this,{level:s,sn:i,part:o}=e;if(!(n!=null&&n[s]))return this.warn(`Levels object was unset while buffering fragment ${i} of level ${s}. The current chunk will not be buffered.`),null;const a=n[s],l=o>-1?ng(a,i,o):null,c=l?l.fragment:EK(a,i,r);return c?(r&&r!==c&&(c.stats=r.stats),{frag:c,part:l,level:a}):null}bufferFragmentData(e,n,r,s,i){var o;if(!e||this.state!==ee.PARSING)return;const{data1:a,data2:l}=e;let c=a;if(a&&l&&(c=is(a,l)),!((o=c)!=null&&o.length))return;const u={type:e.type,frag:n,part:r,chunkMeta:s,parent:n.type,data:c};if(this.hls.trigger(b.BUFFER_APPENDING,u),e.dropped&&e.independent&&!r){if(i)return;this.flushBufferGap(n)}}flushBufferGap(e){const n=this.media;if(!n)return;if(!ht.isBuffered(n,n.currentTime)){this.flushMainBuffer(0,e.start);return}const r=n.currentTime,s=ht.bufferInfo(n,r,0),i=e.duration,o=Math.min(this.config.maxFragLookUpTolerance*2,i*.25),a=Math.max(Math.min(e.start-o,s.end-o),r+o);e.start-a>o&&this.flushMainBuffer(a,e.start)}getFwdBufferInfo(e,n){const r=this.getLoadPosition();return Re(r)?this.getFwdBufferInfoAtPos(e,r,n):null}getFwdBufferInfoAtPos(e,n,r){const{config:{maxBufferHole:s}}=this,i=ht.bufferInfo(e,n,s);if(i.len===0&&i.nextStart!==void 0){const o=this.fragmentTracker.getBufferedFrag(n,r);if(o&&i.nextStart<o.end)return ht.bufferInfo(e,n,Math.max(i.nextStart,s))}return i}getMaxBufferLength(e){const{config:n}=this;let r;return e?r=Math.max(8*n.maxBufferSize/e,n.maxBufferLength):r=n.maxBufferLength,Math.min(r,n.maxMaxBufferLength)}reduceMaxBufferLength(e){const n=this.config,r=e||n.maxBufferLength;return n.maxMaxBufferLength>=r?(n.maxMaxBufferLength/=2,this.warn(`Reduce max buffer length to ${n.maxMaxBufferLength}s`),!0):!1}getAppendedFrag(e,n=Pe.MAIN){const r=this.fragmentTracker.getAppendedFrag(e,Pe.MAIN);return r&&"fragment"in r?r.fragment:r}getNextFragment(e,n){const r=n.fragments,s=r.length;if(!s)return null;const{config:i}=this,o=r[0].start;let a;if(n.live){const l=i.initialLiveManifestSize;if(s<l)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${l})`),null;!n.PTSKnown&&!this.startFragRequested&&this.startPosition===-1&&(a=this.getInitialLiveFragment(n,r),this.startPosition=a?this.hls.liveSyncPosition||a.start:e)}else e<=o&&(a=r[0]);if(!a){const l=i.lowLatencyMode?n.partEnd:n.fragmentEnd;a=this.getFragmentAtPosition(e,l,n)}return this.mapToInitFragWhenRequired(a)}isLoopLoading(e,n){const r=this.fragmentTracker.getState(e);return(r===$t.OK||r===$t.PARTIAL&&!!e.gap)&&this.nextLoadPosition>n}getNextFragmentLoopLoading(e,n,r,s,i){const o=e.gap,a=this.getNextFragment(this.nextLoadPosition,n);if(a===null)return a;if(e=a,o&&e&&!e.gap&&r.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,r.nextStart,s);if(l!==null&&r.len+l.len>=i)return this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,n,r){let s=-1,i=!1,o=!0;for(let a=0,l=e.length;a<l;a++){const c=e[a];if(o=o&&!c.independent,s>-1&&r<c.start)break;const u=c.loaded;u?s=-1:(i||c.independent||o)&&c.fragment===n&&(s=a),i=u}return s}loadedEndOfParts(e,n){const r=e[e.length-1];return r&&n>r.start&&r.loaded}getInitialLiveFragment(e,n){const r=this.fragPrevious;let s=null;if(r){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${r.programDateTime}`),s=_K(n,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const i=r.sn+1;if(i>=e.startSN&&i<=e.endSN){const o=n[i-e.startSN];r.cc===o.cc&&(s=o,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=wK(n,r.cc),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const i=this.hls.liveSyncPosition;i!==null&&(s=this.getFragmentAtPosition(i,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,n,r){const{config:s}=this;let{fragPrevious:i}=this,{fragments:o,endSN:a}=r;const{fragmentHint:l}=r,c=s.maxFragLookUpTolerance,u=r.partList,d=!!(s.lowLatencyMode&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&(o=o.concat(l),a=l.sn);let f;if(e<n){const h=e>n-c?0:c;f=Hi(i,o,e,h)}else f=o[o.length-1];if(f){const h=f.sn-r.startSN,p=this.fragmentTracker.getState(f);if((p===$t.OK||p===$t.PARTIAL&&f.gap)&&(i=f),i&&f.sn===i.sn&&(!d||u[0].fragment.sn>f.sn)&&i&&f.level===i.level){const g=o[h+1];f.sn<a&&this.fragmentTracker.getState(g)!==$t.OK?f=g:f=null}}return f}synchronizeToLiveEdge(e){const{config:n,media:r}=this;if(!r)return;const s=this.hls.liveSyncPosition,i=r.currentTime,o=e.fragments[0].start,a=e.edge,l=i>=o-n.maxFragLookUpTolerance&&i<=a;if(s!==null&&r.duration>s&&(i<s||!l)){const c=n.liveMaxLatencyDuration!==void 0?n.liveMaxLatencyDuration:n.liveMaxLatencyDurationCount*e.targetduration;(!l&&r.readyState<4||i<a-c)&&(this.loadedmetadata||(this.nextLoadPosition=s),r.readyState&&(this.warn(`Playback: ${i.toFixed(3)} is located too far from the end of live sliding playlist: ${a}, reset currentTime to : ${s.toFixed(3)}`),r.currentTime=s))}}alignPlaylists(e,n){const{levels:r,levelLastLoaded:s,fragPrevious:i}=this,o=s!==null?r[s]:null,a=e.fragments.length;if(!a)return this.warn("No fragments in live playlist"),0;const l=e.fragments[0].start,c=!n,u=e.alignedSliding&&Re(l);if(c||!u&&!l){FK(i,o,e);const d=e.fragments[0].start;return this.log(`Live playlist sliding: ${d.toFixed(2)} start-sn: ${n?n.startSN:"na"}->${e.startSN} prev-sn: ${i?i.sn:"na"} fragments: ${a}`),d}return l}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,n){let r=this.startPosition;if(r<n&&(r=-1),r===-1||this.lastCurrentTime===-1){const s=this.startTimeOffset!==null,i=s?this.startTimeOffset:e.startTimeOffset;i!==null&&Re(i)?(r=n+i,i<0&&(r+=e.totalduration),r=Math.min(Math.max(n,r),n+e.totalduration),this.log(`Start time offset ${i} found in ${s?"multivariant":"media"} playlist, adjust startPosition to ${r}`),this.startPosition=r):e.live?r=this.hls.liveSyncPosition||n:this.startPosition=r=0,this.lastCurrentTime=r}this.nextLoadPosition=r}getLoadPosition(){const{media:e}=this;let n=0;return this.loadedmetadata&&e?n=e.currentTime:this.nextLoadPosition&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,n){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==ee.FRAG_LOADING_WAITING_RETRY)&&(this.state=ee.IDLE)}onFragmentOrKeyLoadError(e,n){if(n.chunkMeta&&!n.frag){const d=this.getCurrentContext(n.chunkMeta);d&&(n.frag=d.frag)}const r=n.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const i=n.details===K.FRAG_GAP;i&&this.fragmentTracker.fragBuffered(r,!0);const o=n.errorAction,{action:a,retryCount:l=0,retryConfig:c}=o||{};if(o&&a===Bt.RetryRequest&&c){var u;this.resetStartWhenNotLoaded((u=this.levelLastLoaded)!=null?u:r.level);const d=Ld(c,l);this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${n.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${d}ms`),o.resolved=!0,this.retryDate=self.performance.now()+d,this.state=ee.FRAG_LOADING_WAITING_RETRY}else c&&o?(this.resetFragmentErrors(e),l<c.maxNumRetry?i||(o.resolved=!0):O.warn(`${n.details} reached or exceeded max retry (${l})`)):(o==null?void 0:o.action)===Bt.SendAlternateToPenaltyBox?this.state=ee.WAITING_LEVEL:this.state=ee.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===ee.PARSING||this.state===ee.PARSED){const n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len);const i=!s;return i&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),e.frag&&(this.fragmentTracker.removeFragment(e.frag),this.nextLoadPosition=e.frag.start),this.resetLoadingState(),i}return!1}resetFragmentErrors(e){e===Pe.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==ee.STOPPED&&(this.state=ee.IDLE)}afterBufferFlushed(e,n,r){if(!e)return;const s=ht.getBuffered(e);this.fragmentTracker.detectEvictedFragments(n,s,r),this.state===ee.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=ee.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const n=this.levels?this.levels[e].details:null;n!=null&&n.live?(this.startPosition=-1,this.setStartPosition(n,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){var n;this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded((n=this.levelLastLoaded)!=null?n:e.level),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,n,r,s){var i;const o=r.details;if(!o){this.warn("level.details undefined");return}if(Object.keys(e.elementaryStreams).reduce((a,l)=>{const c=e.elementaryStreams[l];if(c){const u=c.endPTS-c.startPTS;if(u<=0)return this.warn(`Could not parse fragment ${e.sn} ${l} duration reliably (${u})`),a||!1;const d=s?0:v1(o,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS);return this.hls.trigger(b.LEVEL_PTS_UPDATED,{details:o,level:r,drift:d,type:l,frag:e,start:c.startPTS,end:c.endPTS}),!0}return a},!1))r.fragmentError=0;else if(((i=this.transmuxer)==null?void 0:i.error)===null){const a=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(r.fragmentError===0&&(r.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(a.message),this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,error:a,frag:e,reason:`Found no media in msn ${e.sn} of level "${r.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=ee.PARSED,this.hls.trigger(b.FRAG_PARSED,{frag:e,part:n})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){if(e.event==="demuxerWorker"){var n,r,s;this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded((n=(r=this.levelLastLoaded)!=null?r:(s=this.fragCurrent)==null?void 0:s.level)!=null?n:0),this.resetLoadingState()}}set state(e){const n=this._state;n!==e&&(this._state=e,this.log(`${n}->${e}`))}get state(){return this._state}}function _1(){return self.SourceBuffer||self.WebKitSourceBuffer}function jK(){const t=Qa();if(!t)return!1;const e=_1(),n=t&&typeof t.isTypeSupported=="function"&&t.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),r=!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function";return!!n&&!!r}function zK(){var t;const e=_1();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}function WK(){return typeof __HLS_WORKER_BUNDLE__=="function"}function YK(){const t=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(t);return{worker:new self.Worker(e),objectURL:e}}function XK(t){const e=new self.URL(t,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function zn(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class A1{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,n,r,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,n){return!1}appendFrame(e,n,r){}demux(e,n){this.cachedData&&(e=is(this.cachedData,e),this.cachedData=null);let r=oa(e,0),s=r?r.length:0,i;const o=this._audioTrack,a=this._id3Track,l=r?DG(r):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Re(l))&&(this.basePTS=QK(l,n,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),r&&r.length>0&&a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:On.audioId3,duration:Number.POSITIVE_INFINITY});s<c;){if(this.canParse(e,s)){const u=this.appendFrame(o,e,s);u?(this.frameIndex++,this.lastPTS=u.sample.pts,s+=u.length,i=s):s=c}else kG(e,s)?(r=oa(e,s),a.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:r,type:On.audioId3,duration:Number.POSITIVE_INFINITY}),s+=r.length,i=s):s++;if(s===c&&i!==c){const u=ns(e,i);this.cachedData?this.cachedData=is(this.cachedData,u):this.cachedData=u}}return{audioTrack:o,videoTrack:zn(),id3Track:a,textTrack:zn()}}demuxSampleAes(e,n,r){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const n=this.cachedData;return n&&(this.cachedData=null,this.demux(n,0)),{audioTrack:this._audioTrack,videoTrack:zn(),id3Track:this._id3Track,textTrack:zn()}}destroy(){}}const QK=(t,e,n)=>{if(Re(t))return t*90;const r=n?n.baseTime*9e4/n.timescale:0;return e*9e4+r};function JK(t,e,n,r){let s,i,o,a;const l=navigator.userAgent.toLowerCase(),c=r,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];s=((e[n+2]&192)>>>6)+1;const d=(e[n+2]&60)>>>2;if(d>u.length-1){t.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!0,reason:`invalid ADTS sampling index:${d}`});return}return o=(e[n+2]&1)<<2,o|=(e[n+3]&192)>>>6,O.log(`manifest codec:${r}, ADTS type:${s}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(s=5,a=new Array(4),i=d-3):(s=2,a=new Array(2),i=d):l.indexOf("android")!==-1?(s=2,a=new Array(2),i=d):(s=5,a=new Array(4),r&&(r.indexOf("mp4a.40.29")!==-1||r.indexOf("mp4a.40.5")!==-1)||!r&&d>=6?i=d-3:((r&&r.indexOf("mp4a.40.2")!==-1&&(d>=6&&o===1||/vivaldi/i.test(l))||!r&&o===1)&&(s=2,a=new Array(2)),i=d)),a[0]=s<<3,a[0]|=(d&14)>>1,a[1]|=(d&1)<<7,a[1]|=o<<3,s===5&&(a[1]|=(i&14)>>1,a[2]=(i&1)<<7,a[2]|=8,a[3]=0),{config:a,samplerate:u[d],channelCount:o,codec:"mp4a.40."+s,manifestCodec:c}}function w1(t,e){return t[e]===255&&(t[e+1]&246)===240}function L1(t,e){return t[e+1]&1?7:9}function Dd(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function ZK(t,e){return e+5<t.length}function da(t,e){return e+1<t.length&&w1(t,e)}function eq(t,e){return ZK(t,e)&&w1(t,e)&&Dd(t,e)<=t.length-e}function tq(t,e){if(da(t,e)){const n=L1(t,e);if(e+n>=t.length)return!1;const r=Dd(t,e);if(r<=n)return!1;const s=e+r;return s===t.length||da(t,s)}return!1}function I1(t,e,n,r,s){if(!t.samplerate){const i=JK(e,n,r,s);if(!i)return;t.config=i.config,t.samplerate=i.samplerate,t.channelCount=i.channelCount,t.codec=i.codec,t.manifestCodec=i.manifestCodec,O.log(`parsed codec:${t.codec}, rate:${i.samplerate}, channels:${i.channelCount}`)}}function C1(t){return 1024*9e4/t}function nq(t,e){const n=L1(t,e);if(e+n<=t.length){const r=Dd(t,e)-n;if(r>0)return{headerLength:n,frameLength:r}}}function R1(t,e,n,r,s){const i=C1(t.samplerate),o=r+s*i,a=nq(e,n);let l;if(a){const{frameLength:u,headerLength:d}=a,f=d+u,h=Math.max(0,n+f-e.length);h?(l=new Uint8Array(f-d),l.set(e.subarray(n+d,e.length),0)):l=e.subarray(n+d,n+f);const p={unit:l,pts:o};return h||t.samples.push(p),{sample:p,length:f,missing:h}}const c=e.length-n;return l=new Uint8Array(c),l.set(e.subarray(n,e.length),0),{sample:{unit:l,pts:o},length:c,missing:-1}}class rq extends A1{constructor(e,n){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=n}resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(oa(e,0)||[]).length;for(let r=e.length;n<r;n++)if(tq(e,n))return O.log("ADTS sync word found !"),!0;return!1}canParse(e,n){return eq(e,n)}appendFrame(e,n,r){I1(e,this.observer,n,r,e.manifestCodec);const s=R1(e,n,r,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const sq=/\/emsg[-/]ID3/i;class iq{constructor(e,n){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=n}resetTimeStamp(){}resetInitSegment(e,n,r,s){const i=this.videoTrack=zn("video",1),o=this.audioTrack=zn("audio",1),a=this.txtTrack=zn("text",1);if(this.id3Track=zn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=u1(e);if(l.video){const{id:c,timescale:u,codec:d}=l.video;i.id=c,i.timescale=a.timescale=u,i.codec=d}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;o.id=c,o.timescale=u,o.codec=d}a.id=a1.text,i.sampleDuration=0,i.duration=o.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return e=e.length>16384?e.subarray(0,16384):e,Ze(e,["moof"]).length>0}demux(e,n){this.timeOffset=n;let r=e;const s=this.videoTrack,i=this.txtTrack;if(this.config.progressive){this.remainderData&&(r=is(this.remainderData,e));const a=zG(r);this.remainderData=a.remainder,s.samples=a.valid||new Uint8Array}else s.samples=r;const o=this.extractID3Track(s,n);return i.samples=Vp(n,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:o,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,n=this.videoTrack,r=this.txtTrack;n.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(n,this.timeOffset);return r.samples=Vp(e,n),{videoTrack:n,audioTrack:zn(),id3Track:s,textTrack:zn()}}extractID3Track(e,n){const r=this.id3Track;if(e.samples.length){const s=Ze(e.samples,["emsg"]);s&&s.forEach(i=>{const o=XG(i);if(sq.test(o.schemeIdUri)){const a=Re(o.presentationTime)?o.presentationTime/o.timeScale:n+o.presentationTimeDelta/o.timeScale;let l=o.eventDuration===4294967295?Number.POSITIVE_INFINITY:o.eventDuration/o.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=o.payload;r.samples.push({data:c,len:c.byteLength,dts:a,pts:a,type:On.emsg,duration:l})}})}return r}demuxSampleAes(e,n,r){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}let wo=null;const oq=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],aq=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],lq=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],cq=[0,1,1,4];function $1(t,e,n,r,s){if(n+24>e.length)return;const i=k1(e,n);if(i&&n+i.frameLength<=e.length){const o=i.samplesPerFrame*9e4/i.sampleRate,a=r+s*o,l={unit:e.subarray(n,n+i.frameLength),pts:a,dts:a};return t.config=[],t.channelCount=i.channelCount,t.samplerate=i.sampleRate,t.samples.push(l),{sample:l,length:i.frameLength,missing:0}}}function k1(t,e){const n=t[e+1]>>3&3,r=t[e+1]>>1&3,s=t[e+2]>>4&15,i=t[e+2]>>2&3;if(n!==1&&s!==0&&s!==15&&i!==3){const o=t[e+2]>>1&1,a=t[e+3]>>6,l=n===3?3-r:r===3?3:4,c=oq[l*14+s-1]*1e3,u=aq[(n===3?0:n===2?1:2)*3+i],d=a===3?1:2,f=lq[n][r],h=cq[r],p=f*8*h,g=Math.floor(f*c/u+o)*h;if(wo===null){const v=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);wo=v?parseInt(v[1]):0}return wo&&wo<=87&&r===2&&c>=224e3&&a===0&&(t[e+3]=t[e+3]|128),{sampleRate:u,channelCount:d,frameLength:g,samplesPerFrame:p}}}function Pd(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function D1(t,e){return e+1<t.length&&Pd(t,e)}function uq(t,e){return Pd(t,e)&&4<=t.length-e}function dq(t,e){if(e+1<t.length&&Pd(t,e)){const n=k1(t,e);let r=4;n!=null&&n.frameLength&&(r=n.frameLength);const s=e+r;return s===t.length||D1(t,s)}return!1}class ug{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,n=this.bytesAvailable,r=e.byteLength-n,s=new Uint8Array(4),i=Math.min(4,n);if(i===0)throw new Error("no bytes available");s.set(e.subarray(r,r+i)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=i*8,this.bytesAvailable-=i}skipBits(e){let n;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,n=e>>3,e-=n<<3,this.bytesAvailable-=n,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let n=Math.min(this.bitsAvailable,e);const r=this.word>>>32-n;if(e>32&&O.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=n,this.bitsAvailable>0)this.word<<=n;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return n=e-n,n>0&&this.bitsAvailable?r<<n|this.readBits(n):r}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let n=8,r=8,s;for(let i=0;i<e;i++)r!==0&&(s=this.readEG(),r=(n+s+256)%256),n=r===0?n:r}readSPS(){let e=0,n=0,r=0,s=0,i,o,a;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),f=this.skipBits.bind(this),h=this.skipEG.bind(this),p=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const v=l();if(c(5),f(3),l(),p(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const _=u();if(_===3&&f(1),p(),p(),f(1),d())for(o=_!==3?8:12,a=0;a<o;a++)d()&&(a<6?g(16):g(64))}p();const m=u();if(m===0)u();else if(m===1)for(f(1),h(),h(),i=u(),a=0;a<i;a++)h();p(),f(1);const y=u(),T=u(),E=c(1);E===0&&f(1),f(1),d()&&(e=u(),n=u(),r=u(),s=u());let S=[1,1];if(d()&&d())switch(l()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:{S=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((y+1)*16-e*2-n*2),height:(2-E)*(T+1)*16-(E?2:4)*(r+s),pixelRatio:S}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class fq{constructor(e,n,r){this.keyData=void 0,this.decrypter=void 0,this.keyData=r,this.decrypter=new $d(n,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,n,r){const s=e[n].unit;if(s.length<=16)return;const i=s.subarray(16,s.length-s.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length);this.decryptBuffer(o).then(a=>{const l=new Uint8Array(a);s.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,n+1,r)})}decryptAacSamples(e,n,r){for(;;n++){if(n>=e.length){r();return}if(!(e[n].unit.length<32)&&(this.decryptAacSample(e,n,r),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const n=Math.floor((e.length-48)/160)*16+16,r=new Int8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)r.set(e.subarray(i,i+16),s);return r}getAvcDecryptedUnit(e,n){const r=new Uint8Array(n);let s=0;for(let i=32;i<e.length-16;i+=160,s+=16)e.set(r.subarray(s,s+16),i);return e}decryptAvcSample(e,n,r,s,i){const o=h1(i.data),a=this.getAvcEncryptedData(o);this.decryptBuffer(a.buffer).then(l=>{i.data=this.getAvcDecryptedUnit(o,l),this.decrypter.isSync()||this.decryptAvcSamples(e,n,r+1,s)})}decryptAvcSamples(e,n,r,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;n++,r=0){if(n>=e.length){s();return}const i=e[n].units;for(;!(r>=i.length);r++){const o=i[r];if(!(o.data.length<=48||o.type!==1&&o.type!==5)&&(this.decryptAvcSample(e,n,r,s,o),!this.decrypter.isSync()))return}}}}const Nt=188;class Ir{constructor(e,n,r){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._avcTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.observer=e,this.config=n,this.typeSupported=r}static probe(e){const n=Ir.syncOffset(e);return n>0&&O.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const n=e.length;let r=Math.min(Nt*5,e.length-Nt)+1,s=0;for(;s<r;){let i=!1,o=-1,a=0;for(let l=s;l<n;l+=Nt)if(e[l]===71){if(a++,o===-1&&(o=l,o!==0&&(r=Math.min(o+Nt*99,e.length-Nt)+1)),i||(i=vu(e,l)===0),i&&a>1&&(o===0&&a>2||l+Nt>r))return o}else{if(a)return-1;break}s++}return-1}static createTrack(e,n){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:a1[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?n:void 0}}resetInitSegment(e,n,r,s){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=Ir.createTrack("video"),this._audioTrack=Ir.createTrack("audio",s),this._id3Track=Ir.createTrack("id3"),this._txtTrack=Ir.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.avcSample=null,this.remainderData=null,this.audioCodec=n,this.videoCodec=r,this._duration=s}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_avcTrack:n,_id3Track:r}=this;e&&(e.pesData=null),n&&(n.pesData=null),r&&(r.pesData=null),this.aacOverFlow=null,this.avcSample=null,this.remainderData=null}demux(e,n,r=!1,s=!1){r||(this.sampleAes=null);let i;const o=this._avcTrack,a=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=o.pid,d=o.pesData,f=a.pid,h=l.pid,p=a.pesData,g=l.pesData,v=null,m=this.pmtParsed,y=this._pmtId,T=e.length;if(this.remainderData&&(e=is(this.remainderData,e),T=e.length,this.remainderData=null),T<Nt&&!s)return this.remainderData=e,{audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};const E=Math.max(0,Ir.syncOffset(e));T-=(T-E)%Nt,T<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,T,e.buffer.byteLength-T));let S=0;for(let R=E;R<T;R+=Nt)if(e[R]===71){const k=!!(e[R+1]&64),P=vu(e,R),$=(e[R+3]&48)>>4;let N;if($>1){if(N=R+5+e[R+4],N===R+Nt)continue}else N=R+4;switch(P){case u:k&&(d&&(i=bs(d))&&this.parseAVCPES(o,c,i,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(N,R+Nt)),d.size+=R+Nt-N);break;case f:if(k){if(p&&(i=bs(p)))switch(a.segmentCodec){case"aac":this.parseAACPES(a,i);break;case"mp3":this.parseMPEGPES(a,i);break}p={data:[],size:0}}p&&(p.data.push(e.subarray(N,R+Nt)),p.size+=R+Nt-N);break;case h:k&&(g&&(i=bs(g))&&this.parseID3PES(l,i),g={data:[],size:0}),g&&(g.data.push(e.subarray(N,R+Nt)),g.size+=R+Nt-N);break;case 0:k&&(N+=e[N]+1),y=this._pmtId=hq(e,N);break;case y:{k&&(N+=e[N]+1);const w=pq(e,N,this.typeSupported,r);u=w.avc,u>0&&(o.pid=u),f=w.audio,f>0&&(a.pid=f,a.segmentCodec=w.segmentCodec),h=w.id3,h>0&&(l.pid=h),v!==null&&!m&&(O.warn(`MPEG-TS PMT found at ${R} after unknown PID '${v}'. Backtracking to sync byte @${E} to parse all TS packets.`),v=null,R=E-188),m=this.pmtParsed=!0;break}case 17:case 8191:break;default:v=P;break}}else S++;if(S>0){const R=new Error(`Found ${S} TS packet/s that do not start with 0x47`);this.observer.emit(b.ERROR,b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,error:R,reason:R.message})}o.pesData=d,a.pesData=p,l.pesData=g;const _={audioTrack:a,videoTrack:o,id3Track:l,textTrack:c};return s&&this.extractRemainingSamples(_),_}flush(){const{remainderData:e}=this;this.remainderData=null;let n;return e?n=this.demux(e,-1,!1,!0):n={videoTrack:this._avcTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(n),this.sampleAes?this.decrypt(n,this.sampleAes):n}extractRemainingSamples(e){const{audioTrack:n,videoTrack:r,id3Track:s,textTrack:i}=e,o=r.pesData,a=n.pesData,l=s.pesData;let c;if(o&&(c=bs(o))?(this.parseAVCPES(r,i,c,!0),r.pesData=null):r.pesData=o,a&&(c=bs(a))){switch(n.segmentCodec){case"aac":this.parseAACPES(n,c);break;case"mp3":this.parseMPEGPES(n,c);break}n.pesData=null}else a!=null&&a.size&&O.log("last AAC PES packet truncated,might overlap between fragments"),n.pesData=a;l&&(c=bs(l))?(this.parseID3PES(s,c),s.pesData=null):s.pesData=l}demuxSampleAes(e,n,r){const s=this.demux(e,r,!0,!this.config.progressive),i=this.sampleAes=new fq(this.observer,this.config,n);return this.decrypt(s,i)}decrypt(e,n){return new Promise(r=>{const{audioTrack:s,videoTrack:i}=e;s.samples&&s.segmentCodec==="aac"?n.decryptAacSamples(s.samples,0,()=>{i.samples?n.decryptAvcSamples(i.samples,0,0,()=>{r(e)}):r(e)}):i.samples&&n.decryptAvcSamples(i.samples,0,0,()=>{r(e)})})}destroy(){this._duration=0}parseAVCPES(e,n,r,s){const i=this.parseAVCNALu(e,r.data);let o=this.avcSample,a,l=!1;r.data=null,o&&i.length&&!e.audFound&&(si(o,e),o=this.avcSample=Lo(!1,r.pts,r.dts,"")),i.forEach(c=>{var u;switch(c.type){case 1:{let f=!1;a=!0;const h=c.data;if(l&&h.length>4){const p=new ug(h).readSliceType();(p===2||p===4||p===7||p===9)&&(f=!0)}if(f){var d;(d=o)!=null&&d.frame&&!o.key&&(si(o,e),o=this.avcSample=null)}o||(o=this.avcSample=Lo(!0,r.pts,r.dts,"")),o.frame=!0,o.key=f;break}case 5:a=!0,(u=o)!=null&&u.frame&&!o.key&&(si(o,e),o=this.avcSample=null),o||(o=this.avcSample=Lo(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:{a=!0,f1(c.data,1,r.pts,n.samples);break}case 7:if(a=!0,l=!0,!e.sps){const f=c.data,h=new ug(f).readSPS();e.width=h.width,e.height=h.height,e.pixelRatio=h.pixelRatio,e.sps=[f],e.duration=this._duration;const p=f.subarray(1,4);let g="avc1.";for(let v=0;v<3;v++){let m=p[v].toString(16);m.length<2&&(m="0"+m),g+=m}e.codec=g}break;case 8:a=!0,e.pps||(e.pps=[c.data]);break;case 9:a=!1,e.audFound=!0,o&&si(o,e),o=this.avcSample=Lo(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+c.type+" ");break}o&&a&&o.units.push(c)}),s&&o&&(si(o,e),this.avcSample=null)}getLastNalUnit(e){var n;let r=this.avcSample,s;if((!r||r.units.length===0)&&(r=e[e.length-1]),(n=r)!=null&&n.units){const i=r.units;s=i[i.length-1]}return s}parseAVCNALu(e,n){const r=n.byteLength;let s=e.naluState||0;const i=s,o=[];let a=0,l,c,u,d=-1,f=0;for(s===-1&&(d=0,f=n[0]&31,s=0,a=1);a<r;){if(l=n[a++],!s){s=l?0:1;continue}if(s===1){s=l?0:2;continue}if(!l)s=3;else if(l===1){if(d>=0){const h={data:n.subarray(d,a-s-1),type:f};o.push(h)}else{const h=this.getLastNalUnit(e.samples);if(h&&(i&&a<=4-i&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-i)),c=a-s-1,c>0)){const p=new Uint8Array(h.data.byteLength+c);p.set(h.data,0),p.set(n.subarray(0,c),h.data.byteLength),h.data=p,h.state=0}}a<r?(u=n[a]&31,d=a,f=u,s=0):s=-1}else s=0}if(d>=0&&s>=0){const h={data:n.subarray(d,r),type:f,state:s};o.push(h)}if(o.length===0){const h=this.getLastNalUnit(e.samples);if(h){const p=new Uint8Array(h.data.byteLength+n.byteLength);p.set(h.data,0),p.set(n,h.data.byteLength),h.data=p}}return e.naluState=s,o}parseAACPES(e,n){let r=0;const s=this.aacOverFlow;let i=n.data;if(s){this.aacOverFlow=null;const d=s.missing,f=s.sample.unit.byteLength;if(d===-1){const h=new Uint8Array(f+i.byteLength);h.set(s.sample.unit,0),h.set(i,f),i=h}else{const h=f-d;s.sample.unit.set(i.subarray(0,d),h),e.samples.push(s.sample),r=s.missing}}let o,a;for(o=r,a=i.length;o<a-1&&!da(i,o);o++);if(o!==r){let d;const f=o<a-1;f?d=`AAC PES did not start with ADTS header,offset:${o}`:d="No ADTS header found in AAC PES";const h=new Error(d);if(O.warn(`parsing error: ${d}`),this.observer.emit(b.ERROR,b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,levelRetry:f,error:h,reason:d}),!f)return}I1(e,this.observer,i,o,this.audioCodec);let l;if(n.pts!==void 0)l=n.pts;else if(s){const d=C1(e.samplerate);l=s.sample.pts+d}else{O.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;o<a;)if(u=R1(e,i,o,l,c),o+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;o<a-1&&!da(i,o);o++);}parseMPEGPES(e,n){const r=n.data,s=r.length;let i=0,o=0;const a=n.pts;if(a===void 0){O.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;o<s;)if(D1(r,o)){const l=$1(e,r,o,a,i);if(l)o+=l.length,i++;else break}else o++}parseID3PES(e,n){if(n.pts===void 0){O.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const r=Rt({},n,{type:this._avcTrack?On.emsg:On.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(r)}}function Lo(t,e,n,r){return{key:t,frame:!1,pts:e,dts:n,units:[],debug:r,length:0}}function vu(t,e){return((t[e+1]&31)<<8)+t[e+2]}function hq(t,e){return(t[e+10]&31)<<8|t[e+11]}function pq(t,e,n,r){const s={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},i=(t[e+1]&15)<<8|t[e+2],o=e+3+i-4,a=(t[e+10]&15)<<8|t[e+11];for(e+=12+a;e<o;){const l=vu(t,e);switch(t[e]){case 207:if(!r){O.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:s.audio===-1&&(s.audio=l);break;case 21:s.id3===-1&&(s.id3=l);break;case 219:if(!r){O.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:s.avc===-1&&(s.avc=l);break;case 3:case 4:n.mpeg!==!0&&n.mp3!==!0?O.log("MPEG audio found, not supported in this browser"):s.audio===-1&&(s.audio=l,s.segmentCodec="mp3");break;case 36:O.warn("Unsupported HEVC stream type found");break}e+=((t[e+3]&15)<<8|t[e+4])+5}return s}function bs(t){let e=0,n,r,s,i,o;const a=t.data;if(!t||t.size===0)return null;for(;a[0].length<19&&a.length>1;){const l=new Uint8Array(a[0].length+a[1].length);l.set(a[0]),l.set(a[1],a[0].length),a[0]=l,a.splice(1,1)}if(n=a[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const l=n[7];l&192&&(i=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,l&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,i-o>60*9e4&&(O.warn(`${Math.round((i-o)/9e4)}s delta between PTS and DTS, align them`),i=o)):o=i),s=n[8];let c=s+9;if(t.size<=c)return null;t.size-=c;const u=new Uint8Array(t.size);for(let d=0,f=a.length;d<f;d++){n=a[d];let h=n.byteLength;if(c)if(c>h){c-=h;continue}else n=n.subarray(c),h-=c,c=0;u.set(n,e),e+=h}return r&&(r-=s+3),{data:u,pts:i,dts:o,len:r}}return null}function si(t,e){if(t.units.length&&t.frame){if(t.pts===void 0){const n=e.samples,r=n.length;if(r){const s=n[r-1];t.pts=s.pts,t.dts=s.dts}else{e.dropped++;return}}e.samples.push(t)}t.debug.length&&O.log(t.pts+"/"+t.dts+":"+t.debug)}class gq extends A1{resetInitSegment(e,n,r,s){super.resetInitSegment(e,n,r,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:n,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;let n=(oa(e,0)||[]).length;for(let r=e.length;n<r;n++)if(dq(e,n))return O.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,n){return uq(e,n)}appendFrame(e,n,r){if(this.basePTS!==null)return $1(e,n,r,this.basePTS,this.frameIndex)}}class dg{static getSilentFrame(e,n){switch(e){case"mp4a.40.2":if(n===1)return new Uint8Array([0,200,0,128,35,128]);if(n===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(n===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(n===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(n===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(n===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(n===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(n===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Tr=Math.pow(2,32)-1;class B{static init(){B.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in B.types)B.types.hasOwnProperty(e)&&(B.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);B.HDLR_TYPES={video:n,audio:r};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);B.STTS=B.STSC=B.STCO=i,B.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),B.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),B.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),B.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const o=new Uint8Array([105,115,111,109]),a=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);B.FTYP=B.box(B.types.ftyp,o,l,o,a),B.DINF=B.box(B.types.dinf,B.box(B.types.dref,s))}static box(e,...n){let r=8,s=n.length;const i=s;for(;s--;)r+=n[s].byteLength;const o=new Uint8Array(r);for(o[0]=r>>24&255,o[1]=r>>16&255,o[2]=r>>8&255,o[3]=r&255,o.set(e,4),s=0,r=8;s<i;s++)o.set(n[s],r),r+=n[s].byteLength;return o}static hdlr(e){return B.box(B.types.hdlr,B.HDLR_TYPES[e])}static mdat(e){return B.box(B.types.mdat,e)}static mdhd(e,n){n*=e;const r=Math.floor(n/(Tr+1)),s=Math.floor(n%(Tr+1));return B.box(B.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return B.box(B.types.mdia,B.mdhd(e.timescale,e.duration),B.hdlr(e.type),B.minf(e))}static mfhd(e){return B.box(B.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?B.box(B.types.minf,B.box(B.types.smhd,B.SMHD),B.DINF,B.stbl(e)):B.box(B.types.minf,B.box(B.types.vmhd,B.VMHD),B.DINF,B.stbl(e))}static moof(e,n,r){return B.box(B.types.moof,B.mfhd(e),B.traf(r,n))}static moov(e){let n=e.length;const r=[];for(;n--;)r[n]=B.trak(e[n]);return B.box.apply(null,[B.types.moov,B.mvhd(e[0].timescale,e[0].duration)].concat(r).concat(B.mvex(e)))}static mvex(e){let n=e.length;const r=[];for(;n--;)r[n]=B.trex(e[n]);return B.box.apply(null,[B.types.mvex,...r])}static mvhd(e,n){n*=e;const r=Math.floor(n/(Tr+1)),s=Math.floor(n%(Tr+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,r>>24,r>>16&255,r>>8&255,r&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return B.box(B.types.mvhd,i)}static sdtp(e){const n=e.samples||[],r=new Uint8Array(4+n.length);let s,i;for(s=0;s<n.length;s++)i=n[s].flags,r[s+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return B.box(B.types.sdtp,r)}static stbl(e){return B.box(B.types.stbl,B.stsd(e),B.box(B.types.stts,B.STTS),B.box(B.types.stsc,B.STSC),B.box(B.types.stsz,B.STSZ),B.box(B.types.stco,B.STCO))}static avc1(e){let n=[],r=[],s,i,o;for(s=0;s<e.sps.length;s++)i=e.sps[s],o=i.byteLength,n.push(o>>>8&255),n.push(o&255),n=n.concat(Array.prototype.slice.call(i));for(s=0;s<e.pps.length;s++)i=e.pps[s],o=i.byteLength,r.push(o>>>8&255),r.push(o&255),r=r.concat(Array.prototype.slice.call(i));const a=B.box(B.types.avcC,new Uint8Array([1,n[3],n[4],n[5],255,224|e.sps.length].concat(n).concat([e.pps.length]).concat(r))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return B.box(B.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a,B.box(B.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),B.box(B.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const n=e.config.length;return new Uint8Array([0,0,0,0,3,23+n,0,1,0,4,15+n,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([n]).concat(e.config).concat([6,1,2]))}static mp4a(e){const n=e.samplerate;return B.box(B.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0]),B.box(B.types.esds,B.esds(e)))}static mp3(e){const n=e.samplerate;return B.box(B.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,n>>8&255,n&255,0,0]))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?B.box(B.types.stsd,B.STSD,B.mp3(e)):B.box(B.types.stsd,B.STSD,B.mp4a(e)):B.box(B.types.stsd,B.STSD,B.avc1(e))}static tkhd(e){const n=e.id,r=e.duration*e.timescale,s=e.width,i=e.height,o=Math.floor(r/(Tr+1)),a=Math.floor(r%(Tr+1));return B.box(B.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,n&255,0,0,0,0,o>>24,o>>16&255,o>>8&255,o&255,a>>24,a>>16&255,a>>8&255,a&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,i>>8&255,i&255,0,0]))}static traf(e,n){const r=B.sdtp(e),s=e.id,i=Math.floor(n/(Tr+1)),o=Math.floor(n%(Tr+1));return B.box(B.types.traf,B.box(B.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),B.box(B.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,o>>24,o>>16&255,o>>8&255,o&255])),B.trun(e,r.length+16+20+8+16+8+8),r)}static trak(e){return e.duration=e.duration||4294967295,B.box(B.types.trak,B.tkhd(e),B.mdia(e))}static trex(e){const n=e.id;return B.box(B.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,n&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,n){const r=e.samples||[],s=r.length,i=12+16*s,o=new Uint8Array(i);let a,l,c,u,d,f;for(n+=8+i,o.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255],0),a=0;a<s;a++)l=r[a],c=l.duration,u=l.size,d=l.flags,f=l.cts,o.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,f>>>24&255,f>>>16&255,f>>>8&255,f&255],12+16*a);return B.box(B.types.trun,o)}static initSegment(e){B.types||B.init();const n=B.moov(e),r=new Uint8Array(B.FTYP.byteLength+n.byteLength);return r.set(B.FTYP),r.set(n,B.FTYP.byteLength),r}}B.types=void 0;B.HDLR_TYPES=void 0;B.STTS=void 0;B.STSC=void 0;B.STCO=void 0;B.STSZ=void 0;B.VMHD=void 0;B.SMHD=void 0;B.STSD=void 0;B.FTYP=void 0;B.DINF=void 0;const P1=9e4;function Od(t,e,n=1,r=!1){const s=t*e*n;return r?Math.round(s):s}function mq(t,e,n=1,r=!1){return Od(t,e,1/n,r)}function ii(t,e=!1){return Od(t,1e3,1/P1,e)}function vq(t,e=1){return Od(t,P1,1/e)}const yq=10*1e3,fg=1024,bq=1152;let Io=null,Zl=null;class ec{constructor(e,n,r,s=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.observer=e,this.config=n,this.typeSupported=r,this.ISGenerated=!1,Io===null){const i=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Io=i?parseInt(i[1]):0}if(Zl===null){const i=navigator.userAgent.match(/Safari\/(\d+)/i);Zl=i?parseInt(i[1]):0}}destroy(){}resetTimeStamp(e){O.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){O.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){O.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1}getVideoStartPts(e){let n=!1;const r=e.reduce((s,i)=>{const o=i.pts-s;return o<-4294967296?(n=!0,Sn(s,i.pts)):o>0?s:i.pts},e[0].pts);return n&&O.debug("PTS rollover detected"),r}remux(e,n,r,s,i,o,a,l){let c,u,d,f,h,p,g=i,v=i;const m=e.pid>-1,y=n.pid>-1,T=n.samples.length,E=e.samples.length>0,S=a&&T>0||T>1;if((!m||E)&&(!y||S)||this.ISGenerated||a){this.ISGenerated||(d=this.generateIS(e,n,i,o));const _=this.isVideoContiguous;let R=-1,k;if(S&&(R=Tq(n.samples),!_&&this.config.forceKeyFrameOnDiscontinuity))if(p=!0,R>0){O.warn(`[mp4-remuxer]: Dropped ${R} out of ${T} video samples due to a missing keyframe`);const P=this.getVideoStartPts(n.samples);n.samples=n.samples.slice(R),n.dropped+=R,v+=(n.samples[0].pts-P)/n.inputTimeScale,k=v}else R===-1&&(O.warn(`[mp4-remuxer]: No keyframe found out of ${T} video samples`),p=!1);if(this.ISGenerated){if(E&&S){const P=this.getVideoStartPts(n.samples),$=(Sn(e.samples[0].pts,P)-P)/n.inputTimeScale;g+=Math.max(0,$),v+=Math.max(0,-$)}if(E){if(e.samplerate||(O.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,n,i,o)),u=this.remuxAudio(e,g,this.isAudioContiguous,o,y||S||l===Pe.AUDIO?v:void 0),S){const P=u?u.endPTS-u.startPTS:0;n.inputTimeScale||(O.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,n,i,o)),c=this.remuxVideo(n,v,_,P)}}else S&&(c=this.remuxVideo(n,v,_,0));c&&(c.firstKeyFrame=R,c.independent=R!==-1,c.firstKeyFramePTS=k)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(r.samples.length&&(h=O1(r,i,this._initPTS,this._initDTS)),s.samples.length&&(f=M1(s,i,this._initPTS))),{audio:u,video:c,initSegment:d,independent:p,text:f,id3:h}}generateIS(e,n,r,s){const i=e.samples,o=n.samples,a=this.typeSupported,l={},c=this._initPTS;let u=!c||s,d="audio/mp4",f,h,p;if(u&&(f=h=1/0),e.config&&i.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":a.mpeg?(d="audio/mpeg",e.codec=""):a.mp3&&(e.codec="mp3");break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&a.mpeg?new Uint8Array(0):B.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(p=e.inputTimeScale,!c||p!==c.timescale?f=h=i[0].pts-Math.round(p*r):u=!1)}if(n.sps&&n.pps&&o.length&&(n.timescale=n.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:n.codec,initSegment:B.initSegment([n]),metadata:{width:n.width,height:n.height}},u))if(p=n.inputTimeScale,!c||p!==c.timescale){const g=this.getVideoStartPts(o),v=Math.round(p*r);h=Math.min(h,Sn(o[0].dts,g)-v),f=Math.min(f,g-v)}else u=!1;if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:f,timescale:p},this._initDTS={baseTime:h,timescale:p}):f=p=void 0,{tracks:l,initPTS:f,timescale:p}}remuxVideo(e,n,r,s){const i=e.inputTimeScale,o=e.samples,a=[],l=o.length,c=this._initPTS;let u=this.nextAvcDts,d=8,f=this.videoSampleDuration,h,p,g=Number.POSITIVE_INFINITY,v=Number.NEGATIVE_INFINITY,m=!1;if(!r||u===null){const q=n*i,pe=o[0].pts-Sn(o[0].dts,o[0].pts);u=q-pe}const y=c.baseTime*i/c.timescale;for(let q=0;q<l;q++){const pe=o[q];pe.pts=Sn(pe.pts-y,u),pe.dts=Sn(pe.dts-y,u),pe.dts<o[q>0?q-1:q].dts&&(m=!0)}m&&o.sort(function(q,pe){const J=q.dts-pe.dts,le=q.pts-pe.pts;return J||le}),h=o[0].dts,p=o[o.length-1].dts;const T=p-h,E=T?Math.round(T/(l-1)):f||e.inputTimeScale/30;if(r){const q=h-u,pe=q>E,J=q<-1;if((pe||J)&&(pe?O.warn(`AVC: ${ii(q,!0)} ms (${q}dts) hole between fragments detected, filling it`):O.warn(`AVC: ${ii(-q,!0)} ms (${q}dts) overlapping between fragments detected`),!J||u>=o[0].pts)){h=u;const le=o[0].pts-q;o[0].dts=h,o[0].pts=le,O.log(`Video: First PTS/DTS adjusted: ${ii(le,!0)}/${ii(h,!0)}, delta: ${ii(q,!0)} ms`)}}h=Math.max(0,h);let S=0,_=0;for(let q=0;q<l;q++){const pe=o[q],J=pe.units,le=J.length;let me=0;for(let Ve=0;Ve<le;Ve++)me+=J[Ve].data.length;_+=me,S+=le,pe.length=me,pe.dts=Math.max(pe.dts,h),g=Math.min(pe.pts,g),v=Math.max(pe.pts,v)}p=o[l-1].dts;const R=_+4*S+8;let k;try{k=new Uint8Array(R)}catch(q){this.observer.emit(b.ERROR,b.ERROR,{type:De.MUX_ERROR,details:K.REMUX_ALLOC_ERROR,fatal:!1,error:q,bytes:R,reason:`fail allocating video mdat ${R}`});return}const P=new DataView(k.buffer);P.setUint32(0,R),k.set(B.types.mdat,4);let $=!1,N=Number.POSITIVE_INFINITY,w=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,z=Number.NEGATIVE_INFINITY;for(let q=0;q<l;q++){const pe=o[q],J=pe.units;let le=0;for(let je=0,He=J.length;je<He;je++){const Je=J[je],H=Je.data,he=Je.data.byteLength;P.setUint32(d,he),d+=4,k.set(H,d),d+=he,le+=4+he}let me;if(q<l-1)f=o[q+1].dts-pe.dts,me=o[q+1].pts-pe.pts;else{const je=this.config,He=q>0?pe.dts-o[q-1].dts:E;if(me=q>0?pe.pts-o[q-1].pts:E,je.stretchShortVideoTrack&&this.nextAudioPts!==null){const Je=Math.floor(je.maxBufferHole*i),H=(s?g+s*i:this.nextAudioPts)-pe.pts;H>Je?(f=H-He,f<0?f=He:$=!0,O.log(`[mp4-remuxer]: It is approximately ${H/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=He}else f=He}const Ve=Math.round(pe.pts-pe.dts);N=Math.min(N,f),U=Math.max(U,f),w=Math.min(w,me),z=Math.max(z,me),a.push(new hg(pe.key,f,le,Ve))}if(a.length){if(Io){if(Io<70){const q=a[0].flags;q.dependsOn=2,q.isNonSync=0}}else if(Zl&&z-w<U-N&&E/U<.025&&a[0].cts===0){O.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let q=h;for(let pe=0,J=a.length;pe<J;pe++){const le=q+a[pe].duration,me=q+a[pe].cts;if(pe<J-1){const Ve=le+a[pe+1].cts;a[pe].duration=Ve-me}else a[pe].duration=pe?a[pe-1].duration:E;a[pe].cts=0,q=le}}}f=$||!f?E:f,this.nextAvcDts=u=p+f,this.videoSampleDuration=f,this.isVideoContiguous=!0;const ne=B.moof(e.sequenceNumber++,h,Rt({},e,{samples:a})),oe="video",W={data1:ne,data2:k,startPTS:g/i,endPTS:(v+f)/i,startDTS:h/i,endDTS:u/i,type:oe,hasAudio:!1,hasVideo:!0,nb:a.length,dropped:e.dropped};return e.samples=[],e.dropped=0,W}remuxAudio(e,n,r,s,i){const o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,c=e.segmentCodec==="aac"?fg:bq,u=c*l,d=this._initPTS,f=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,h=[],p=i!==void 0;let g=e.samples,v=f?0:8,m=this.nextAudioPts||-1;const y=n*o,T=d.baseTime*o/d.timescale;if(this.isAudioContiguous=r=r||g.length&&m>0&&(s&&Math.abs(y-m)<9e3||Math.abs(Sn(g[0].pts-T,y)-m)<20*u),g.forEach(function(ne){ne.pts=Sn(ne.pts-T,y)}),!r||m<0){if(g=g.filter(ne=>ne.pts>=0),!g.length)return;i===0?m=0:s&&!p?m=Math.max(0,y):m=g[0].pts}if(e.segmentCodec==="aac"){const ne=this.config.maxAudioFramesDrift;for(let oe=0,W=m;oe<g.length;oe++){const q=g[oe],pe=q.pts,J=pe-W,le=Math.abs(1e3*J/o);if(J<=-ne*u&&p)oe===0&&(O.warn(`Audio frame @ ${(pe/o).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*J/o)} ms.`),this.nextAudioPts=m=W=pe);else if(J>=ne*u&&le<yq&&p){let me=Math.round(J/u);W=pe-me*u,W<0&&(me--,W+=u),oe===0&&(this.nextAudioPts=m=W),O.warn(`[mp4-remuxer]: Injecting ${me} audio frame @ ${(W/o).toFixed(3)}s due to ${Math.round(1e3*J/o)} ms gap.`);for(let Ve=0;Ve<me;Ve++){const je=Math.max(W,0);let He=dg.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);He||(O.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),He=q.unit.subarray()),g.splice(oe,0,{unit:He,pts:je}),W+=u,oe++}}q.pts=W,W+=u}}let E=null,S=null,_,R=0,k=g.length;for(;k--;)R+=g[k].unit.byteLength;for(let ne=0,oe=g.length;ne<oe;ne++){const W=g[ne],q=W.unit;let pe=W.pts;if(S!==null){const le=h[ne-1];le.duration=Math.round((pe-S)/l)}else if(r&&e.segmentCodec==="aac"&&(pe=m),E=pe,R>0){R+=v;try{_=new Uint8Array(R)}catch(le){this.observer.emit(b.ERROR,b.ERROR,{type:De.MUX_ERROR,details:K.REMUX_ALLOC_ERROR,fatal:!1,error:le,bytes:R,reason:`fail allocating audio mdat ${R}`});return}f||(new DataView(_.buffer).setUint32(0,R),_.set(B.types.mdat,4))}else return;_.set(q,v);const J=q.byteLength;v+=J,h.push(new hg(!0,c,J,0)),S=pe}const P=h.length;if(!P)return;const $=h[h.length-1];this.nextAudioPts=m=S+l*$.duration;const N=f?new Uint8Array(0):B.moof(e.sequenceNumber++,E/l,Rt({},e,{samples:h}));e.samples=[];const w=E/o,U=m/o,z={data1:N,data2:_,startPTS:w,endPTS:U,startDTS:w,endDTS:U,type:"audio",hasAudio:!0,hasVideo:!1,nb:P};return this.isAudioContiguous=!0,z}remuxEmptyAudio(e,n,r,s){const i=e.inputTimeScale,o=e.samplerate?e.samplerate:i,a=i/o,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,d=(l!==null?l:s.startDTS*i)+u,f=s.endDTS*i+u,h=a*fg,p=Math.ceil((f-d)/h),g=dg.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(O.warn("[mp4-remuxer]: remux empty Audio"),!g){O.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const v=[];for(let m=0;m<p;m++){const y=d+m*h;v.push({unit:g,pts:y,dts:y})}return e.samples=v,this.remuxAudio(e,n,r,!1)}}function Sn(t,e){let n;if(e===null)return t;for(e<t?n=-8589934592:n=8589934592;Math.abs(t-e)>4294967296;)t+=n;return t}function Tq(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function O1(t,e,n,r){const s=t.samples.length;if(!s)return;const i=t.inputTimeScale;for(let a=0;a<s;a++){const l=t.samples[a];l.pts=Sn(l.pts-n.baseTime*i/n.timescale,e*i)/i,l.dts=Sn(l.dts-r.baseTime*i/r.timescale,e*i)/i}const o=t.samples;return t.samples=[],{samples:o}}function M1(t,e,n){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let o=0;o<r;o++){const a=t.samples[o];a.pts=Sn(a.pts-n.baseTime*s/n.timescale,e*s)/s}t.samples.sort((o,a)=>o.pts-a.pts);const i=t.samples;return t.samples=[],{samples:i}}class hg{constructor(e,n,r,s){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=n,this.size=r,this.cts=s,this.flags=new Eq(e)}}class Eq{constructor(e){this.isLeading=0,this.isDependedOn=0,this.hasRedundancy=0,this.degradPrio=0,this.dependsOn=1,this.isNonSync=1,this.dependsOn=e?2:1,this.isNonSync=e?0:1}}class Sq{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,n,r,s){this.audioCodec=n,this.videoCodec=r,this.generateInitSegment(HG(e,s)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const s=this.initData=u1(e);n||(n=pg(s.audio,ct.AUDIO)),r||(r=pg(s.video,ct.VIDEO));const i={};s.audio&&s.video?i.audiovideo={container:"video/mp4",codec:n+","+r,initSegment:e,id:"main"}:s.audio?i.audio={container:"audio/mp4",codec:n,initSegment:e,id:"audio"}:s.video?i.video={container:"video/mp4",codec:r,initSegment:e,id:"main"}:O.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=i}remux(e,n,r,s,i,o){var a,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:s,id3:r,initSegment:void 0};Re(u)||(u=this.lastEndTime=i||0);const f=n.samples;if(!(f!=null&&f.length))return d;const h={initPTS:void 0,timescale:1};let p=this.initData;if((a=p)!=null&&a.length||(this.generateInitSegment(f),p=this.initData),!((l=p)!=null&&l.length))return O.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(h.tracks=this.initTracks,this.emitInitSegment=!1);const g=KG(f,p),v=GG(p,f),m=v===null?i:v;(_q(c,m,i,g)||h.timescale!==c.timescale&&o)&&(h.initPTS=m-i,c&&c.timescale===1&&O.warn(`Adjusting initPTS by ${h.initPTS-c.baseTime}`),this.initPTS=c={baseTime:h.initPTS,timescale:1});const y=e?m-c.baseTime/c.timescale:u,T=y+g;jG(p,f,c.baseTime/c.timescale),g>0?this.lastEndTime=T:(O.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const E=!!p.audio,S=!!p.video;let _="";E&&(_+="audio"),S&&(_+="video");const R={data1:f,startPTS:y,startDTS:y,endPTS:T,endDTS:T,type:_,hasAudio:E,hasVideo:S,nb:1,dropped:0};return d.audio=R.type==="audio"?R:void 0,d.video=R.type!=="audio"?R:void 0,d.initSegment=h,d.id3=O1(r,i,c,c),s.samples.length&&(d.text=M1(s,i,c)),d}}function _q(t,e,n,r){if(t===null)return!0;const s=Math.max(r,1),i=e-t.baseTime/t.timescale;return Math.abs(i-n)>s}function pg(t,e){const n=t==null?void 0:t.codec;return n&&n.length>4?n:n==="hvc1"||n==="hev1"?"hvc1.1.6.L120.90":n==="av01"?"av01.0.04M.08":n==="avc1"||e===ct.VIDEO?"avc1.42e01e":"mp4a.40.5"}let ar;try{ar=self.performance.now.bind(self.performance)}catch{O.debug("Unable to use Performance API on this environment"),ar=typeof self<"u"&&self.Date.now}const tc=[{demux:iq,remux:Sq},{demux:Ir,remux:ec},{demux:rq,remux:ec},{demux:gq,remux:ec}];class gg{constructor(e,n,r,s,i){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=n,this.config=r,this.vendor=s,this.id=i}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,n,r,s){const i=r.transmuxing;i.executeStart=ar();let o=new Uint8Array(e);const{currentTransmuxState:a,transmuxConfig:l}=this;s&&(this.currentTransmuxState=s);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:f,timeOffset:h,initSegmentChange:p}=s||a,{audioCodec:g,videoCodec:v,defaultInitPts:m,duration:y,initSegmentData:T}=l,E=Aq(o,n);if(E&&E.method==="AES-128"){const k=this.getDecrypter();if(k.isSync()){let P=k.softwareDecrypt(o,E.key.buffer,E.iv.buffer);if(r.part>-1&&(P=k.flush()),!P)return i.executeEnd=ar(),nc(r);o=new Uint8Array(P)}else return this.decryptionPromise=k.webCryptoDecrypt(o,E.key.buffer,E.iv.buffer).then(P=>{const $=this.push(P,null,r);return this.decryptionPromise=null,$}),this.decryptionPromise}const S=this.needsProbing(u,d);if(S){const k=this.configureTransmuxer(o);if(k)return O.warn(`[transmuxer] ${k.message}`),this.observer.emit(b.ERROR,b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),i.executeEnd=ar(),nc(r)}(u||d||p||S)&&this.resetInitSegment(T,g,v,y,n),(u||p||S)&&this.resetInitialTimestamp(m),c||this.resetContiguity();const _=this.transmux(o,E,h,f,r),R=this.currentTransmuxState;return R.contiguous=!0,R.discontinuity=!1,R.trackSwitch=!1,i.executeEnd=ar(),_}flush(e){const n=e.transmuxing;n.executeStart=ar();const{decrypter:r,currentTransmuxState:s,decryptionPromise:i}=this;if(i)return i.then(()=>this.flush(e));const o=[],{timeOffset:a}=s;if(r){const d=r.flush();d&&o.push(this.push(d,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return n.executeEnd=ar(),[nc(e)];const u=l.flush(a);return Ho(u)?u.then(d=>(this.flushRemux(o,d,e),o)):(this.flushRemux(o,u,e),o)}flushRemux(e,n,r){const{audioTrack:s,videoTrack:i,id3Track:o,textTrack:a}=n,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;O.log(`[transmuxer.ts]: Flushed fragment ${r.sn}${r.part>-1?" p: "+r.part:""} of level ${r.level}`);const u=this.remuxer.remux(s,i,o,a,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:r}),r.transmuxing.executeEnd=ar()}resetInitialTimestamp(e){const{demuxer:n,remuxer:r}=this;!n||!r||(n.resetTimeStamp(e),r.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:n}=this;!e||!n||(e.resetContiguity(),n.resetNextTimestamp())}resetInitSegment(e,n,r,s,i){const{demuxer:o,remuxer:a}=this;!o||!a||(o.resetInitSegment(e,n,r,s),a.resetInitSegment(e,n,r,i))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,n,r,s,i){let o;return n&&n.method==="SAMPLE-AES"?o=this.transmuxSampleAes(e,n,r,s,i):o=this.transmuxUnencrypted(e,r,s,i),o}transmuxUnencrypted(e,n,r,s){const{audioTrack:i,videoTrack:o,id3Track:a,textTrack:l}=this.demuxer.demux(e,n,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(i,o,a,l,n,r,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,n,r,s,i){return this.demuxer.demuxSampleAes(e,n,r).then(o=>({remuxResult:this.remuxer.remux(o.audioTrack,o.videoTrack,o.id3Track,o.textTrack,r,s,!1,this.id),chunkMeta:i}))}configureTransmuxer(e){const{config:n,observer:r,typeSupported:s,vendor:i}=this;let o;for(let d=0,f=tc.length;d<f;d++)if(tc[d].demux.probe(e)){o=tc[d];break}if(!o)return new Error("Failed to find demuxer by probing fragment data");const a=this.demuxer,l=this.remuxer,c=o.remux,u=o.demux;(!l||!(l instanceof c))&&(this.remuxer=new c(r,n,s,i)),(!a||!(a instanceof u))&&(this.demuxer=new u(r,n,s),this.probe=u.probe)}needsProbing(e,n){return!this.demuxer||!this.remuxer||e||n}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new $d(this.config)),e}}function Aq(t,e){let n=null;return t.byteLength>0&&e!=null&&e.key!=null&&e.iv!==null&&e.method!=null&&(n=e),n}const nc=t=>({remuxResult:{},chunkMeta:t});function Ho(t){return"then"in t&&t.then instanceof Function}class wq{constructor(e,n,r,s,i){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=n,this.initSegmentData=r,this.duration=s,this.defaultInitPts=i||null}}class Lq{constructor(e,n,r,s,i,o){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=n,this.accurateTimeOffset=r,this.trackSwitch=s,this.timeOffset=i,this.initSegmentChange=o}}var x1={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function i(l,c,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new s(u,d||l,f),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],h]:l._events[p].push(h):(l._events[p]=h,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],c,u;if(this._eventsCount===0)return l;for(u in c=this._events)e.call(c,u)&&l.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},a.prototype.listeners=function(l){var c=n?n+l:l,u=this._events[c];if(!u)return[];if(u.fn)return[u.fn];for(var d=0,f=u.length,h=new Array(f);d<f;d++)h[d]=u[d].fn;return h},a.prototype.listenerCount=function(l){var c=n?n+l:l,u=this._events[c];return u?u.fn?1:u.length:0},a.prototype.emit=function(l,c,u,d,f,h){var p=n?n+l:l;if(!this._events[p])return!1;var g=this._events[p],v=arguments.length,m,y;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),v){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,u),!0;case 4:return g.fn.call(g.context,c,u,d),!0;case 5:return g.fn.call(g.context,c,u,d,f),!0;case 6:return g.fn.call(g.context,c,u,d,f,h),!0}for(y=1,m=new Array(v-1);y<v;y++)m[y-1]=arguments[y];g.fn.apply(g.context,m)}else{var T=g.length,E;for(y=0;y<T;y++)switch(g[y].once&&this.removeListener(l,g[y].fn,void 0,!0),v){case 1:g[y].fn.call(g[y].context);break;case 2:g[y].fn.call(g[y].context,c);break;case 3:g[y].fn.call(g[y].context,c,u);break;case 4:g[y].fn.call(g[y].context,c,u,d);break;default:if(!m)for(E=1,m=new Array(v-1);E<v;E++)m[E-1]=arguments[E];g[y].fn.apply(g[y].context,m)}}return!0},a.prototype.on=function(l,c,u){return i(this,l,c,u,!1)},a.prototype.once=function(l,c,u){return i(this,l,c,u,!0)},a.prototype.removeListener=function(l,c,u,d){var f=n?n+l:l;if(!this._events[f])return this;if(!c)return o(this,f),this;var h=this._events[f];if(h.fn)h.fn===c&&(!d||h.once)&&(!u||h.context===u)&&o(this,f);else{for(var p=0,g=[],v=h.length;p<v;p++)(h[p].fn!==c||d&&!h[p].once||u&&h[p].context!==u)&&g.push(h[p]);g.length?this._events[f]=g.length===1?g[0]:g:o(this,f)}return this},a.prototype.removeAllListeners=function(l){var c;return l?(c=n?n+l:l,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(x1);var Iq=x1.exports,Md=fG(Iq);const rc=Qa()||{isTypeSupported:()=>!1};class F1{constructor(e,n,r,s){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const i=e.config;this.hls=e,this.id=n,this.useWorker=!!i.enableWorker,this.onTransmuxComplete=r,this.onFlush=s;const o=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===b.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new Md,this.observer.on(b.FRAG_DECRYPTED,o),this.observer.on(b.ERROR,o);const a={mp4:rc.isTypeSupported("video/mp4"),mpeg:rc.isTypeSupported("audio/mpeg"),mp3:rc.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(this.useWorker&&typeof Worker<"u"&&(i.workerPath||WK())){try{i.workerPath?(O.log(`loading Web Worker ${i.workerPath} for "${n}"`),this.workerContext=XK(i.workerPath)):(O.log(`injecting Web Worker for "${n}"`),this.workerContext=YK()),this.onwmsg=u=>this.onWorkerMessage(u);const{worker:c}=this.workerContext;c.addEventListener("message",this.onwmsg),c.onerror=u=>{const d=new Error(`${u.message}  (${u.filename}:${u.lineno})`);i.enableWorker=!1,O.warn(`Error in "${n}" Web Worker, fallback to inline`),this.hls.trigger(b.ERROR,{type:De.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})},c.postMessage({cmd:"init",typeSupported:a,vendor:l,id:n,config:JSON.stringify(i)})}catch(c){O.warn(`Error setting up "${n}" Web Worker, fallback to inline`,c),this.resetWorker(),this.error=null,this.transmuxer=new gg(this.observer,a,i,l,n)}return}this.transmuxer=new gg(this.observer,a,i,l,n)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:n}=this.workerContext;n&&self.URL.revokeObjectURL(n),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const n=this.transmuxer;n&&(n.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,n,r,s,i,o,a,l,c,u){var d,f;c.transmuxing.start=self.performance.now();const{transmuxer:h}=this,p=o?o.start:i.start,g=i.decryptdata,v=this.frag,m=!(v&&i.cc===v.cc),y=!(v&&c.level===v.level),T=v?c.sn-v.sn:-1,E=this.part?c.part-this.part.index:-1,S=T===0&&c.id>1&&c.id===(v==null?void 0:v.stats.chunkCount),_=!y&&(T===1||T===0&&(E===1||S&&E<=0)),R=self.performance.now();(y||T||i.stats.parsing.start===0)&&(i.stats.parsing.start=R),o&&(E||!_)&&(o.stats.parsing.start=R);const k=!(v&&((d=i.initSegment)==null?void 0:d.url)===((f=v.initSegment)==null?void 0:f.url)),P=new Lq(m,_,l,y,p,k);if(!_||m||k){O.log(`[transmuxer-interface, ${i.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${m}
        trackSwitch: ${y}
        contiguous: ${_}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${k}`);const $=new wq(r,s,n,a,u);this.configureTransmuxer($)}if(this.frag=i,this.part=o,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:c,state:P},e instanceof ArrayBuffer?[e]:[]);else if(h){const $=h.push(e,g,c,P);Ho($)?(h.async=!0,$.then(N=>{this.handleTransmuxComplete(N)}).catch(N=>{this.transmuxerError(N,c,"transmuxer-interface push error")})):(h.async=!1,this.handleTransmuxComplete($))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(n){let r=n.flush(e);Ho(r)||n.async?(Ho(r)||(r=Promise.resolve(r)),r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(r,e)}}transmuxerError(e,n,r){this.hls&&(this.error=e,this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_PARSING_ERROR,chunkMeta:n,fatal:!1,error:e,err:e,reason:r}))}handleFlushResult(e,n){e.forEach(r=>{this.handleTransmuxComplete(r)}),this.onFlush(n)}onWorkerMessage(e){const n=e.data,r=this.hls;switch(n.event){case"init":{var s;const i=(s=this.workerContext)==null?void 0:s.objectURL;i&&self.URL.revokeObjectURL(i);break}case"transmuxComplete":{this.handleTransmuxComplete(n.data);break}case"flush":{this.onFlush(n.data);break}case"workerLog":O[n.data.logType]&&O[n.data.logType](n.data.message);break;default:{n.data=n.data||{},n.data.frag=this.frag,n.data.id=this.id,r.trigger(n.event,n.data);break}}}configureTransmuxer(e){const{transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Cq=250,sc=2,Rq=.1,$q=.05;class kq{constructor(e,n,r,s){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=n,this.fragmentTracker=r,this.hls=s}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,n){const{config:r,media:s,stalled:i}=this;if(s===null)return;const{currentTime:o,seeking:a}=s,l=this.seeking&&!a,c=!this.seeking&&a;if(this.seeking=a,o!==e){if(this.moved=!0,i!==null){if(this.stallReported){const m=self.performance.now()-i;O.warn(`playback not stuck anymore @${o}, after ${Math.round(m)}ms`),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}return}if(c||l){this.stalled=null;return}if(s.paused&&!a||s.ended||s.playbackRate===0||!ht.getBuffered(s).length)return;const u=ht.bufferInfo(s,o,0),d=u.len>0,f=u.nextStart||0;if(!d&&!f)return;if(a){const m=u.len>sc,y=!f||n&&n.start<=o||f-o>sc&&!this.fragmentTracker.getPartialFragment(o);if(m||y)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;const m=Math.max(f,u.start||0)-o,y=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,T=!(y==null||(h=y.details)==null)&&h.live?y.details.targetduration*2:sc,E=this.fragmentTracker.getPartialFragment(o);if(m>0&&(m<=T||E)){this._trySkipBufferHole(E);return}}const p=self.performance.now();if(i===null){this.stalled=p;return}const g=p-i;if(!a&&g>=Cq&&(this._reportStall(u),!this.media))return;const v=ht.bufferInfo(s,o,r.maxBufferHole);this._tryFixBufferStall(v,g)}_tryFixBufferStall(e,n){const{config:r,fragmentTracker:s,media:i}=this;if(i===null)return;const o=i.currentTime,a=s.getPartialFragment(o);a&&(this._trySkipBufferHole(a)||!this.media)||(e.len>r.maxBufferHole||e.nextStart&&e.nextStart-o<r.maxBufferHole)&&n>r.highBufferWatchdogPeriod*1e3&&(O.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:n,media:r,stallReported:s}=this;if(!s&&r){this.stallReported=!0;const i=new Error(`Playback stalling at @${r.currentTime} due to low buffer (${JSON.stringify(e)})`);O.warn(i.message),n.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_STALLED_ERROR,fatal:!1,error:i,buffer:e.len})}}_trySkipBufferHole(e){const{config:n,hls:r,media:s}=this;if(s===null)return 0;const i=s.currentTime,o=ht.bufferInfo(s,i,0),a=i<o.start?o.start:o.nextStart;if(a){const l=o.len<=n.maxBufferHole,c=o.len>0&&o.len<1&&s.readyState<3,u=a-i;if(u>0&&(l||c)){if(u>n.maxBufferHole){const{fragmentTracker:f}=this;let h=!1;if(i===0){const p=f.getAppendedFrag(0,Pe.MAIN);p&&a<p.end&&(h=!0)}if(!h){const p=e||f.getAppendedFrag(i,Pe.MAIN);if(p){let g=!1,v=p.end;for(;v<a;){const m=f.getPartialFragment(v);if(m)v+=m.duration;else{g=!0;break}}if(g)return 0}}}const d=Math.max(a+$q,i+Rq);if(O.warn(`skipping hole, adjusting currentTime from ${i} to ${d}`),this.moved=!0,this.stalled=null,s.currentTime=d,e&&!e.gap){const f=new Error(`fragment loaded with buffer holes, seeking from ${i} to ${d}`);r.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:f,reason:f.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:n,media:r,nudgeRetry:s}=this;if(r===null)return;const i=r.currentTime;if(this.nudgeRetry++,s<e.nudgeMaxRetry){const o=i+(s+1)*e.nudgeOffset,a=new Error(`Nudging 'currentTime' from ${i} to ${o}`);O.warn(a.message),r.currentTime=o,n.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_NUDGE_ON_STALL,error:a,fatal:!1})}else{const o=new Error(`Playhead still not moving while enough data buffered @${i} after ${e.nudgeMaxRetry} nudges`);O.error(o.message),n.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_STALLED_ERROR,error:o,fatal:!0})}}}const Dq=100;class Pq extends kd{constructor(e,n,r){super(e,n,r,"[stream-controller]",Pe.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.LEVEL_LOADING,this.onLevelLoading,this),e.on(b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(b.ERROR,this.onError,this),e.on(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(b.BUFFER_CREATED,this.onBufferCreated,this),e.on(b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(b.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(b.ERROR,this.onError,this),e.off(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(b.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(b.BUFFER_CREATED,this.onBufferCreated,this),e.off(b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(b.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),this.onMediaDetaching()}startLoad(e){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(Dq),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.nextAutoLevel),this.level=r.nextLoadLevel=s,this.loadedmetadata=!1}n>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=ee.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=ee.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case ee.WAITING_LEVEL:{var e;const{levels:r,level:s}=this,i=r==null||(e=r[s])==null?void 0:e.details;if(i&&(!i.live||this.levelLastLoaded===this.level)){if(this.waitForCdnTuneIn(i))break;this.state=ee.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=ee.IDLE;break}break}case ee.FRAG_LOADING_WAITING_RETRY:{var n;const r=self.performance.now(),s=this.retryDate;(!s||r>=s||(n=this.media)!=null&&n.seeking)&&(this.resetStartWhenNotLoaded(this.level),this.state=ee.IDLE)}break}this.state===ee.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:n,levels:r,media:s}=this,{config:i,nextLoadLevel:o}=e;if(n===null||!s&&(this.startFragRequested||!i.startFragPrefetch)||this.altAudio&&this.audioOnly||!(r!=null&&r[o]))return;const a=r[o],l=this.getMainFwdBufferInfo();if(l===null)return;const c=this.getLevelDetails();if(c&&this._streamEnded(l,c)){const v={};this.altAudio&&(v.type="video"),this.hls.trigger(b.BUFFER_EOS,v),this.state=ee.ENDED;return}e.loadLevel!==o&&e.manualLevel===-1&&this.log(`Adapting to level ${o} from level ${this.level}`),this.level=e.nextLoadLevel=o;const u=a.details;if(!u||this.state===ee.WAITING_LEVEL||u.live&&this.levelLastLoaded!==o){this.level=o,this.state=ee.WAITING_LEVEL;return}const d=l.len,f=this.getMaxBufferLength(a.maxBitrate);if(d>=f)return;this.backtrackFragment&&this.backtrackFragment.start>l.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:l.end;let p=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&p&&p.sn!=="initSegment"&&this.fragmentTracker.getState(p)!==$t.OK){var g;const v=((g=this.backtrackFragment)!=null?g:p).sn-u.startSN,m=u.fragments[v-1];m&&p.cc===m.cc&&(p=m,this.fragmentTracker.removeFragment(m))}else this.backtrackFragment&&l.len&&(this.backtrackFragment=null);if(p&&this.isLoopLoading(p,h)){if(!p.gap){const v=this.audioOnly&&!this.altAudio?ct.AUDIO:ct.VIDEO,m=(v===ct.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;m&&this.afterBufferFlushed(m,v,Pe.MAIN)}p=this.getNextFragmentLoopLoading(p,u,l,Pe.MAIN,f)}p&&(p.initSegment&&!p.initSegment.data&&!this.bitrateTest&&(p=p.initSegment),this.loadFragment(p,a,h))}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);this.fragCurrent=e,s===$t.NOT_LOADED||s===$t.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,n):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,n)):(this.startFragRequested=!0,super.loadFragment(e,n,r)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,Pe.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:n}=this;if(n!=null&&n.readyState){let r;const s=this.getAppendedFrag(n.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const i=this.getLevelDetails();if(i!=null&&i.live){const a=this.getMainFwdBufferInfo();if(!a||a.len<i.targetduration*2)return}if(!n.paused&&e){const a=this.hls.nextLoadLevel,l=e[a],c=this.fragLastKbps;c&&this.fragCurrent?r=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:r=0}else r=0;const o=this.getBufferedFrag(n.currentTime+r);if(o){const a=this.followingBufferedFrag(o);if(a){this.abortCurrentFrag();const l=a.maxStartPTS?a.maxStartPTS:a.start,c=a.duration,u=Math.max(o.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*.5),c*.75));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case ee.KEY_LOADING:case ee.FRAG_LOADING:case ee.FRAG_LOADING_WAITING_RETRY:case ee.PARSING:case ee.PARSED:this.state=ee.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,n){super.flushMainBuffer(e,n,this.altAudio?"video":null)}onMediaAttached(e,n){super.onMediaAttached(e,n);const r=n.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),r.addEventListener("playing",this.onvplaying),r.addEventListener("seeked",this.onvseeked),this.gapController=new kq(this.config,r,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,n=e?e.currentTime:null;Re(n)&&this.log(`Media seeked to ${n.toFixed(3)}`);const r=this.getMainFwdBufferInfo();if(r===null||r.len===0){this.warn(`Main forward buffer length on "seeked" event ${r?r.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(b.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=0,this.levels=this.fragPlaying=this.backtrackFragment=null,this.altAudio=this.audioOnly=!1}onManifestParsed(e,n){let r=!1,s=!1,i;n.levels.forEach(o=>{i=o.audioCodec,i&&(i.indexOf("mp4a.40.2")!==-1&&(r=!0),i.indexOf("mp4a.40.5")!==-1&&(s=!0))}),this.audioCodecSwitch=r&&s&&!zK(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=n.levels,this.startFragRequested=!1}onLevelLoading(e,n){const{levels:r}=this;if(!r||this.state!==ee.IDLE)return;const s=r[n.level];(!s.details||s.details.live&&this.levelLastLoaded!==n.level||this.waitForCdnTuneIn(s.details))&&(this.state=ee.WAITING_LEVEL)}onLevelLoaded(e,n){var r;const{levels:s}=this,i=n.level,o=n.details,a=o.totalduration;if(!s){this.warn(`Levels were reset while loading level ${i}`);return}this.log(`Level ${i} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${a}`);const l=s[i],c=this.fragCurrent;c&&(this.state===ee.FRAG_LOADING||this.state===ee.FRAG_LOADING_WAITING_RETRY)&&(c.level!==n.level||c.urlId!==l.urlId)&&c.loader&&this.abortCurrentFrag();let u=0;if(o.live||(r=l.details)!=null&&r.live){if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;u=this.alignPlaylists(o,l.details)}if(l.details=o,this.levelLastLoaded=i,this.hls.trigger(b.LEVEL_UPDATED,{details:o,level:i}),this.state===ee.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=ee.IDLE}this.startFragRequested?o.live&&this.synchronizeToLiveEdge(o):this.setStartPosition(o,u),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{levels:o}=this;if(!o){this.warn(`Levels were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const a=o[r.level],l=a.details;if(!l){this.warn(`Dropping fragment ${r.sn} of level ${r.level} after level details were reset`),this.fragmentTracker.removeFragment(r);return}const c=a.videoCodec,u=l.PTSKnown||!l.live,d=(n=r.initSegment)==null?void 0:n.data,f=this._getAudioCodec(a),h=this.transmuxer=this.transmuxer||new F1(this.hls,Pe.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),p=s?s.index:-1,g=p!==-1,v=new Cd(r.level,r.sn,r.stats.chunkCount,i.byteLength,p,g),m=this.initPTS[r.cc];h.push(i,d,f,c,r,s,l.totalduration,u,v,m)}onAudioTrackSwitching(e,n){const r=this.altAudio;if(!n.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const i=this.fragCurrent;i&&(this.log("Switching to main audio track, cancel main fragment load"),i.abortRequests(),this.fragmentTracker.removeFragment(i)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;r&&(s.trigger(b.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(b.AUDIO_TRACK_SWITCHED,n)}}onAudioTrackSwitched(e,n){const r=n.id,s=!!this.hls.audioTracks[r].url;if(s){const i=this.videoBuffer;i&&this.mediaBuffer!==i&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=i)}this.altAudio=s,this.tick()}onBufferCreated(e,n){const r=n.tracks;let s,i,o=!1;for(const a in r){const l=r[a];if(l.id==="main"){if(i=a,s=l,a==="video"){const c=r[a];c&&(this.videoBuffer=c.buffer)}}else o=!0}o&&s?(this.log(`Alternate track found, use ${i}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r&&r.type!==Pe.MAIN)return;if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}`),this.state===ee.PARSED&&(this.state=ee.IDLE);return}const i=s?s.stats:r.stats;this.fragLastKbps=Math.round(8*i.total/(i.buffering.end-i.loading.first)),r.sn!=="initSegment"&&(this.fragPrevious=r),this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case K.FRAG_GAP:case K.FRAG_PARSING_ERROR:case K.FRAG_DECRYPT_ERROR:case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pe.MAIN,n);break;case K.LEVEL_LOAD_ERROR:case K.LEVEL_LOAD_TIMEOUT:case K.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_LEVEL&&((r=n.context)==null?void 0:r.type)===tt.LEVEL&&(this.state=ee.IDLE);break;case K.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="main")return;this.reduceLengthAndFlushBuffer(n)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case K.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}checkBuffer(){const{media:e,gapController:n}=this;if(!(!e||!n||!e.readyState)){if(this.loadedmetadata||!ht.getBuffered(e).length){const r=this.state!==ee.IDLE?this.fragCurrent:null;n.poll(this.lastCurrentTime,r)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=ee.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:n}){if(n!==ct.AUDIO||this.audioOnly&&!this.altAudio){const r=(n===ct.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(r,n,Pe.MAIN)}}onLevelsUpdated(e,n){this.levels=n.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const n=e.currentTime;let r=this.startPosition;if(r>=0&&n<r){if(e.seeking){this.log(`could not seek to ${r}, already seeking at ${n}`);return}const s=ht.getBuffered(e),i=(s.length?s.start(0):0)-r;i>0&&(i<this.config.maxBufferHole||i<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${i} to match buffer start`),r+=i,this.startPosition=r),this.log(`seek to target start position ${r} from current time ${n}`),e.currentTime=r}}_getAudioCodec(e){let n=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&n&&(this.log("Swapping audio codec"),n.indexOf("mp4a.40.5")!==-1?n="mp4a.40.2":n="mp4a.40.5"),n}_loadBitrateTestFrag(e,n){e.bitrateTest=!0,this._doFragLoad(e,n).then(r=>{const{hls:s}=this;if(!r||this.fragContextChanged(e))return;n.fragmentError=0,this.state=ee.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const i=e.stats;i.parsing.start=i.parsing.end=i.buffering.start=i.buffering.end=self.performance.now(),s.trigger(b.FRAG_LOADED,r),e.bitrateTest=!1})}_handleTransmuxComplete(e){var n;const r="main",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{video:d,text:f,id3:h,initSegment:p}=i,{details:g}=u,v=this.altAudio?void 0:i.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=ee.PARSING,p){if(p!=null&&p.tracks){const T=l.initSegment||l;this._bufferInitSegment(u,p.tracks,T,o),s.trigger(b.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:r,tracks:p.tracks})}const m=p.initPTS,y=p.timescale;Re(m)&&(this.initPTS[l.cc]={baseTime:m,timescale:y},s.trigger(b.INIT_PTS_FOUND,{frag:l,id:r,initPTS:m,timescale:y}))}if(d&&g&&l.sn!=="initSegment"){const m=g.fragments[l.sn-1-g.startSN],y=l.sn===g.startSN,T=!m||l.cc>m.cc;if(i.independent!==!1){const{startPTS:E,endPTS:S,startDTS:_,endDTS:R}=d;if(c)c.elementaryStreams[d.type]={startPTS:E,endPTS:S,startDTS:_,endDTS:R};else if(d.firstKeyFrame&&d.independent&&o.id===1&&!T&&(this.couldBacktrack=!0),d.dropped&&d.independent){const k=this.getMainFwdBufferInfo(),P=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,$=d.firstKeyFramePTS?d.firstKeyFramePTS:E;if(!y&&P<$-this.config.maxBufferHole&&!T){this.backtrack(l);return}else T&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,S,l.start,R,!0)}l.setElementaryStreamInfo(d.type,E,S,_,R),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,o,y||T)}else if(y||T)l.gap=!0;else{this.backtrack(l);return}}if(v){const{startPTS:m,endPTS:y,startDTS:T,endDTS:E}=v;c&&(c.elementaryStreams[ct.AUDIO]={startPTS:m,endPTS:y,startDTS:T,endDTS:E}),l.setElementaryStreamInfo(ct.AUDIO,m,y,T,E),this.bufferFragmentData(v,l,c,o)}if(g&&h!=null&&(n=h.samples)!=null&&n.length){const m={id:r,frag:l,details:g,samples:h.samples};s.trigger(b.FRAG_PARSING_METADATA,m)}if(g&&f){const m={id:r,frag:l,details:g,samples:f.samples};s.trigger(b.FRAG_PARSING_USERDATA,m)}}_bufferInitSegment(e,n,r,s){if(this.state!==ee.PARSING)return;this.audioOnly=!!n.audio&&!n.video,this.altAudio&&!this.audioOnly&&delete n.audio;const{audio:i,video:o,audiovideo:a}=n;if(i){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5"),i.metadata.channelCount!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")),c.indexOf("android")!==-1&&i.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),i.levelCodec=l,i.id="main",this.log(`Init audio buffer, container:${i.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${i.codec}]`)}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log(`Init video buffer, container:${o.container}, codecs[level/parsed]=[${e.videoCodec||""}/${o.codec}]`)),a&&this.log(`Init audiovideo buffer, container:${a.container}, codecs[level/parsed]=[${e.attrs.CODECS||""}/${a.codec}]`),this.hls.trigger(b.BUFFER_CODECS,n),Object.keys(n).forEach(l=>{const c=n[l].initSegment;c!=null&&c.byteLength&&this.hls.trigger(b.BUFFER_APPENDING,{type:l,data:c,frag:r,part:null,chunkMeta:s,parent:r.type})}),this.tick()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,Pe.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=ee.IDLE}checkFragmentChanged(){const e=this.media;let n=null;if(e&&e.readyState>1&&e.seeking===!1){const r=e.currentTime;if(ht.isBuffered(e,r)?n=this.getAppendedFrag(r):ht.isBuffered(e,r+.1)&&(n=this.getAppendedFrag(r+.1)),n){this.backtrackFragment=null;const s=this.fragPlaying,i=n.level;(!s||n.sn!==s.sn||s.level!==i||n.urlId!==s.urlId)&&(this.fragPlaying=n,this.hls.trigger(b.FRAG_CHANGED,{frag:n}),(!s||s.level!==i)&&this.hls.trigger(b.LEVEL_SWITCHED,{level:i}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const n=e.currentTime,r=this.currentFrag;if(r&&Re(n)&&Re(r.programDateTime)){const s=r.programDateTime+(n-r.start)*1e3;return new Date(s)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Ts{constructor(e,n=0,r=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=n,this.totalWeight_=r}sample(e,n){const r=Math.pow(this.alpha_,e);this.estimate_=n*(1-r)+r*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Oq{constructor(e,n,r,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=r,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Ts(e),this.fast_=new Ts(n),this.defaultTTFB_=s,this.ttfb_=new Ts(e)}update(e,n){const{slow_:r,fast_:s,ttfb_:i}=this;r.halfLife!==e&&(this.slow_=new Ts(e,r.getEstimate(),r.getTotalWeight())),s.halfLife!==n&&(this.fast_=new Ts(n,s.getEstimate(),s.getTotalWeight())),i.halfLife!==e&&(this.ttfb_=new Ts(e,i.getEstimate(),i.getTotalWeight()))}sample(e,n){e=Math.max(e,this.minDelayMs_);const r=8*n,s=e/1e3,i=r/s;this.fast_.sample(s,i),this.slow_.sample(s,i)}sampleTTFB(e){const n=e/1e3,r=Math.sqrt(2)*Math.exp(-Math.pow(n,2)/2);this.ttfb_.sample(r,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}class Mq{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=-1,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this.hls=e;const n=e.config;this.bwEstimator=new Oq(n.abrEwmaSlowVoD,n.abrEwmaFastVoD,n.abrEwmaDefaultEstimate),this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(b.FRAG_LOADING,this.onFragLoading,this),e.on(b.FRAG_LOADED,this.onFragLoaded,this),e.on(b.FRAG_BUFFERED,this.onFragBuffered,this),e.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(b.LEVEL_LOADED,this.onLevelLoaded,this)}unregisterListeners(){const{hls:e}=this;e.off(b.FRAG_LOADING,this.onFragLoading,this),e.off(b.FRAG_LOADED,this.onFragLoaded,this),e.off(b.FRAG_BUFFERED,this.onFragBuffered,this),e.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(b.LEVEL_LOADED,this.onLevelLoaded,this)}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this.onCheck=null,this.fragCurrent=this.partCurrent=null}onFragLoading(e,n){var r;const s=n.frag;this.ignoreFragment(s)||(this.fragCurrent=s,this.partCurrent=(r=n.part)!=null?r:null,this.clearTimer(),this.timer=self.setInterval(this.onCheck,100))}onLevelSwitching(e,n){this.clearTimer()}getTimeToLoadFrag(e,n,r,s){const i=e+r/n,o=s?this.lastLevelLoadSec:0;return i+o}onLevelLoaded(e,n){const r=this.hls.config,{total:s,bwEstimate:i}=n.stats;Re(s)&&Re(i)&&(this.lastLevelLoadSec=8*s/i),n.details.live?this.bwEstimator.update(r.abrEwmaSlowLive,r.abrEwmaFastLive):this.bwEstimator.update(r.abrEwmaSlowVoD,r.abrEwmaFastVoD)}_abandonRulesCheck(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{autoLevelEnabled:s,media:i}=r;if(!e||!i)return;const o=performance.now(),a=n?n.stats:e.stats,l=n?n.duration:e.duration,c=o-a.loading.start;if(a.aborted||a.loaded&&a.loaded===a.total||e.level===0){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||i.paused||!i.playbackRate||!i.readyState)return;const u=r.mainForwardBufferInfo;if(u===null)return;const d=this.bwEstimator.getEstimateTTFB(),f=Math.abs(i.playbackRate);if(c<=Math.max(d,1e3*(l/(f*2))))return;const h=u.len/f;if(h>=2*l/f)return;const p=a.loading.first?a.loading.first-a.loading.start:-1,g=a.loaded&&p>-1,v=this.bwEstimator.getEstimate(),{levels:m,minAutoLevel:y}=r,T=m[e.level],E=a.total||Math.max(a.loaded,Math.round(l*T.maxBitrate/8));let S=c-p;S<1&&g&&(S=Math.min(c,a.loaded*8/v));const _=g?a.loaded*1e3/S:0,R=_?(E-a.loaded)/_:E*8/v+d/1e3;if(R<=h)return;const k=_?_*8:v;let P=Number.POSITIVE_INFINITY,$;for($=e.level-1;$>y;$--){const N=m[$].maxBitrate;if(P=this.getTimeToLoadFrag(d/1e3,k,l*N,!m[$].details),P<h)break}P>=R||P>l*10||(r.nextLoadLevel=$,g?this.bwEstimator.sample(c-Math.min(d,p),a.loaded):this.bwEstimator.sampleTTFB(c),this.clearTimer(),O.warn(`[abr] Fragment ${e.sn}${n?" part "+n.index:""} of level ${e.level} is loading too slowly;
      Time to underbuffer: ${h.toFixed(3)} s
      Estimated load time for current fragment: ${R.toFixed(3)} s
      Estimated load time for down switch fragment: ${P.toFixed(3)} s
      TTFB estimate: ${p}
      Current BW estimate: ${Re(v)?(v/1024).toFixed(3):"Unknown"} Kb/s
      New BW estimate: ${(this.bwEstimator.getEstimate()/1024).toFixed(3)} Kb/s
      Aborting and switching to level ${$}`),e.loader&&(this.fragCurrent=this.partCurrent=null,e.abortRequests()),r.trigger(b.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:n,stats:a}))}onFragLoaded(e,{frag:n,part:r}){const s=r?r.stats:n.stats;if(n.type===Pe.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(n)){if(this.clearTimer(),this.lastLoadedFragLevel=n.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){const i=r?r.duration:n.duration,o=this.hls.levels[n.level],a=(o.loaded?o.loaded.bytes:0)+s.loaded,l=(o.loaded?o.loaded.duration:0)+i;o.loaded={bytes:a,duration:l},o.realBitrate=Math.round(8*a/l)}if(n.bitrateTest){const i={stats:s,frag:n,part:r,id:n.type};this.onFragBuffered(b.FRAG_BUFFERED,i),n.bitrateTest=!1}}}onFragBuffered(e,n){const{frag:r,part:s}=n,i=s!=null&&s.stats.loaded?s.stats:r.stats;if(i.aborted||this.ignoreFragment(r))return;const o=i.parsing.end-i.loading.start-Math.min(i.loading.first-i.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(o,i.loaded),i.bwEstimate=this.bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=o/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==Pe.MAIN||e.sn==="initSegment"}clearTimer(){self.clearInterval(this.timer)}get nextAutoLevel(){const e=this._nextAutoLevel,n=this.bwEstimator;if(e!==-1&&!n.canEstimate())return e;let r=this.getNextABRAutoLevel();if(e!==-1){const s=this.hls.levels;if(s.length>Math.max(e,r)&&s[e].loadError<=s[r].loadError)return e}return e!==-1&&(r=Math.min(e,r)),r}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:n,hls:r}=this,{maxAutoLevel:s,config:i,minAutoLevel:o,media:a}=r,l=n?n.duration:e?e.duration:0,c=a&&a.playbackRate!==0?Math.abs(a.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():i.abrEwmaDefaultEstimate,d=r.mainForwardBufferInfo,f=(d?d.len:0)/c;let h=this.findBestLevel(u,o,s,f,i.abrBandWidthFactor,i.abrBandWidthUpFactor);if(h>=0)return h;O.trace(`[abr] ${f?"rebuffering expected":"buffer is empty"}, finding optimal quality level`);let p=l?Math.min(l,i.maxStarvationDelay):i.maxStarvationDelay,g=i.abrBandWidthFactor,v=i.abrBandWidthUpFactor;if(!f){const m=this.bitrateTestDelay;m&&(p=(l?Math.min(l,i.maxLoadingDelay):i.maxLoadingDelay)-m,O.trace(`[abr] bitrate test took ${Math.round(1e3*m)}ms, set first fragment max fetchDuration to ${Math.round(1e3*p)} ms`),g=v=1)}return h=this.findBestLevel(u,o,s,f+p,g,v),Math.max(h,0)}findBestLevel(e,n,r,s,i,o){var a;const{fragCurrent:l,partCurrent:c,lastLoadedFragLevel:u}=this,{levels:d}=this.hls,f=d[u],h=!!(f!=null&&(a=f.details)!=null&&a.live),p=f==null?void 0:f.codecSet,g=c?c.duration:l?l.duration:0,v=this.bwEstimator.getEstimateTTFB()/1e3;let m=n,y=-1;for(let T=r;T>=n;T--){const E=d[T];if(!E||p&&E.codecSet!==p){E&&(m=Math.min(T,m),y=Math.max(T,y));continue}y!==-1&&O.trace(`[abr] Skipped level(s) ${m}-${y} with CODECS:"${d[y].attrs.CODECS}"; not compatible with "${f.attrs.CODECS}"`);const S=E.details,_=(c?S==null?void 0:S.partTarget:S==null?void 0:S.averagetargetduration)||g;let R;T<=u?R=i*e:R=o*e;const k=d[T].maxBitrate,P=this.getTimeToLoadFrag(v,R,k*_,S===void 0);if(O.trace(`[abr] level:${T} adjustedbw-bitrate:${Math.round(R-k)} avgDuration:${_.toFixed(1)} maxFetchDuration:${s.toFixed(1)} fetchDuration:${P.toFixed(1)}`),R>k&&(P===0||!Re(P)||h&&!this.bitrateTestDelay||P<s))return T}return-1}set nextAutoLevel(e){this._nextAutoLevel=e}}class N1{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:n}=this;let r;if(e.length)e.length===1?r=e[0]:r=xq(e,n);else return new Uint8Array(0);return this.reset(),r}reset(){this.chunks.length=0,this.dataLength=0}}function xq(t,e){const n=new Uint8Array(e);let r=0;for(let s=0;s<t.length;s++){const i=t[s];n.set(i,r),r+=i.length}return n}const mg=100;class Fq extends kd{constructor(e,n,r){super(e,n,r,"[audio-stream-controller]",Pe.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(b.ERROR,this.onError,this),e.on(b.BUFFER_RESET,this.onBufferReset,this),e.on(b.BUFFER_CREATED,this.onBufferCreated,this),e.on(b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(b.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(b.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(b.ERROR,this.onError,this),e.off(b.BUFFER_RESET,this.onBufferReset,this),e.off(b.BUFFER_CREATED,this.onBufferCreated,this),e.off(b.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){if(r==="main"){const o=n.cc;this.initPTS[n.cc]={baseTime:s,timescale:i},this.log(`InitPTS for cc: ${o} found from main: ${s}`),this.videoTrackCC=o,this.state===ee.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=ee.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(mg),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=ee.IDLE):(this.loadedmetadata=!1,this.state=ee.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case ee.IDLE:this.doTickIdle();break;case ee.WAITING_TRACK:{var e;const{levels:r,trackId:s}=this,i=r==null||(e=r[s])==null?void 0:e.details;if(i){if(this.waitForCdnTuneIn(i))break;this.state=ee.WAITING_INIT_PTS}break}case ee.FRAG_LOADING_WAITING_RETRY:{var n;const r=performance.now(),s=this.retryDate;(!s||r>=s||(n=this.media)!=null&&n.seeking)&&(this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(this.trackId),this.state=ee.IDLE);break}case ee.WAITING_INIT_PTS:{const r=this.waitingData;if(r){const{frag:s,part:i,cache:o,complete:a}=r;if(this.initPTS[s.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.FRAG_LOADING;const l=o.flush(),c={frag:s,part:i,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),a&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${s.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=ht.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);mu(c.end,this.config.maxFragLookUpTolerance,s)<0&&(this.log(`Waiting fragment cc (${s.cc}) @ ${s.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=ee.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=ee.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:n,media:r,trackId:s}=this,i=e.config;if(!(n!=null&&n[s])||!r&&(this.startFragRequested||!i.startFragPrefetch))return;const o=n[s],a=o.details;if(!a||a.live&&this.levelLastLoaded!==s||this.waitForCdnTuneIn(a)){this.state=ee.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,ct.AUDIO,Pe.AUDIO));const c=this.getFwdBufferInfo(l,Pe.AUDIO);if(c===null)return;const{bufferedTrack:u,switchingTrack:d}=this;if(!d&&this._streamEnded(c,a)){e.trigger(b.BUFFER_EOS,{type:"audio"}),this.state=ee.ENDED;return}const f=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,Pe.MAIN),h=c.len,p=this.getMaxBufferLength(f==null?void 0:f.len);if(h>=p&&!d)return;const g=a.fragments[0].start;let v=c.end;if(d&&r){const E=this.getLoadPosition();u&&d.attrs!==u.attrs&&(v=E),a.PTSKnown&&E<g&&(c.end>g||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=g+.05)}let m=this.getNextFragment(v,a),y=!1;if(m&&this.isLoopLoading(m,v)&&(y=!!m.gap,m=this.getNextFragmentLoopLoading(m,a,c,Pe.MAIN,p)),!m){this.bufferFlushed=!0;return}const T=f&&m.start>f.end+a.targetduration;if(T||!(f!=null&&f.len)&&c.len){const E=this.getAppendedFrag(m.start,Pe.MAIN);if(E===null||(y||(y=!!E.gap||!!T&&f.len===0),T&&!y||y&&c.nextStart&&c.nextStart<E.end))return}this.loadFragment(m,o,v)}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.min(Math.max(n,e),this.config.maxMaxBufferLength):n}onMediaDetaching(){this.videoBuffer=null,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:n}){this.resetTransmuxer(),this.levels=n.map(r=>new Vi(r))}onAudioTrackSwitching(e,n){const r=!!n.url;this.trackId=n.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),r?this.setInterval(mg):this.resetTransmuxer(),r?(this.switchingTrack=n,this.state=ee.IDLE):(this.switchingTrack=null,this.bufferedTrack=n,this.state=ee.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,n){this.mainDetails=n.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(b.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,n){var r;if(this.mainDetails==null){this.cachedTrackLoadedData=n;return}const{levels:s}=this,{details:i,id:o}=n;if(!s){this.warn(`Audio tracks were reset while loading level ${o}`);return}this.log(`Track ${o} loaded [${i.startSN},${i.endSN}]${i.lastPartSn?`[part-${i.lastPartSn}-${i.lastPartIndex}]`:""},duration:${i.totalduration}`);const a=s[o];let l=0;if(i.live||(r=a.details)!=null&&r.live){this.checkLiveUpdate(i);const c=this.mainDetails;if(i.deltaUpdateFailed||!c)return;!a.details&&i.hasProgramDateTime&&c.hasProgramDateTime?(S1(i,c),l=i.fragments[0].start):l=this.alignPlaylists(i,a.details)}a.details=i,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!i.live)&&this.setStartPosition(a.details,l),this.state===ee.WAITING_TRACK&&!this.waitForCdnTuneIn(i)&&(this.state=ee.IDLE),this.tick()}_handleFragmentLoadProgress(e){var n;const{frag:r,part:s,payload:i}=e,{config:o,trackId:a,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${r.sn} of level ${r.level} will not be buffered`);return}const c=l[a];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(r.start);return}const d=o.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let f=this.transmuxer;f||(f=this.transmuxer=new F1(this.hls,Pe.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const h=this.initPTS[r.cc],p=(n=r.initSegment)==null?void 0:n.data;if(h!==void 0){const g=s?s.index:-1,v=g!==-1,m=new Cd(r.level,r.sn,r.stats.chunkCount,i.byteLength,g,v);f.push(i,p,d,"",r,s,u.totalduration,!1,m,h)}else{this.log(`Unknown video PTS for cc ${r.cc}, waiting for video PTS before demuxing audio frag ${r.sn} of [${u.startSN} ,${u.endSN}],track ${a}`);const{cache:g}=this.waitingData=this.waitingData||{frag:r,part:s,cache:new N1,complete:!1};g.push(new Uint8Array(i)),this.waitingVideoCC=this.videoTrackCC,this.state=ee.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,n){const r=n.tracks.audio;r&&(this.mediaBuffer=r.buffer||null),n.tracks.video&&(this.videoBuffer=n.tracks.video.buffer||null)}onFragBuffered(e,n){const{frag:r,part:s}=n;if(r.type!==Pe.AUDIO){if(!this.loadedmetadata&&r.type===Pe.MAIN){const i=this.videoBuffer||this.media;i&&ht.getBuffered(i).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(r)){this.warn(`Fragment ${r.sn}${s?" p: "+s.index:""} of level ${r.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(r.sn!=="initSegment"){this.fragPrevious=r;const i=this.switchingTrack;i&&(this.bufferedTrack=i,this.switchingTrack=null,this.hls.trigger(b.AUDIO_TRACK_SWITCHED,rn({},i)))}this.fragBufferedComplete(r,s)}onError(e,n){var r;if(n.fatal){this.state=ee.ERROR;return}switch(n.details){case K.FRAG_GAP:case K.FRAG_PARSING_ERROR:case K.FRAG_DECRYPT_ERROR:case K.FRAG_LOAD_ERROR:case K.FRAG_LOAD_TIMEOUT:case K.KEY_LOAD_ERROR:case K.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(Pe.AUDIO,n);break;case K.AUDIO_TRACK_LOAD_ERROR:case K.AUDIO_TRACK_LOAD_TIMEOUT:case K.LEVEL_PARSING_ERROR:!n.levelRetry&&this.state===ee.WAITING_TRACK&&((r=n.context)==null?void 0:r.type)===tt.AUDIO_TRACK&&(this.state=ee.IDLE);break;case K.BUFFER_FULL_ERROR:if(!n.parent||n.parent!=="audio")return;this.reduceLengthAndFlushBuffer(n)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case K.INTERNAL_EXCEPTION:this.recoverWorkerError(n);break}}onBufferFlushed(e,{type:n}){n===ct.AUDIO&&(this.bufferFlushed=!0,this.state===ee.ENDED&&(this.state=ee.IDLE))}_handleTransmuxComplete(e){var n;const r="audio",{hls:s}=this,{remuxResult:i,chunkMeta:o}=e,a=this.getCurrentContext(o);if(!a){this.resetWhenMissingContext(o);return}const{frag:l,part:c,level:u}=a,{details:d}=u,{audio:f,text:h,id3:p,initSegment:g}=i;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=ee.PARSING,this.switchingTrack&&f&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const v=l.initSegment||l;this._bufferInitSegment(g.tracks,v,o),s.trigger(b.FRAG_PARSING_INIT_SEGMENT,{frag:v,id:r,tracks:g.tracks})}if(f){const{startPTS:v,endPTS:m,startDTS:y,endDTS:T}=f;c&&(c.elementaryStreams[ct.AUDIO]={startPTS:v,endPTS:m,startDTS:y,endDTS:T}),l.setElementaryStreamInfo(ct.AUDIO,v,m,y,T),this.bufferFragmentData(f,l,c,o)}if(p!=null&&(n=p.samples)!=null&&n.length){const v=Rt({id:r,frag:l,details:d},p);s.trigger(b.FRAG_PARSING_METADATA,v)}if(h){const v=Rt({id:r,frag:l,details:d},h);s.trigger(b.FRAG_PARSING_USERDATA,v)}}_bufferInitSegment(e,n,r){if(this.state!==ee.PARSING)return;e.video&&delete e.video;const s=e.audio;if(!s)return;s.levelCodec=s.codec,s.id="audio",this.log(`Init audio buffer, container:${s.container}, codecs[parsed]=[${s.codec}]`),this.hls.trigger(b.BUFFER_CODECS,e);const i=s.initSegment;if(i!=null&&i.byteLength){const o={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:i};this.hls.trigger(b.BUFFER_APPENDING,o)}this.tick()}loadFragment(e,n,r){const s=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||s===$t.NOT_LOADED||s===$t.PARTIAL){var i;e.sn==="initSegment"?this._loadInitSegment(e,n):(i=n.details)!=null&&i.live&&!this.initPTS[e.cc]?(this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=ee.WAITING_INIT_PTS):(this.startFragRequested=!0,super.loadFragment(e,n,r))}else this.clearTrackerIfNeeded(e)}completeAudioSwitch(e){const{hls:n,media:r,bufferedTrack:s}=this,i=s==null?void 0:s.attrs,o=e.attrs;r&&i&&(i.CHANNELS!==o.CHANNELS||i.NAME!==o.NAME||i.LANGUAGE!==o.LANGUAGE)&&(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio")),this.bufferedTrack=e,this.switchingTrack=null,n.trigger(b.AUDIO_TRACK_SWITCHED,rn({},e))}}class Nq extends Id{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.LEVEL_LOADING,this.onLevelLoading,this),e.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.LEVEL_LOADING,this.onLevelLoading,this),e.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(b.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(b.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.audioTracks||[]}onAudioTrackLoaded(e,n){const{id:r,groupId:s,details:i}=n,o=this.tracksInGroup[r];if(!o||o.groupId!==s){this.warn(`Track with id:${r} and group:${s} not found in active group ${o.groupId}`);return}const a=o.details;o.details=n.details,this.log(`audio-track ${r} "${o.name}" lang:${o.lang} group:${s} loaded [${i.startSN}-${i.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!(n!=null&&n.audioGroupIds))return;const r=n.audioGroupIds[n.urlId];if(this.groupId!==r){this.groupId=r||null;const s=this.tracks.filter(o=>!r||o.groupId===r);this.selectDefaultTrack&&!s.some(o=>o.default)&&(this.selectDefaultTrack=!1),this.tracksInGroup=s;const i={audioTracks:s};this.log(`Updating audio tracks, ${s.length} track(s) found in group:${r}`),this.hls.trigger(b.AUDIO_TRACKS_UPDATED,i),this.selectInitialTrack()}else this.shouldReloadPlaylist(this.currentTrack)&&this.setAudioTrack(this.trackId)}onError(e,n){n.fatal||!n.context||n.context.type===tt.AUDIO_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&(this.requestScheduled=-1,this.checkRetry(n))}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioTrack(e){const n=this.tracksInGroup;if(e<0||e>=n.length){this.warn("Invalid id passed to audio-track controller");return}this.clearTimer();const r=this.currentTrack;n[this.trackId];const s=n[e],{groupId:i,name:o}=s;if(this.log(`Switching to audio-track ${e} "${o}" lang:${s.lang} group:${i}`),this.trackId=e,this.currentTrack=s,this.selectDefaultTrack=!1,this.hls.trigger(b.AUDIO_TRACK_SWITCHING,rn({},s)),s.details&&!s.details.live)return;const a=this.switchParams(s.url,r==null?void 0:r.details);this.loadPlaylist(a)}selectInitialTrack(){const e=this.tracksInGroup,n=this.findTrackId(this.currentTrack)|this.findTrackId(null);if(n!==-1)this.setAudioTrack(n);else{const r=new Error(`No track found for running audio group-ID: ${this.groupId} track count: ${e.length}`);this.warn(r.message),this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:r})}}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if((!this.selectDefaultTrack||s.default)&&(!e||e.attrs["STABLE-RENDITION-ID"]!==void 0&&e.attrs["STABLE-RENDITION-ID"]===s.attrs["STABLE-RENDITION-ID"]||e.name===s.name&&e.lang===s.lang))return s.id}return-1}loadPlaylist(e){super.loadPlaylist();const n=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(n)){const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`loading audio-track playlist ${r} "${n.name}" lang:${n.lang} group:${s}`),this.clearTimer(),this.hls.trigger(b.AUDIO_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}}function B1(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Bq(t[n].attrs,e[n].attrs))return!1;return!0}function Bq(t,e){const n=t["STABLE-RENDITION-ID"];return n?n===e["STABLE-RENDITION-ID"]:!["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED"].some(r=>t[r]!==e[r])}const vg=500;class Uq extends kd{constructor(e,n,r){super(e,n,r,"[subtitle-stream-controller]",Pe.SUBTITLE),this.levels=[],this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.LEVEL_LOADED,this.onLevelLoaded,this),e.on(b.ERROR,this.onError,this),e.on(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(b.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.LEVEL_LOADED,this.onLevelLoaded,this),e.off(b.ERROR,this.onError,this),e.off(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(b.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(b.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(b.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=ee.IDLE,this.setInterval(vg),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,n){this.mainDetails=n.details}onSubtitleFragProcessed(e,n){const{frag:r,success:s}=n;if(this.fragPrevious=r,this.state=ee.IDLE,!s)return;const i=this.tracksBuffered[this.currentTrackId];if(!i)return;let o;const a=r.start;for(let c=0;c<i.length;c++)if(a>=i[c].start&&a<=i[c].end){o=i[c];break}const l=r.start+r.duration;o?o.end=l:(o={start:a,end:l},i.push(o)),this.fragmentTracker.fragBuffered(r)}onBufferFlushing(e,n){const{startOffset:r,endOffset:s}=n;if(r===0&&s!==Number.POSITIVE_INFINITY){const i=s-1;if(i<=0)return;n.endOffsetSubtitles=Math.max(0,i),this.tracksBuffered.forEach(o=>{for(let a=0;a<o.length;){if(o[a].end<=i){o.shift();continue}else if(o[a].start<i)o[a].start=i;else break;a++}}),this.fragmentTracker.removeFragmentsInRange(r,i,Pe.SUBTITLE)}}onFragBuffered(e,n){if(!this.loadedmetadata&&n.frag.type===Pe.MAIN){var r;(r=this.media)!=null&&r.buffered.length&&(this.loadedmetadata=!0)}}onError(e,n){const r=n.frag;(r==null?void 0:r.type)===Pe.SUBTITLE&&(this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==ee.STOPPED&&(this.state=ee.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:n}){if(B1(this.levels,n)){this.levels=n.map(r=>new Vi(r));return}this.tracksBuffered=[],this.levels=n.map(r=>{const s=new Vi(r);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,Pe.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,n){if(this.currentTrackId=n.id,!this.levels.length||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.setInterval(vg)}onSubtitleTrackLoaded(e,n){var r;const{details:s,id:i}=n,{currentTrackId:o,levels:a}=this;if(!a.length)return;const l=a[o];if(i>=a.length||i!==o||!l)return;this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(s.live||(r=l.details)!=null&&r.live){const u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;const d=u.fragments[0];l.details?(c=this.alignPlaylists(s,l.details),c===0&&d&&(c=d.start,gu(s,c))):s.hasProgramDateTime&&u.hasProgramDateTime?(S1(s,u),c=s.fragments[0].start):d&&(c=d.start,gu(s,c))}l.details=s,this.levelLastLoaded=i,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(l.details,c),this.tick(),s.live&&!this.fragCurrent&&this.media&&this.state===ee.IDLE&&(Hi(null,s.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0))}_handleFragmentLoadComplete(e){const{frag:n,payload:r}=e,s=n.decryptdata,i=this.hls;if(!this.fragContextChanged(n)&&r&&r.byteLength>0&&s&&s.key&&s.iv&&s.method==="AES-128"){const o=performance.now();this.decrypter.decrypt(new Uint8Array(r),s.key.buffer,s.iv.buffer).catch(a=>{throw i.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.FRAG_DECRYPT_ERROR,fatal:!1,error:a,reason:a.message,frag:n}),a}).then(a=>{const l=performance.now();i.trigger(b.FRAG_DECRYPTED,{frag:n,payload:a,stats:{tstart:o,tdecrypt:l}})}).catch(a=>{this.warn(`${a.name}: ${a.message}`),this.state=ee.IDLE})}}doTick(){if(!this.media){this.state=ee.IDLE;return}if(this.state===ee.IDLE){const{currentTrackId:e,levels:n}=this,r=n[e];if(!n.length||!r||!r.details)return;const{config:s}=this,i=this.getLoadPosition(),o=ht.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],i,s.maxBufferHole),{end:a,len:l}=o,c=this.getFwdBufferInfo(this.media,Pe.MAIN),u=r.details,d=this.getMaxBufferLength(c==null?void 0:c.len)+u.levelTargetDuration;if(l>d)return;const f=u.fragments,h=f.length,p=u.edge;let g=null;const v=this.fragPrevious;if(a<p){const m=s.maxFragLookUpTolerance,y=a>p-m?0:m;g=Hi(v,f,Math.max(f[0].start,a),y),!g&&v&&v.start<f[0].start&&(g=f[0])}else g=f[h-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const m=g.sn-u.startSN,y=f[m-1];y&&y.cc===g.cc&&this.fragmentTracker.getState(y)===$t.NOT_LOADED&&(g=y)}this.fragmentTracker.getState(g)===$t.NOT_LOADED&&this.loadFragment(g,r,a)}}getMaxBufferLength(e){const n=super.getMaxBufferLength();return e?Math.max(n,e):n}loadFragment(e,n,r){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,n):(this.startFragRequested=!0,super.loadFragment(e,n,r))}get mediaBufferTimeRanges(){return new Vq(this.tracksBuffered[this.currentTrackId]||[])}}class Vq{constructor(e){this.buffered=void 0;const n=(r,s,i)=>{if(s=s>>>0,s>i-1)throw new DOMException(`Failed to execute '${r}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${i})`);return e[s][r]};this.buffered={get length(){return e.length},end(r){return n("end",r,e.length)},start(r){return n("start",r,e.length)}}}}class Hq extends Id{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.trackChangeListener=()=>this.onTextTracksChanged(),this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.trackChangeListener=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes(this.trackId)}registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.LEVEL_LOADING,this.onLevelLoading,this),e.on(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(b.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.LEVEL_LOADING,this.onLevelLoading,this),e.off(b.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(b.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(b.ERROR,this.onError,this)}onMediaAttached(e,n){this.media=n.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.trackChangeListener,e)}onMediaDetaching(){this.media&&(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),ic(this.media.textTracks).forEach(e=>{As(e)}),this.subtitleTrack=-1,this.media=null)}onManifestLoading(){this.tracks=[],this.groupId=null,this.tracksInGroup=[],this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,n){this.tracks=n.subtitleTracks}onSubtitleTrackLoaded(e,n){const{id:r,details:s}=n,{trackId:i}=this,o=this.tracksInGroup[i];if(!o){this.warn(`Invalid subtitle track id ${r}`);return}const a=o.details;o.details=n.details,this.log(`subtitle track ${r} loaded [${s.startSN}-${s.endSN}]`),r===this.trackId&&this.playlistLoaded(r,n,a)}onLevelLoading(e,n){this.switchLevel(n.level)}onLevelSwitching(e,n){this.switchLevel(n.level)}switchLevel(e){const n=this.hls.levels[e];if(!(n!=null&&n.textGroupIds))return;const r=n.textGroupIds[n.urlId],s=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;if(this.groupId!==r){const i=this.tracks.filter(l=>!r||l.groupId===r);this.tracksInGroup=i;const o=this.findTrackId(s==null?void 0:s.name)||this.findTrackId();this.groupId=r||null;const a={subtitleTracks:i};this.log(`Updating subtitle tracks, ${i.length} track(s) found in "${r}" group-id`),this.hls.trigger(b.SUBTITLE_TRACKS_UPDATED,a),o!==-1&&this.setSubtitleTrack(o,s)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId,s)}findTrackId(e){const n=this.tracksInGroup;for(let r=0;r<n.length;r++){const s=n[r];if((!this.selectDefaultTrack||s.default)&&(!e||e===s.name))return s.id}return-1}onError(e,n){n.fatal||!n.context||n.context.type===tt.SUBTITLE_TRACK&&n.context.id===this.trackId&&n.context.groupId===this.groupId&&this.checkRetry(n)}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1;const n=this.tracksInGroup?this.tracksInGroup[this.trackId]:void 0;this.setSubtitleTrack(e,n)}loadPlaylist(e){super.loadPlaylist();const n=this.tracksInGroup[this.trackId];if(this.shouldLoadPlaylist(n)){const r=n.id,s=n.groupId;let i=n.url;if(e)try{i=e.addDirectives(i)}catch(o){this.warn(`Could not construct new URL with HLS Delivery Directives: ${o}`)}this.log(`Loading subtitle playlist for id ${r}`),this.hls.trigger(b.SUBTITLE_TRACK_LOADING,{url:i,id:r,groupId:s,deliveryDirectives:e||null})}}toggleTrackModes(e){const{media:n,trackId:r}=this;if(!n)return;const s=ic(n.textTracks),i=s.filter(a=>a.groupId===this.groupId);if(e===-1)[].slice.call(s).forEach(a=>{a.mode="disabled"});else{const a=i[r];a&&(a.mode="disabled")}const o=i[e];o&&(o.mode=this.subtitleDisplay?"showing":"hidden")}setSubtitleTrack(e,n){var r;const s=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(this.trackId!==e&&this.toggleTrackModes(e),this.trackId===e&&(e===-1||(r=s[e])!=null&&r.details)||e<-1||e>=s.length)return;this.clearTimer();const i=s[e];if(this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:"")),this.trackId=e,i){const{id:o,groupId:a="",name:l,type:c,url:u}=i;this.hls.trigger(b.SUBTITLE_TRACK_SWITCH,{id:o,groupId:a,name:l,type:c,url:u});const d=this.switchParams(i.url,n==null?void 0:n.details);this.loadPlaylist(d)}else this.hls.trigger(b.SUBTITLE_TRACK_SWITCH,{id:e})}onTextTracksChanged(){if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let e=-1;const n=ic(this.media.textTracks);for(let r=0;r<n.length;r++)if(n[r].mode==="hidden")e=r;else if(n[r].mode==="showing"){e=r;break}this.subtitleTrack!==e&&(this.subtitleTrack=e)}}function ic(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];(r.kind==="subtitles"||r.kind==="captions")&&r.label&&e.push(t[n])}return e}class Gq{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,n){const r=this.queues[n];r.push(e),r.length===1&&this.buffers[n]&&this.executeNext(n)}insertAbort(e,n){this.queues[n].unshift(e),this.executeNext(n)}appendBlocker(e){let n;const r=new Promise(i=>{n=i}),s={execute:n,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(s,e),r}executeNext(e){const{buffers:n,queues:r}=this,s=n[e],i=r[e];if(i.length){const o=i[0];try{o.execute()}catch(a){O.warn("[buffer-operation-queue]: Unhandled exception executing the current operation"),o.onError(a),s!=null&&s.updating||(i.shift(),this.executeNext(e))}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const yg=Qa(),bg=/([ha]vc.)(?:\.[^.,]+)+/;class Kq{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this._onMediaSourceOpen=()=>{const{media:n,mediaSource:r}=this;O.log("[buffer-controller]: Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(b.MEDIA_ATTACHED,{media:n})),r&&r.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{O.log("[buffer-controller]: Media source closed")},this._onMediaSourceEnded=()=>{O.log("[buffer-controller]: Media source ended")},this._onMediaEmptied=()=>{const{media:n,_objectUrl:r}=this;n&&n.src!==r&&O.error(`Media element src was set while attaching MediaSource (${r} > ${n.src})`)},this.hls=e,this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null}registerListeners(){const{hls:e}=this;e.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.BUFFER_RESET,this.onBufferReset,this),e.on(b.BUFFER_APPENDING,this.onBufferAppending,this),e.on(b.BUFFER_CODECS,this.onBufferCodecs,this),e.on(b.BUFFER_EOS,this.onBufferEos,this),e.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(b.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(b.FRAG_PARSED,this.onFragParsed,this),e.on(b.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.BUFFER_RESET,this.onBufferReset,this),e.off(b.BUFFER_APPENDING,this.onBufferAppending,this),e.off(b.BUFFER_CODECS,this.onBufferCodecs,this),e.off(b.BUFFER_EOS,this.onBufferEos,this),e.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(b.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(b.FRAG_PARSED,this.onFragParsed,this),e.off(b.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Gq(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,n){let r=2;(n.audio&&!n.video||!n.altAudio)&&(r=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,O.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,n){const r=this.media=n.media;if(r&&yg){const s=this.mediaSource=new yg;s.addEventListener("sourceopen",this._onMediaSourceOpen),s.addEventListener("sourceended",this._onMediaSourceEnded),s.addEventListener("sourceclose",this._onMediaSourceClose),r.src=self.URL.createObjectURL(s),this._objectUrl=r.src,r.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:n,_objectUrl:r}=this;if(n){if(O.log("[buffer-controller]: media source detaching"),n.readyState==="open")try{n.endOfStream()}catch(s){O.warn(`[buffer-controller]: onMediaDetaching: ${s.message} while calling endOfStream`)}this.onBufferReset(),n.removeEventListener("sourceopen",this._onMediaSourceOpen),n.removeEventListener("sourceended",this._onMediaSourceEnded),n.removeEventListener("sourceclose",this._onMediaSourceClose),e&&(e.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),e.src===r?(e.removeAttribute("src"),e.load()):O.warn("[buffer-controller]: media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(b.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{const n=this.sourceBuffer[e];try{n&&(this.removeBufferListeners(e),this.mediaSource&&this.mediaSource.removeSourceBuffer(n),this.sourceBuffer[e]=void 0)}catch(r){O.warn(`[buffer-controller]: Failed to reset the ${e} buffer`,r)}}),this._initSourceBuffer()}onBufferCodecs(e,n){const r=this.getSourceBufferTypes().length;Object.keys(n).forEach(s=>{if(r){const i=this.tracks[s];if(i&&typeof i.buffer.changeType=="function"){const{id:o,codec:a,levelCodec:l,container:c,metadata:u}=n[s],d=(i.levelCodec||i.codec).replace(bg,"$1"),f=(l||a).replace(bg,"$1");if(d!==f){const h=`${c};codecs=${l||a}`;this.appendChangeType(s,h),O.log(`[buffer-controller]: switching codec ${d} to ${f}`),this.tracks[s]={buffer:i.buffer,codec:a,container:c,levelCodec:l,metadata:u,id:o}}}}else this.pendingTracks[s]=n[s]}),!r&&(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks())}appendChangeType(e,n){const{operationQueue:r}=this,s={execute:()=>{const i=this.sourceBuffer[e];i&&(O.log(`[buffer-controller]: changing ${e} sourceBuffer type to ${n}`),i.changeType(n)),r.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:i=>{O.warn(`[buffer-controller]: Failed to change ${e} SourceBuffer type`,i)}};r.append(s,e)}onBufferAppending(e,n){const{hls:r,operationQueue:s,tracks:i}=this,{data:o,type:a,frag:l,part:c,chunkMeta:u}=n,d=u.buffering[a],f=self.performance.now();d.start=f;const h=l.stats.buffering,p=c?c.stats.buffering:null;h.start===0&&(h.start=f),p&&p.start===0&&(p.start=f);const g=i.audio;let v=!1;a==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const m=l.start,y={execute:()=>{if(d.executeStart=self.performance.now(),v){const T=this.sourceBuffer[a];if(T){const E=m-T.timestampOffset;Math.abs(E)>=.1&&(O.log(`[buffer-controller]: Updating audio SourceBuffer timestampOffset to ${m} (delta: ${E}) sn: ${l.sn})`),T.timestampOffset=m)}}this.appendExecutor(o,a)},onStart:()=>{},onComplete:()=>{const T=self.performance.now();d.executeEnd=d.end=T,h.first===0&&(h.first=T),p&&p.first===0&&(p.first=T);const{sourceBuffer:E}=this,S={};for(const _ in E)S[_]=ht.getBuffered(E[_]);this.appendError=0,this.hls.trigger(b.BUFFER_APPENDED,{type:a,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:S})},onError:T=>{O.error(`[buffer-controller]: Error encountered while trying to append to the ${a} SourceBuffer`,T);const E={type:De.MEDIA_ERROR,parent:l.type,details:K.BUFFER_APPEND_ERROR,frag:l,part:c,chunkMeta:u,error:T,err:T,fatal:!1};T.code===DOMException.QUOTA_EXCEEDED_ERR?E.details=K.BUFFER_FULL_ERROR:(this.appendError++,E.details=K.BUFFER_APPEND_ERROR,this.appendError>r.config.appendErrorMaxRetry&&(O.error(`[buffer-controller]: Failed ${r.config.appendErrorMaxRetry} times to append segment in sourceBuffer`),E.fatal=!0)),r.trigger(b.ERROR,E)}};s.append(y,a)}onBufferFlushing(e,n){const{operationQueue:r}=this,s=i=>({execute:this.removeExecutor.bind(this,i,n.startOffset,n.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(b.BUFFER_FLUSHED,{type:i})},onError:o=>{O.warn(`[buffer-controller]: Failed to remove from ${i} SourceBuffer`,o)}});n.type?r.append(s(n.type),n.type):this.getSourceBufferTypes().forEach(i=>{r.append(s(i),i)})}onFragParsed(e,n){const{frag:r,part:s}=n,i=[],o=s?s.elementaryStreams:r.elementaryStreams;o[ct.AUDIOVIDEO]?i.push("audiovideo"):(o[ct.AUDIO]&&i.push("audio"),o[ct.VIDEO]&&i.push("video"));const a=()=>{const l=self.performance.now();r.stats.buffering.end=l,s&&(s.stats.buffering.end=l);const c=s?s.stats:r.stats;this.hls.trigger(b.FRAG_BUFFERED,{frag:r,part:s,stats:c,id:r.type})};i.length===0&&O.warn(`Fragments must have at least one ElementaryStreamType set. type: ${r.type} level: ${r.level} sn: ${r.sn}`),this.blockBuffers(a,i)}onFragChanged(e,n){this.flushBackBuffer()}onBufferEos(e,n){this.getSourceBufferTypes().reduce((r,s)=>{const i=this.sourceBuffer[s];return i&&(!n.type||n.type===s)&&(i.ending=!0,i.ended||(i.ended=!0,O.log(`[buffer-controller]: ${s} sourceBuffer now EOS`))),r&&!!(!i||i.ended)},!0)&&(O.log("[buffer-controller]: Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const i=this.sourceBuffer[s];i&&(i.ending=!1)});const{mediaSource:r}=this;if(!r||r.readyState!=="open"){r&&O.info(`[buffer-controller]: Could not call mediaSource.endOfStream(). mediaSource.readyState: ${r.readyState}`);return}O.log("[buffer-controller]: Calling mediaSource.endOfStream()"),r.endOfStream()}))}onLevelUpdated(e,{details:n}){n.fragments.length&&(this.details=n,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}flushBackBuffer(){const{hls:e,details:n,media:r,sourceBuffer:s}=this;if(!r||n===null)return;const i=this.getSourceBufferTypes();if(!i.length)return;const o=n.live&&e.config.liveBackBufferLength!==null?e.config.liveBackBufferLength:e.config.backBufferLength;if(!Re(o)||o<0)return;const a=r.currentTime,l=n.levelTargetDuration,c=Math.max(o,l),u=Math.floor(a/l)*l-c;i.forEach(d=>{const f=s[d];if(f){const h=ht.getBuffered(f);if(h.length>0&&u>h.start(0)){if(e.trigger(b.BACK_BUFFER_REACHED,{bufferEnd:u}),n.live)e.trigger(b.LIVE_BACK_BUFFER_REACHED,{bufferEnd:u});else if(f.ended&&h.end(h.length-1)-a<l*2){O.info(`[buffer-controller]: Cannot flush ${d} back buffer while SourceBuffer is in ended state`);return}e.trigger(b.BUFFER_FLUSHING,{startOffset:0,endOffset:u,type:d})}}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:n,media:r,mediaSource:s}=this,i=e.fragments[0].start+e.totalduration,o=r.duration,a=Re(s.duration)?s.duration:0;e.live&&n.config.liveDurationInfinity?(O.log("[buffer-controller]: Media Source duration is set to Infinity"),s.duration=1/0,this.updateSeekableRange(e)):(i>a&&i>o||!Re(o))&&(O.log(`[buffer-controller]: Updating Media Source duration to ${i.toFixed(3)}`),s.duration=i)}updateSeekableRange(e){const n=this.mediaSource,r=e.fragments;if(r.length&&e.live&&n!=null&&n.setLiveSeekableRange){const s=Math.max(0,r[0].start),i=Math.max(s,s+e.totalduration);n.setLiveSeekableRange(s,i)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:n,pendingTracks:r}=this,s=Object.keys(r).length;if(s&&!e||s===2){this.createSourceBuffers(r),this.pendingTracks={};const i=this.getSourceBufferTypes();if(i.length)this.hls.trigger(b.BUFFER_CREATED,{tracks:this.tracks}),i.forEach(o=>{n.executeNext(o)});else{const o=new Error("could not create source buffer for media codec(s)");this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:o,reason:o.message})}}}createSourceBuffers(e){const{sourceBuffer:n,mediaSource:r}=this;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!n[s]){const i=e[s];if(!i)throw Error(`source buffer exists for track ${s}, however track does not`);const o=i.levelCodec||i.codec,a=`${i.container};codecs=${o}`;O.log(`[buffer-controller]: creating sourceBuffer(${a})`);try{const l=n[s]=r.addSourceBuffer(a),c=s;this.addBufferListener(c,"updatestart",this._onSBUpdateStart),this.addBufferListener(c,"updateend",this._onSBUpdateEnd),this.addBufferListener(c,"error",this._onSBUpdateError),this.tracks[s]={buffer:l,codec:o,container:i.container,levelCodec:i.levelCodec,metadata:i.metadata,id:i.id}}catch(l){O.error(`[buffer-controller]: error while trying to add sourceBuffer: ${l.message}`),this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:l,mimeType:a})}}}_onSBUpdateStart(e){const{operationQueue:n}=this;n.current(e).onStart()}_onSBUpdateEnd(e){const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,n){const r=new Error(`${e} SourceBuffer error`);O.error(`[buffer-controller]: ${r}`,n),this.hls.trigger(b.ERROR,{type:De.MEDIA_ERROR,details:K.BUFFER_APPENDING_ERROR,error:r,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(n)}removeExecutor(e,n,r){const{media:s,mediaSource:i,operationQueue:o,sourceBuffer:a}=this,l=a[e];if(!s||!i||!l){O.warn(`[buffer-controller]: Attempting to remove from the ${e} SourceBuffer, but it does not exist`),o.shiftAndExecuteNext(e);return}const c=Re(s.duration)?s.duration:1/0,u=Re(i.duration)?i.duration:1/0,d=Math.max(0,n),f=Math.min(r,c,u);f>d&&!l.ending?(l.ended=!1,O.log(`[buffer-controller]: Removing [${d},${f}] from the ${e} SourceBuffer`),l.remove(d,f)):o.shiftAndExecuteNext(e)}appendExecutor(e,n){const{operationQueue:r,sourceBuffer:s}=this,i=s[n];if(!i){O.warn(`[buffer-controller]: Attempting to append to the ${n} SourceBuffer, but it does not exist`),r.shiftAndExecuteNext(n);return}i.ended=!1,i.appendBuffer(e)}blockBuffers(e,n=this.getSourceBufferTypes()){if(!n.length){O.log("[buffer-controller]: Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:r}=this,s=n.map(i=>r.appendBlocker(i));Promise.all(s).then(()=>{e(),n.forEach(i=>{const o=this.sourceBuffer[i];o!=null&&o.updating||r.shiftAndExecuteNext(i)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,n,r){const s=this.sourceBuffer[e];if(!s)return;const i=r.bind(this,e);this.listeners[e].push({event:n,listener:i}),s.addEventListener(n,i)}removeBufferListeners(e){const n=this.sourceBuffer[e];n&&this.listeners[e].forEach(r=>{n.removeEventListener(r.event,r.listener)})}}const Tg={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},U1=function(t){let e=t;return Tg.hasOwnProperty(t)&&(e=Tg[t]),String.fromCharCode(e)},Dn=15,sr=100,qq={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},jq={17:2,18:4,21:6,22:8,23:10,19:13,20:15},zq={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Wq={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Yq=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Xq{constructor(){this.time=null,this.verboseLevel=0}log(e,n){if(this.verboseLevel>=e){const r=typeof n=="function"?n():n;O.log(`${this.time} [${e}] ${r}`)}}}const Hr=function(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].toString(16));return e};class V1{constructor(e,n,r,s,i){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=n||!1,this.italics=r||!1,this.background=s||"black",this.flash=i||!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const n=["foreground","underline","italics","background","flash"];for(let r=0;r<n.length;r++){const s=n[r];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Qq{constructor(e,n,r,s,i,o){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new V1(n,r,s,i,o)}reset(){this.uchar=" ",this.penState.reset()}setChar(e,n){this.uchar=e,this.penState.copy(n)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Jq{constructor(e){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chars=[];for(let n=0;n<sr;n++)this.chars.push(new Qq);this.logger=e,this.pos=0,this.currPenState=new V1}equals(e){let n=!0;for(let r=0;r<sr;r++)if(!this.chars[r].equals(e.chars[r])){n=!1;break}return n}copy(e){for(let n=0;n<sr;n++)this.chars[n].copy(e.chars[n])}isEmpty(){let e=!0;for(let n=0;n<sr;n++)if(!this.chars[n].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>sr&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=sr)}moveCursor(e){const n=this.pos+e;if(e>1)for(let r=this.pos+1;r<n+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(n)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const n=U1(e);if(this.pos>=sr){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+n+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(n,this.currPenState),this.moveCursor(1)}clearFromPos(e){let n;for(n=e;n<sr;n++)this.chars[n].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let n=!0;for(let r=0;r<sr;r++){const s=this.chars[r].uchar;s!==" "&&(n=!1),e.push(s)}return n?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class oc{constructor(e){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.logger=void 0,this.rows=[];for(let n=0;n<Dn;n++)this.rows.push(new Jq(e));this.logger=e,this.currRow=Dn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.reset()}reset(){for(let e=0;e<Dn;e++)this.rows[e].clear();this.currRow=Dn-1}equals(e){let n=!0;for(let r=0;r<Dn;r++)if(!this.rows[r].equals(e.rows[r])){n=!1;break}return n}copy(e){for(let n=0;n<Dn;n++)this.rows[n].copy(e.rows[n])}isEmpty(){let e=!0;for(let n=0;n<Dn;n++)if(!this.rows[n].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let n=e.row-1;if(this.nrRollUpRows&&n<this.nrRollUpRows-1&&(n=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==n){for(let a=0;a<Dn;a++)this.rows[a].clear();const i=this.currRow+1-this.nrRollUpRows,o=this.lastOutputScreen;if(o){const a=o.rows[i].cueStartTime,l=this.logger.time;if(a&&l!==null&&a<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[n-this.nrRollUpRows+c+1].copy(o.rows[i+c])}}this.currRow=n;const r=this.rows[this.currRow];if(e.indent!==null){const i=e.indent,o=Math.max(i-1,0);r.setCursor(e.indent),e.color=r.chars[o].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,n=this.rows.splice(e,1)[0];n.clear(),this.rows.splice(this.currRow,0,n),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const n=[];let r="",s=-1;for(let i=0;i<Dn;i++){const o=this.rows[i].getTextString();o&&(s=i+1,e?n.push("Row "+s+": '"+o+"'"):n.push(o.trim()))}return n.length>0&&(e?r="["+n.join(" | ")+"]":r=n.join(`
`)),r}getTextAndFormat(){return this.rows}}class Eg{constructor(e,n,r){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=n,this.mode=null,this.verbose=0,this.displayedMemory=new oc(r),this.nonDisplayedMemory=new oc(r),this.lastOutputScreen=new oc(r),this.currRollUpRow=this.displayedMemory.rows[Dn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=r}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Dn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let r=0;r<e.length;r++)this.writeScreen.insertChar(e[r]);const n=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>n+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const n={flash:!1};if(n.underline=e%2===1,n.italics=e>=46,n.italics)n.foreground="white";else{const r=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];n.foreground=s[r]}this.logger.log(2,"MIDROW: "+JSON.stringify(n)),this.writeScreen.setPen(n)}outputDataUpdate(e=!1){const n=this.logger.time;n!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=n:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,n,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:n),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Sg{constructor(e,n,r){this.channels=void 0,this.currentChannel=0,this.cmdHistory=void 0,this.logger=void 0;const s=new Xq;this.channels=[null,new Eg(e,n,s),new Eg(e+1,r,s)],this.cmdHistory=Ag(),this.logger=s}getHandler(e){return this.channels[e].getHandler()}setHandler(e,n){this.channels[e].setHandler(n)}addData(e,n){let r,s,i,o=!1;this.logger.time=e;for(let a=0;a<n.length;a+=2)if(s=n[a]&127,i=n[a+1]&127,!(s===0&&i===0)){if(this.logger.log(3,"["+Hr([n[a],n[a+1]])+"] -> ("+Hr([s,i])+")"),r=this.parseCmd(s,i),r||(r=this.parseMidrow(s,i)),r||(r=this.parsePAC(s,i)),r||(r=this.parseBackgroundAttributes(s,i)),!r&&(o=this.parseChars(s,i),o)){const l=this.currentChannel;l&&l>0?this.channels[l].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!r&&!o&&this.logger.log(2,"Couldn't parse cleaned data "+Hr([s,i])+" orig: "+Hr([n[a],n[a+1]]))}}parseCmd(e,n){const{cmdHistory:r}=this,s=(e===20||e===28||e===21||e===29)&&n>=32&&n<=47,i=(e===23||e===31)&&n>=33&&n<=35;if(!(s||i))return!1;if(_g(e,n,r))return Es(null,null,r),this.logger.log(3,"Repeated command ("+Hr([e,n])+") is dropped"),!0;const o=e===20||e===21||e===23?1:2,a=this.channels[o];return e===20||e===21||e===28||e===29?n===32?a.ccRCL():n===33?a.ccBS():n===34?a.ccAOF():n===35?a.ccAON():n===36?a.ccDER():n===37?a.ccRU(2):n===38?a.ccRU(3):n===39?a.ccRU(4):n===40?a.ccFON():n===41?a.ccRDC():n===42?a.ccTR():n===43?a.ccRTD():n===44?a.ccEDM():n===45?a.ccCR():n===46?a.ccENM():n===47&&a.ccEOC():a.ccTO(n-32),Es(e,n,r),this.currentChannel=o,!0}parseMidrow(e,n){let r=0;if((e===17||e===25)&&n>=32&&n<=47){if(e===17?r=1:r=2,r!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[r];return s?(s.ccMIDROW(n),this.logger.log(3,"MIDROW ("+Hr([e,n])+")"),!0):!1}return!1}parsePAC(e,n){let r;const s=this.cmdHistory,i=(e>=17&&e<=23||e>=25&&e<=31)&&n>=64&&n<=127,o=(e===16||e===24)&&n>=64&&n<=95;if(!(i||o))return!1;if(_g(e,n,s))return Es(null,null,s),!0;const a=e<=23?1:2;n>=64&&n<=95?r=a===1?qq[e]:zq[e]:r=a===1?jq[e]:Wq[e];const l=this.channels[a];return l?(l.setPAC(this.interpretPAC(r,n)),Es(e,n,s),this.currentChannel=a,!0):!1}interpretPAC(e,n){let r;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return n>95?r=n-96:r=n-64,s.underline=(r&1)===1,r<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((r-16)/2)*4,s}parseChars(e,n){let r,s=null,i=null;if(e>=25?(r=2,i=e-8):(r=1,i=e),i>=17&&i<=19){let o;i===17?o=n+80:i===18?o=n+112:o=n+144,this.logger.log(2,"Special char '"+U1(o)+"' in channel "+r),s=[o]}else e>=32&&e<=127&&(s=n===0?[e]:[e,n]);if(s){const o=Hr(s);this.logger.log(3,"Char codes =  "+o.join(",")),Es(e,n,this.cmdHistory)}return s}parseBackgroundAttributes(e,n){const r=(e===16||e===24)&&n>=32&&n<=47,s=(e===23||e===31)&&n>=45&&n<=47;if(!(r||s))return!1;let i;const o={};e===16||e===24?(i=Math.floor((n-32)/2),o.background=Yq[i],n%2===1&&(o.background=o.background+"_semi")):n===45?o.background="transparent":(o.foreground="black",n===47&&(o.underline=!0));const a=e<=23?1:2;return this.channels[a].setBkgData(o),Es(e,n,this.cmdHistory),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const n=this.channels[e];n&&n.reset()}this.cmdHistory=Ag()}cueSplitAtTime(e){for(let n=0;n<this.channels.length;n++){const r=this.channels[n];r&&r.cueSplitAtTime(e)}}}function Es(t,e,n){n.a=t,n.b=e}function _g(t,e,n){return n.a===t&&n.b===e}function Ag(){return{a:null,b:null}}class Co{constructor(e,n){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=n}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,n,r){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=n,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var xd=function(){if(typeof self<"u"&&self.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function n(a,l){if(typeof l!="string"||!Array.isArray(a))return!1;const c=l.toLowerCase();return~a.indexOf(c)?c:!1}function r(a){return n(t,a)}function s(a){return n(e,a)}function i(a,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)a[d]=u[d]}return a}function o(a,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let f="",h=!1,p=a,g=l,v=c,m=null,y="",T=!0,E="auto",S="start",_=50,R="middle",k=50,P="middle";Object.defineProperty(u,"id",i({},d,{get:function(){return f},set:function($){f=""+$}})),Object.defineProperty(u,"pauseOnExit",i({},d,{get:function(){return h},set:function($){h=!!$}})),Object.defineProperty(u,"startTime",i({},d,{get:function(){return p},set:function($){if(typeof $!="number")throw new TypeError("Start time must be set to a number.");p=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",i({},d,{get:function(){return g},set:function($){if(typeof $!="number")throw new TypeError("End time must be set to a number.");g=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",i({},d,{get:function(){return v},set:function($){v=""+$,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",i({},d,{get:function(){return m},set:function($){m=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",i({},d,{get:function(){return y},set:function($){const N=r($);if(N===!1)throw new SyntaxError("An invalid or illegal string was specified.");y=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",i({},d,{get:function(){return T},set:function($){T=!!$,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",i({},d,{get:function(){return E},set:function($){if(typeof $!="number"&&$!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");E=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",i({},d,{get:function(){return S},set:function($){const N=s($);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");S=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",i({},d,{get:function(){return _},set:function($){if($<0||$>100)throw new Error("Position must be between 0 and 100.");_=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",i({},d,{get:function(){return R},set:function($){const N=s($);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");R=N,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",i({},d,{get:function(){return k},set:function($){if($<0||$>100)throw new Error("Size must be between 0 and 100.");k=$,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",i({},d,{get:function(){return P},set:function($){const N=s($);if(!N)throw new SyntaxError("An invalid or illegal string was specified.");P=N,this.hasBeenReset=!0}})),u.displayState=void 0}return o.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},o}();class Zq{decode(e,n){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function H1(t){function e(r,s,i,o){return(r|0)*3600+(s|0)*60+(i|0)+parseFloat(o||0)}const n=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return n?parseFloat(n[2])>59?e(n[2],n[3],0,n[4]):e(n[1],n[2],n[3],n[4]):null}class ej{constructor(){this.values=Object.create(null)}set(e,n){!this.get(e)&&n!==""&&(this.values[e]=n)}get(e,n,r){return r?this.has(e)?this.values[e]:n[r]:this.has(e)?this.values[e]:n}has(e){return e in this.values}alt(e,n,r){for(let s=0;s<r.length;++s)if(n===r[s]){this.set(e,n);break}}integer(e,n){/^-?\d+$/.test(n)&&this.set(e,parseInt(n,10))}percent(e,n){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(n)){const r=parseFloat(n);if(r>=0&&r<=100)return this.set(e,r),!0}return!1}}function G1(t,e,n,r){const s=r?t.split(r):[t];for(const i in s){if(typeof s[i]!="string")continue;const o=s[i].split(n);if(o.length!==2)continue;const a=o[0],l=o[1];e(a,l)}}const yu=new xd(0,0,""),Ro=yu.align==="middle"?"middle":"center";function tj(t,e,n){const r=t;function s(){const a=H1(t);if(a===null)throw new Error("Malformed timestamp: "+r);return t=t.replace(/^[^\sa-zA-Z-]+/,""),a}function i(a,l){const c=new ej;G1(a,function(f,h){let p;switch(f){case"region":for(let g=n.length-1;g>=0;g--)if(n[g].id===h){c.set(f,n[g].region);break}break;case"vertical":c.alt(f,h,["rl","lr"]);break;case"line":p=h.split(","),c.integer(f,p[0]),c.percent(f,p[0])&&c.set("snapToLines",!1),c.alt(f,p[0],["auto"]),p.length===2&&c.alt("lineAlign",p[1],["start",Ro,"end"]);break;case"position":p=h.split(","),c.percent(f,p[0]),p.length===2&&c.alt("positionAlign",p[1],["start",Ro,"end","line-left","line-right","auto"]);break;case"size":c.percent(f,h);break;case"align":c.alt(f,h,["start",Ro,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&yu.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Ro);let d=c.get("position","auto");d==="auto"&&yu.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function o(){t=t.replace(/^\s+/,"")}if(o(),e.startTime=s(),o(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+r);t=t.slice(3),o(),e.endTime=s(),o(),i(t,e)}function K1(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class nj{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Zq,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const n=this;e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));function r(){let i=n.buffer,o=0;for(i=K1(i);o<i.length&&i[o]!=="\r"&&i[o]!==`
`;)++o;const a=i.slice(0,o);return i[o]==="\r"&&++o,i[o]===`
`&&++o,n.buffer=i.slice(o),a}function s(i){G1(i,function(o,a){},/:/)}try{let i="";if(n.state==="INITIAL"){if(!/\r\n|\n/.test(n.buffer))return this;i=r();const a=i.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(a!=null&&a[0]))throw new Error("Malformed WebVTT signature.");n.state="HEADER"}let o=!1;for(;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(o?o=!1:i=r(),n.state){case"HEADER":/:/.test(i)?s(i):i||(n.state="ID");continue;case"NOTE":i||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(i)){n.state="NOTE";break}if(!i)continue;if(n.cue=new xd(0,0,""),n.state="CUE",i.indexOf("-->")===-1){n.cue.id=i;continue}case"CUE":if(!n.cue){n.state="BADCUE";continue}try{tj(i,n.cue,n.regionList)}catch{n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":{const a=i.indexOf("-->")!==-1;if(!i||a&&(o=!0)){n.oncue&&n.cue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}if(n.cue===null)continue;n.cue.text&&(n.cue.text+=`
`),n.cue.text+=i}continue;case"BADCUE":i||(n.state="ID")}}}catch{n.state==="CUETEXT"&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state=n.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(n){e.onparsingerror&&e.onparsingerror(n)}return e.onflush&&e.onflush(),this}}const rj=/\r\n|\n\r|\n|\r/g,ac=function(t,e,n=0){return t.slice(n,n+e.length)===e},sj=function(t){let e=parseInt(t.slice(-3));const n=parseInt(t.slice(-6,-4)),r=parseInt(t.slice(-9,-7)),s=t.length>9?parseInt(t.substring(0,t.indexOf(":"))):0;if(!Re(e)||!Re(n)||!Re(r)||!Re(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${t}`);return e+=1e3*n,e+=60*1e3*r,e+=60*60*1e3*s,e},lc=function(t){let e=5381,n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return(e>>>0).toString()};function Fd(t,e,n){return lc(t.toString())+lc(e.toString())+lc(n)}const ij=function(t,e,n){let r=t[e],s=t[r.prevCC];if(!s||!s.new&&r.new){t.ccOffset=t.presentationOffset=r.start,r.new=!1;return}for(;(i=s)!=null&&i.new;){var i;t.ccOffset+=r.start-s.start,r.new=!1,r=s,s=t[r.prevCC]}t.presentationOffset=n};function oj(t,e,n,r,s,i,o){const a=new nj,l=Xn(new Uint8Array(t)).trim().replace(rj,`
`).split(`
`),c=[],u=e?vq(e.baseTime,e.timescale):0;let d="00:00.000",f=0,h=0,p,g=!0;a.oncue=function(v){const m=n[r];let y=n.ccOffset;const T=(f-u)/9e4;if(m!=null&&m.new&&(h!==void 0?y=n.ccOffset=m.start:ij(n,r,T)),T){if(!e){p=new Error("Missing initPTS for VTT MPEGTS");return}y=T-n.presentationOffset}const E=v.endTime-v.startTime,S=Sn((v.startTime+y-h)*9e4,s*9e4)/9e4;v.startTime=Math.max(S,0),v.endTime=Math.max(S+E,0);const _=v.text.trim();v.text=decodeURIComponent(encodeURIComponent(_)),v.id||(v.id=Fd(v.startTime,v.endTime,_)),v.endTime>0&&c.push(v)},a.onparsingerror=function(v){p=v},a.onflush=function(){if(p){o(p);return}i(c)},l.forEach(v=>{if(g)if(ac(v,"X-TIMESTAMP-MAP=")){g=!1,v.slice(16).split(",").forEach(m=>{ac(m,"LOCAL:")?d=m.slice(6):ac(m,"MPEGTS:")&&(f=parseInt(m.slice(7)))});try{h=sj(d)/1e3}catch(m){p=m}return}else v===""&&(g=!1);a.parse(v+`
`)}),a.flush()}const cc="stpp.ttml.im1t",q1=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,j1=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,aj={left:"start",center:"center",right:"end",start:"start",end:"end"};function wg(t,e,n,r){const s=Ze(new Uint8Array(t),["mdat"]);if(s.length===0){r(new Error("Could not parse IMSC1 mdat"));return}const i=s.map(a=>Xn(a)),o=mq(e.baseTime,1,e.timescale);try{i.forEach(a=>n(lj(a,o)))}catch(a){r(a)}}function lj(t,e){const n=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!n)throw new Error("Invalid ttml");const r={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},s=Object.keys(r).reduce((c,u)=>(c[u]=n.getAttribute(`ttp:${u}`)||r[u],c),{}),i=n.getAttribute("xml:space")!=="preserve",o=Lg(uc(n,"styling","style")),a=Lg(uc(n,"layout","region")),l=uc(n,"body","[begin]");return[].map.call(l,c=>{const u=z1(c,i);if(!u||!c.hasAttribute("begin"))return null;const d=fc(c.getAttribute("begin"),s),f=fc(c.getAttribute("dur"),s);let h=fc(c.getAttribute("end"),s);if(d===null)throw Ig(c);if(h===null){if(f===null)throw Ig(c);h=d+f}const p=new xd(d-e,h-e,u);p.id=Fd(p.startTime,p.endTime,p.text);const g=a[c.getAttribute("region")],v=o[c.getAttribute("style")],m=cj(g,v,o),{textAlign:y}=m;if(y){const T=aj[y];T&&(p.lineAlign=T),p.align=y}return Rt(p,m),p}).filter(c=>c!==null)}function uc(t,e,n){const r=t.getElementsByTagName(e)[0];return r?[].slice.call(r.querySelectorAll(n)):[]}function Lg(t){return t.reduce((e,n)=>{const r=n.getAttribute("xml:id");return r&&(e[r]=n),e},{})}function z1(t,e){return[].slice.call(t.childNodes).reduce((n,r,s)=>{var i;return r.nodeName==="br"&&s?n+`
`:(i=r.childNodes)!=null&&i.length?z1(r,e):e?n+r.textContent.trim().replace(/\s+/g," "):n+r.textContent},"")}function cj(t,e,n){const r="http://www.w3.org/ns/ttml#styling";let s=null;const i=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],o=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return o&&n.hasOwnProperty(o)&&(s=n[o]),i.reduce((a,l)=>{const c=dc(e,r,l)||dc(t,r,l)||dc(s,r,l);return c&&(a[l]=c),a},{})}function dc(t,e,n){return t&&t.hasAttributeNS(e,n)?t.getAttributeNS(e,n):null}function Ig(t){return new Error(`Could not parse ttml timestamp ${t}`)}function fc(t,e){if(!t)return null;let n=H1(t);return n===null&&(q1.test(t)?n=uj(t,e):j1.test(t)&&(n=dj(t,e))),n}function uj(t,e){const n=q1.exec(t),r=(n[4]|0)+(n[5]|0)/e.subFrameRate;return(n[1]|0)*3600+(n[2]|0)*60+(n[3]|0)+r/e.frameRate}function dj(t,e){const n=j1.exec(t),r=Number(n[1]);switch(n[2]){case"h":return r*3600;case"m":return r*60;case"ms":return r*1e3;case"f":return r/e.frameRate;case"t":return r/e.tickRate}return r}class fj{constructor(e){if(this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Cg(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},this.config.enableCEA708Captions){const n=new Co(this,"textTrack1"),r=new Co(this,"textTrack2"),s=new Co(this,"textTrack3"),i=new Co(this,"textTrack4");this.cea608Parser1=new Sg(1,n,r),this.cea608Parser2=new Sg(3,s,i)}e.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(b.FRAG_LOADING,this.onFragLoading,this),e.on(b.FRAG_LOADED,this.onFragLoaded,this),e.on(b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(b.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(b.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(b.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(b.FRAG_LOADING,this.onFragLoading,this),e.off(b.FRAG_LOADED,this.onFragLoaded,this),e.off(b.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(b.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(b.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(b.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(b.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.cea608Parser1=this.cea608Parser2=null}addCues(e,n,r,s,i){let o=!1;for(let a=i.length;a--;){const l=i[a],c=pj(l[0],l[1],n,r);if(c>=0&&(l[0]=Math.min(l[0],n),l[1]=Math.max(l[1],r),o=!0,c/(r-n)>.5))return}if(o||i.push([n,r]),this.config.renderTextTracksNatively){const a=this.captionsTracks[e];this.Cues.newCue(a,n,r,s)}else{const a=this.Cues.newCue(null,n,r,s);this.hls.trigger(b.CUES_PARSED,{type:"captions",cues:a,track:e})}}onInitPtsFound(e,{frag:n,id:r,initPTS:s,timescale:i}){const{unparsedVttFrags:o}=this;r==="main"&&(this.initPTS[n.cc]={baseTime:s,timescale:i}),o.length&&(this.unparsedVttFrags=[],o.forEach(a=>{this.onFragLoaded(b.FRAG_LOADED,a)}))}getExistingTrack(e){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const s=n.textTracks[r];if(s[e])return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:n,captionsTracks:r,media:s}=this,{label:i,languageCode:o}=n[e],a=this.getExistingTrack(e);if(a)r[e]=a,As(r[e]),g1(r[e],s);else{const l=this.createTextTrack("captions",i,o);l&&(l[e]=!0,r[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const n=this.captionsProperties[e];if(!n)return;const r=n.label,s={_id:e,label:r,kind:"captions",default:n.media?!!n.media.default:!1,closedCaptions:n.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,n,r){const s=this.media;if(s)return s.addTextTrack(e,n,r)}onMediaAttaching(e,n){this.media=n.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(n=>{As(e[n]),delete e[n]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=Cg(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const n=e.textTracks;if(n)for(let r=0;r<n.length;r++)As(n[r])}onSubtitleTracksUpdated(e,n){const r=n.subtitleTracks||[],s=r.some(i=>i.textCodec===cc);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(B1(this.tracks,r)){this.tracks=r;return}if(this.textTracks=[],this.tracks=r,this.config.renderTextTracksNatively){const i=this.media?this.media.textTracks:null;this.tracks.forEach((o,a)=>{let l;if(i&&a<i.length){let c=null;for(let u=0;u<i.length;u++)if(hj(i[u],o)){c=i[u];break}c&&(l=c)}if(l)As(l);else{const c=this._captionsOrSubtitlesFromCharacteristics(o);l=this.createTextTrack(c,o.name,o.lang),l&&(l.mode="disabled")}l&&(l.groupId=o.groupId,this.textTracks.push(l))})}else if(this.tracks.length){const i=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(b.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:i})}}}_captionsOrSubtitlesFromCharacteristics(e){if(e.attrs.CHARACTERISTICS){const n=/transcribes-spoken-dialog/gi.test(e.attrs.CHARACTERISTICS),r=/describes-music-and-sound/gi.test(e.attrs.CHARACTERISTICS);if(n&&r)return"captions"}return"subtitles"}onManifestLoaded(e,n){this.config.enableCEA708Captions&&n.captions&&n.captions.forEach(r=>{const s=/(?:CC|SERVICE)([1-4])/.exec(r.instreamId);if(!s)return;const i=`textTrack${s[1]}`,o=this.captionsProperties[i];o&&(o.label=r.name,r.lang&&(o.languageCode=r.lang),o.media=r)})}closedCaptionsForLevel(e){const n=this.hls.levels[e.level];return n==null?void 0:n.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,n){const{cea608Parser1:r,cea608Parser2:s,lastSn:i,lastPartIndex:o}=this;if(!(!this.enabled||!(r&&s))&&n.frag.type===Pe.MAIN){var a,l;const c=n.frag.sn,u=(a=n==null||(l=n.part)==null?void 0:l.index)!=null?a:-1;c===i+1||c===i&&u===o+1||(r.reset(),s.reset()),this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,n){const{frag:r,payload:s}=n;if(r.type===Pe.SUBTITLE)if(s.byteLength){const i=r.decryptdata,o="stats"in n;if(i==null||!i.encrypted||o){const a=this.tracks[r.level],l=this.vttCCs;l[r.cc]||(l[r.cc]={start:r.start,prevCC:this.prevCC,new:!0},this.prevCC=r.cc),a&&a.textCodec===cc?this._parseIMSC1(r,s):this._parseVTTs(n)}}else this.hls.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,n){const r=this.hls;wg(n,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),r.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{O.log(`Failed to parse IMSC1: ${s}`),r.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var n;const{frag:r,payload:s}=e,{initPTS:i,unparsedVttFrags:o}=this,a=i.length-1;if(!i[r.cc]&&a===-1){o.push(e);return}const l=this.hls,c=(n=r.initSegment)!=null&&n.data?is(r.initSegment.data,new Uint8Array(s)):s;oj(c,this.initPTS[r.cc],this.vttCCs,r.cc,r.start,u=>{this._appendCues(u,r.level),l.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:r})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?o.push(e):this._fallbackToIMSC1(r,s),O.log(`Failed to parse VTT cue: ${u}`),!(d&&a>r.cc)&&l.trigger(b.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r,error:u})})}_fallbackToIMSC1(e,n){const r=this.tracks[e.level];r.textCodec||wg(n,this.initPTS[e.cc],()=>{r.textCodec=cc,this._parseIMSC1(e,n)},()=>{r.textCodec="wvtt"})}_appendCues(e,n){const r=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[n];if(!s||s.mode==="disabled")return;e.forEach(i=>m1(s,i))}else{const s=this.tracks[n];if(!s)return;const i=s.default?"default":"subtitles"+n;r.trigger(b.CUES_PARSED,{type:"subtitles",cues:e,track:i})}}onFragDecrypted(e,n){const{frag:r}=n;r.type===Pe.SUBTITLE&&this.onFragLoaded(b.FRAG_LOADED,n)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,n){const{cea608Parser1:r,cea608Parser2:s}=this;if(!this.enabled||!(r&&s))return;const{frag:i,samples:o}=n;if(!(i.type===Pe.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let a=0;a<o.length;a++){const l=o[a].bytes;if(l){const c=this.extractCea608Data(l);r.addData(o[a].pts,c[0]),s.addData(o[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:n,endOffset:r,endOffsetSubtitles:s,type:i}){const{media:o}=this;if(!(!o||o.currentTime<r)){if(!i||i==="video"){const{captionsTracks:a}=this;Object.keys(a).forEach(l=>fu(a[l],n,r))}if(this.config.renderTextTracksNatively&&n===0&&s!==void 0){const{textTracks:a}=this;Object.keys(a).forEach(l=>fu(a[l],n,s))}}}extractCea608Data(e){const n=[[],[]],r=e[0]&31;let s=2;for(let i=0;i<r;i++){const o=e[s++],a=127&e[s++],l=127&e[s++];if(!(a===0&&l===0)&&4&o){const c=3&o;(c===0||c===1)&&(n[c].push(a),n[c].push(l))}}return n}}function hj(t,e){return!!t&&t.label===e.name&&!(t.textTrack1||t.textTrack2)}function pj(t,e,n,r){return Math.min(e,r)-Math.max(t,n)}function Cg(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class Nd{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.unregisterListener(),this.hls.config.capLevelToPlayerSize&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.BUFFER_CODECS,this.onBufferCodecs,this),e.on(b.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(b.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.BUFFER_CODECS,this.onBufferCodecs,this),e.off(b.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,n){const r=this.hls.levels[n.droppedLevel];this.isLevelAllowed(r)&&this.restrictedLevels.push({bitrate:r.bitrate,height:r.height,width:r.width})}onMediaAttaching(e,n){this.media=n.media instanceof HTMLVideoElement?n.media:null,this.clientRect=null}onManifestParsed(e,n){const r=this.hls;this.restrictedLevels=[],this.firstLevel=n.firstLevel,r.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onBufferCodecs(e,n){this.hls.config.capLevelToPlayerSize&&n.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media&&this.mediaHeight>0&&this.mediaWidth>0){const e=this.hls.levels;if(e.length){const n=this.hls;n.autoLevelCapping=this.getMaxLevel(e.length-1),n.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=n.autoLevelCapping}}}getMaxLevel(e){const n=this.hls.levels;if(!n.length)return-1;const r=n.filter((s,i)=>this.isLevelAllowed(s)&&i<=e);return this.clientRect=null,Nd.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,n={width:0,height:0};if(e){const r=e.getBoundingClientRect();n.width=r.width,n.height=r.height,!n.width&&!n.height&&(n.width=r.right-r.left||e.width||0,n.height=r.bottom-r.top||e.height||0)}return this.clientRect=n,n}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,n,r){if(!(e!=null&&e.length))return-1;const s=(o,a)=>a?o.width!==a.width||o.height!==a.height:!0;let i=e.length-1;for(let o=0;o<e.length;o+=1){const a=e[o];if((a.width>=n||a.height>=r)&&s(a,e[o+1])){i=o;break}}return i}}class gj{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(b.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,n){const r=this.hls.config;if(r.capLevelOnFPSDrop){const s=n.media instanceof self.HTMLVideoElement?n.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),r.fpsDroppedMonitoringPeriod)}}checkFPS(e,n,r){const s=performance.now();if(n){if(this.lastTime){const i=s-this.lastTime,o=r-this.lastDroppedFrames,a=n-this.lastDecodedFrames,l=1e3*o/i,c=this.hls;if(c.trigger(b.FPS_DROP,{currentDropped:o,currentDecoded:a,totalDroppedFrames:r}),l>0&&o>c.config.fpsDroppedMonitoringThreshold*a){let u=c.currentLevel;O.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(b.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=r,this.lastDecodedFrames=n}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const n=e.getVideoPlaybackQuality();this.checkFPS(e,n.totalVideoFrames,n.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const $o="[eme]";class $s{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=$s.CDMCleanupPromise?[$s.CDMCleanupPromise]:[],this.onMediaEncrypted=this._onMediaEncrypted.bind(this),this.onWaitingForKey=this._onWaitingForKey.bind(this),this.debug=O.debug.bind(O,$o),this.log=O.log.bind(O,$o),this.warn=O.warn.bind(O,$o),this.error=O.error.bind(O,$o),this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.onMediaEncrypted=this.onWaitingForKey=this.keyIdToKeySessionPromise=null,this.config=null}registerListeners(){this.hls.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(b.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(b.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(b.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(b.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:n,widevineLicenseUrl:r}=this.config,s=n[e];if(s)return s.licenseUrl;if(e===Tt.WIDEVINE&&r)return r;throw new Error(`no license server URL configured for key-system "${e}"`)}getServerCertificateUrl(e){const{drmSystems:n}=this.config,r=n[e];if(r)return r.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const n=this.hls.levels,r=(o,a,l)=>!!o&&l.indexOf(o)===a,s=n.map(o=>o.audioCodec).filter(r),i=n.map(o=>o.videoCodec).filter(r);return s.length+i.length===0&&i.push("avc1.42e01e"),new Promise((o,a)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,s,i).then(d=>o({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof Tn?a(d):a(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,n){const{requestMediaKeySystemAccessFunc:r}=this.config;if(typeof r!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${r}`;return r1===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return r(e,n)}getMediaKeysPromise(e,n,r){const s=RG(e,n,r,this.config.drmSystemOptions),i=this.keySystemAccessPromises[e];let o=i==null?void 0:i.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(s)}`),o=this.requestMediaKeySystemAccess(e,s);const a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),o.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),a.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),a.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),a.mediaKeys})}return o.then(()=>i.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:n,mediaKeys:r}){this.log(`Creating key-system session "${n}" keyId: ${Kn.hexDump(e.keyId||[])}`);const s=r.createSession(),i={decryptdata:e,keySystem:n,mediaKeys:r,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(i),i}renewKeySession(e){const n=e.decryptdata;if(n.pssh){const r=this.createMediaKeySessionContext(e),s=this.getKeyIdString(n),i="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(r,i,n.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Kn.hexDump(e.keyId)}updateKeySession(e,n){var r;const s=e.mediaKeysSession;return this.log(`Updating key-session "${s.sessionId}" for keyID ${Kn.hexDump(((r=e.decryptdata)==null?void 0:r.keyId)||[])}
      } (data length: ${n&&n.byteLength})`),s.update(n)}selectKeySystemFormat(e){const n=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((n,r)=>{const s=ql(this.config),i=e.map(Bp).filter(o=>!!o&&s.indexOf(o)!==-1);return this.getKeySystemSelectionPromise(i).then(({keySystem:o})=>{const a=Up(o);a?n(a):r(new Error(`Unable to find format for key-system "${o}"`))}).catch(r)})}loadKey(e){const n=e.keyInfo.decryptdata,r=this.getKeyIdString(n),s=`(keyId: ${r} format: "${n.keyFormat}" method: ${n.method} uri: ${n.uri})`;this.log(`Starting session for key ${s}`);let i=this.keyIdToKeySessionPromise[r];return i||(i=this.keyIdToKeySessionPromise[r]=this.getKeySystemForKeyPromise(n).then(({keySystem:o,mediaKeys:a})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(o,a).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:o,mediaKeys:a,decryptdata:n}),c="cenc";return this.generateRequestWithPreferredKeySession(l,c,n.pssh,"playlist-key")}))),i.catch(o=>this.handleError(o))),i}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof Tn?this.hls.trigger(b.ERROR,e.data):this.hls.trigger(b.ERROR,{type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const n=this.getKeyIdString(e),r=this.keyIdToKeySessionPromise[n];if(!r){const s=Bp(e.keyFormat),i=s?[s]:ql(this.config);return this.attemptKeySystemAccess(i)}return r}getKeySystemSelectionPromise(e){if(e.length||(e=ql(this.config)),e.length===0)throw new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}_onMediaEncrypted(e){const{initDataType:n,initData:r}=e;if(this.debug(`"${e.type}" event: init data type: "${n}"`),r===null)return;let s,i;if(n==="sinf"&&this.config.drmSystems[Tt.FAIRPLAY]){const u=Dt(new Uint8Array(r));try{const d=Ad(JSON.parse(u).sinf),f=d1(new Uint8Array(d));if(!f)return;s=f.subarray(8,24),i=Tt.FAIRPLAY}catch{this.warn('Failed to parse sinf "encrypted" event message initData');return}}else{const u=ZG(r);if(u===null)return;u.version===0&&u.systemId===n1.WIDEVINE&&u.data&&(s=u.data.subarray(8,24)),i=CG(u.systemId)}if(!i||!s)return;const o=Kn.hexDump(s),{keyIdToKeySessionPromise:a,mediaKeySessions:l}=this;let c=a[o];for(let u=0;u<l.length;u++){const d=l[u],f=d.decryptdata;if(f.pssh||!f.keyId)continue;const h=Kn.hexDump(f.keyId);if(o===h||f.uri.replace(/-/g,"").indexOf(o)!==-1){c=a[h],delete a[h],f.pssh=new Uint8Array(r),f.keyId=s,c=a[o]=c.then(()=>this.generateRequestWithPreferredKeySession(d,n,r,"encrypted-event-key-match"));break}}c||(c=a[o]=this.getKeySystemSelectionPromise([i]).then(({keySystem:u,mediaKeys:d})=>{var f;this.throwIfDestroyed();const h=new Ui("ISO-23001-7",o,(f=Up(u))!=null?f:"");return h.pssh=new Uint8Array(r),h.keyId=s,this.attemptSetMediaKeys(u,d).then(()=>{this.throwIfDestroyed();const p=this.createMediaKeySessionContext({decryptdata:h,keySystem:u,mediaKeys:d});return this.generateRequestWithPreferredKeySession(p,n,r,"encrypted-event-no-match")})})),c.catch(u=>this.handleError(u))}_onWaitingForKey(e){this.log(`"${e.type}" event`)}attemptSetMediaKeys(e,n){const r=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(r).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(n)});return this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),r.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(i=>r.indexOf(i)===-1)})}generateRequestWithPreferredKeySession(e,n,r,s){var i,o;const a=(i=this.config.drmSystems)==null||(o=i[e.keySystem])==null?void 0:o.generateRequest;if(a)try{const f=a.call(this.hls,n,r,e);if(!f)throw new Error("Invalid response from configured generateRequest filter");n=f.initDataType,r=e.decryptdata.pssh=f.initData?new Uint8Array(f.initData):null}catch(f){var l;if(this.warn(f.message),(l=this.hls)!=null&&l.config.debug)throw f}if(r===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${s}": ${c} (init data type: ${n} length: ${r?r.byteLength:null})`);const u=new Md;e.mediaKeysSession.onmessage=f=>{const h=e.mediaKeysSession;if(!h){u.emit("error",new Error("invalid state"));return}const{messageType:p,message:g}=f;this.log(`"${p}" message event for session "${h.sessionId}" message size: ${g.byteLength}`),p==="license-request"||p==="license-renewal"?this.renewLicense(e,g).catch(v=>{this.handleError(v),u.emit("error",v)}):p==="license-release"?e.keySystem===Tt.FAIRPLAY&&(this.updateKeySession(e,t1("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${p}"`)},e.mediaKeysSession.onkeystatuseschange=f=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const h=e.keyStatus;u.emit("keyStatus",h),h==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};const d=new Promise((f,h)=>{u.on("error",h),u.on("keyStatus",p=>{p.startsWith("usable")?f():p==="output-restricted"?h(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):p==="internal-error"?h(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${p}"`)):p==="expired"?h(new Error("key expired while generating request")):this.warn(`unhandled key status change "${p}"`)})});return e.mediaKeysSession.generateRequest(n,r).then(()=>{var f;this.log(`Request generated for key-session "${(f=e.mediaKeysSession)==null?void 0:f.sessionId}" keyId: ${c}`)}).catch(f=>{throw new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_NO_SESSION,error:f,fatal:!1},`Error generating key-session request: ${f}`)}).then(()=>d).catch(f=>{throw u.removeAllListeners(),this.removeSession(e),f}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((n,r)=>{this.log(`key status change "${n}" for keyStatuses keyId: ${Kn.hexDump("buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r))} session keyId: ${Kn.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=n})}fetchServerCertificate(e){const n=this.config,r=n.loader,s=new r(n),i=this.getServerCertificateUrl(e);return i?(this.log(`Fetching serverCertificate for "${e}"`),new Promise((o,a)=>{const l={responseType:"arraybuffer",url:i},c=n.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(f,h,p,g)=>{o(f.data)},onError:(f,h,p,g)=>{a(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:rn({url:l.url,data:void 0},f)},`"${e}" certificate request failed (${i}). Status: ${f.code} (${f.text})`))},onTimeout:(f,h,p)=>{a(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:p,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${i})`))},onAbort:(f,h,p)=>{a(new Error("aborted"))}};s.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,n,r){return new Promise((s,i)=>{e.setServerCertificate(r).then(o=>{this.log(`setServerCertificate ${o?"success":"not supported by CDM"} (${r==null?void 0:r.byteLength}) on "${n}"`),s(e)}).catch(o=>{i(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:o,fatal:!0},o.message))})})}renewLicense(e,n){return this.requestLicense(e,new Uint8Array(n)).then(r=>this.updateKeySession(e,new Uint8Array(r)).catch(s=>{throw new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:s,fatal:!0},s.message)}))}setupLicenseXHR(e,n,r,s){const i=this.config.licenseXhrSetup;return i?Promise.resolve().then(()=>{if(!r.decryptdata)throw new Error("Key removed");return i.call(this.hls,e,n,r,s)}).catch(o=>{if(!r.decryptdata)throw o;return e.open("POST",n,!0),i.call(this.hls,e,n,r,s)}).then(o=>(e.readyState||e.open("POST",n,!0),{xhr:e,licenseChallenge:o||s})):(e.open("POST",n,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,n){const r=this.config.keyLoadPolicy.default;return new Promise((s,i)=>{const o=this.getLicenseServerUrl(e.keySystem);this.log(`Sending license request to URL: ${o}`);const a=new XMLHttpRequest;a.responseType="arraybuffer",a.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return i(new Error("invalid state"));if(a.readyState===4)if(a.status===200){this._requestLicenseFailureCount=0;let l=a.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,a,o,e)}catch(u){this.error(u)}s(l)}else{const l=r.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||a.status>=400&&a.status<500)i(new Tn({type:De.KEY_SYSTEM_ERROR,details:K.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:a,response:{url:o,data:void 0,code:a.status,text:a.statusText}},`License Request XHR failed (${o}). Status: ${a.status} (${a.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,n).then(s,i)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=a,this.setupLicenseXHR(a,o,e,n).then(({xhr:l,licenseChallenge:c})=>{l.send(c)})})}onMediaAttached(e,n){if(!this.config.emeEnabled)return;const r=n.media;this.media=r,r.addEventListener("encrypted",this.onMediaEncrypted),r.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,n=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},Ui.clearKeyUriToKeyIdMap();const r=n.length;$s.CDMCleanupPromise=Promise.all(n.map(s=>this.removeSession(s)).concat(e==null?void 0:e.setMediaKeys(null).catch(s=>{this.log(`Could not clear media keys: ${s}. media.src: ${e==null?void 0:e.src}`)}))).then(()=>{r&&(this.log("finished closing key sessions and clearing media keys"),n.length=0)}).catch(s=>{this.log(`Could not close sessions and clear media keys: ${s}. media.src: ${e==null?void 0:e.src}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:n}){if(!(!n||!this.config.emeEnabled)&&!this.keyFormatPromise){const r=n.reduce((s,i)=>(s.indexOf(i.keyFormat)===-1&&s.push(i.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${r.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(r)}}removeSession(e){const{mediaKeysSession:n,licenseXhr:r}=e;if(n){this.log(`Remove licenses and keys and close session ${n.sessionId}`),n.onmessage=null,n.onkeystatuseschange=null,r&&r.readyState!==XMLHttpRequest.DONE&&r.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);return s>-1&&this.mediaKeySessions.splice(s,1),n.remove().catch(i=>{this.log(`Could not remove session: ${i}`)}).then(()=>n.close()).catch(i=>{this.log(`Could not close session: ${i}`)})}}}$s.CDMCleanupPromise=void 0;class Tn extends Error{constructor(e,n){super(n),this.data=void 0,e.error||(e.error=new Error(n)),this.data=e,e.err=e.error}}const mj=1;var Yt={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"};const vj="h";class Cr{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:Yt.MANIFEST,su:!this.initialized})}catch(i){O.warn("Could not generate manifest CMCD data.",i)}},this.applyFragmentData=s=>{try{const i=s.frag,o=this.hls.levels[i.level],a=this.getObjectType(i),l={d:i.duration*1e3,ot:a};(a===Yt.VIDEO||a===Yt.AUDIO||a==Yt.MUXED)&&(l.br=o.bitrate/1e3,l.tb=this.getTopBandwidth(a)/1e3,l.bl=this.getBufferLength(a)),this.apply(s,l)}catch(i){O.warn("Could not generate segment CMCD data.",i)}},this.hls=e;const n=this.config=e.config,{cmcd:r}=n;r!=null&&(n.pLoader=this.createPlaylistLoader(),n.fLoader=this.createFragmentLoader(),this.sid=r.sessionId||Cr.uuid(),this.cid=r.contentId,this.useHeaders=r.useHeaders===!0,this.registerListeners())}registerListeners(){const e=this.hls;e.on(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(b.MEDIA_DETACHED,this.onMediaDetached,this),e.on(b.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(b.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(b.MEDIA_DETACHED,this.onMediaDetached,this),e.off(b.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null}onMediaAttached(e,n){this.media=n.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,n){var r,s;this.audioBuffer=(r=n.tracks.audio)==null?void 0:r.buffer,this.videoBuffer=(s=n.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:mj,sf:vj,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,n={}){Rt(n,this.createData());const r=n.ot===Yt.INIT||n.ot===Yt.VIDEO||n.ot===Yt.MUXED;if(this.starved&&r&&(n.bs=!0,n.su=!0,this.starved=!1),n.su==null&&(n.su=this.buffering),this.useHeaders){const s=Cr.toHeaders(n);if(!Object.keys(s).length)return;e.headers||(e.headers={}),Rt(e.headers,s)}else{const s=Cr.toQuery(n);if(!s)return;e.url=Cr.appendQueryToUri(e.url,s)}}getObjectType(e){const{type:n}=e;if(n==="subtitle")return Yt.TIMED_TEXT;if(e.sn==="initSegment")return Yt.INIT;if(n==="audio")return Yt.AUDIO;if(n==="main")return this.hls.audioTracks.length?Yt.VIDEO:Yt.MUXED}getTopBandwidth(e){let n=0,r;const s=this.hls;if(e===Yt.AUDIO)r=s.audioTracks;else{const i=s.maxAutoLevel,o=i>-1?i+1:s.levels.length;r=s.levels.slice(0,o)}for(const i of r)i.bitrate>n&&(n=i.bitrate);return n>0?n:NaN}getBufferLength(e){const n=this.hls.media,r=e===Yt.AUDIO?this.audioBuffer:this.videoBuffer;return!r||!n?NaN:ht.bufferInfo(r,n.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,n=this.applyPlaylistData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,i,o){n(s),this.loader.load(s,i,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,n=this.applyFragmentData,r=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new r(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,i,o){n(s),this.loader.load(s,i,o)}}}static uuid(){const e=URL.createObjectURL(new Blob),n=e.toString();return URL.revokeObjectURL(e),n.slice(n.lastIndexOf("/")+1)}static serialize(e){const n=[],r=l=>!Number.isNaN(l)&&l!=null&&l!==""&&l!==!1,s=l=>Math.round(l),i=l=>s(l/100)*100,o={br:s,d:s,bl:i,dl:i,mtp:i,nor:l=>encodeURIComponent(l),rtp:i,tb:s},a=Object.keys(e||{}).sort();for(const l of a){let c=e[l];if(!r(c)||l==="v"&&c===1||l=="pr"&&c===1)continue;const u=o[l];u&&(c=u(c));const d=typeof c;let f;l==="ot"||l==="sf"||l==="st"?f=`${l}=${c}`:d==="boolean"?f=l:d==="number"?f=`${l}=${c}`:f=`${l}=${JSON.stringify(c)}`,n.push(f)}return n.join(",")}static toHeaders(e){const n=Object.keys(e),r={},s=["Object","Request","Session","Status"],i=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};for(const a of n){const l=o[a]!=null?o[a]:1;i[l][a]=e[a]}for(let a=0;a<i.length;a++){const l=Cr.serialize(i[a]);l&&(r[`CMCD-${s[a]}`]=l)}return r}static toQuery(e){return`CMCD=${encodeURIComponent(Cr.serialize(e))}`}static appendQueryToUri(e,n){if(!n)return e;const r=e.includes("?")?"&":"?";return`${e}${r}${n}`}}const yj=3e5;class bj{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=O.log.bind(O,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(b.MANIFEST_LOADING,this.onManifestLoading,this),e.on(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(b.MANIFEST_PARSED,this.onManifestParsed,this),e.on(b.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(b.MANIFEST_LOADING,this.onManifestLoading,this),e.off(b.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(b.MANIFEST_PARSED,this.onManifestParsed,this),e.off(b.ERROR,this.onError,this))}startLoad(){if(this.started=!0,self.clearTimeout(this.reloadTimer),this.enabled&&this.uri)if(this.updated){const e=Math.max(this.timeToLoad*1e3-(performance.now()-this.updated),0);this.scheduleRefresh(this.uri,e)}else this.loadSteeringManifest(this.uri)}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),self.clearTimeout(this.reloadTimer)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const n=this.levels;n&&(this.levels=n.filter(r=>r!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,n){const{contentSteering:r}=n;r!==null&&(this.pathwayId=r.pathwayId,this.uri=r.uri,this.started&&this.startLoad())}onManifestParsed(e,n){this.audioTracks=n.audioTracks,this.subtitleTracks=n.subtitleTracks}onError(e,n){const{errorAction:r}=n;if((r==null?void 0:r.action)===Bt.SendAlternateToPenaltyBox&&r.flags===En.MoveAllAlternatesMatchingHost){let s=this.pathwayPriority;const i=this.pathwayId;this.penalizedPathways[i]||(this.penalizedPathways[i]=performance.now()),!s&&this.levels&&(s=this.levels.reduce((o,a)=>(o.indexOf(a.pathwayId)===-1&&o.push(a.pathwayId),o),[])),s&&s.length>1&&(this.updatePathwayPriority(s),r.resolved=this.pathwayId!==i)}}filterParsedLevels(e){this.levels=e;let n=this.getLevelsForPathway(this.pathwayId);if(n.length===0){const r=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${r}"`),n=this.getLevelsForPathway(r),this.pathwayId=r}return n.length!==e.length?(this.log(`Found ${n.length}/${e.length} levels in Pathway "${this.pathwayId}"`),n):e}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(n=>e===n.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let n;const r=this.penalizedPathways,s=performance.now();Object.keys(r).forEach(i=>{s-r[i]>yj&&delete r[i]});for(let i=0;i<e.length;i++){const o=e[i];if(r[o])continue;if(o===this.pathwayId)return;const a=this.hls.nextLoadLevel,l=this.hls.levels[a];if(n=this.getLevelsForPathway(o),n.length>0){this.log(`Setting Pathway to "${o}"`),this.pathwayId=o,this.hls.trigger(b.LEVELS_UPDATED,{levels:n});const c=this.hls.levels[a];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=a);break}}}clonePathways(e){const n=this.levels;if(!n)return;const r={},s={};e.forEach(i=>{const{ID:o,"BASE-ID":a,"URI-REPLACEMENT":l}=i;if(n.some(u=>u.pathwayId===o))return;const c=this.getLevelsForPathway(a).map(u=>{const d=Rt({},u);d.details=void 0,d.url=W1(u.uri,u.attrs["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l);const f=new bt(u.attrs);f["PATHWAY-ID"]=o;const h=f.AUDIO&&`${f.AUDIO}_clone_${o}`,p=f.SUBTITLES&&`${f.SUBTITLES}_clone_${o}`;h&&(r[f.AUDIO]=h,f.AUDIO=h),p&&(s[f.SUBTITLES]=p,f.SUBTITLES=p),d.attrs=f;const g=new Vi(d);return ua(g,"audio",h),ua(g,"text",p),g});n.push(...c),Rg(this.audioTracks,r,l,o),Rg(this.subtitleTracks,s,l,o)})}loadSteeringManifest(e){const n=this.hls.config,r=n.loader;this.loader&&this.loader.destroy(),this.loader=new r(n);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||n.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+u)}const i={responseType:"json",url:s.href},o=n.steeringManifestLoadPolicy.default,a=o.errorRetry||o.timeoutRetry||{},l={loadPolicy:o,timeout:o.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},c={onSuccess:(u,d,f,h)=>{this.log(`Loaded steering manifest: "${s}"`);const p=u.data;if(p.VERSION!==1){this.log(`Steering VERSION ${p.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=p.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":v,"PATHWAY-PRIORITY":m}=p;if(g)try{this.uri=new self.URL(g,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||f.url),v&&this.clonePathways(v),m&&this.updatePathwayPriority(m)},onError:(u,d,f,h)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let p=this.timeToLoad*1e3;if(u.code===429){const g=this.loader;if(typeof(g==null?void 0:g.getResponseHeader)=="function"){const v=g.getResponseHeader("Retry-After");v&&(p=parseFloat(v)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,p)},onTimeout:(u,d,f)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(i,l,c)}scheduleRefresh(e,n=this.timeToLoad*1e3){self.clearTimeout(this.reloadTimer),this.reloadTimer=self.setTimeout(()=>{this.loadSteeringManifest(e)},n)}}function Rg(t,e,n,r){t&&Object.keys(e).forEach(s=>{const i=t.filter(o=>o.groupId===s).map(o=>{const a=Rt({},o);return a.details=void 0,a.attrs=new bt(a.attrs),a.url=a.attrs.URI=W1(o.url,o.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",n),a.groupId=a.attrs["GROUP-ID"]=e[s],a.attrs["PATHWAY-ID"]=r,a});t.push(...i)})}function W1(t,e,n,r){const{HOST:s,PARAMS:i,[n]:o}=r;let a;e&&(a=o==null?void 0:o[e],a&&(t=a));const l=new self.URL(t);return s&&!a&&(l.host=s),i&&Object.keys(i).sort().forEach(c=>{c&&l.searchParams.set(c,i[c])}),l.href}const Tj=/^age:\s*[\d.]+\s*$/im;class Y1{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=void 0,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Ya,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,n,r){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=n,this.callbacks=r,this.loadInternal()}loadInternal(){const{config:e,context:n}=this;if(!e)return;const r=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const i=this.xhrSetup;i?Promise.resolve().then(()=>{if(!this.stats.aborted)return i(r,n.url)}).catch(o=>(r.open("GET",n.url,!0),i(r,n.url))).then(()=>{this.stats.aborted||this.openAndSendXhr(r,n,e)}).catch(o=>{this.callbacks.onError({code:r.status,text:o.message},n,r,s)}):this.openAndSendXhr(r,n,e)}openAndSendXhr(e,n,r){e.readyState||e.open("GET",n.url,!0);const s=this.context.headers,{maxTimeToFirstByteMs:i,maxLoadTimeMs:o}=r.loadPolicy;if(s)for(const a in s)e.setRequestHeader(a,s[a]);n.rangeEnd&&e.setRequestHeader("Range","bytes="+n.rangeStart+"-"+(n.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=n.responseType,self.clearTimeout(this.requestTimeout),r.timeout=i&&Re(i)?i:o,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),r.timeout),e.send()}readystatechange(){const{context:e,loader:n,stats:r}=this;if(!e||!n)return;const s=n.readyState,i=this.config;if(!r.aborted&&s>=2&&(r.loading.first===0&&(r.loading.first=Math.max(self.performance.now(),r.loading.start),i.timeout!==i.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),i.timeout=i.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.loadPolicy.maxLoadTimeMs-(r.loading.first-r.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),n.onreadystatechange=null,n.onprogress=null;const o=n.status,a=n.responseType!=="text";if(o>=200&&o<300&&(a&&n.response||n.responseText!==null)){r.loading.end=Math.max(self.performance.now(),r.loading.first);const l=a?n.response:n.responseText,c=n.responseType==="arraybuffer"?l.byteLength:l.length;if(r.loaded=r.total=c,r.bwEstimate=r.total*8e3/(r.loading.end-r.loading.first),!this.callbacks)return;const u=this.callbacks.onProgress;if(u&&u(r,e,l,n),!this.callbacks)return;const d={url:n.responseURL,data:l,code:o};this.callbacks.onSuccess(d,r,e,n)}else{const l=i.loadPolicy.errorRetry,c=r.retry;ca(l,c,!1,o)?this.retry(l):(O.error(`${o} while loading ${e.url}`),this.callbacks.onError({code:o,text:n.statusText},e,n,r))}}}loadtimeout(){var e;const n=(e=this.config)==null?void 0:e.loadPolicy.timeoutRetry,r=this.stats.retry;if(ca(n,r,!0))this.retry(n);else{O.warn(`timeout while loading ${this.context.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:n,stats:r}=this;this.retryDelay=Ld(e,r.retry),r.retry++,O.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${n.url}, retrying ${r.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const n=this.stats;n.loaded=e.loaded,e.lengthComputable&&(n.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Tj.test(this.loader.getAllResponseHeaders())){const n=this.loader.getResponseHeader("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function Ej(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Sj=/(\d+)-(\d+)\/(\d+)/;class $g{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=void 0,this.response=void 0,this.controller=void 0,this.context=void 0,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||Lj,this.controller=new self.AbortController,this.stats=new Ya}destroy(){this.loader=this.callbacks=null,this.abortInternal()}abortInternal(){const e=this.response;e!=null&&e.ok||(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,n,r){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const i=_j(e,this.controller.signal),o=r.onProgress,a=e.responseType==="arraybuffer",l=a?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=n.loadPolicy;this.context=e,this.config=n,this.callbacks=r,this.request=this.fetchSetup(e,i),self.clearTimeout(this.requestTimeout),n.timeout=c&&Re(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},n.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const f=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),n.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),r.onTimeout(s,e,this.response)},u-(f-s.loading.start)),!d.ok){const{status:h,statusText:p}=d;throw new Ij(p||"fetch, bad network response",h,d)}return s.loading.first=f,s.total=wj(d.headers)||s.total,o&&Re(n.highWaterMark)?this.loadProgressively(d,s,e,n.highWaterMark,o):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const{response:f}=this;self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const h=d[l];h&&(s.loaded=s.total=h);const p={url:f.url,data:d,code:f.status};o&&!Re(n.highWaterMark)&&o(s,e,d,f),r.onSuccess(p,s,e,f)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),s.aborted)return;const f=d&&d.code||0,h=d?d.message:null;r.onError({code:f,text:h},e,d?d.details:null,s)})}getCacheAge(){let e=null;if(this.response){const n=this.response.headers.get("age");e=n?parseFloat(n):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,n,r,s=0,i){const o=new N1,a=e.body.getReader(),l=()=>a.read().then(c=>{if(c.done)return o.dataLength&&i(n,r,o.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return n.loaded+=d,d<s||o.dataLength?(o.push(u),o.dataLength>=s&&i(n,r,o.flush(),e)):i(n,r,u,e),l()}).catch(()=>Promise.reject());return l()}}function _j(t,e){const n={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Rt({},t.headers))};return t.rangeEnd&&n.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),n}function Aj(t){const e=Sj.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function wj(t){const e=t.get("Content-Range");if(e){const r=Aj(e);if(Re(r))return r}const n=t.get("Content-Length");if(n)return parseInt(n)}function Lj(t,e){return new self.Request(t.url,e)}class Ij extends Error{constructor(e,n,r){super(e),this.code=void 0,this.details=void 0,this.code=n,this.details=r}}const Cj=/\s/,Rj={newCue(t,e,n,r){const s=[];let i,o,a,l,c;const u=self.VTTCue||self.TextTrackCue;for(let f=0;f<r.rows.length;f++)if(i=r.rows[f],a=!0,l=0,c="",!i.isEmpty()){var d;for(let g=0;g<i.chars.length;g++)Cj.test(i.chars[g].uchar)&&a?l++:(c+=i.chars[g].uchar,a=!1);i.cueStartTime=e,e===n&&(n+=1e-4),l>=16?l--:l++;const h=K1(c.trim()),p=Fd(e,n,h);t!=null&&(d=t.cues)!=null&&d.getCueById(p)||(o=new u(e,n,h),o.id=p,o.line=f+1,o.align="left",o.position=10+Math.min(80,Math.floor(l*8/32)*10),s.push(o))}return t&&s.length&&(s.sort((f,h)=>f.line==="auto"||h.line==="auto"?0:f.line>8&&h.line>8?h.line-f.line:f.line-h.line),s.forEach(f=>m1(t,f))),s}},$j={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},kj=rn(rn({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Y1,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Mq,bufferController:Kq,capLevelController:Nd,errorController:IK,fpsController:gj,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:r1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:$j},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Dj()),{},{subtitleStreamController:Uq,subtitleTrackController:Hq,timelineController:fj,audioStreamController:Fq,audioTrackController:Nq,emeController:$s,cmcdController:Cr,contentSteeringController:bj});function Dj(){return{cueHandler:Rj,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function Pj(t,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=bu(t),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(i=>{const o=`${i==="level"?"playlist":i}LoadPolicy`,a=e[o]===void 0,l=[];s.forEach(c=>{const u=`${i}Loading${c}`,d=e[u];if(d!==void 0&&a){l.push(u);const f=n[o].default;switch(e[o]={default:f},c){case"TimeOut":f.maxLoadTimeMs=d,f.maxTimeToFirstByteMs=d;break;case"MaxRetry":f.errorRetry.maxNumRetry=d,f.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":f.errorRetry.retryDelayMs=d,f.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=d,f.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&O.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${o}": ${JSON.stringify(e[o])}`)}),rn(rn({},n),e)}function bu(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(bu):Object.keys(t).reduce((e,n)=>(e[n]=bu(t[n]),e),{}):t}function Oj(t){const e=t.loader;e!==$g&&e!==Y1?(O.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):Ej()&&(t.loader=$g,t.progressive=!0,t.enableSoftwareAES=!0,O.log("[config]: Progressive streaming enabled, using FetchLoader"))}class cr{static get version(){return"1.4.12"}static isSupported(){return jK()}static get Events(){return b}static get ErrorTypes(){return De}static get ErrorDetails(){return K}static get DefaultConfig(){return cr.defaultConfig?cr.defaultConfig:kj}static set DefaultConfig(e){cr.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Md,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,yG(e.debug||!1,"Hls instance");const n=this.config=Pj(cr.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,n.progressive&&Oj(n);const{abrController:r,bufferController:s,capLevelController:i,errorController:o,fpsController:a}=n,l=new o(this),c=this.abrController=new r(this),u=this.bufferController=new s(this),d=this.capLevelController=new i(this),f=new a(this),h=new lK(this),p=new hK(this),g=n.contentSteeringController,v=g?new g(this):null,m=this.levelController=new RK(this,v),y=new $K(this),T=new DK(this.config),E=this.streamController=new Pq(this,y,T);d.setStreamController(E),f.setStreamController(E);const S=[h,m,E];v&&S.splice(1,0,v),this.networkControllers=S;const _=[c,u,d,f,p,y];this.audioTrackController=this.createController(n.audioTrackController,S);const R=n.audioStreamController;R&&S.push(new R(this,y,T)),this.subtitleTrackController=this.createController(n.subtitleTrackController,S);const k=n.subtitleStreamController;k&&S.push(new k(this,y,T)),this.createController(n.timelineController,_),T.emeController=this.emeController=this.createController(n.emeController,_),this.cmcdController=this.createController(n.cmcdController,_),this.latencyController=this.createController(pK,_),this.coreComponents=_,S.push(l);const P=l.onErrorOut;typeof P=="function"&&this.on(b.ERROR,P,l)}createController(e,n){if(e){const r=new e(this);return n&&n.push(r),r}return null}on(e,n,r=this){this._emitter.on(e,n,r)}once(e,n,r=this){this._emitter.once(e,n,r)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,n,r=this,s){this._emitter.off(e,n,r,s)}listeners(e){return this._emitter.listeners(e)}emit(e,n,r){return this._emitter.emit(e,n,r)}trigger(e,n){if(this.config.debug)return this.emit(e,e,n);try{return this.emit(e,e,n)}catch(r){O.error("An internal error happened while handling event "+e+'. Error message: "'+r.message+'". Here is a stacktrace:',r),this.trigger(b.ERROR,{type:De.OTHER_ERROR,details:K.INTERNAL_EXCEPTION,fatal:!1,event:e,error:r})}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){O.log("destroy"),this.trigger(b.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(n=>n.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(n=>n.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){O.log("attachMedia"),this._media=e,this.trigger(b.MEDIA_ATTACHING,{media:e})}detachMedia(){O.log("detachMedia"),this.trigger(b.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const n=this.media,r=this.url,s=this.url=_d.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});O.log(`loadSource:${s}`),n&&r&&(r!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(n)),this.trigger(b.MANIFEST_LOADING,{url:e})}startLoad(e=-1){O.log(`startLoad(${e})`),this.networkControllers.forEach(n=>{n.startLoad(e)})}stopLoad(){O.log("stopLoad"),this.networkControllers.forEach(e=>{e.stopLoad()})}swapAudioCodec(){O.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){O.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e,n=0){this.levelController.removeLevel(e,n)}get levels(){return this.levelController.levels||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){O.log(`set currentLevel:${e}`),this.loadLevel=e,this.abrController.clearTimer(),this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){O.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){O.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){O.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){return this.levelController.startLevel}set startLevel(e){O.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const n=!!e;n!==this.config.capLevelToPlayerSize&&(n?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=n)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(O.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e)}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){pu.indexOf(e)>-1&&(this._maxHdcpLevel=e)}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:n}}=this;if(!e)return 0;const r=e.length;for(let s=0;s<r;s++)if(e[s].maxBitrate>=n)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:n,maxHdcpLevel:r}=this;let s;if(n===-1&&e&&e.length?s=e.length-1:s=n,r)for(let i=s;i--;){const o=e[i].attrs["HDCP-LEVEL"];if(o&&o<=r)return i}return s}get nextAutoLevel(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)}set nextAutoLevel(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const n=this.audioTrackController;n&&(n.audioTrack=e)}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const n=this.subtitleTrackController;n&&(n.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const n=this.subtitleTrackController;n&&(n.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}cr.defaultConfig=void 0;const xr=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},Mj={name:"d-icon"},xj=Object.assign(Mj,{props:{icon:String,size:[Number,String]},setup(t){const e=t,n=M(()=>({fontSize:/^\d+$/.test(e.size)?e.size+"px":e.size}));return(r,s)=>(C(),F("i",{class:ie(["d-icon iconfont",t.icon]),style:Ge(n.value)},null,6))}}),qn=xr(xj,[["__scopeId","data-v-bf21758a"]]),Fj={class:"d-player-top"},Nj={class:"top-title"},Bj={class:"top-title"},Uj={__name:"d-player-top",props:{title:{default:""}},setup(t){Date.prototype.format=function(r){let s={"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds()};for(var i in s)new RegExp("("+i+")").test(r)&&(r=r.replace(RegExp.$1,RegExp.$1.length==1?s[i]:("00"+s[i]).substr((""+s[i]).length)));return r};let e=Z("00:00:00");e.value=new Date().format("hh:mm:ss");let n=null;return n=setInterval(()=>{e.value=new Date().format("hh:mm:ss")},1e3),Us(()=>{clearInterval(n)}),(r,s)=>(C(),F("div",Fj,[L("p",Nj,be(t.title||""),1),L("p",Bj,be(Le(e)),1)]))}},Vj=xr(Uj,[["__scopeId","data-v-8a83c3bf"]]),Hj={class:"d-status"},Gj={class:"d-flex-center"},Kj={class:"d-flex-center"},qj=ye({__name:"d-status",props:["state"],setup(t){return(e,n)=>at((C(),F("div",Hj,[at(L("li",Gj,[Y(qn,{size:"18",class:"d-status-icon",icon:`icon-volume-${t.state.volume==0?"mute":t.state.volume>.5?"up":"down"}`},null,8,["icon"]),st(" "+be(~~(t.state.volume*100))+"% ",1)],512),[[pt,t.state.handleType=="volume"]]),at(L("li",Kj,[Y(qn,{size:"12",icon:"icon-play"}),Y(qn,{size:"12",icon:"icon-play",style:{"margin-right":"5px"}}),st("5倍速播放中 ")],512),[[pt,t.state.handleType=="playbackRate"||t.state.isMultiplesPlay]])],512)),[[pt,t.state.handleType||t.state.isMultiplesPlay]])}}),jj=xr(qj,[["__scopeId","data-v-b4f9cb00"]]),zj=t=>(Cn("data-v-928a6686"),t=t(),Rn(),t),Wj=["checked","true-value","false-value"],Yj=zj(()=>L("span",{class:"d-switch_action"},null,-1)),Xj=ye({__name:"d-switch",props:{modelValue:{type:[Number,String,Boolean]},width:{type:String,default:"40px"},trueValue:{type:[Number,String,Boolean],default:!0},falseValue:{type:[Number,String,Boolean],default:!0},activeColor:{type:[String],default:"#409EFF"}},emits:["update:modelValue","change"],setup(t,{emit:e}){Gu(a=>({"3c9c80d0":t.width,"4d5b9787":t.activeColor}));const n=t,r=e,s=Z(null),i=M(()=>n.modelValue===n.trueValue),o=()=>{nt(()=>{const a=s.value.checked;r("update:modelValue",a),r("change",a)})};return(a,l)=>(C(),F("div",{class:ie(["d-switch",{"is-checked":i.value}])},[L("input",{class:"d-switch__input",ref_key:"input",ref:s,type:"checkbox",checked:i.value,onChange:o,"true-value":t.trueValue,"false-value":t.falseValue},null,40,Wj),Yj],2))}}),hc=xr(Xj,[["__scopeId","data-v-928a6686"]]),to=t=>(Cn("data-v-462eb232"),t=t(),Rn(),t),Qj={key:0},Jj=to(()=>L("i",{class:"rotating iconfont icon-loading f50"},null,-1)),Zj=to(()=>L("i",{class:"rotating iconfont icon-loading f50"},null,-1)),ez=to(()=>L("p",null,"正在缓冲...",-1)),tz=[Zj,ez],nz=to(()=>L("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),rz=to(()=>L("i",{class:"iconfont icon-replay f24 mr5"},null,-1)),sz=ye({__name:"d-loading",props:{loadType:String,text:{type:String,default:""}},setup(t){const{proxy:e}=_t(),n=["loadstart","waiting","ended","error","stalled"],r=t,s=()=>{e.$parent.play()},i=M(()=>{let o="background: rgba(0, 0, 0, .1);z-index:1";return r.loadType=="loadstart"&&(o="background: rgba(0, 0, 0, 1);;z-index:3"),o});return(o,a)=>at((C(),F("div",{class:"d-loading",style:Ge(i.value)},[L("div",null,[t.loadType=="loadstart"?(C(),F("span",Qj,[Jj,L("p",null,be(t.text),1)])):ce("",!0),at(L("span",null,tz,512),[[pt,t.loadType=="waiting"]]),at(L("span",null,[L("p",{onClick:s,class:"d-flex-x d-pointer"},[nz,st("重新播放 ")])],512),[[pt,t.loadType=="ended"]]),at(L("span",null,[L("p",{onClick:s,class:"d-flex-x d-pointer"},[rz,st("请求错误 ")])],512),[[pt,t.loadType=="error"||t.loadType=="stalled"]])])],4)),[[pt,n.includes(t.loadType)]])}}),iz=xr(sz,[["__scopeId","data-v-462eb232"]]),Jr=function(t,e,n,r=!1){t&&e&&n&&t.addEventListener(e,n,r)},dn=function(t,e,n,r=!1){t&&e&&n&&t.removeEventListener(e,n,r)},oz=["onMousedown"],az={name:"DSlider"},lz=ye({...az,props:{modelValue:{required:!0,type:Number,default:0},disabled:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},hover:{type:Boolean,default:!0},hoverText:{type:String,default:""},preload:{type:Number,default:0},size:{type:String,default:"10px"}},emits:["update:modelValue","change","onMousemove"],setup(t,{emit:e}){Gu(m=>({"48dd698a":t.size}));const n=Z(null),r=Z(null),s=t,i=e,o=gt({dragging:!1,hoverPosition:0,hoverTipsLeft:"50%"}),a=M(()=>{let m=s.modelValue<0?0:s.modelValue>1?1:s.modelValue;return s.vertical?`height:${m*100}%`:`width:${m*100}%`}),l=M(()=>{let m=s.preload<0?0:s.preload>1?1:s.preload;return s.vertical?`height:${m*100}%`:`width:${m*100}%`}),c=M(()=>{let m=o.hoverPosition<0?0:o.hoverPosition>1?1:o.hoverPosition;return s.vertical?`bottom:${m*100}%`:`left:${m*100}%`}),u=m=>{m.preventDefault()},d=m=>{s.disabled||(m.preventDefault(),o.dragging=!0,h(m),Jr(window,"mousemove",g),Jr(window,"touchmove",g),Jr(window,"mouseup",v),Jr(window,"touchend",v))},f=m=>{if(!s.hover)return;let y=p(m);if(i("onMousemove",m,y),o.hoverPosition=y,s.vertical)return;let T=n.value,E=r.value.clientWidth/2,S=m.clientX-T.getBoundingClientRect().left;S<E?o.hoverTipsLeft=E-S+"px":T.clientWidth-S<E?o.hoverTipsLeft=T.clientWidth-S-E+"px":o.hoverTipsLeft="50%"},h=m=>{let y=p(m);i("update:modelValue",y),i("change",m,y)},p=m=>{let y=n.value,T=0;if(s.vertical){let E=y.clientHeight;T=(y.getBoundingClientRect().bottom-m.clientY)/E}else T=(m.clientX-y.getBoundingClientRect().left)/y.clientWidth;return T<0?0:T>1?1:T},g=m=>{h(m)},v=m=>{o.dragging&&(dn(window,"mousemove",g),dn(window,"touchmove",g),dn(window,"mouseup",v),dn(window,"touchend",v),dn(window,"contextmenu",v),setTimeout(()=>{o.dragging=!1},0))};return(m,y)=>(C(),F("div",{ref_key:"refSlider",ref:n,class:ie(["d-slider",{"is-vertical":s.vertical}]),onMousedown:ut(d,["stop"]),onContextmenu:u},[L("div",{class:"d-slider__runway",onMousemove:f},[at(L("div",{class:"d-slider__cursor",style:Ge(c.value)},[at(L("div",{class:"d-slider__tips",ref_key:"refTips",ref:r,style:Ge({left:o.hoverTipsLeft})},be(s.hoverText),5),[[pt,s.hoverText]])],4),[[pt,s.hover]]),L("div",{class:"d-slider__preload",style:Ge(l.value)},null,4),L("div",{class:"d-slider__bar",style:Ge(a.value)},null,4)],32)],42,oz))}}),Ci=xr(lz,[["__scopeId","data-v-703f29f7"]]),kg="1.3.2",Ja=t=>(Cn("data-v-64367a85"),t=t(),Rn(),t),cz={key:0,class:"d-player-dialog"},uz={class:"d-player-dialog-body"},dz={class:"d-player-dialog-title"},fz={class:"d-player-hotkey-panel"},hz={class:"d-player-filter-panel"},pz={class:"d-player-filter-panel-item"},gz=Ja(()=>L("span",null,"饱和度",-1)),mz={class:"d-player-filter-panel-item"},vz=Ja(()=>L("span",null,"亮度",-1)),yz={class:"d-player-filter-panel-item"},bz=Ja(()=>L("span",null,"对比度",-1)),Tz={key:0,class:"d-player-contextmenu"},Ez=["dplayerKeyCode"],Sz=Ja(()=>L("input",{class:"d-player-copyText"},null,-1)),_z={__name:"d-contextmenu",setup(t){const e=gt({show:!1,dialogType:"",dialogTitle:"",version:kg,mouseX:0,mouseY:0}),n=[{label:"视频色彩调整",key:"filter"},{label:"快捷键说明",key:"hotkey"},{label:"复制视频网址",key:"copy"},{label:"版本："+kg,key:"version"}],r=[{key:"Space",label:"播放/暂停"},{key:"→",label:"单次快进10s，长按5倍速播放"},{key:"←",label:"快退5s"},{key:"↑",label:"音量增加10%"},{key:"↓",label:"音量增加降低10%"},{key:"Esc",label:"退出全屏/退出网页全屏"},{key:"F",label:"全屏/退出全屏"}],s=gt({saturate:.392,brightness:.392,contrast:.392}),i=M(()=>({left:e.mouseX+"px",top:e.mouseY+"px"}));Ie(s,u=>{let d=document.querySelector("#dPlayerVideo"),f=(u.saturate*2.55).toFixed(2),h=(u.brightness*2.55).toFixed(2),p=(u.contrast*2.55).toFixed(2);d.style.filter=`saturate(${f}) brightness(${h}) contrast(${p})`});const o=()=>{s.saturate=.392,s.brightness=.392,s.contrast=.392},a=u=>{u.key=="Escape"&&c(0)},l=u=>{u.preventDefault(),Jr(window,"keydown",a),Jr(window,"click",c);let d=document.querySelector("#refPlayerWrap"),f=d.clientWidth;d.clientHeight,e.mouseX=u.clientX-d.getBoundingClientRect().left,f-e.mouseX<130&&(e.mouseX=e.mouseX+(f-e.mouseX-130)),e.mouseY=u.clientY-d.getBoundingClientRect().top,e.show=!0},c=u=>{let d=u.target.nodeName=="LI",f=u.target.attributes.dplayerKeyCode&&u.target.attributes.dplayerKeyCode.value,h=n.map(p=>p.key);if(d&&h.includes(f))if(e.dialogTitle=u.target.innerText,e.dialogType=f,f=="copy"){let p=document.querySelector(".d-player-copyText");p.value=window.location.href,p.select(),document.execCommand("copy"),e.dialogType=""}else f=="version"&&(e.dialogType="");e.show=!1,dn(window,"keydown",a),dn(window,"click",c)};return mt(()=>{let u=document.querySelector("#refPlayerWrap");dn(window,"keydown",a),dn(window,"click",c),dn(u,"contextmenu",l),Jr(u,"contextmenu",l)}),Us(()=>{let u=document.querySelector("#refPlayerWrap");dn(window,"keydown",a),dn(window,"click",c),dn(u,"contextmenu",l)}),(u,d)=>(C(),F("div",null,[Y(Ht,{name:"d-fade-in"},{default:ue(()=>[e.dialogType?(C(),F("div",cz,[L("div",uz,[L("h5",dz,[st(be(e.dialogTitle)+" ",1),L("i",{onClick:d[0]||(d[0]=f=>e.dialogType=!1),class:"icon icon-close"},"X")]),at(L("ul",fz,[(C(),F(Ne,null,kt(r,f=>L("li",{class:"d-player-hotkey-panel-item",key:f.key},[L("span",null,be(f.key),1),L("span",null,be(f.label),1)])),64))],512),[[pt,e.dialogType=="hotkey"]]),at(L("ul",hz,[L("li",pz,[gz,Y(Ci,{class:"filter-panel-slider",size:"5px",modelValue:s.saturate,"onUpdate:modelValue":d[1]||(d[1]=f=>s.saturate=f)},null,8,["modelValue"]),L("span",null,be(Math.round(s.saturate*255)),1)]),L("li",mz,[vz,Y(Ci,{class:"filter-panel-slider",size:"5px",modelValue:s.brightness,"onUpdate:modelValue":d[2]||(d[2]=f=>s.brightness=f)},null,8,["modelValue"]),L("span",null,be(Math.round(s.brightness*255)),1)]),L("li",yz,[bz,Y(Ci,{class:"filter-panel-slider",size:"5px",modelValue:s.contrast,"onUpdate:modelValue":d[3]||(d[3]=f=>s.contrast=f)},null,8,["modelValue"]),L("span",null,be(Math.round(s.contrast*255)),1)]),L("span",{onClick:o,title:"重置","aria-label":"重置",class:"d-player-filter-reset"},"重置")],512),[[pt,e.dialogType=="filter"]])])])):ce("",!0)]),_:1}),e.show?(C(),F("div",Tz,[L("ul",{class:"d-player-contextmenu-body",style:Ge(i.value)},[(C(),F(Ne,null,kt(n,f=>L("li",{dplayerKeyCode:f.key,key:f.key},be(f.label),9,Ez)),64))],4),Sz])):ce("",!0)]))}},Az=xr(_z,[["__scopeId","data-v-64367a85"]]),wz=t=>`${parseInt("0x"+t.slice(1,3))},${parseInt("0x"+t.slice(3,5))},${parseInt("0x"+t.slice(5,7))}`,Lz=t=>t.charAt(0).toUpperCase()+t.slice(1),pc=t=>{let e=~~(t/3600),n=~~(t%3600/60),r=~~(t%60);return e=e<10?"0"+e:e,n=n<10?"0"+n:n,r=r<10?"0"+r:r,`${e}:${n}:${r}`},oi="ontouchstart"in window,Iz=t=>{let e=document,n=e.webkitIsFullScreen||e.fullscreen;return n?(document.exitFullscreen||e.webkitExitFullScreen).call(e):(t.requestFullscreen||t.webkitRequestFullScreen).call(t),!n},Cz=t=>{document.pictureInPictureElement?document.exitPictureInPicture().catch(e=>{console.log(e,"Video failed to leave Picture-in-Picture mode.")}):t.requestPictureInPicture().catch(e=>{console.log(e,"Video failed to enter Picture-in-Picture mode.")})},Dg=["loadstart","play","pause","playing","seeking","seeked","waiting","durationchange","progress","canplay","timeupdate","ended","error","stalled"],Rz={width:{type:String,default:"800px"},height:{type:String,default:"450px"},color:{type:String,default:"#409eff"},src:{required:!0,type:String,default:""},title:{type:String,default:""},type:{type:String,default:"video/mp4"},poster:{type:String,default:""},webFullScreen:{type:Boolean,default:!1},speed:{type:Boolean,default:!0},currentTime:{type:Number,default:0},playsinline:{type:Boolean,default:!1},muted:{type:Boolean,default:!1},speedRate:{type:Array,default:()=>["2.0","1.5","1.25","1.0","0.75","0.5"]},autoPlay:{type:Boolean,default:!1},loop:{type:Boolean,default:!1},mirror:{type:Boolean,default:!1},ligthOff:{type:Boolean,default:!1},volume:{type:[String,Number],default:.3},control:{type:Boolean,default:!0},controlBtns:{type:Array,default:["audioTrack","quality","speedRate","volume","setting","pip","pageFullScreen","fullScreen"]},preload:{type:String,default:"auto"}},Za=t=>(Cn("data-v-ad0cee4b"),t=t(),Rn(),t),$z={class:"d-player-video",id:"dPlayerVideo"},kz=["controls","webkit-playsinline","playsinline","volume","muted","loop","preload","src","poster"],Dz={class:"d-player-lightoff"},Pz={key:1,class:"d-player-state"},Oz={class:"d-play-btn"},Mz=["onKeyup","onKeydown"],xz={class:"d-control-progress"},Fz={class:"d-tool-bar"},Nz={key:0,class:"d-tool-item d-tool-time audioTrack-btn"},Bz=Za(()=>L("span",{style:{margin:"0 3px"}},"/",-1)),Uz={class:"total-time"},Vz={class:"d-tool-bar"},Hz={key:0,class:"d-tool-item quality-btn"},Gz={class:"d-tool-item-main"},Kz={class:"speed-main",style:{"text-align":"center"}},qz=["onClick"],jz={key:1,class:"d-tool-item speedRate-btn"},zz={class:"d-tool-item-main"},Wz={class:"speed-main"},Yz=["onClick"],Xz={key:2,class:"d-tool-item volume-btn"},Qz={class:"d-tool-item-main volume-box",style:{width:"52px"}},Jz={class:"volume-text-size"},Zz={key:3,class:"d-tool-item setting-btn"},eW={class:"d-tool-item-main"},tW={class:"speed-main"},nW=Za(()=>L("div",{class:"d-tool-item-main"},"画中画",-1)),rW=Za(()=>L("div",{class:"d-tool-item-main"},"网页全屏",-1)),sW=Za(()=>L("div",{class:"d-tool-item-main"},"全屏",-1)),iW={name:"vue3VideoPlay",inheritAttrs:!1},oW=ye({...iW,props:Rz,emits:[...Dg,"mirrorChange","loopChange","lightOffChange"],setup(t,{expose:e,emit:n}){Gu(J=>({"0c35f2da":Le(p),"05990a2c":J.width,d88d7cfe:J.height}));const r=new cr({fragLoadingTimeOut:2e3}),s=t,i=n,o=Z(null),a=Z(null),l=Z(null),c=Z(null),u=gt({dVideo:null,...s,muted:s.muted,playBtnState:s.autoPlay?"pause":"play",loadStateType:"loadstart",fullScreen:!1,handleType:"",currentTime:"00:00:00",preloadBar:0,totalTime:"00:00:00",isVideoHovering:!0,speedActive:"1.0",playProgress:0,isMultiplesPlay:!1,longPressTimeout:null,progressCursorTime:"00:00:00",qualityLevels:[],currentLevel:0}),d=(...J)=>le=>J.reverse().reduce((me,Ve)=>Ve(me),le),f=Dg.reduce((J,le)=>{let me=`on${Lz(le)}`;return J[me]=Ve=>{u.loadStateType=le,i(le,Ve)},J},{});f.onCanplay=d(f.onCanplay,()=>{u.playBtnState!="play"&&u.dVideo.play(),u.autoPlay&&(u.dVideo.play(),u.playBtnState="pause")}),f.onEnded=d(f.onEnded,()=>{u.playBtnState="replay"}),f.onDurationchange=J=>{i("durationchange",J),s.currentTime!=0&&(u.dVideo.currentTime=s.currentTime),f.onTimeupdate(J)},f.onProgress=J=>{console.log("缓冲中..."),i("progress",J);let le=J.target.duration,me=J.target.buffered,Ve=J.target.buffered.length&&J.target.buffered.end(me-1);u.preloadBar=Ve/le},f.onTimeupdate=J=>{i("timeupdate",J);let le=J.duration||J.target.duration||0,me=J.currentTime||J.target.currentTime;u.playProgress=me/le,u.currentTime=pc(me),u.totalTime=pc(le)},f.onError=d(f.onError,()=>{u.playBtnState="replay"});let h=cE();for(let J in h)f[J]=h[J];const p=wz(u.color),g=xp(500,()=>{u.handleType=""}),v=J=>{J.preventDefault(),J.code=="ArrowUp"?u.volume=u.volume+.1>1?1:u.volume+.1:u.volume=u.volume-.1<0?0:u.volume-.1,u.muted=!1,u.handleType="volume",g()},m=J=>{s.speed&&(u.dVideo.currentTime=u.dVideo.currentTime<10?.1:u.dVideo.currentTime-10,f.onTimeupdate(u.dVideo),E())},y=J=>{J.preventDefault();let le=J.type;if(J.key=="ArrowRight"){if(E(),le=="keyup"){if(clearTimeout(u.longPressTimeout),!s.speed&&!u.longPressTimeout)return;u.isMultiplesPlay?(u.dVideo.playbackRate=u.speedActive,u.isMultiplesPlay=!1):(u.dVideo.currentTime=u.dVideo.currentTime+10,f.onTimeupdate(u.dVideo))}else if(le=="keydown"){if(!s.speed)return;u.isMultiplesPlay&&clearTimeout(u.longPressTimeout),u.longPressTimeout=setTimeout(()=>{u.isMultiplesPlay=!0,u.dVideo.playbackRate=5,u.handleType="playbackRate",g()},500)}}},T=()=>{oi||c.value.focus()},E=()=>{u.loadStateType="play",u.dVideo.play().catch(()=>{u.dVideo.load(),setTimeout(()=>{u.dVideo.play().catch(()=>{u.playBtnState="replay",u.loadStateType="error"})},200)}),u.playBtnState="pause"},S=()=>{u.dVideo.pause(),u.playBtnState="play"},_=J=>{J&&J.preventDefault(),u.playBtnState=="play"||u.playBtnState=="replay"?E():u.playBtnState=="pause"&&S()},R=()=>{u.muted=!u.muted,u.volume==0&&(u.volume=.05)},k=(J,le)=>{let me=u.dVideo.duration||u.dVideo.target.duration;u.dVideo.currentTime=me*le,u.playBtnState=="play"&&(u.dVideo.play(),u.playBtnState="pause")},P=(J,le)=>{u.progressCursorTime=pc(u.dVideo.duration*le)},$=xp(2500,()=>{u.isVideoHovering=!1}),N=J=>{u.isVideoHovering=!0,$()},w=(J,le)=>{r.currentLevel=le,u.currentLevel=le},U=J=>{u.speedActive=J,u.dVideo.playbackRate=J},z=J=>{i("mirrorChange",J,u.dVideo)},ne=J=>{i("loopChange",J,u.dVideo)},oe=J=>{i("lightOffChange",J,u.dVideo)},W=()=>{Cz(u.dVideo)},q=()=>{u.fullScreen=Iz(o.value)},pe=()=>{u.dVideo.canPlayType(s.type)||console.error("vue3-video-play: Format not supported,Check the [type] parameter"),u.dVideo.canPlayType(s.type)||u.dVideo.canPlayType("application/vnd.apple.mpegurl")?u.muted=s.autoPlay:cr.isSupported()&&(r.detachMedia(),r.attachMedia(u.dVideo),r.on(cr.Events.MEDIA_ATTACHED,()=>{r.loadSource(s.src),r.on("hlsManifestParsed",(J,le)=>{console.log(le),u.currentLevel=le.level,u.qualityLevels=le.levels||[]})}),r.on("hlsLevelSwitching",(J,le)=>{console.log(le),console.log("LEVEL_SWITCHING")}),r.on("hlsLevelSwitched",(J,le)=>{u.currentLevel=le.level,console.log("LEVEL_SWITCHED")}))};return Ie(()=>s.src,()=>{nt(()=>{pe()})},{immediate:!0}),mt(()=>{u.dVideo=a,T()}),e({play:E,pause:S,togglePlay:_}),(J,le)=>(C(),F("div",{ref_key:"refPlayerWrap",ref:o,id:"refPlayerWrap",class:ie(["d-player-wrap",{"web-full-screen":u.webFullScreen,"is-lightoff":u.lightOff,"d-player-wrap-hover":u.playBtnState=="play"||u.isVideoHovering}]),onMousemove:N},[L("div",$z,[L("video",Qn({ref_key:"refdVideo",ref:a,class:["d-player-video-main",{"video-mirror":u.mirror}],id:"dPlayerVideoMain",controls:!!(Le(oi)&&u.speed),"webkit-playsinline":s.playsinline,playsinline:s.playsinline},Le(f),{volume:u.volume,muted:u.muted,loop:u.loop,preload:J.preload,width:"100%",height:"100%",src:s.src,poster:s.poster})," 您的浏览器不支持Video标签。 ",16,kz)]),Y(Ht,{name:"d-fade-in"},{default:ue(()=>[at(L("div",Dz,null,512),[[pt,u.lightOff]])]),_:1}),u.fullScreen?(C(),Se(Vj,{key:0,title:s.title},null,8,["title"])):ce("",!0),Le(oi)?ce("",!0):(C(),F("div",Pz,[Y(Ht,{name:"d-scale-out"},{default:ue(()=>[at(L("div",Oz,[Y(qn,{icon:"icon-play",size:40})],512),[[pt,u.playBtnState=="play"]])]),_:1}),Y(jj,{state:u},null,8,["state"])])),Le(oi)?ce("",!0):(C(),F("input",{key:2,type:"input",readonly:"readonly",ref_key:"refInput",ref:c,onDblclick:q,onKeyup:[Pt(q,["f"]),le[0]||(le[0]=Pt(me=>u.webFullScreen=!1,["esc"])),y],onClick:_,onKeydown:[Pt(_,["space"]),Pt(m,["arrow-left"]),Pt(v,["arrow-up","arrow-down"]),y],class:"d-player-input",maxlength:"0"},null,40,Mz)),Y(iz,{loadType:u.loadStateType},null,8,["loadType"]),Y(Az),!Le(oi)&&u.control?(C(),F("div",{key:3,class:"d-player-control",ref_key:"refPlayerControl",ref:l},[L("div",xz,[Y(Ci,{class:"d-progress-bar",onOnMousemove:P,onChange:k,disabled:!u.speed,hoverText:u.progressCursorTime,modelValue:u.playProgress,"onUpdate:modelValue":le[1]||(le[1]=me=>u.playProgress=me),preload:u.preloadBar},null,8,["disabled","hoverText","modelValue","preload"])]),L("div",{class:"d-control-tool",onClick:T},[L("div",Fz,[L("div",{class:"d-tool-item",onClick:_},[Y(qn,{size:"24",icon:`icon-${u.playBtnState}`},null,8,["icon"])]),s.controlBtns.includes("audioTrack")?(C(),F("div",Nz,[L("span",null,be(u.currentTime),1),Bz,L("span",Uz,be(u.totalTime),1)])):ce("",!0)]),L("div",Vz,[u.qualityLevels.length&&s.controlBtns.includes("quality")?(C(),F("div",Hz,[st(be(u.qualityLevels.length&&(u.qualityLevels[u.currentLevel]||{}).height)+"P ",1),L("div",Gz,[L("ul",Kz,[(C(!0),F(Ne,null,kt(u.qualityLevels,(me,Ve)=>(C(),F("li",{class:ie({"speed-active":u.currentLevel==Ve}),onClick:je=>w(me,Ve),key:me},be(me.height)+"P ",11,qz))),128))])])])):ce("",!0),s.controlBtns.includes("speedRate")?(C(),F("div",jz,[st(be(u.speedActive=="1.0"?"倍速":u.speedActive+"x")+" ",1),L("div",zz,[L("ul",Wz,[(C(!0),F(Ne,null,kt(u.speedRate,me=>(C(),F("li",{class:ie({"speed-active":u.speedActive==me}),onClick:Ve=>U(me),key:me},be(me)+"x ",11,Yz))),128))])])])):ce("",!0),s.controlBtns.includes("volume")?(C(),F("div",Xz,[L("div",Qz,[L("div",{class:ie(["volume-main",{"is-muted":u.muted}])},[L("span",Jz,be(u.muted?0:~~(u.volume*100))+"%",1),Y(Ci,{onChange:le[2]||(le[2]=me=>u.muted=!1),hover:!1,size:"5px",vertical:!0,modelValue:u.volume,"onUpdate:modelValue":le[3]||(le[3]=me=>u.volume=me)},null,8,["modelValue"])],2)]),L("span",{onClick:R,style:{display:"flex"}},[Y(qn,{size:"20",icon:`icon-volume-${u.volume==0||u.muted?"mute":u.volume>.5?"up":"down"}`},null,8,["icon"])])])):ce("",!0),s.controlBtns.includes("setting")?(C(),F("div",Zz,[Y(qn,{size:"20",class:"rotateHover",icon:"icon-settings"}),L("div",eW,[L("ul",tW,[L("li",null,[st(" 镜像画面 "),Y(hc,{onChange:z,modelValue:u.mirror,"onUpdate:modelValue":le[4]||(le[4]=me=>u.mirror=me)},null,8,["modelValue"])]),L("li",null,[st(" 循环播放 "),Y(hc,{onChange:ne,modelValue:u.loop,"onUpdate:modelValue":le[5]||(le[5]=me=>u.loop=me)},null,8,["modelValue"])]),L("li",null,[st(" 关灯模式 "),Y(hc,{onChange:oe,modelValue:u.lightOff,"onUpdate:modelValue":le[6]||(le[6]=me=>u.lightOff=me)},null,8,["modelValue"])])])])])):ce("",!0),s.controlBtns.includes("pip")?(C(),F("div",{key:4,class:"d-tool-item pip-btn",onClick:W},[Y(qn,{size:"20",icon:"icon-pip"}),nW])):ce("",!0),s.controlBtns.includes("pageFullScreen")?(C(),F("div",{key:5,class:"d-tool-item pip-btn",onClick:le[7]||(le[7]=me=>u.webFullScreen=!u.webFullScreen)},[Y(qn,{size:"20",icon:"icon-web-screen"}),rW])):ce("",!0),s.controlBtns.includes("fullScreen")?(C(),F("div",{key:6,class:"d-tool-item fullScreen-btn",onClick:q},[sW,Y(qn,{size:"20",icon:"icon-screen"})])):ce("",!0)])])],512)):ce("",!0)],34))}}),fa=xr(oW,[["__scopeId","data-v-ad0cee4b"]]);function aW(t){t.component(fa.name,fa)}fa.install=aW;Zi.config.globalProperties.$http=sG;Zi.config.globalProperties.$utils=ia;Zi.config.globalProperties.$COMMON=uG;Zi.config.globalProperties.$msg=Y0;Zi.use(SV).use(kV).use(fa).mount("#app");export{ub as $,Fe as A,Ge as B,kt as C,be as D,gr as E,Ne as F,_t as G,Ke as H,cW as I,In as J,Us as K,Wt as L,Pr as M,zt as N,Fu as O,nE as P,Hn as Q,wb as R,cd as S,Ht as T,Cn as U,Rn as V,us as W,st as X,vd as Y,YT as Z,qe as _,o0 as a,I8 as a0,fW as a1,db as a2,vt as a3,ze as a4,zo as a5,sP as a6,pn as a7,_k as a8,Me as a9,Ku as aa,uW as ab,Q as ac,dW as ad,j as ae,$a as af,fa as ag,gS as ah,E3 as ai,W4 as aj,v8 as ak,Pt as al,j0 as am,z0 as an,jB as ao,Qn as ap,lW as aq,a0 as b,Z as c,ye as d,M as e,Xu as f,Un as g,Qu as h,Ce as i,C as j,F as k,L as l,Se as m,nt as n,mt as o,Vt as p,ue as q,gt as r,ie as s,ut as t,Gt as u,Y as v,Ie as w,pt as x,at as y,ce as z};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/Index-78h6fhi-.js","assets/MvList-m_0rPA1e.js","assets/el-skeleton-item-kIwtNASk.js","assets/el-skeleton-item-YZCPKKFD.css","assets/MvList--8eW_HQf.css","assets/AlbumList-AuCPDn1s.js","assets/AlbumList-i2u2bHuZ.css","assets/PlayList-_u7cpBFH.js","assets/PlayList-0E79hWJ_.css","assets/throttle-IPVAgrZU.js","assets/Index-f_I81ADq.css","assets/Index-PY6y49cR.js","assets/Loading-KSf3ufRB.js","assets/Loading-wjq3iZvL.css","assets/Index-wszSa0vu.css","assets/Index-_1tYaEHb.js","assets/el-infinite-scroll-ZIv0e9pO.js","assets/Index-aA0v_cf9.css","assets/Detail-GOIKBLIx.js","assets/Detail-sb0A1iHh.css","assets/Index-5VFnMuVJ.js","assets/Comments-AlU7rqLJ.js","assets/Comments-j71eSPN1.css","assets/Index-14S_xJLS.css","assets/Index-69NrRiEx.js","assets/Index-Dt52M06-.css","assets/Index-97aTa9-c.js","assets/Index-bdxV28aX.css","assets/Index-Wa6xTehp.js","assets/el-affix-5wtVcazh.js","assets/el-affix-it7Ti0w0.css","assets/ArtistItem-ZWtLqh1L.js","assets/ArtistItem-PoKP9UoL.css","assets/Index-gpE3WWO-.css","assets/Index-2RY_ewQo.js","assets/Index-dBVqALf9.css","assets/Detail-pr9f5e08.js","assets/Detail-ThQ6cfFP.css","assets/Index-ASMeWtXG.js","assets/Index-u8vLlprR.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}