import{Q as k,G as L,r as E,o as $,Z as w,J as x,j as s,k as n,l as o,y as A,F as d,C as _,m as y,z as B,v as S,q as T,s as v,D as u}from"./index-nvWmsnf9.js";import{E as D}from"./el-infinite-scroll-ZIv0e9pO.js";import{E as M}from"./el-affix-5wtVcazh.js";import{_ as I}from"./Loading-KSf3ufRB.js";import{_ as g}from"./ArtistItem-ZWtLqh1L.js";import"./throttle-IPVAgrZU.js";const N={name:"Artist",components:{Loading:I,ArtistItem:g},setup(l){const{proxy:m}=L(),e=E({type:[{label:"全部",val:-1},{label:"男歌手",val:1},{label:"女歌手",val:2},{label:"乐队",val:3}],area:[{label:"全部",val:-1},{label:"华语",val:7},{label:"欧美",val:96},{label:"日本",val:8},{label:"韩国",val:16},{label:"其他",val:0}],initial:[{label:"热门",val:-1},{label:"#",val:0}],typeIndex:0,areaIndex:0,initialIndex:0,params:{area:"",type:"",initial:"",limit:30,offset:0},list:[],isLoading:!0,busy:!0}),c=()=>{const i=[];for(let t=0;t<26;t++)i.push({label:String.fromCharCode(65+t),val:String.fromCharCode(97+t)});e.initial=[e.initial[0],...i,e.initial[1]]},b=(i,t)=>{e[i+"Index"]=t,e.list=[],e.params.offset=0,e.params[i]=e[i][t].val},p=async i=>{const{data:t}=await m.$http.artistList(i);if(t.code!==200)return m.$msg.error("数据请求失败");e.list=e.params.offset!==0?[...e.list,...t.artists]:t.artists,e.busy=!t.more,e.isLoading=t.more},f=()=>{e.busy=!0,e.params.offset=e.list.length};return $(()=>{e.params.area=e.area[e.areaIndex].val,e.params.type=e.type[e.typeIndex].val,e.params.initial=e.initial[e.initialIndex].val,c()}),w(()=>{p(e.params)}),{...x(e),selectType:b,getArtist:p,loadMore:f}}},V={class:"artist"},z={class:"artist-container"},F={class:"artist-main"},j={class:"list-container","infinite-scroll-disabled":"busy","infinite-scroll-distance":"100"},q={class:"aside-box"},G={class:"aside-menu"},J={class:"filter"},Q={class:"filter-item"},R=["onClick"],Z={class:"filter-item"},H=["onClick"],K={class:"filter-item"},O=["onClick"];function P(l,m,e,c,b,p){const f=g,i=I,t=M,C=D;return s(),n("div",V,[o("div",z,[o("div",F,[A((s(),n("div",j,[(s(!0),n(d,null,_(l.list,r=>(s(),y(f,{item:r},null,8,["item"]))),256)),l.isLoading?(s(),y(i,{key:0})):B("",!0)])),[[C,c.loadMore]])]),o("div",q,[S(t,{offset:140},{default:T(()=>[o("div",G,[o("div",J,[o("div",Q,[(s(!0),n(d,null,_(l.initial,(r,a)=>(s(),n("span",{key:a,class:v(a===l.initialIndex?"active":""),onClick:h=>c.selectType("initial",a)},u(r.label),11,R))),128))]),o("div",Z,[(s(!0),n(d,null,_(l.area,(r,a)=>(s(),n("span",{key:a,class:v(a===l.areaIndex?"active":""),onClick:h=>c.selectType("area",a)},u(r.label),11,H))),128))]),o("div",K,[(s(!0),n(d,null,_(l.type,(r,a)=>(s(),n("span",{key:a,class:v(a===l.typeIndex?"active":""),onClick:h=>c.selectType("type",a)},u(r.label),11,O))),128))])])])]),_:1})])])])}const ae=k(N,[["render",P],["__scopeId","data-v-babc86ae"]]);export{ae as default};
